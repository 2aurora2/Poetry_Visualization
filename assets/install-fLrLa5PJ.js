import{c9 as e,aS as t,_ as n,G as o,e as i,aM as r,bo as a,aK as s,M as l,ah as u,bV as c,b3 as d,ar as p,ai as g,as as h,h as f,b0 as v,a$ as m,ca as y,Q as x,aA as _,a0 as b,cb as M,t as C,j as S,E as w,aI as I,cc as A,cd as T,ce as O,a_ as R,q as k,cf as P,cg as D,ch as L,ak as V,ci as z,b4 as B,b5 as G,$ as N,cj as E,a2 as W,ck as Z,cl as H,Z as F,cm as j,cn as U,co as Y,cp as X,a3 as q,aB as K,aO as $,V as Q,az as J,cq as ee,cr as te,cs as ne,u as oe,ct as ie,ag as re,U as ae,aR as se,aQ as le,b7 as ue,aF as ce,c as de,a4 as pe,T as ge,cu as he,aY as fe,aV as ve,br as me,cv as ye,a8 as xe}from"./vintage-C7obykgs.js";var _e="\0_ec_interaction_mutex";function be(e,t){return!!Me(e)[t]}function Me(e){return e[_e]||(e[_e]={})}e({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},t);var Ce={axisPointer:1,tooltip:1,brush:1};function Se(e,t,n){var o=t.getComponentByElement(e.topTarget),i=o&&o.coordinateSystem;return o&&o!==n&&!Ce.hasOwnProperty(o.mainType)&&i&&i.model!==n}function we(e,t,n,o,i,r){e=e||0;var a=n[1]-n[0];if(null!=i&&(i=Ae(i,[0,a])),null!=r&&(r=Math.max(r,null!=i?i:0)),"all"===o){var s=Math.abs(t[1]-t[0]);s=Ae(s,[0,a]),i=r=Ae(s,[i,r]),o=0}t[0]=Ae(t[0],n),t[1]=Ae(t[1],n);var l=Ie(t,o);t[o]+=e;var u,c=i||0,d=n.slice();return l.sign<0?d[0]+=c:d[1]-=c,t[o]=Ae(t[o],d),u=Ie(t,o),null!=i&&(u.sign!==l.sign||u.span<i)&&(t[1-o]=t[o]+l.sign*i),u=Ie(t,o),null!=r&&u.span>r&&(t[1-o]=t[o]+u.sign*r),t}function Ie(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Ae(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var Te=!0,Oe=Math.min,Re=Math.max,ke=Math.pow,Pe="globalPan",De={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Le={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ve={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},ze=0,Be=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new o,n._uid="brushController_"+ze++,i(ct,(function(e,t){this._handlers[t]=r(e,this)}),n),n}return n(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){Me(e)[t]=n}(t,Pe,this._uid),i(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=a(s(Ve),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var o=Me(e);o[t]===n&&(o[t]=null)}(e,Pe,this._uid),i(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};i(e,(function(e){t[e.panelId]=s(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=l(e,(function(e){return a(s(Ve),e,!0)}));var t=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new u(t,e,(function(e,t){return r(e.__brushOption,t)}),r).add(c).update(c).remove((function(e){t[e]!==i&&o.group.remove(t[e])})).execute(),this;function r(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function c(r,a){var s=e[r];if(null!=a&&t[a]===i)n[r]=t[a];else{var l=n[r]=null!=a?(t[a].__brushOption=s,t[a]):Ne(o,Ge(o,s));Ze(o,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),Ue(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(c);function Ge(e,t){var n=pt[t.brushType].createCover(e,t);return n.__brushOption=t,We(n,t),e.group.add(n),n}function Ne(e,t){var n=He(t);return n.endCreating&&(n.endCreating(e,t),We(t,t.__brushOption)),t}function Ee(e,t){var n=t.__brushOption;He(t).updateCoverShape(e,t,n.range,n)}function We(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function Ze(e,t){He(t).updateCommon(e,t),Ee(e,t)}function He(e){return pt[e.__brushOption.brushType]}function Fe(e,t,n){var o,r=e._panels;if(!r)return Te;var a=e._transform;return i(r,(function(e){e.isTargetByCursor(t,n,a)&&(o=e)})),o}function je(e,t){var n=e._panels;if(!n)return Te;var o=t.__brushOption.panelId;return null!=o?n[o]:Te}function Ue(e){var t=e._covers,n=t.length;return i(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function Ye(e,t){var n=l(e._covers,(function(e){var t=e.__brushOption,n=s(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Xe(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function qe(e,t,n,r){var a=new o;return a.add(new h({name:"main",style:Je(n),silent:!0,draggable:!0,cursor:"move",drift:g(nt,e,t,a,["n","s","w","e"]),ondragend:g(Ye,t,{isEnd:!0})})),i(r,(function(n){a.add(new h({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:g(nt,e,t,a,n),ondragend:g(Ye,t,{isEnd:!0})}))})),a}function Ke(e,t,n,o){var i=o.brushStyle.lineWidth||0,r=Re(i,6),a=n[0][0],s=n[1][0],l=a-i/2,u=s-i/2,c=n[0][1],d=n[1][1],p=c-r+i/2,g=d-r+i/2,h=c-a,f=d-s,v=h+i,m=f+i;Qe(e,t,"main",a,s,h,f),o.transformable&&(Qe(e,t,"w",l,u,r,m),Qe(e,t,"e",p,u,r,m),Qe(e,t,"n",l,u,v,r),Qe(e,t,"s",l,g,v,r),Qe(e,t,"nw",l,u,r,r),Qe(e,t,"ne",p,u,r,r),Qe(e,t,"sw",l,g,r,r),Qe(e,t,"se",p,g,r,r))}function $e(e,t){var n=t.__brushOption,o=n.transformable,r=t.childAt(0);r.useStyle(Je(n)),r.attr({silent:!o,cursor:o?"move":"default"}),i([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),r=1===n.length?tt(e,n[0]):function(e,t){var n=[tt(e,t[0]),tt(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?Le[r]+"-resize":null})}))}function Qe(e,t,n,o,i,r,a){var s,l,u,c,d,p=t.childOfName(n);p&&p.setShape((s=rt(e,t,[[o,i],[o+r,i+a]]),l=Oe(s[0][0],s[1][0]),u=Oe(s[0][1],s[1][1]),c=Re(s[0][0],s[1][0]),d=Re(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:d-u}))}function Je(e){return f({strokeNoScale:!0},e.brushStyle)}function et(e,t,n,o){var i=[Oe(e,n),Oe(t,o)],r=[Re(e,n),Re(t,o)];return[[i[0],r[0]],[i[1],r[1]]]}function tt(e,t){var n=v({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return m(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function nt(e,t,n,o,r,a){var s=n.__brushOption,l=e.toRectRange(s.range),u=it(t,r,a);i(o,(function(e){var t=De[e];l[t[0]][t[1]]+=u[t[0]]})),s.range=e.fromRectRange(et(l[0][0],l[1][0],l[0][1],l[1][1])),Ze(t,n),Ye(t,{isEnd:!1})}function ot(e,t,n,o){var r=t.__brushOption.range,a=it(e,n,o);i(r,(function(e){e[0]+=a[0],e[1]+=a[1]})),Ze(e,t),Ye(e,{isEnd:!1})}function it(e,t,n){var o=e.group,i=o.transformCoordToLocal(t,n),r=o.transformCoordToLocal(0,0);return[i[0]-r[0],i[1]-r[1]]}function rt(e,t,n){var o=je(e,t);return o&&o!==Te?o.clipPath(n,e._transform):s(n)}function at(e){var t=e.event;t.preventDefault&&t.preventDefault()}function st(e,t,n){return e.childOfName("main").contain(t,n)}function lt(e,t,n,o){var i,r=e._creatingCover,a=e._creatingPanel,l=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],i=n[0]-o[0],r=n[1]-o[1];return ke(i*i+r*r,.5)>6}(e)||r){if(a&&!r){"single"===l.brushMode&&Ue(e);var u=s(l);u.brushType=ut(u.brushType,a),u.panelId=a===Te?null:a.panelId,r=e._creatingCover=Ge(e,u),e._covers.push(r)}if(r){var c=pt[ut(e._brushType,a)];r.__brushOption.range=c.getCreatingRange(rt(e,r,e._track)),o&&(Ne(e,r),c.updateCommon(e,r)),Ee(e,r),i={isEnd:o}}}else o&&"single"===l.brushMode&&l.removeOnClick&&Fe(e,t,n)&&Ue(e)&&(i={isEnd:o,removeOnClick:!0});return i}function ut(e,t){return"auto"===e?t.defaultBrushType:e}var ct={mousedown:function(e){if(this._dragging)dt(this,e);else if(!e.target||!e.target.draggable){at(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Fe(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,i=e._covers,r=Fe(e,t,n);if(!e._dragging)for(var a=0;a<i.length;a++){var s=i[a].__brushOption;if(r&&(r===Te||s.panelId===r.panelId)&&pt[s.brushType].contain(i[a],n[0],n[1]))return}r&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){at(e);var i=lt(this,e,o,!1);i&&Ye(this,i)}},mouseup:function(e){dt(this,e)}};function dt(e,t){if(e._dragging){at(t);var n=t.offsetX,o=t.offsetY,i=e.group.transformCoordToLocal(n,o),r=lt(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,r&&Ye(e,r)}}var pt={lineX:gt(0),lineY:gt(1),rect:{createCover:function(e,t){function n(e){return e}return qe({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=Xe(e);return et(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){Ke(e,t,n,o)},updateCommon:$e,contain:st},polygon:{createCover:function(e,t){var n=new o;return n.add(new d({name:"main",style:Je(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new p({name:"main",draggable:!0,drift:g(ot,e,t),ondragend:g(Ye,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:rt(e,t,n)})},updateCommon:$e,contain:st}};function gt(e){return{createCover:function(t,n){return qe({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=Xe(t);return[Oe(n[0][e],n[1][e]),Re(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,i){var r,a=je(t,n);if(a!==Te&&a.getLinearBrushOtherExtent)r=a.getLinearBrushOtherExtent(e);else{var s=t._zr;r=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[o,r];e&&l.reverse(),Ke(t,n,l,i)},updateCommon:$e,contain:st}}function ht(e){return e=mt(e),function(t){return y(t,e)}}function ft(e,t){return e=mt(e),function(n){var o=null!=t?t:n,i=o?e.width:e.height,r=o?e.x:e.y;return[r,r+(i||0)]}}function vt(e,t,n){var o=mt(e);return function(e,i){return o.contain(i[0],i[1])&&!Se(e,t,n)}}function mt(e){return x.create(e)}var yt=["x","y","radius","angle","single"],xt=["cartesian2d","polar","singleAxis"];function _t(e){return e+"Axis"}function bt(e,t){var n,o=_(),i=[],r=_();e.eachComponent({mainType:"dataZoom",query:t},(function(e){r.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",a)}while(n);function a(e){!r.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=o.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){r.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return i}function Mt(e){var t=e.ecModel,n={infoList:[],infoMap:_()};return e.eachTargetAxis((function(e,o){var i=t.getComponent(_t(e),o);if(i){var r=i.getCoordSysModel();if(r){var a=r.uid,s=n.infoMap.get(a);s||(s={model:r,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(i)}}})),n}var Ct=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),St=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return n(t,e),t.prototype.init=function(e,t,n){var o=wt(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},t.prototype.mergeOption=function(e){var t=wt(e);a(this.option,e,!0),a(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;i([["start","startValue"],["end","endValue"]],(function(e,o){"value"===this._rangePropMode[o]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=_();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return i(yt,(function(n){var o=this.getReferringComponents(_t(n),M);if(o.specified){t=!0;var r=new Ct;i(o.models,(function(e){r.add(e.componentIndex)})),e.set(n,r)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,o=!0;if(o){var r="vertical"===t?"y":"x";a(n.findComponents({mainType:r+"Axis"}),r)}o&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function a(t,n){var r=t[0];if(r){var a=new Ct;if(a.add(r.componentIndex),e.set(n,a),o=!1,"x"===n||"y"===n){var s=r.getReferringComponents("grid",C).models[0];s&&i(t,(function(e){r.componentIndex!==e.componentIndex&&s===e.getReferringComponents("grid",C).models[0]&&a.add(e.componentIndex)}))}}}o&&i(yt,(function(t){if(o){var i=n.findComponents({mainType:_t(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var r=new Ct;r.add(i[0].componentIndex),e.set(t,r),o=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");i([["start","startValue"],["end","endValue"]],(function(o,i){var r=null!=e[o[0]],a=null!=e[o[1]];r&&!a?t[i]="percent":!r&&a?t[i]="value":n?t[i]=n[i]:r&&(t[i]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(_t(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,o){i(n.indexList,(function(n){e.call(t,o,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(_t(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;i([["start","startValue"],["end","endValue"]],(function(o){null==e[o[0]]&&null==e[o[1]]||(t[o[0]]=n[o[0]]=e[o[0]],t[o[1]]=n[o[1]]=e[o[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;i(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],r=this._targetAxisInfoMap.get(i),a=0;a<r.indexList.length;a++){var s=this.getAxisProxy(i,r.indexList[a]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(S);function wt(e){var t={};return i(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var It=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.select",t}(St),At=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(w),Tt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.select",t}(At),Ot=i,Rt=R,kt=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return b(xt,t)>=0}(t)){var n=_t(this._dimName),o=t.getReferringComponents(n,C).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return s(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[],s=[];Ot(["start","end"],(function(l,u){var c=e[l],d=e[l+"Value"];"percent"===i[u]?(null==c&&(c=r[u]),d=o.parse(I(c,r,n))):(t=!0,d=null==d?n[u]:o.parse(d),c=I(d,n,r)),s[u]=null==d||isNaN(d)?n[u]:d,a[u]=null==c||isNaN(c)?r[u]:c})),Rt(s),Rt(a);var l=this._minMaxSpan;function u(e,t,n,i,r){var a=r?"Span":"ValueSpan";we(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=I(e[s],n,i,!0),r&&(t[s]=o.parse(t[s]))}return t?u(s,a,n,r,!1):u(a,s,r,n,!0),{valueWindow:s,percentWindow:a}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];Ot(n,(function(e){T(o,e.getData(),t)}));var i=e.getAxisModel(),r=O(i.axis.scale,i,o).calculate();return[r.min,r.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=e.get("filterMode"),r=this._valueWindow;"none"!==i&&Ot(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var a=t.getStore(),s=l(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<o.length;l++){var u=a.get(s[l],e),c=!isNaN(u),d=u<r[0],p=u>r[1];if(c&&!d&&!p)return!0;c&&(i=!0),d&&(t=!0),p&&(n=!0)}return i&&t&&n}))}else Ot(o,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=r[0]&&e<=r[1]}(e)?e:NaN})));else{var o={};o[n]=r,t.selectRange(o)}}));Ot(o,(function(e){t.setApproximateExtent(r,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;Ot(["min","max"],(function(o){var i=t.get(o+"Span"),r=t.get(o+"ValueSpan");null!=r&&(r=this.getAxisModel().axis.scale.parse(r)),null!=r?i=I(n[0]+r,n,[0,100],!0):null!=i&&(r=I(i,[0,100],n,!0)-n[0]),e[o+"Span"]=i,e[o+"ValueSpan"]=r}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=A(n,[0,500]);o=Math.min(o,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},e}();var Pt={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,i){var r=e.getComponent(_t(o),i);t(o,i,r,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var n=[];t((function(t,o,i,r){i.__dzAxisProxy||(i.__dzAxisProxy=new kt(t,o,r,e),n.push(i.__dzAxisProxy))}));var o=_();return i(n,(function(e){i(e.getTargetSeriesModels(),(function(e){o.set(e.uid,e)}))})),o},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}};var Dt=!1;function Lt(e){Dt||(Dt=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,Pt),function(e){e.registerAction("dataZoom",(function(e,t){var n=bt(t,e);i(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function Vt(e){e.registerComponentModel(It),e.registerComponentView(Tt),Lt(e)}var zt=function(){return function(){}}(),Bt={};function Gt(e,t){Bt[e]=t}function Nt(e){return Bt[e]}var Et=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;i(this.option.feature,(function(e,n){var o=Nt(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),a(e,o.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(S);function Wt(e,t){var n=L(t.get("padding")),o=t.getItemStyle(["color","opacity"]);return o.fill=t.get("backgroundColor"),e=new h({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:o,silent:!0,z2:-1})}var Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(e,t,n,o){var a=this.group;if(a.removeAll(),e.get("show")){var s=+e.get("itemSize"),l="vertical"===e.get("orient"),c=e.get("feature")||{},d=this._features||(this._features={}),p=[];i(c,(function(e,t){p.push(t)})),new u(this._featureNames||[],p).add(h).update(h).remove(g(h,null)).execute(),this._featureNames=p,function(e,t,n){var o=t.getBoxLayoutParams(),i=t.get("padding"),r={width:n.getWidth(),height:n.getHeight()},a=k(o,r,i);P(t.get("orient"),e,t.get("itemGap"),a.width,a.height),D(e,o,r,i)}(a,e,n),a.add(Wt(a.getBoundingRect(),e)),l||a.eachChild((function(e){var t=e.__title,o=e.ensureState("emphasis"),i=o.textConfig||(o.textConfig={}),r=e.getTextContent(),l=r&&r.ensureState("emphasis");if(l&&!F(l)&&t){var u=l.style||(l.style={}),c=j(t,W.makeFont(u)),d=e.x+a.x,p=!1;e.y+a.y+s+c.height>n.getHeight()&&(i.position="top",p=!0);var g=p?-5-c.height:s+10;d+c.width/2>n.getWidth()?(i.position=["100%",g],u.align="right"):d-c.width/2<0&&(i.position=[0,g],u.align="left")}}))}function h(u,g){var h,f=p[u],v=p[g],m=c[f],y=new V(m,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===f&&(m.title=o.newTitle),f&&!v){if(function(e){return 0===e.indexOf("my")}(f))h={onclick:y.option.onclick,featureName:f};else{var x=Nt(f);if(!x)return;h=new x}d[f]=h}else if(!(h=d[v]))return;h.uid=z("toolbox-feature"),h.model=y,h.ecModel=t,h.api=n;var _=h instanceof zt;f||!v?!y.get("show")||_&&h.unusable?_&&h.remove&&h.remove(t,n):(!function(o,u,c){var d,p,g=o.getModel("iconStyle"),h=o.getModel(["emphasis","iconStyle"]),f=u instanceof zt&&u.getIcons?u.getIcons():o.get("icon"),v=o.get("title")||{};N(f)?(d={})[c]=f:d=f;N(v)?(p={})[c]=v:p=v;var m=o.iconPaths={};i(d,(function(i,c){var d=E(i,{},{x:-s/2,y:-s/2,width:s,height:s});d.setStyle(g.getItemStyle()),d.ensureState("emphasis").style=h.getItemStyle();var f=new W({style:{text:p[c],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:Z({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},t)},ignore:!0});d.setTextContent(f),H({el:d,componentModel:e,itemName:c,formatterParamsExtra:{title:p[c]}}),d.__title=p[c],d.on("mouseover",(function(){var t=h.getItemStyle(),o=l?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";f.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),d.setTextConfig({position:h.get("textPosition")||o}),f.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==o.get(["iconStatus",c])&&n.leaveEmphasis(this),f.hide()})),("emphasis"===o.get(["iconStatus",c])?B:G)(d),a.add(d),d.on("click",r(u.onclick,u,t,n,c)),m[c]=d}))}(y,h,f),y.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?B:G)(o[e])},h instanceof zt&&h.render&&h.render(y,t,n,o)):_&&h.dispose&&h.dispose(t,n)}},t.prototype.updateView=function(e,t,n,o){i(this._features,(function(e){e instanceof zt&&e.updateView&&e.updateView(e.model,t,n,o)}))},t.prototype.remove=function(e,t){i(this._features,(function(n){n instanceof zt&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){i(this._features,(function(n){n instanceof zt&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(w);var Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),r=i?"svg":n.get("type",!0)||"png",a=t.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=U.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||i){var l=a.split(","),u=l[0].indexOf("base64")>-1,c=i?decodeURIComponent(l[1]):l[1];u&&(c=window.atob(c));var d=o+"."+r;if(window.navigator.msSaveOrOpenBlob){for(var p=c.length,g=new Uint8Array(p);p--;)g[p]=c.charCodeAt(p);var h=new Blob([g]);window.navigator.msSaveOrOpenBlob(h,d)}else{var f=document.createElement("iframe");document.body.appendChild(f);var v=f.contentWindow,m=v.document;m.open("image/svg+xml","replace"),m.write(c),m.close(),v.focus(),m.execCommand("SaveAs",!0,d),document.body.removeChild(f)}}else{var y=n.get("lang"),x='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=o}else{var b=document.createElement("a");b.download=o+"."+r,b.target="_blank",b.href=a;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(zt),Ft="__ec_magicType_stack__",jt=[["line","bar"],["stack"]],Ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return i(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var o=this.model,r=o.get(["seriesIndex",n]);if(Yt[n]){var s,l={series:[]};i(jt,(function(e){b(e,n)>=0&&i(e,(function(e){o.setIconStatus(e,"normal")}))})),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(e){var t=e.subType,i=e.id,r=Yt[n](t,i,e,o);r&&(f(r,e.option),l.series.push(r));var a=e.coordinateSystem;if(a&&"cartesian2d"===a.type&&("line"===n||"bar"===n)){var s=a.getAxesByScale("ordinal")[0];if(s){var u=s.dim+"Axis",c=e.getReferringComponents(u,C).models[0].componentIndex;l[u]=l[u]||[];for(var d=0;d<=c;d++)l[u][c]=l[u][c]||{};l[u][c].boundaryGap="bar"===n}}}));var u=n;"stack"===n&&(s=a({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(u="tiled")),t.dispatchAction({type:"changeMagicType",currentType:u,newOption:l,newTitle:s,featureName:"magicType"})}},t}(zt),Yt={line:function(e,t,n,o){if("bar"===e)return a({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return a({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var i=n.get("stack")===Ft;if("line"===e||"bar"===e)return o.setIconStatus("stack",i?"normal":"emphasis"),a({id:t,stack:i?"":Ft},o.get(["option","stack"])||{},!0)}};e({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var Xt=new Array(60).join("-"),qt="\t";function Kt(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var $t=new RegExp("[\t]+","g");function Qt(e,t){var n=e.split(new RegExp("\n*"+Xt+"\n*","g")),o={series:[]};return i(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(qt)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=Kt(t.shift()).split($t),o=[],i=l(n,(function(e){return{name:e,data:[]}})),r=0;r<t.length;r++){var a=Kt(t[r]).split($t);o.push(a.shift());for(var s=0;s<a.length;s++)i[s]&&(i[s].data[r]=a[s])}return{series:i,categories:o}}(e),r=t[n],a=r.axisDim+"Axis";r&&(o[a]=o[a]||[],o[a][r.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else{i=function(e){for(var t=e.split(/\n+/g),n=Kt(t.shift()),o=[],i=0;i<t.length;i++){var r=Kt(t[i]);if(r){var a=r.split($t),s="",l=void 0,u=!1;isNaN(a[0])?(u=!0,s=a[0],a=a.slice(1),o[i]={name:s,value:[]},l=o[i].value):l=o[i]=[];for(var c=0;c<a.length;c++)l.push(+a[c]);1===l.length&&(u?o[i].value=l[0]:o[i]=l[0])}}return{name:n,data:o}}(e);o.series.push(i)}})),o}var Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),s=o.get("lang")||[];a.innerHTML=s[0]||o.get("title"),a.style.cssText="margin:10px 20px",a.style.color=o.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=o.get("optionToContent"),p=o.get("contentToOption"),g=function(e){var t,n,o,r=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var r=i.getBaseAxis();if("category"===r.type){var a=r.dim+"_"+r.index;t[a]||(t[a]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},o.push({axisDim:r.dim,axisIndex:r.index})),t[a].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:K([(n=r.seriesGroupByCategoryAxis,o=[],i(n,(function(e,t){var n=e.categoryAxis,r=e.valueAxis.dim,a=[" "].concat(l(e.series,(function(e){return e.name}))),s=[n.model.getCategories()];i(e.series,(function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(r),(function(e){return e})))}));for(var u=[a.join(qt)],c=0;c<s[0].length;c++){for(var d=[],p=0;p<s.length;p++)d.push(s[p][c]);u.push(d.join(qt))}o.push(u.join("\n"))})),o.join("\n\n"+Xt+"\n\n")),(t=r.other,l(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],r=t.getName(i),a=0;a<e-1;a++)o[a]=arguments[a];n.push((r?r+qt:"")+o.join(qt))})),n.join("\n")})).join("\n\n"+Xt+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+Xt+"\n\n"),meta:r.meta}}(e);if(F(d)){var h=d(t.getOption());N(h)?u.innerHTML=h:Y(h)&&u.appendChild(h)}else{c.readOnly=o.get("readOnly");var f=c.style;f.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",f.color=o.get("textColor"),f.borderColor=o.get("textareaBorderColor"),f.backgroundColor=o.get("textareaColor"),c.value=g.value,u.appendChild(c)}var v=g.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),_=document.createElement("div");y+=";background-color:"+o.get("buttonColor"),y+=";color:"+o.get("buttonTextColor");var b=this;function M(){n.removeChild(r),b._dom=null}X(x,"click",M),X(_,"click",(function(){if(null==p&&null!=d||null!=p&&null==d)M();else{var e;try{e=F(p)?p(u,t.getOption()):Qt(c.value,v)}catch(n){throw M(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),M()}})),x.innerHTML=s[1],_.innerHTML=s[2],_.style.cssText=x.style.cssText=y,!o.get("readOnly")&&m.appendChild(_),m.appendChild(x),r.appendChild(a),r.appendChild(u),r.appendChild(m),u.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(zt);function en(e,t){return l(e,(function(e,n){var o=t&&t[n];if($(o)&&!Q(o)){$(e)&&!Q(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=f(e,o),i&&delete e.name,e}return e}))}e({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];i(e.newOption.series,(function(e){var o=t.getSeriesByName(e.name)[0];if(o){var i=o.get("data");n.push({name:e.name,data:en(e.data,i)})}else n.push(q({type:"scatter"},e))})),t.mergeOption(f({series:n},e.newOption))}));var tn=i,nn=J();function on(e){var t=nn(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){!function(e){nn(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(zt);e({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var an=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],sn=function(){function e(e,t,n){var o=this;this._targetInfoList=[];var r=un(t,e);i(cn,(function(e,t){(!n||!n.include||b(n.include,t)>=0)&&e(r,o._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=gn[e.brushType](0,n,t);e.__rangeOffset={offset:fn[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){i(e,(function(e){var o=this.findTargetInfo(e,t);o&&!0!==o&&i(o.coordSyses,(function(o){var i=gn[e.brushType](1,o,e.range,!0);n(e,i.values,o,t)}))}),this)},e.prototype.setInputRanges=function(e,t){i(e,(function(e){var n,o,i,r,a,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=gn[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?fn[e.brushType](l.values,u.offset,(n=l.xyMinMax,o=u.xyMinMax,i=mn(n),r=mn(o),a=[i[0]/r[0],i[1]/r[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return l(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:ht(o),isTargetByCursor:vt(o,e,n.coordSysModel),getLinearBrushOtherExtent:ft(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&b(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=un(t,e),i=0;i<n.length;i++){var r=n[i],a=e.panelId;if(a){if(r.panelId===a)return r}else for(var s=0;s<dn.length;s++)if(dn[s](o,r))return r}return!0},e}();function ln(e){return e[0]>e[1]&&e.reverse(),e}function un(e,t){return ee(e,t,{includeMainTypes:an})}var cn={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,r=e.gridModels,a=_(),s={},l={};(n||o||r)&&(i(n,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),i(o,(function(e){var t=e.axis.grid.model;a.set(t.id,t),l[t.id]=!0})),i(r,(function(e){a.set(e.id,e),s[e.id]=!0,l[e.id]=!0})),a.each((function(e){var r=e.coordinateSystem,a=[];i(r.getCartesians(),(function(e,t){(b(n,e.getAxis("x").model)>=0||b(o,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:pn.grid,xAxisDeclared:s[e.id],yAxisDeclared:l[e.id]})})))},geo:function(e,t){i(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:pn.geo})}))}},dn=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],pn={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(m(e)),t}},gn={lineX:g(hn,0),lineY:g(hn,1),rect:function(e,t,n,o){var i=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),r=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),a=[ln([i[0],r[0]]),ln([i[1],r[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:l(n,(function(n){var r=e?t.pointToData(n,o):t.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r})),xyMinMax:i}}};function hn(e,t,n,o){var i=n.getAxis(["x","y"][e]),r=ln(l([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(o[e]),!0):i.toGlobalCoord(i.dataToCoord(o[e]))}))),a=[];return a[e]=r,a[1-e]=[NaN,NaN],{values:r,xyMinMax:a}}var fn={lineX:g(vn,0),lineY:g(vn,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return l(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function vn(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function mn(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var yn=i,xn=ne("toolbox-dataZoom_"),_n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new Be(n.getZr()),this._brushController.on("brush",r(this._onBrush,this)).mount()),function(e,t,n,o,i){var r=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(r="dataZoomSelect"===o.key&&o.dataZoomSelectActive);n._isZoomActive=r,e.setIconStatus("zoom",r?"emphasis":"normal");var a=new sn(Mn(e),t,{include:["grid"]}),s=a.makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!r||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(e,t){e.setIconStatus("back",function(e){return on(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){bn[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new sn(Mn(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=on(e);tn(t,(function(t,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var r=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(r){var a=r.getPercentRange();n[0][o]={dataZoomId:o,start:a[0],end:a[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function i(e,t,i){var r=t.getAxis(e),a=r.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,a,o),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=we(0,i.slice(),r.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];yn(e,(function(e,n){t.push(s(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(zt),bn={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=on(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return tn(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){o[n]=e;break}})),o}(this.ecModel))}};function Mn(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function Cn(e){e.registerComponentModel(Et),e.registerComponentView(Zt),Gt("saveAsImage",Ht),Gt("magicType",Ut),Gt("dataView",Jt),Gt("dataZoom",_n),Gt("restore",rn),oe(Vt)}te("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),i=[],r=Mn(o),a=ee(e,r);return yn(a.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),yn(a.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var r=e.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:xn+t+r};a[n]=r,i.push(a)}}));var Sn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),Q(t)&&i(t,(function(e,o){N(e)&&(e={type:e}),t[o]=a(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var o=e[n].get("name");if(this.isSelected(o)){this.select(o),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(o){var i,r=o.name;if(n.push(r),o.legendVisualProvider){var a=o.legendVisualProvider.getAllNames();e.isSeriesFiltered(o)||(n=n.concat(a)),a.length?t=t.concat(a):i=!0}else i=!0;i&&ie(o)&&t.push(o.name)})),this._availableNames=n;var o=this.get("data")||t,i=_(),r=l(o,(function(e){return(N(e)||re(e))&&(e={name:e}),i.get(e.name)?null:(i.set(e.name,!0),new V(e,this,this.ecModel))}),this);this._data=K(r,(function(e){return!!e}))},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;i(n,(function(e){t[e.get("name")]=!1}))}t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;i(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;i(e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&b(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(S),wn=g,In=i,An=o,Tn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return n(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new An),this.group.add(this._selectorGroup=new An),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),r=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===r?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===r?"end":"start"),this.renderInner(i,e,t,n,a,r,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=k(l,u,c),p=this.layoutInner(e,i,d,o,a,s),g=k(f({width:p.width,height:p.height},l),u,c);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Wt(p,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,o,i,r,a){var s=this.getContentGroup(),l=_(),u=t.get("selectedMode"),c=[];n.eachRawSeries((function(e){!e.get("legendHoverLink")&&c.push(e.id)})),In(t.getData(),(function(i,r){var a=i.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var d=new An;return d.newline=!0,void s.add(d)}var p=n.getSeriesByName(a)[0];if(!l.get(a))if(p){var g=p.getData(),h=g.getVisual("legendLineStyle")||{},f=g.getVisual("legendIcon"),v=g.getVisual("style"),m=this._createItem(p,a,r,i,t,e,h,v,f,u,o);m.on("click",wn(On,a,null,o,c)).on("mouseover",wn(kn,p.name,null,o,c)).on("mouseout",wn(Pn,p.name,null,o,c)),n.ssr&&m.eachChild((function(e){var t=ae(e);t.seriesIndex=p.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),l.set(a,!0)}else n.eachRawSeries((function(s){if(!l.get(a)&&s.legendVisualProvider){var d=s.legendVisualProvider;if(!d.containName(a))return;var p=d.indexOfName(a),g=d.getItemVisual(p,"style"),h=d.getItemVisual(p,"legendIcon"),f=se(g.fill);f&&0===f[3]&&(f[3]=.2,g=q(q({},g),{fill:le(f,"rgba")}));var v=this._createItem(s,a,r,i,t,e,{},g,h,u,o);v.on("click",wn(On,null,a,o,c)).on("mouseover",wn(kn,null,a,o,c)).on("mouseout",wn(Pn,null,a,o,c)),n.ssr&&v.eachChild((function(e){var t=ae(e);t.seriesIndex=s.seriesIndex,t.dataIndex=r,t.ssrType="legend"})),l.set(a,!0)}}),this)}),this),i&&this._createSelector(i,t,o,r,a)},t.prototype._createSelector=function(e,t,n,o,i){var r=this.getSelectorGroup();In(e,(function(e){var o=e.type,i=new W({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===o?"legendAllSelect":"legendInverseSelect",legendId:t.id})}});r.add(i);var a=t.getModel("selectorLabel"),s=t.getModel(["emphasis","selectorLabel"]);ue(i,{normal:a,emphasis:s},{defaultText:e.title}),ce(i)}))},t.prototype._createItem=function(e,t,n,o,i,r,a,s,l,u,c){var d=e.visualDrawType,p=i.get("itemWidth"),g=i.get("itemHeight"),f=i.isSelected(t),v=o.get("symbolRotate"),m=o.get("symbolKeepAspect"),y=o.get("icon"),x=function(e,t,n,o,i,r,a){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),In(e,(function(n,o){"inherit"===e[o]&&(e[o]=t[o])}))}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=0===e.lastIndexOf("empty",0)?"fill":"stroke",d=l.getShallow("decal");u.decal=d&&"inherit"!==d?pe(d,a):o.decal,"inherit"===u.fill&&(u.fill=o[i]);"inherit"===u.stroke&&(u.stroke=o[c]);"inherit"===u.opacity&&(u.opacity=("fill"===i?o:n).opacity);s(u,o);var p=t.getModel("lineStyle"),g=p.getLineStyle();if(s(g,n),"auto"===u.fill&&(u.fill=o.fill),"auto"===u.stroke&&(u.stroke=o.fill),"auto"===g.stroke&&(g.stroke=o.fill),!r){var h=t.get("inactiveBorderWidth"),f=u[c];u.lineWidth="auto"===h?o.lineWidth>0&&f?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),g.stroke=p.get("inactiveColor"),g.lineWidth=p.get("inactiveWidth")}return{itemStyle:u,lineStyle:g}}(l=y||l||"roundRect",o,a,s,d,f,c),_=new An,b=o.getModel("textStyle");if(!F(e.getLegendIcon)||y&&"inherit"!==y){var M="inherit"===y&&e.getData().getVisual("symbol")?"inherit"===v?e.getData().getVisual("symbolRotate"):v:0;_.add(function(e){var t=e.icon||"roundRect",n=ge(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:p,itemHeight:g,icon:l,iconRotate:M,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}))}else _.add(e.getLegendIcon({itemWidth:p,itemHeight:g,icon:l,iconRotate:v,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}));var C="left"===r?p+5:-5,S=r,w=i.get("formatter"),I=t;N(w)&&w?I=w.replace("{name}",null!=t?t:""):F(w)&&(I=w(t));var A=f?b.getTextColor():o.get("inactiveColor");_.add(new W({style:de(b,{text:I,x:C,y:g/2,fill:A,align:S,verticalAlign:"middle"},{inheritColor:A})}));var T=new h({shape:_.getBoundingRect(),style:{fill:"transparent"}}),O=o.getModel("tooltip");return O.get("show")&&H({el:T,componentModel:i,itemName:t,itemTooltipOption:O.option}),_.add(T),_.eachChild((function(e){e.silent=!0})),T.silent=!u,this.getContentGroup().add(_),ce(_),_.__legendDataIndex=n,_},t.prototype.layoutInner=function(e,t,n,o,i,r){var a=this.getContentGroup(),s=this.getSelectorGroup();P(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),i){P("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],p=e.get("selectorButtonGap",!0),g=e.getOrient().index,h=0===g?"width":"height",f=0===g?"height":"width",v=0===g?"y":"x";"end"===r?d[g]+=l[h]+p:u[g]+=c[h]+p,d[1-g]+=l[f]/2-c[f]/2,s.x=d[0],s.y=d[1],a.x=u[0],a.y=u[1];var m={x:0,y:0};return m[h]=l[h]+p+c[h],m[f]=Math.max(l[f],c[f]),m[v]=Math.min(0,c[v]+d[1-g]),m}return a.x=u[0],a.y=u[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(w);function On(e,t,n,o){Pn(e,t,n,o),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),kn(e,t,n,o)}function Rn(e){for(var t,n=e.getZr().storage.getDisplayList(),o=0,i=n.length;o<i&&!(t=n[o].states.emphasis);)o++;return t&&t.hoverLayer}function kn(e,t,n,o){Rn(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:o})}function Pn(e,t,n,o){Rn(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:o})}function Dn(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))}function Ln(e,t,n){var o="allSelect"===e||"inverseSelect"===e,r={},a=[];n.eachComponent({mainType:"legend",query:t},(function(n){o?n[e]():n[e](t.name),Vn(n,r),a.push(n.componentIndex)}));var s={};return n.eachComponent("legend",(function(e){i(r,(function(t,n){e[t?"select":"unSelect"](n)})),Vn(e,s)})),o?{selected:s,legendIndex:a}:{name:t.name,selected:s}}function Vn(e,t){var n=t||{};return i(e.getData(),(function(t){var o=t.get("name");if("\n"!==o&&""!==o){var i=e.isSelected(o);he(n,o)?n[o]=n[o]&&i:n[o]=i}})),n}function zn(e){e.registerComponentModel(Sn),e.registerComponentView(Tn),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Dn),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(e){e.registerAction("legendToggleSelect","legendselectchanged",g(Ln,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",g(Ln,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",g(Ln,"inverseSelect")),e.registerAction("legendSelect","legendselected",g(Ln,"select")),e.registerAction("legendUnSelect","legendunselected",g(Ln,"unSelect"))}(e)}var Bn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,o){var i=fe(t);e.prototype.init.call(this,t,n,o),Gn(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),Gn(this,this.option,t)},t.type="legend.scroll",t.defaultOption=ve(Sn.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Sn);function Gn(e,t,n){var o=[1,1];o[e.getOrient().index]=0,me(t,n,{type:"box",ignoreSize:!!o})}var Nn=o,En=["width","height"],Wn=["x","y"],Zn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Nn),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Nn)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,o,i,a,s,l){var u=this;e.prototype.renderInner.call(this,t,n,o,i,a,s,l);var c=this._controllerGroup,d=n.get("pageIconSize",!0),p=Q(d)?d:[d,d];h("pagePrev",0);var g=n.getModel("pageTextStyle");function h(e,t){var o=e+"DataIndex",a=E(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:r(u._pageGo,u,o,n,i)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});a.name=e,c.add(a)}c.add(new W({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),h("pageNext",1)},t.prototype.layoutInner=function(e,t,n,o,i,r){var a=this.getSelectorGroup(),l=e.getOrient().index,u=En[l],c=Wn[l],d=En[1-l],p=Wn[1-l];i&&P("horizontal",a,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),h=a.getBoundingRect(),f=[-h.x,-h.y],v=s(n);i&&(v[u]=n[u]-h[u]-g);var m=this._layoutContentAndController(e,o,v,l,u,d,p,c);if(i){if("end"===r)f[l]+=m[u]+g;else{var y=h[u]+g;f[l]-=y,m[c]-=y}m[u]+=h[u]+g,f[1-l]+=m[p]+m[d]/2-h[d]/2,m[d]=Math.max(m[d],h[d]),m[p]=Math.min(m[p],h[p]+f[1-l]),a.x=f[0],a.y=f[1],a.markRedraw()}return m},t.prototype._layoutContentAndController=function(e,t,n,o,i,r,a,s){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;P(e.get("orient"),l,e.get("itemGap"),o?n.width:null,o?null:n.height),P("horizontal",c,e.get("pageButtonItemGap",!0));var d=l.getBoundingRect(),p=c.getBoundingRect(),g=this._showController=d[i]>n[i],f=[-d.x,-d.y];t||(f[o]=l[s]);var v=[0,0],m=[-p.x,-p.y],y=ye(e.get("pageButtonGap",!0),e.get("itemGap",!0));g&&("end"===e.get("pageButtonPosition",!0)?m[o]+=n[i]-p[i]:v[o]+=p[i]+y);m[1-o]+=d[r]/2-p[r]/2,l.setPosition(f),u.setPosition(v),c.setPosition(m);var x={x:0,y:0};if(x[i]=g?n[i]:d[i],x[r]=Math.max(d[r],p[r]),x[a]=Math.min(0,p[a]+m[1-o]),u.__rectSize=n[i],g){var _={x:0,y:0};_[i]=Math.max(n[i]-p[i]-y,0),_[r]=x[r],u.setClipPath(new h({shape:_})),u.__rectSize=_[i]}else c.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var b=this._getPageInfo(e);return null!=b.pageIndex&&xe(l,{x:b.contentPosition[0],y:b.contentPosition[1]},g?e:null),this._updatePageInfoView(e,b),x},t.prototype._pageGo=function(e,t,n){var o=this._getPageInfo(t)[e];null!=o&&n.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;i(["pagePrev","pageNext"],(function(o){var i=null!=t[o+"DataIndex"],r=n.childOfName(o);r&&(r.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),r.cursor=i?"pointer":"default")}));var o=n.childOfName("pageText"),r=e.get("pageFormatter"),a=t.pageIndex,s=null!=a?a+1:0,l=t.pageCount;o&&r&&o.setStyle("text",N(r)?r.replace("{current}",null==s?"":s+"").replace("{total}",null==l?"":l+""):r({current:s,total:l}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),o=this._containerGroup.__rectSize,i=e.getOrient().index,r=En[i],a=Wn[i],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,d=c?1:0,p={contentPosition:[n.x,n.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return p;var g=y(u);p.contentPosition[i]=-g.s;for(var h=s+1,f=g,v=g,m=null;h<=c;++h)(!(m=y(l[h]))&&v.e>f.s+o||m&&!x(m,f.s))&&(f=v.i>f.i?v:m)&&(null==p.pageNextDataIndex&&(p.pageNextDataIndex=f.i),++p.pageCount),v=m;for(h=s-1,f=g,v=g,m=null;h>=-1;--h)(m=y(l[h]))&&x(v,m.s)||!(f.i<v.i)||(v=f,null==p.pagePrevDataIndex&&(p.pagePrevDataIndex=f.i),++p.pageCount,++p.pageIndex),f=m;return p;function y(e){if(e){var t=e.getBoundingRect(),n=t[a]+e[a];return{s:n,e:n+t[r],i:e.__legendDataIndex}}}function x(e,t){return e.e>=t&&e.s<=t+o}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(o,i){var r=o.__legendDataIndex;null==n&&null!=r&&(n=i),r===e&&(t=i)})),null!=t?t:n):0;var t,n},t.type="legend.scroll",t}(Tn);function Hn(e){oe(zn),e.registerComponentModel(Bn),e.registerComponentView(Zn),function(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))}))}(e)}function Fn(e){oe(zn),oe(Hn)}export{St as D,Fn as a,At as b,Mt as c,Lt as d,be as e,_t as g,Cn as i,Se as o,we as s};
