import{g as t,r as e,i as n,e as r,a as o,b as a,c as i,f as s,d as l,S as u,L as c,M as d,h as f,t as p,j as h,k as v,l as g,m as y,n as m,o as b,E as x,_ as w,p as I,q as _,w as S,u as T,s as A,v as M,x as C,y as j,z as D,A as E,B as L,C as P,D as R,F as k,G as O,H as N,I as z,J as B}from"./base-DMZi27Xj.js";import{r as V,o as F,e as $,d as G,C as H,w as U,u as W,D as q,n as K,E as Z,a as X,p as J,T as Y,G as Q,H as tt,I as et,y as nt,J as rt,K as ot,L as at,M as it,N as st,c as lt,g as ut,m as ct,j as dt,O as ft,k as pt,i as ht,l as vt,P as gt,F as yt,Q as mt,h as bt,R as xt,t as wt,S as It,U as _t,b as St}from"./index-CRdzRwT_.js";import{E as Tt,d as At}from"./install-Bvmo0ayk.js";import{P as Mt,A as Ct,L as jt}from"./cubism4.es-6u3oZLKc.js";import{ak as Dt,_ as Et,T as Lt,A as Pt,e as Rt,U as kt,H as Ot,L as Nt,du as zt,J as Bt,K as Vt,C as Ft,q as $t,s as Gt,u as Ht,F as Ut,E as Wt,am as qt,S as Kt,h as Zt,dv as Xt,dw as Jt,k as Yt,n as Qt,dx as te,X as ee,Y as ne,$ as re,cu as oe,f as ae,W as ie,bL as se,bJ as le,bK as ue,B as ce,aS as de,be as fe,P as pe,bm as he,bT as ve,z as ge,aX as ye,cL as me,b4 as be,dy as xe,ap as we,a1 as Ie,aT as _e,bB as Se,Z as Te,ai as Ae,au as Me,dz as Ce,bZ as je,bQ as De,ar as Ee,cj as Le,c3 as Pe,ay as Re,O as ke,dA as Oe,dB as Ne,Q as ze,dC as Be,bp as Ve,c8 as Fe,a0 as $e,c9 as Ge,N as He,y as Ue,dD as We,bN as qe,dE as Ke,c2 as Ze,dF as Xe,a7 as Je,a3 as Ye,ck as Qe,dG as tn,dH as en,aW as nn,aC as rn,dI as on,v as an,af as sn,g as ln,as as un,dJ as cn}from"./vintage-DAvJPmSG.js";import{r as dn,b as fn,a as pn,i as hn}from"./installSimple-B4QYPpG9.js";var vn=t(e,"WeakMap"),gn=Object.create,yn=function(){function t(){}return function(e){if(!n(e))return{};if(gn)return gn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var mn=Date.now;var bn,xn,wn,In=function(){try{var e=t(Object,"defineProperty");return e({},"",{}),e}catch(n){}}(),_n=In?function(t,e){return In(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:function(t){return t},Sn=(bn=_n,xn=0,wn=0,function(){var t=mn(),e=16-(t-wn);if(wn=t,e>0){if(++xn>=800)return arguments[0]}else xn=0;return bn.apply(void 0,arguments)});var Tn=/^(?:0|[1-9]\d*)$/;function An(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Tn.test(t))&&t>-1&&t%1==0&&t<e}function Mn(t,e,n){"__proto__"==e&&In?In(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Cn=Object.prototype.hasOwnProperty;function jn(t,e,n){var o=t[e];Cn.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||Mn(t,e,n)}function Dn(t,e,n,r){var o=!n;n||(n={});for(var a=-1,i=e.length;++a<i;){var s=e[a],l=void 0;void 0===l&&(l=t[s]),o?Mn(n,s,l):jn(n,s,l)}return n}var En=Math.max;function Ln(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Pn(t){return null!=t&&Ln(t.length)&&!o(t)}var Rn=Object.prototype;function kn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rn)}function On(t){return a(t)&&"[object Arguments]"==i(t)}var Nn=Object.prototype,zn=Nn.hasOwnProperty,Bn=Nn.propertyIsEnumerable,Vn=On(function(){return arguments}())?On:function(t){return a(t)&&zn.call(t,"callee")&&!Bn.call(t,"callee")};var Fn="object"==typeof exports&&exports&&!exports.nodeType&&exports,$n=Fn&&"object"==typeof module&&module&&!module.nodeType&&module,Gn=$n&&$n.exports===Fn?e.Buffer:void 0,Hn=(Gn?Gn.isBuffer:void 0)||function(){return!1},Un={};function Wn(t){return function(e){return t(e)}}Un["[object Float32Array]"]=Un["[object Float64Array]"]=Un["[object Int8Array]"]=Un["[object Int16Array]"]=Un["[object Int32Array]"]=Un["[object Uint8Array]"]=Un["[object Uint8ClampedArray]"]=Un["[object Uint16Array]"]=Un["[object Uint32Array]"]=!0,Un["[object Arguments]"]=Un["[object Array]"]=Un["[object ArrayBuffer]"]=Un["[object Boolean]"]=Un["[object DataView]"]=Un["[object Date]"]=Un["[object Error]"]=Un["[object Function]"]=Un["[object Map]"]=Un["[object Number]"]=Un["[object Object]"]=Un["[object RegExp]"]=Un["[object Set]"]=Un["[object String]"]=Un["[object WeakMap]"]=!1;var qn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Kn=qn&&"object"==typeof module&&module&&!module.nodeType&&module,Zn=Kn&&Kn.exports===qn&&s.process,Xn=function(){try{var t=Kn&&Kn.require&&Kn.require("util").types;return t||Zn&&Zn.binding&&Zn.binding("util")}catch(e){}}(),Jn=Xn&&Xn.isTypedArray,Yn=Jn?Wn(Jn):function(t){return a(t)&&Ln(t.length)&&!!Un[i(t)]},Qn=Object.prototype.hasOwnProperty;function tr(t,e){var n=l(t),r=!n&&Vn(t),o=!n&&!r&&Hn(t),a=!n&&!r&&!o&&Yn(t),i=n||r||o||a,s=i?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!Qn.call(t,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||An(c,u))||s.push(c);return s}function er(t,e){return function(n){return t(e(n))}}var nr=er(Object.keys,Object),rr=Object.prototype.hasOwnProperty;function or(t){return Pn(t)?tr(t):function(t){if(!kn(t))return nr(t);var e=[];for(var n in Object(t))rr.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var ar=Object.prototype.hasOwnProperty;function ir(t){if(!n(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=kn(t),r=[];for(var o in t)("constructor"!=o||!e&&ar.call(t,o))&&r.push(o);return r}function sr(t){return Pn(t)?tr(t,!0):ir(t)}function lr(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var ur=u?u.isConcatSpreadable:void 0;function cr(t){return l(t)||Vn(t)||!!(ur&&t&&t[ur])}function dr(t){return(null==t?0:t.length)?function(t,e,n,r,o){var a=-1,i=t.length;for(n||(n=cr),o||(o=[]);++a<i;){var s=t[a];n(s)?lr(o,s):o[o.length]=s}return o}(t):[]}var fr=er(Object.getPrototypeOf,Object),pr=Function.prototype,hr=Object.prototype,vr=pr.toString,gr=hr.hasOwnProperty,yr=vr.call(Object);function mr(t){var e=this.__data__=new c(t);this.size=e.size}mr.prototype.clear=function(){this.__data__=new c,this.size=0},mr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},mr.prototype.get=function(t){return this.__data__.get(t)},mr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof c){var r=n.__data__;if(!d||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new f(r)}return n.set(t,e),this.size=n.size,this};var br="object"==typeof exports&&exports&&!exports.nodeType&&exports,xr=br&&"object"==typeof module&&module&&!module.nodeType&&module,wr=xr&&xr.exports===br?e.Buffer:void 0,Ir=wr?wr.allocUnsafe:void 0;function _r(){return[]}var Sr=Object.prototype.propertyIsEnumerable,Tr=Object.getOwnPropertySymbols,Ar=Tr?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,a=[];++n<r;){var i=t[n];e(i,n,t)&&(a[o++]=i)}return a}(Tr(t),(function(e){return Sr.call(t,e)})))}:_r;var Mr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)lr(e,Ar(t)),t=fr(t);return e}:_r;function Cr(t,e,n){var r=e(t);return l(t)?r:lr(r,n(t))}function jr(t){return Cr(t,or,Ar)}function Dr(t){return Cr(t,sr,Mr)}var Er=t(e,"DataView"),Lr=t(e,"Promise"),Pr=t(e,"Set"),Rr="[object Map]",kr="[object Promise]",Or="[object Set]",Nr="[object WeakMap]",zr="[object DataView]",Br=p(Er),Vr=p(d),Fr=p(Lr),$r=p(Pr),Gr=p(vn),Hr=i;(Er&&Hr(new Er(new ArrayBuffer(1)))!=zr||d&&Hr(new d)!=Rr||Lr&&Hr(Lr.resolve())!=kr||Pr&&Hr(new Pr)!=Or||vn&&Hr(new vn)!=Nr)&&(Hr=function(t){var e=i(t),n="[object Object]"==e?t.constructor:void 0,r=n?p(n):"";if(r)switch(r){case Br:return zr;case Vr:return Rr;case Fr:return kr;case $r:return Or;case Gr:return Nr}return e});var Ur=Object.prototype.hasOwnProperty;var Wr=e.Uint8Array;function qr(t){var e=new t.constructor(t.byteLength);return new Wr(e).set(new Wr(t)),e}var Kr=/\w*$/;var Zr=u?u.prototype:void 0,Xr=Zr?Zr.valueOf:void 0;function Jr(t,e,n){var r,o,a,i=t.constructor;switch(e){case"[object ArrayBuffer]":return qr(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var n=e?qr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?qr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(a=new(o=t).constructor(o.source,Kr.exec(o))).lastIndex=o.lastIndex,a;case"[object Symbol]":return r=t,Xr?Object(Xr.call(r)):{}}}var Yr=Xn&&Xn.isMap,Qr=Yr?Wn(Yr):function(t){return a(t)&&"[object Map]"==Hr(t)};var to=Xn&&Xn.isSet,eo=to?Wn(to):function(t){return a(t)&&"[object Set]"==Hr(t)},no="[object Arguments]",ro="[object Function]",oo="[object Object]",ao={};function io(t,e,r,o,a,i){var s,u=1&e,c=2&e,d=4&e;if(r&&(s=a?r(t,o,a,i):r(t)),void 0!==s)return s;if(!n(t))return t;var f=l(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ur.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,s)}else{var p=Hr(t),h=p==ro||"[object GeneratorFunction]"==p;if(Hn(t))return function(t,e){if(e)return t.slice();var n=t.length,r=Ir?Ir(n):new t.constructor(n);return t.copy(r),r}(t,u);if(p==oo||p==no||h&&!a){if(s=c||h?{}:function(t){return"function"!=typeof t.constructor||kn(t)?{}:yn(fr(t))}(t),!u)return c?function(t,e){return Dn(t,Mr(t),e)}(t,function(t,e){return t&&Dn(e,sr(e),t)}(s,t)):function(t,e){return Dn(t,Ar(t),e)}(t,function(t,e){return t&&Dn(e,or(e),t)}(s,t))}else{if(!ao[p])return a?t:{};s=Jr(t,p,u)}}i||(i=new mr);var v=i.get(t);if(v)return v;i.set(t,s),eo(t)?t.forEach((function(n){s.add(io(n,e,r,n,t,i))})):Qr(t)&&t.forEach((function(n,o){s.set(o,io(n,e,r,o,t,i))}));var g=f?void 0:(d?c?Dr:jr:c?sr:or)(t);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(g||t,(function(n,o){g&&(n=t[o=n]),jn(s,o,io(n,e,r,o,t,i))})),s}function so(t,e){return e.length<2?t:h(t,function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(o);++r<o;)a[r]=t[r+e];return a}(e,0,-1))}function lo(t,e){return null==(t=so(t,e=v(e,t)))||delete t[g((n=e,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}function uo(t){return function(t){if(!a(t)||"[object Object]"!=i(t))return!1;var e=fr(t);if(null===e)return!0;var n=gr.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&vr.call(n)==yr}(t)?void 0:t}ao[no]=ao["[object Array]"]=ao["[object ArrayBuffer]"]=ao["[object DataView]"]=ao["[object Boolean]"]=ao["[object Date]"]=ao["[object Float32Array]"]=ao["[object Float64Array]"]=ao["[object Int8Array]"]=ao["[object Int16Array]"]=ao["[object Int32Array]"]=ao["[object Map]"]=ao["[object Number]"]=ao[oo]=ao["[object RegExp]"]=ao["[object Set]"]=ao["[object String]"]=ao["[object Symbol]"]=ao["[object Uint8Array]"]=ao["[object Uint8ClampedArray]"]=ao["[object Uint16Array]"]=ao["[object Uint32Array]"]=!0,ao["[object Error]"]=ao[ro]=ao["[object WeakMap]"]=!1;var co=function(t){return Sn(function(t,e,n){return e=En(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=En(r.length-e,0),i=Array(a);++o<a;)i[o]=r[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=r[o];return s[e]=n(i),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,void 0,dr),t+"")}((function(t,e){var n={};if(null==t)return n;var r=!1;e=y(e,(function(e){return e=v(e,t),r||(r=e.length>1),e})),Dn(t,Dr(t),n),r&&(n=io(n,7,uo));for(var o=e.length;o--;)lo(n,e[o]);return n}));class fo extends Error{constructor(t){super(t),this.name="ElementPlusError"}}const po="update:modelValue";let ho;const vo="focus-trap.focus-after-trapped",go="focus-trap.focus-after-released",yo={cancelable:!0,bubbles:!1},mo={cancelable:!0,bubbles:!1},bo="focusAfterTrapped",xo="focusAfterReleased",wo=Symbol("elFocusTrap"),Io=V(),_o=V(0),So=V(0);let To=0;const Ao=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const e="INPUT"===t.tagName&&"hidden"===t.type;return t.disabled||t.hidden||e?NodeFilter.FILTER_SKIP:t.tabIndex>=0||t===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},Mo=(t,e)=>{for(const n of t)if(!Co(n,e))return n},Co=(t,e)=>{if("hidden"===getComputedStyle(t).visibility)return!0;for(;t;){if(e&&t===e)return!1;if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1},jo=(t,e)=>{if(t&&t.focus){const n=document.activeElement;let r=!1;!b(t)||(t=>{if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.tabIndex<0||t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled"))return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return!("hidden"===t.type||"file"===t.type);case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}})(t)||t.getAttribute("tabindex")||(t.setAttribute("tabindex","-1"),r=!0),t.focus({preventScroll:!0}),So.value=window.performance.now(),t!==n&&(t=>t instanceof HTMLInputElement&&"select"in t)(t)&&e&&t.select(),b(t)&&r&&t.removeAttribute("tabindex")}};function Do(t,e){const n=[...t],r=t.indexOf(e);return-1!==r&&n.splice(r,1),n}const Eo=(()=>{let t=[];return{push:e=>{const n=t[0];n&&e!==n&&n.pause(),t=Do(t,e),t.unshift(e)},remove:e=>{var n,r;t=Do(t,e),null==(r=null==(n=t[0])?void 0:n.resume)||r.call(n)}}})(),Lo=()=>{Io.value="pointer",_o.value=window.performance.now()},Po=()=>{Io.value="keyboard",_o.value=window.performance.now()},Ro=t=>new CustomEvent("focus-trap.focusout-prevented",{...mo,detail:t});let ko=[];const Oo=t=>{t.code===x.esc&&ko.forEach((e=>e(t)))};var No=w(G({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[bo,xo,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=V();let r,o;const{focusReason:a}=(F((()=>{0===To&&(document.addEventListener("mousedown",Lo),document.addEventListener("touchstart",Lo),document.addEventListener("keydown",Po)),To++})),$((()=>{To--,To<=0&&(document.removeEventListener("mousedown",Lo),document.removeEventListener("touchstart",Lo),document.removeEventListener("keydown",Po))})),{focusReason:Io,lastUserFocusTimestamp:_o,lastAutomatedFocusTimestamp:So});var i;i=n=>{t.trapped&&!s.paused&&e("release-requested",n)},F((()=>{0===ko.length&&document.addEventListener("keydown",Oo),m&&ko.push(i)})),$((()=>{ko=ko.filter((t=>t!==i)),0===ko.length&&m&&document.removeEventListener("keydown",Oo)}));const s={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=n=>{if(!t.loop&&!t.trapped)return;if(s.paused)return;const{code:r,altKey:o,ctrlKey:i,metaKey:l,currentTarget:u,shiftKey:c}=n,{loop:d}=t,f=r===x.tab&&!o&&!i&&!l,p=document.activeElement;if(f&&p){const t=u,[r,o]=(t=>{const e=Ao(t);return[Mo(e,t),Mo(e.reverse(),t)]})(t);if(r&&o)if(c||p!==o){if(c&&[r,t].includes(p)){const t=Ro({focusReason:a.value});e("focusout-prevented",t),t.defaultPrevented||(n.preventDefault(),d&&jo(o,!0))}}else{const t=Ro({focusReason:a.value});e("focusout-prevented",t),t.defaultPrevented||(n.preventDefault(),d&&jo(r,!0))}else if(p===t){const t=Ro({focusReason:a.value});e("focusout-prevented",t),t.defaultPrevented||n.preventDefault()}}};H(wo,{focusTrapRef:n,onKeydown:l}),U((()=>t.focusTrapEl),(t=>{t&&(n.value=t)}),{immediate:!0}),U([n],(([t],[e])=>{t&&(t.addEventListener("keydown",l),t.addEventListener("focusin",d),t.addEventListener("focusout",f)),e&&(e.removeEventListener("keydown",l),e.removeEventListener("focusin",d),e.removeEventListener("focusout",f))}));const u=t=>{e(bo,t)},c=t=>e(xo,t),d=a=>{const i=W(n);if(!i)return;const l=a.target,u=a.relatedTarget,c=l&&i.contains(l);if(!t.trapped){u&&i.contains(u)||(r=u)}c&&e("focusin",a),s.paused||t.trapped&&(c?o=l:jo(o,!0))},f=r=>{const i=W(n);if(!s.paused&&i)if(t.trapped){const n=r.relatedTarget;null==n||i.contains(n)||setTimeout((()=>{if(!s.paused&&t.trapped){const t=Ro({focusReason:a.value});e("focusout-prevented",t),t.defaultPrevented||jo(o,!0)}}),0)}else{const t=r.target;t&&i.contains(t)||e("focusout",r)}};async function p(){await K();const e=W(n);if(e){Eo.push(s);const n=e.contains(document.activeElement)?r:document.activeElement;r=n;if(!e.contains(n)){const r=new Event(vo,yo);e.addEventListener(vo,u),e.dispatchEvent(r),r.defaultPrevented||K((()=>{let r=t.focusStartEl;Z(r)||(jo(r),document.activeElement!==r&&(r="first")),"first"===r&&((t,e=!1)=>{const n=document.activeElement;for(const r of t)if(jo(r,e),document.activeElement!==n)return})(Ao(e),!0),document.activeElement!==n&&"container"!==r||jo(e)}))}}}function h(){const t=W(n);if(t){t.removeEventListener(vo,u);const e=new CustomEvent(go,{...yo,detail:{focusReason:a.value}});t.addEventListener(go,c),t.dispatchEvent(e),e.defaultPrevented||"keyboard"!=a.value&&_o.value>So.value&&!t.contains(document.activeElement)||jo(null!=r?r:document.body),t.removeEventListener(go,c),Eo.remove(s)}}return F((()=>{t.trapped&&p(),U((()=>t.trapped),(t=>{t?p():h()}))})),$((()=>{t.trapped&&h(),n.value&&(n.value.removeEventListener("keydown",l),n.value.removeEventListener("focusin",d),n.value.removeEventListener("focusout",f),n.value=void 0)})),{onKeydown:l}}}),[["render",function(t,e,n,r,o,a){return q(t.$slots,"default",{handleKeydown:t.onKeydown})}],["__file","focus-trap.vue"]]);const zo=S(w(G({__name:"teleport",props:I({to:{type:_([String,Object]),required:!0},disabled:Boolean}),setup:t=>(t,e)=>t.disabled?q(t.$slots,"default",{key:0}):(X(),J(Y,{key:1,to:t.to},[q(t.$slots,"default")],8,["to"]))}),[["__file","teleport.vue"]])),Bo=t=>{const e=Q(t)?t:[t],n=[];return e.forEach((t=>{var e;Q(t)?n.push(...Bo(t)):tt(t)&&(null==(e=t.component)?void 0:e.subTree)?n.push(t,...Bo(t.component.subTree)):tt(t)&&Q(t.children)?n.push(...Bo(t.children)):n.push(t)})),n},Vo=(t,e={})=>{et(t)||function(t,e){throw new fo(`[${t}] ${e}`)}("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||T("popup"),r=nt((()=>n.bm("parent","hidden")));if(!m||A(document.body,r.value))return;let o=0,a=!1,i="0";const s=()=>{setTimeout((()=>{"undefined"!=typeof document&&a&&document&&(document.body.style.width=i,j(document.body,r.value))}),200)};U(t,(t=>{if(!t)return void s();a=!A(document.body,r.value),a&&(i=document.body.style.width,M(document.body,r.value)),o=(t=>{var e;if(!m)return 0;if(void 0!==ho)return ho;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",n.appendChild(o);const a=o.offsetWidth;return null==(e=n.parentNode)||e.removeChild(n),ho=r-a,ho})(n.namespace.value);const e=document.documentElement.clientHeight<document.body.scrollHeight,l=C(document.body,"overflowY");o>0&&(e||"scroll"===l)&&a&&(document.body.style.width=`calc(100% - ${o}px)`)})),rt((()=>s()))},Fo=Math.min,$o=Math.max,Go=Math.round,Ho=Math.floor,Uo=t=>({x:t,y:t}),Wo={left:"right",right:"left",bottom:"top",top:"bottom"},qo={start:"end",end:"start"};function Ko(t,e,n){return $o(t,Fo(e,n))}function Zo(t,e){return"function"==typeof t?t(e):t}function Xo(t){return t.split("-")[0]}function Jo(t){return t.split("-")[1]}function Yo(t){return"x"===t?"y":"x"}function Qo(t){return"y"===t?"height":"width"}function ta(t){return["top","bottom"].includes(Xo(t))?"y":"x"}function ea(t){return Yo(ta(t))}function na(t){return t.replace(/start|end/g,(t=>qo[t]))}function ra(t){return t.replace(/left|right|bottom|top/g,(t=>Wo[t]))}function oa(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function aa(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function ia(t,e,n){let{reference:r,floating:o}=t;const a=ta(e),i=ea(e),s=Qo(i),l=Xo(e),u="y"===a,c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(l){case"top":p={x:c,y:r.y-o.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Jo(e)){case"start":p[i]-=f*(n&&u?-1:1);break;case"end":p[i]+=f*(n&&u?-1:1)}return p}async function sa(t,e){var n;void 0===e&&(e={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Zo(e,t),h=oa(p),v=s[f?"floating"===d?"reference":"floating":d],g=aa(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(v)))||n?v:v.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===d?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,m=await(null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),b=await(null==a.isElement?void 0:a.isElement(m))&&await(null==a.getScale?void 0:a.getScale(m))||{x:1,y:1},x=aa(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:m,strategy:l}):y);return{top:(g.top-x.top+h.top)/b.y,bottom:(x.bottom-g.bottom+h.bottom)/b.y,left:(g.left-x.left+h.left)/b.x,right:(x.right-g.right+h.right)/b.x}}function la(){return"undefined"!=typeof window}function ua(t){return fa(t)?(t.nodeName||"").toLowerCase():"#document"}function ca(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function da(t){var e;return null==(e=(fa(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function fa(t){return!!la()&&(t instanceof Node||t instanceof ca(t).Node)}function pa(t){return!!la()&&(t instanceof Element||t instanceof ca(t).Element)}function ha(t){return!!la()&&(t instanceof HTMLElement||t instanceof ca(t).HTMLElement)}function va(t){return!(!la()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof ca(t).ShadowRoot)}function ga(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Ia(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function ya(t){return["table","td","th"].includes(ua(t))}function ma(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(n){return!1}}))}function ba(t){const e=xa(),n=pa(t)?Ia(t):t;return["transform","translate","scale","rotate","perspective"].some((t=>!!n[t]&&"none"!==n[t]))||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function xa(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function wa(t){return["html","body","#document"].includes(ua(t))}function Ia(t){return ca(t).getComputedStyle(t)}function _a(t){return pa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Sa(t){if("html"===ua(t))return t;const e=t.assignedSlot||t.parentNode||va(t)&&t.host||da(t);return va(e)?e.host:e}function Ta(t){const e=Sa(t);return wa(e)?t.ownerDocument?t.ownerDocument.body:t.body:ha(e)&&ga(e)?e:Ta(e)}function Aa(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const o=Ta(t),a=o===(null==(r=t.ownerDocument)?void 0:r.body),i=ca(o);if(a){const t=Ma(i);return e.concat(i,i.visualViewport||[],ga(o)?o:[],t&&n?Aa(t):[])}return e.concat(o,Aa(o,[],n))}function Ma(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ca(t){const e=Ia(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=ha(t),a=o?t.offsetWidth:n,i=o?t.offsetHeight:r,s=Go(n)!==a||Go(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function ja(t){return pa(t)?t:t.contextElement}function Da(t){const e=ja(t);if(!ha(e))return Uo(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:a}=Ca(e);let i=(a?Go(n.width):n.width)/r,s=(a?Go(n.height):n.height)/o;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const Ea=Uo(0);function La(t){const e=ca(t);return xa()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Ea}function Pa(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1);const o=t.getBoundingClientRect(),a=ja(t);let i=Uo(1);e&&(r?pa(r)&&(i=Da(r)):i=Da(t));const s=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==ca(t))&&e}(a,n,r)?La(a):Uo(0);let l=(o.left+s.x)/i.x,u=(o.top+s.y)/i.y,c=o.width/i.x,d=o.height/i.y;if(a){const t=ca(a),e=r&&pa(r)?ca(r):r;let n=t,o=Ma(n);for(;o&&r&&e!==n;){const t=Da(o),e=o.getBoundingClientRect(),r=Ia(o),a=e.left+(o.clientLeft+parseFloat(r.paddingLeft))*t.x,i=e.top+(o.clientTop+parseFloat(r.paddingTop))*t.y;l*=t.x,u*=t.y,c*=t.x,d*=t.y,l+=a,u+=i,n=ca(o),o=Ma(n)}}return aa({width:c,height:d,x:l,y:u})}function Ra(t,e){const n=_a(t).scrollLeft;return e?e.left+n:Pa(da(t)).left+n}function ka(t,e,n){void 0===n&&(n=!1);const r=t.getBoundingClientRect();return{x:r.left+e.scrollLeft-(n?0:Ra(t,r)),y:r.top+e.scrollTop}}function Oa(t,e,n){let r;if("viewport"===e)r=function(t,e){const n=ca(t),r=da(t),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,l=0;if(o){a=o.width,i=o.height;const t=xa();(!t||t&&"fixed"===e)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:a,height:i,x:s,y:l}}(t,n);else if("document"===e)r=function(t){const e=da(t),n=_a(t),r=t.ownerDocument.body,o=$o(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=$o(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Ra(t);const s=-n.scrollTop;return"rtl"===Ia(r).direction&&(i+=$o(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}(da(t));else if(pa(e))r=function(t,e){const n=Pa(t,!0,"fixed"===e),r=n.top+t.clientTop,o=n.left+t.clientLeft,a=ha(t)?Da(t):Uo(1);return{width:t.clientWidth*a.x,height:t.clientHeight*a.y,x:o*a.x,y:r*a.y}}(e,n);else{const n=La(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return aa(r)}function Na(t,e){const n=Sa(t);return!(n===e||!pa(n)||wa(n))&&("fixed"===Ia(n).position||Na(n,e))}function za(t,e,n){const r=ha(e),o=da(e),a="fixed"===n,i=Pa(t,!0,a,e);let s={scrollLeft:0,scrollTop:0};const l=Uo(0);if(r||!r&&!a)if(("body"!==ua(e)||ga(o))&&(s=_a(e)),r){const t=Pa(e,!0,a,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else o&&(l.x=Ra(o));const u=!o||r||a?Uo(0):ka(o,s);return{x:i.left+s.scrollLeft-l.x-u.x,y:i.top+s.scrollTop-l.y-u.y,width:i.width,height:i.height}}function Ba(t){return"static"===Ia(t).position}function Va(t,e){if(!ha(t)||"fixed"===Ia(t).position)return null;if(e)return e(t);let n=t.offsetParent;return da(t)===n&&(n=n.ownerDocument.body),n}function Fa(t,e){const n=ca(t);if(ma(t))return n;if(!ha(t)){let e=Sa(t);for(;e&&!wa(e);){if(pa(e)&&!Ba(e))return e;e=Sa(e)}return n}let r=Va(t,e);for(;r&&ya(r)&&Ba(r);)r=Va(r,e);return r&&wa(r)&&Ba(r)&&!ba(r)?n:r||function(t){let e=Sa(t);for(;ha(e)&&!wa(e);){if(ba(e))return e;if(ma(e))return null;e=Sa(e)}return null}(t)||n}const $a={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const a="fixed"===o,i=da(r),s=!!e&&ma(e.floating);if(r===i||s&&a)return n;let l={scrollLeft:0,scrollTop:0},u=Uo(1);const c=Uo(0),d=ha(r);if((d||!d&&!a)&&(("body"!==ua(r)||ga(i))&&(l=_a(r)),ha(r))){const t=Pa(r);u=Da(r),c.x=t.x+r.clientLeft,c.y=t.y+r.clientTop}const f=!i||d||a?Uo(0):ka(i,l,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}},getDocumentElement:da,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const a=[..."clippingAncestors"===n?ma(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let r=Aa(t,[],!1).filter((t=>pa(t)&&"body"!==ua(t))),o=null;const a="fixed"===Ia(t).position;let i=a?Sa(t):t;for(;pa(i)&&!wa(i);){const e=Ia(i),n=ba(i);n||"fixed"!==e.position||(o=null),(a?!n&&!o:!n&&"static"===e.position&&o&&["absolute","fixed"].includes(o.position)||ga(i)&&!n&&Na(t,i))?r=r.filter((t=>t!==i)):o=e,i=Sa(i)}return e.set(t,r),r}(e,this._c):[].concat(n),r],i=a[0],s=a.reduce(((t,n)=>{const r=Oa(e,n,o);return t.top=$o(r.top,t.top),t.right=Fo(r.right,t.right),t.bottom=Fo(r.bottom,t.bottom),t.left=$o(r.left,t.left),t}),Oa(e,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Fa,getElementRects:async function(t){const e=this.getOffsetParent||Fa,n=this.getDimensions,r=await n(t.floating);return{reference:za(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=Ca(t);return{width:e,height:n}},getScale:Da,isElement:pa,isRTL:function(t){return"rtl"===Ia(t).direction}};function Ga(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Ha(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,u=ja(t),c=o||a?[...u?Aa(u):[],...Aa(e)]:[];c.forEach((t=>{o&&t.addEventListener("scroll",n,{passive:!0}),a&&t.addEventListener("resize",n)}));const d=u&&s?function(t,e){let n,r=null;const o=da(t);function a(){var t;clearTimeout(n),null==(t=r)||t.disconnect(),r=null}return function i(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();const u=t.getBoundingClientRect(),{left:c,top:d,width:f,height:p}=u;if(s||e(),!f||!p)return;const h={rootMargin:-Ho(d)+"px "+-Ho(o.clientWidth-(c+f))+"px "+-Ho(o.clientHeight-(d+p))+"px "+-Ho(c)+"px",threshold:$o(0,Fo(1,l))||1};let v=!0;function g(e){const r=e[0].intersectionRatio;if(r!==l){if(!v)return i();r?i(!1,r):n=setTimeout((()=>{i(!1,1e-7)}),1e3)}1!==r||Ga(u,t.getBoundingClientRect())||i(),v=!1}try{r=new IntersectionObserver(g,{...h,root:o.ownerDocument})}catch(y){r=new IntersectionObserver(g,h)}r.observe(t)}(!0),a}(u,n):null;let f,p=-1,h=null;i&&(h=new ResizeObserver((t=>{let[r]=t;r&&r.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=h)||t.observe(e)}))),n()})),u&&!l&&h.observe(u),h.observe(e));let v=l?Pa(t):null;return l&&function e(){const r=Pa(t);v&&!Ga(v,r)&&n();v=r,f=requestAnimationFrame(e)}(),n(),()=>{var t;c.forEach((t=>{o&&t.removeEventListener("scroll",n),a&&t.removeEventListener("resize",n)})),null==d||d(),null==(t=h)||t.disconnect(),h=null,l&&cancelAnimationFrame(f)}}const Ua=sa,Wa=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=e,l=await async function(t,e){const{placement:n,platform:r,elements:o}=t,a=await(null==r.isRTL?void 0:r.isRTL(o.floating)),i=Xo(n),s=Jo(n),l="y"===ta(n),u=["left","top"].includes(i)?-1:1,c=a&&l?-1:1,d=Zo(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),l?{x:p*c,y:f*u}:{x:f*u,y:p*c}}(e,t);return i===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:{...l,placement:i}}}}},qa=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...l}=Zo(t,e),u={x:n,y:r},c=await sa(e,l),d=ta(Xo(o)),f=Yo(d);let p=u[f],h=u[d];if(a){const t="y"===f?"bottom":"right";p=Ko(p+c["y"===f?"top":"left"],p,p-c[t])}if(i){const t="y"===d?"bottom":"right";h=Ko(h+c["y"===d?"top":"left"],h,h-c[t])}const v=s.fn({...e,[f]:p,[d]:h});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:a,[d]:i}}}}}},Ka=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:v=!0,...g}=Zo(t,e);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const y=Xo(o),m=ta(s),b=Xo(s)===s,x=await(null==l.isRTL?void 0:l.isRTL(u.floating)),w=f||(b||!v?[ra(s)]:function(t){const e=ra(t);return[na(t),e,na(e)]}(s)),I="none"!==h;!f&&I&&w.push(...function(t,e,n,r){const o=Jo(t);let a=function(t,e,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?a:i;default:return[]}}(Xo(t),"start"===n,r);return o&&(a=a.map((t=>t+"-"+o)),e&&(a=a.concat(a.map(na)))),a}(s,v,h,x));const _=[s,...w],S=await sa(e,g),T=[];let A=(null==(r=a.flip)?void 0:r.overflows)||[];if(c&&T.push(S[y]),d){const t=function(t,e,n){void 0===n&&(n=!1);const r=Jo(t),o=ea(t),a=Qo(o);let i="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=ra(i)),[i,ra(i)]}(o,i,x);T.push(S[t[0]],S[t[1]])}if(A=[...A,{placement:o,overflows:T}],!T.every((t=>t<=0))){var M,C;const t=((null==(M=a.flip)?void 0:M.index)||0)+1,e=_[t];if(e)return{data:{index:t,overflows:A},reset:{placement:e}};let n=null==(C=A.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:C.placement;if(!n)switch(p){case"bestFit":{var j;const t=null==(j=A.filter((t=>{if(I){const e=ta(t.placement);return e===m||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:j[0];t&&(n=t);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},Za=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:l}=e,{element:u,padding:c=0}=Zo(t,e)||{};if(null==u)return{};const d=oa(c),f={x:n,y:r},p=ea(o),h=Qo(p),v=await i.getDimensions(u),g="y"===p,y=g?"top":"left",m=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=a.reference[h]+a.reference[p]-f[p]-a.floating[h],w=f[p]-a.reference[p],I=await(null==i.getOffsetParent?void 0:i.getOffsetParent(u));let _=I?I[b]:0;_&&await(null==i.isElement?void 0:i.isElement(I))||(_=s.floating[b]||a.floating[h]);const S=x/2-w/2,T=_/2-v[h]/2-1,A=Fo(d[y],T),M=Fo(d[m],T),C=A,j=_-v[h]-M,D=_/2-v[h]/2+S,E=Ko(C,D,j),L=!l.arrow&&null!=Jo(o)&&D!==E&&a.reference[h]/2-(D<C?A:M)-v[h]/2<0,P=L?D<C?D-C:D-j:0;return{[p]:f[p]+P,data:{[p]:E,centerOffset:D-E-P,...L&&{alignmentOffset:P}},reset:L}}}),Xa=(t,e,n)=>{const r=new Map,o={platform:$a,...n},a={...o.platform,_c:r};return(async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:d}=ia(u,r,l),f=r,p={},h=0;for(let v=0;v<s.length;v++){const{name:n,fn:a}=s[v],{x:g,y:y,data:m,reset:b}=await a({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});c=null!=g?g:c,d=null!=y?y:d,p={...p,[n]:{...p[n],...m}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await i.getElementRects({reference:t,floating:e,strategy:o}):b.rects),({x:c,y:d}=ia(u,f,l))),v=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:p}})(t,e,{...o,platform:a})},Ja=I({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:_(Object)},targetAreaClickable:{type:Boolean,default:!0}}),Ya=(t,e,n,r,o)=>{const a=V(null),i=()=>{let e;return e=Z(t.value)?document.querySelector(t.value):ot(t.value)?t.value():t.value,e},s=()=>{const t=i();if(!t||!e.value)return void(a.value=null);(function(t){const e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:o,bottom:a,left:i}=t.getBoundingClientRect();return r>=0&&i>=0&&o<=e&&a<=n})(t)||t.scrollIntoView(o.value);const{left:n,top:r,width:s,height:l}=t.getBoundingClientRect();a.value={left:n,top:r,width:s,height:l,radius:0}};F((()=>{U([e,t],(()=>{s()}),{immediate:!0}),window.addEventListener("resize",s)})),$((()=>{window.removeEventListener("resize",s)}));const l=t=>{var e;return null!=(e=Q(n.value.offset)?n.value.offset[t]:n.value.offset)?e:6},u=nt((()=>{var t;if(!a.value)return a.value;const e=l(0),r=l(1),o=(null==(t=n.value)?void 0:t.radius)||2;return{left:a.value.left-e,top:a.value.top-r,width:a.value.width+2*e,height:a.value.height+2*r,radius:o}})),c=nt((()=>{const t=i();return r.value&&t&&window.DOMRect?{getBoundingClientRect(){var t,e,n,r;return window.DOMRect.fromRect({width:(null==(t=u.value)?void 0:t.width)||0,height:(null==(e=u.value)?void 0:e.height)||0,x:(null==(n=u.value)?void 0:n.left)||0,y:(null==(r=u.value)?void 0:r.top)||0})}}:t||void 0}));return{mergedPosInfo:u,triggerTarget:c}},Qa=Symbol("ElTour");const ti=()=>({name:"overflow",async fn(t){const e=await Ua(t);let n=0;e.left>0&&(n=e.left),e.right>0&&(n=e.right);return{data:{maxWidth:t.rects.floating.width-n}}}}),ei=G({name:"ElTourMask",inheritAttrs:!1});var ni=w(G({...ei,props:Ja,setup(t){const e=t,{ns:n}=it(Qa),r=nt((()=>{var t,n;return null!=(n=null==(t=e.pos)?void 0:t.radius)?n:2})),o=nt((()=>{const t=r.value,e=`a${t},${t} 0 0 1`;return{topRight:`${e} ${t},${t}`,bottomRight:`${e} ${-t},${t}`,bottomLeft:`${e} ${-t},${-t}`,topLeft:`${e} ${t},${-t}`}})),a=nt((()=>{const t=window.innerWidth,n=window.innerHeight,a=o.value,i=`M${t},0 L0,0 L0,${n} L${t},${n} L${t},0 Z`,s=r.value;return e.pos?`${i} M${e.pos.left+s},${e.pos.top} h${e.pos.width-2*s} ${a.topRight} v${e.pos.height-2*s} ${a.bottomRight} h${-e.pos.width+2*s} ${a.bottomLeft} v${-e.pos.height+2*s} ${a.topLeft} z`:i})),i=nt((()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"})));return Vo(st(e,"visible"),{ns:n}),(t,e)=>t.visible?(X(),lt("div",ft({key:0,class:W(n).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:t.zIndex,pointerEvents:t.pos&&t.targetAreaClickable?"none":"auto"}},t.$attrs),[(X(),lt("svg",{style:{width:"100%",height:"100%"}},[ut("path",{class:ct(W(n).e("hollow")),style:dt(W(i)),d:W(a)},null,14,["d"])]))],16)):pt("v-if",!0)}}),[["__file","mask.vue"]]);const ri=I({placement:{type:_(String),values:["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],default:"bottom"},reference:{type:_(Object),default:null},strategy:{type:_(String),values:["absolute","fixed"],default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),oi=G({name:"ElTourContent"});var ai=w(G({...oi,props:ri,emits:{close:()=>!0},setup(t,{emit:e}){const n=t,r=V(n.placement),o=V(n.strategy),a=V(null),i=V(null);U((()=>n.placement),(()=>{r.value=n.placement}));const{contentStyle:s,arrowStyle:l}=((t,e,n,r,o,a,i,s)=>{const l=V(),u=V(),c=V({}),d={x:l,y:u,placement:r,strategy:o,middlewareData:c},f=nt((()=>{const t=[Wa(W(a)),Ka(),qa(),ti()];return W(s)&&W(n)&&t.push(Za({element:W(n)})),t})),p=async()=>{if(!m)return;const n=W(t),a=W(e);if(!n||!a)return;const i=await Xa(n,a,{placement:W(r),strategy:W(o),middleware:W(f)});D(d).forEach((t=>{d[t].value=i[t]}))},h=nt((()=>{if(!W(t))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:W(i)};const{overflow:e}=W(c);return{position:W(o),zIndex:W(i),top:null!=W(u)?`${W(u)}px`:"",left:null!=W(l)?`${W(l)}px`:"",maxWidth:(null==e?void 0:e.maxWidth)?`${null==e?void 0:e.maxWidth}px`:""}})),v=nt((()=>{if(!W(s))return{};const{arrow:t}=W(c);return{left:null!=(null==t?void 0:t.x)?`${null==t?void 0:t.x}px`:"",top:null!=(null==t?void 0:t.y)?`${null==t?void 0:t.y}px`:""}}));let g;return F((()=>{const n=W(t),r=W(e);n&&r&&(g=Ha(n,r,p)),at((()=>{p()}))})),$((()=>{g&&g()})),{update:p,contentStyle:h,arrowStyle:v}})(st(n,"reference"),a,i,r,o,st(n,"offset"),st(n,"zIndex"),st(n,"showArrow")),u=nt((()=>r.value.split("-")[0])),{ns:c}=it(Qa),d=()=>{e("close")},f=t=>{"pointer"===t.detail.focusReason&&t.preventDefault()};return(t,e)=>(X(),lt("div",{ref_key:"contentRef",ref:a,style:dt(W(s)),class:ct(W(c).e("content")),"data-side":W(u),tabindex:"-1"},[ht(W(No),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":a.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:vt((()=>[q(t.$slots,"default")])),_:3},8,["focus-trap-el"]),t.showArrow?(X(),lt("span",{key:0,ref_key:"arrowRef",ref:i,style:dt(W(l)),class:ct(W(c).e("arrow"))},null,6)):pt("v-if",!0)],14,["data-side"]))}}),[["__file","content.vue"]]),ii=G({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(t,{slots:e,emit:n}){let r=0;return()=>{var o,a;const i=null==(o=e.default)?void 0:o.call(e),s=[];let l=0;var u;return i.length&&(u=Bo(null==(a=i[0])?void 0:a.children),Q(u)&&u.forEach((t=>{var e;"ElTourStep"===(null==(e=(null==t?void 0:t.type)||{})?void 0:e.name)&&(s.push(t),l+=1)}))),r!==l&&(r=l,n("update-total",l)),s.length?s[t.current]:null}}});const si=I({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:E},placement:ri.placement,contentStyle:{type:_([Object])},mask:{type:_([Boolean,Object]),default:!0},gap:{type:_(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:_([Boolean,Object]),default:()=>({block:"center"})},type:{type:_(String)},appendTo:{type:_([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),li={[po]:t=>L(t),"update:current":t=>P(t),close:t=>P(t),finish:()=>!0,change:t=>P(t)},ui=G({name:"ElTour"});var ci=w(G({...ui,props:si,emits:li,setup(t,{emit:e}){const n=t,r=T("tour"),o=V(0),a=V(),i=R(n,"current",e,{passive:!0}),s=nt((()=>{var t;return null==(t=a.value)?void 0:t.target})),l=nt((()=>[r.b(),"primary"===g.value?r.m("primary"):""])),u=nt((()=>{var t;return(null==(t=a.value)?void 0:t.placement)||n.placement})),c=nt((()=>{var t,e;return null!=(e=null==(t=a.value)?void 0:t.contentStyle)?e:n.contentStyle})),d=nt((()=>{var t,e;return null!=(e=null==(t=a.value)?void 0:t.mask)?e:n.mask})),f=nt((()=>!!d.value&&n.modelValue)),p=nt((()=>L(d.value)?void 0:d.value)),h=nt((()=>{var t,e;return!!s.value&&(null!=(e=null==(t=a.value)?void 0:t.showArrow)?e:n.showArrow)})),v=nt((()=>{var t,e;return null!=(e=null==(t=a.value)?void 0:t.scrollIntoViewOptions)?e:n.scrollIntoViewOptions})),g=nt((()=>{var t,e;return null!=(e=null==(t=a.value)?void 0:t.type)?e:n.type})),{nextZIndex:y}=k(),m=y(),b=nt((()=>{var t;return null!=(t=n.zIndex)?t:m})),{mergedPosInfo:x,triggerTarget:w}=Ya(s,st(n,"modelValue"),st(n,"gap"),d,v);U((()=>n.modelValue),(t=>{t||(i.value=0)}));const I=()=>{n.closeOnPressEscape&&(e("update:modelValue",!1),e("close",i.value))},_=t=>{o.value=t},S=gt();return H(Qa,{currentStep:a,current:i,total:o,showClose:st(n,"showClose"),closeIcon:st(n,"closeIcon"),mergedType:g,ns:r,slots:S,updateModelValue(t){e("update:modelValue",t)},onClose(){e("close",i.value)},onFinish(){e("finish")},onChange(){e("change",i.value)}}),(t,e)=>(X(),lt(yt,null,[ht(W(zo),{to:t.appendTo},{default:vt((()=>{var e,n;return[ut("div",ft({class:W(l)},t.$attrs),[ht(ni,{visible:W(f),fill:null==(e=W(p))?void 0:e.color,style:dt(null==(n=W(p))?void 0:n.style),pos:W(x),"z-index":W(b),"target-area-clickable":t.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),t.modelValue?(X(),J(ai,{key:W(i),reference:W(w),placement:W(u),"show-arrow":W(h),"z-index":W(b),style:dt(W(c)),onClose:I},{default:vt((()=>[ht(W(ii),{current:W(i),onUpdateTotal:_},{default:vt((()=>[q(t.$slots,"default")])),_:3},8,["current"])])),_:3},8,["reference","placement","show-arrow","z-index","style"])):pt("v-if",!0)],16)]})),_:3},8,["to"]),pt(" just for IDE "),pt("v-if",!0)],64))}}),[["__file","tour.vue"]]);const di=I({target:{type:_([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:E},showArrow:{type:Boolean,default:void 0},placement:ri.placement,mask:{type:_([Boolean,Object]),default:void 0},contentStyle:{type:_([Object])},prevButtonProps:{type:_(Object)},nextButtonProps:{type:_(Object)},scrollIntoViewOptions:{type:_([Boolean,Object]),default:void 0},type:{type:_(String)}}),fi=G({name:"ElTourStep"});var pi=w(G({...fi,props:di,emits:{close:()=>!0},setup(t,{emit:e}){const n=t,{Close:r}=z,{t:o}=O(),{currentStep:a,current:i,total:s,showClose:l,closeIcon:u,mergedType:c,ns:d,slots:f,updateModelValue:p,onClose:h,onFinish:v,onChange:g}=it(Qa);U(n,(t=>{a.value=t}),{immediate:!0});const y=nt((()=>{var t;return null!=(t=n.showClose)?t:l.value})),m=nt((()=>{var t,e;return null!=(e=null!=(t=n.closeIcon)?t:u.value)?e:r})),b=t=>{if(t)return co(t,["children","onClick"])},x=()=>{var t,e;i.value-=1,(null==(t=n.prevButtonProps)?void 0:t.onClick)&&(null==(e=n.prevButtonProps)||e.onClick()),g()},w=()=>{var t;i.value>=s.value-1?I():i.value+=1,(null==(t=n.nextButtonProps)?void 0:t.onClick)&&n.nextButtonProps.onClick(),g()},I=()=>{_(),v()},_=()=>{p(!1),h(),e("close")};return(t,e)=>(X(),lt(yt,null,[W(y)?(X(),lt("button",{key:0,"aria-label":"Close",class:ct(W(d).e("closebtn")),type:"button",onClick:_},[ht(W(N),{class:ct(W(d).e("close"))},{default:vt((()=>[(X(),J(mt(W(m))))])),_:1},8,["class"])],2)):pt("v-if",!0),ut("header",{class:ct([W(d).e("header"),{"show-close":W(l)}])},[q(t.$slots,"header",{},(()=>[ut("span",{role:"heading",class:ct(W(d).e("title"))},wt(t.title),3)]))],2),ut("div",{class:ct(W(d).e("body"))},[q(t.$slots,"default",{},(()=>[ut("span",null,wt(t.description),1)]))],2),ut("footer",{class:ct(W(d).e("footer"))},[ut("div",{class:ct(W(d).b("indicators"))},[W(f).indicators?(X(),J(mt(W(f).indicators),{key:0,current:W(i),total:W(s)},null,8,["current","total"])):(X(!0),lt(yt,{key:1},bt(W(s),((t,e)=>(X(),lt("span",{key:t,class:ct([W(d).b("indicator"),e===W(i)?"is-active":""])},null,2)))),128))],2),ut("div",{class:ct(W(d).b("buttons"))},[W(i)>0?(X(),J(W(Tt),ft({key:0,size:"small",type:W(c)},b(t.prevButtonProps),{onClick:x}),{default:vt((()=>{var e,n;return[xt(wt(null!=(n=null==(e=t.prevButtonProps)?void 0:e.children)?n:W(o)("el.tour.previous")),1)]})),_:1},16,["type"])):pt("v-if",!0),W(i)<=W(s)-1?(X(),J(W(Tt),ft({key:1,size:"small",type:"primary"===W(c)?"default":"primary"},b(t.nextButtonProps),{onClick:w}),{default:vt((()=>{var e,n;return[xt(wt(null!=(n=null==(e=t.nextButtonProps)?void 0:e.children)?n:W(i)===W(s)-1?W(o)("el.tour.finish"):W(o)("el.tour.next")),1)]})),_:1},16,["type"])):pt("v-if",!0)],2)],2)],64))}}),[["__file","step.vue"]]);const hi=S(ci,{TourStep:pi}),vi=B(pi),gi={class:"tour-person-txt"},yi={class:"tour-content"},mi={class:"txt-btn"},bi=["innerHTML"],xi=G({__name:"TourComp",props:It({content:{type:String,required:!0,default:"content"},stepCount:{type:Number,required:!0,default:0},left:{type:Number,required:!0,default:0},bottom:{type:Number,required:!0,default:0}},{modelValue:{type:Number,default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){let e,n;window.PIXI=Mt;const r=V(),o=_t(t,"modelValue"),a=t,i=()=>{o.value=o.value+1};return F((async()=>{e=new Ct({view:r.value,autoStart:!0,resizeTo:window,backgroundAlpha:0});n=await jt.from("/Poetry_Visualization/live2d/model/poet.model3.json"),e.stage.addChild(n),n.scale.set(.2)})),St((()=>{null==n||n.destroy(),null==e||e.destroy()})),(t,e)=>{const n=Tt;return X(),lt("div",gi,[ut("canvas",{ref_key:"liveCanvas",ref:r,class:"live-canvas",style:dt({left:`${a.left}%`,bottom:`${a.bottom}%`})},null,4),ut("div",yi,[ut("div",mi,[ut("div",{innerHTML:a.content,style:{"text-align":"justify"}},null,8,bi),ht(n,{class:"next-btn",type:"warning",size:"default",onClick:i},{default:vt((()=>[xt(wt(a.stepCount===o.value+1?"结束":"下一步"),1)])),_:1})])])])}}});function wi(t,e){e=e||{};var n=t.coordinateSystem,r=t.axis,o={},a=r.position,i=r.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};o.position=["vertical"===i?u.vertical[a]:l[0],"horizontal"===i?u.horizontal[a]:l[3]];o.rotation=Math.PI/2*{horizontal:0,vertical:1}[i];o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Dt(e.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var c=e.rotate;return null==c&&(c=t.get(["axisLabel","rotate"])),o.labelRotation="top"===a?-c:c,o.z2=1,o}var Ii=["axisLine","axisTickLabel","axisName"],_i=["splitArea","splitLine"],Si=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return Et(e,t),e.prototype.render=function(e,n,r,o){var a=this.group;a.removeAll();var i=this._axisGroup;this._axisGroup=new Lt;var s=wi(e),l=new Pt(e,s);Rt(Ii,l.add,l),a.add(this._axisGroup),a.add(l.getGroup()),Rt(_i,(function(t){e.get([t,"show"])&&Ti[t](this,this.group,this._axisGroup,e)}),this),kt(i,this._axisGroup,e),t.prototype.render.call(this,e,n,r,o)},e.prototype.remove=function(){dn(this)},e.type="singleAxis",e}(Ot),Ti={splitLine:function(t,e,n,r){var o=r.axis;if(!o.scale.isBlank()){var a=r.getModel("splitLine"),i=a.getModel("lineStyle"),s=i.get("color");s=s instanceof Array?s:[s];for(var l=i.get("width"),u=r.coordinateSystem.getRect(),c=o.isHorizontal(),d=[],f=0,p=o.getTicksCoords({tickModel:a}),h=[],v=[],g=0;g<p.length;++g){var y=o.toGlobalCoord(p[g].coord);c?(h[0]=y,h[1]=u.y,v[0]=y,v[1]=u.y+u.height):(h[0]=u.x,h[1]=y,v[0]=u.x+u.width,v[1]=y);var m=new Nt({shape:{x1:h[0],y1:h[1],x2:v[0],y2:v[1]},silent:!0});zt(m.shape,l);var b=f++%s.length;d[b]=d[b]||[],d[b].push(m)}var x=i.getLineStyle(["color"]);for(g=0;g<d.length;++g)e.add(Bt(d[g],{style:Vt({stroke:s[g%s.length]},x),silent:!0}))}},splitArea:function(t,e,n,r){fn(t,n,r,r)}},Ai=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Et(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Ft);$t(Ai,Gt.prototype);var Mi=function(t){function e(e,n,r,o,a){var i=t.call(this,e,n,r)||this;return i.type=o||"value",i.position=a||"bottom",i}return Et(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(Ht),Ci=["single"],ji=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=Ci,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var r=this.dimension,o=new Mi(r,Ut(t),[0,0],t.get("type"),t.get("position")),a="category"===o.type;o.onBand=a&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},t.prototype.update=function(t,e){t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();Rt(e.mapDimensionsAll(this.dimension),(function(t){this._axis.scale.unionExtentFromData(e,t)}),this),Wt(this._axis.scale,this._axis.model)}}),this)},t.prototype.resize=function(t,e){this._rect=qt({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),r=n?[0,t.width]:[0,t.height],o=e.inverse?1:0;e.setExtent(r[o],r[1-o]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),r=n[0]+n[1],o=t.isHorizontal();t.toGlobalCoord=o?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord=o?function(t){return t-e}:function(t){return r-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),r=[],o="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),r[o]=e.toGlobalCoord(e.dataToCoord(+t)),r[1-o]=0===o?n.y+n.height/2:n.x+n.width/2,r},t.prototype.convertToPixel=function(t,e,n){return Di(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return Di(e)===this?this.pointToData(n):null},t}();function Di(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var Ei={create:function(t,e){var n=[];return t.eachComponent("singleAxis",(function(r,o){var a=new ji(r,t,e);a.name="single_"+o,a.resize(r,e),r.coordinateSystem=a,n.push(a)})),t.eachSeries((function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",Kt).models[0];t.coordinateSystem=e&&e.coordinateSystem}})),n},dimensions:Ci},Li=["x","y"],Pi=["width","height"],Ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.makeElOption=function(t,e,n,r,o){var a=n.axis,i=a.coordinateSystem,s=Ni(i,1-Oi(a)),l=i.dataToPoint(e)[0],u=r.get("type");if(u&&"none"!==u){var c=Zt(r),d=ki[u](a,l,s);d.style=c,t.graphicKey=d.type,t.pointer=d}var f=wi(n);Xt(e,t,f,n,r,o)},e.prototype.getHandleTransform=function(t,e,n){var r=wi(e,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=Jt(e.axis,t,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,r){var o=n.axis,a=o.coordinateSystem,i=Oi(o),s=Ni(a,i),l=[t.x,t.y];l[i]+=e[i],l[i]=Math.min(s[1],l[i]),l[i]=Math.max(s[0],l[i]);var u=Ni(a,1-i),c=(u[1]+u[0])/2,d=[c,c];return d[i]=l[i],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},e}(Yt),ki={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:Qt([e,n[0]],[e,n[1]],Oi(t))}},shadow:function(t,e,n){var r=t.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:te([e-r/2,n[0]],[r,o],Oi(t))}}};function Oi(t){return t.isHorizontal()?0:1}function Ni(t,e){var n=t.getRect();return[n[Li[e]],n[Li[e]]+n[Pi[e]]]}var zi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Et(e,t),e.type="single",e}(ee);function Bi(t){ne(re),Ot.registerAxisPointerClass("SingleAxisPointer",Ri),t.registerComponentView(zi),t.registerComponentView(Si),t.registerComponentModel(Ai),pn(t,"single",Ai,Ai.defaultOption),t.registerCoordinateSystem("single",Ei)}function Vi(t,e){return{seriesType:t,plan:oe(),reset:function(t){var n=t.getData(),r=t.coordinateSystem,o=t.pipelineContext,a=e||o.large;if(r){var i=ae(r.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=i.length,l=n.getCalculationInfo("stackResultDimension");ie(n,i[0])&&(i[0]=l),ie(n,i[1])&&(i[1]=l);var u=n.getStore(),c=n.getDimensionIndex(i[0]),d=n.getDimensionIndex(i[1]);return s&&{progress:function(t,e){for(var n=t.end-t.start,o=a&&se(n*s),i=[],l=[],f=t.start,p=0;f<t.end;f++){var h=void 0;if(1===s){var v=u.get(c,f);h=r.dataToPoint(v,null,l)}else i[0]=u.get(c,f),i[1]=u.get(d,f),h=r.dataToPoint(i,null,l);a?(o[p++]=h[0],o[p++]=h[1]):e.setItemLayout(f,h.slice())}a&&e.setLayout("points",o)}}}}}}var Fi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Et(e,t),e.prototype.getInitialData=function(t,e){return le(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ue),$i=function(){return function(){}}(),Gi=function(t){function e(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return Et(e,t),e.prototype.getDefaultShape=function(){return new $i},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,e){var n,r=e.points,o=e.size,a=this.symbolProxy,i=a.shape,s=t.getContext?t.getContext():t,l=s&&o[0]<4,u=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,n=this._off;n<r.length;){var c=r[n++],d=r[n++];isNaN(c)||isNaN(d)||(u&&!u.contain(c,d)||(i.x=c-o[0]/2,i.y=d-o[1]/2,i.width=o[0],i.height=o[1],a.buildPath(t,i,!0)))}this.incremental&&(this._off=n,this.notClear=!0)}},e.prototype.afterBrush=function(){var t,e=this.shape,n=e.points,r=e.size,o=this._ctx,a=this.softClipShape;if(o){for(t=this._off;t<n.length;){var i=n[t++],s=n[t++];isNaN(i)||isNaN(s)||(a&&!a.contain(i,s)||o.fillRect(i-r[0]/2,s-r[1]/2,r[0],r[1]))}this.incremental&&(this._off=t,this.notClear=!0)}},e.prototype.findDataIndex=function(t,e){for(var n=this.shape,r=n.points,o=n.size,a=Math.max(o[0],4),i=Math.max(o[1],4),s=r.length/2-1;s>=0;s--){var l=2*s,u=r[l]-a/2,c=r[l+1]-i/2;if(t>=u&&e>=c&&t<=u+a&&e<=c+i)return s}return-1},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect();return t=n[0],e=n[1],r.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape,n=e.points,r=e.size,o=r[0],a=r[1],i=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<n.length;){var d=n[c++],f=n[c++];i=Math.min(d,i),l=Math.max(d,l),s=Math.min(f,s),u=Math.max(f,u)}t=this._rect=new ce(i-o/2,s-a/2,l-i+o,u-s+a)}return t},e}(de),Hi=function(){function t(){this.group=new Lt}return t.prototype.updateData=function(t,e){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,e)},t.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild((function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),r=4*t.startIndex*2;e=new Float32Array(e.buffer,r,n)}t.setShape("points",e),t.reset()}))},t.prototype.incrementalPrepareUpdate=function(t){this._clear()},t.prototype.incrementalUpdate=function(t,e,n){var r=this._newAdded[0],o=e.getLayout("points"),a=r&&r.shape.points;if(a&&a.length<2e4){var i=a.length,s=new Float32Array(i+o.length);s.set(a),s.set(o,i),r.endIndex=t.end,r.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=t.start,l.endIndex=t.end,l.incremental=!0,l.setShape({points:o}),this._setCommon(l,e,n)}},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new Gi({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},t.prototype._setCommon=function(t,e,n){var r=e.hostModel;n=n||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=fe(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var i=e.getVisual("style"),s=i&&i.fill;s&&t.setColor(s);var l=pe(t);l.seriesIndex=r.seriesIndex,t.on("mousemove",(function(e){l.dataIndex=null;var n=t.hoverDataIdx;n>=0&&(l.dataIndex=n+(t.startIndex||0))}))},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Ui=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Et(e,t),e.prototype.render=function(t,e,n){var r=t.getData();this._updateSymbolDraw(r,t).updateData(r,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var r=t.getData();this._updateSymbolDraw(r,t).incrementalPrepareUpdate(r),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var r=t.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var o=Vi("").reset(t,e,n);o.progress&&o.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var e=t.coordinateSystem;return e&&e.getArea&&e.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,e){var n=this._symbolDraw,r=e.pipelineContext.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new Hi:new he,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(ve);function Wi(t){ne(hn),t.registerSeriesModel(Fi),t.registerChartView(Ui),t.registerLayout(Vi("scatter"))}var qi=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){we(t)&&(n=e,e=t,t=null),Ie(t=t||{})&&(t={order:t});var r,o=t.order||"preorder",a=this[t.attr||"children"];"preorder"===o&&(r=e.call(n,this));for(var i=0;!r&&i<a.length;i++)a[i].eachNode(t,e,n);"postorder"===o&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(t+1),r.height>e&&(e=r.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,r=n.length;e<r;e++){var o=n[e].getNodeById(t);if(o)return o}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,r=n.length;e<r;e++){var o=n[e].contains(t);if(o)return o}},t.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode((function(e){t.push(e.dataIndex)})),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),Ki=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,r=e.length;n<r;n++)e[n].dataIndex=-1;for(n=0,r=t.count();n<r;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var o=new t(n),a=[],i=1;!function t(e,n){var r=e.value;i=Math.max(i,ge(r)?r.length:1),a.push(e);var s=new qi(ye(e.name,""),o);n?function(t,e){var n=e.children;if(t.parentNode===e)return;n.push(t),t.parentNode=e}(s,n):o.root=s,o._nodes.push(s);var l=e.children;if(l)for(var u=0;u<l.length;u++)t(l[u],s)}(e),o.root.updateDepthAndHeight(0);var s=me(a,{coordDimensions:["value"],dimensionsCount:i}).dimensions,l=new be(s,n);return l.initData(a),r&&r(l),xe({mainData:l,struct:o,structAttr:"tree"}),o.update(),o},t}();function Zi(t,e,n){if(t&&_e(e,t.type)>=0){var r=n.getData().tree.root,o=t.targetNode;if(Ie(o)&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var a=t.targetNodeId;if(null!=a&&(o=r.getNodeById(a)))return{node:o}}}function Xi(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function Ji(t,e){var n=Xi(t);return _e(n,e)>=0}function Yi(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}function Qi(t){var e=t.getData().tree,n={};e.eachNode((function(e){for(var r=e;r&&r.depth>1;)r=r.parentNode;var o=Se(t.ecModel,r.name||r.dataIndex+"",n);e.setVisual("decal",o)}))}var ts=function(t){function e(e,n,r,o){var a=t.call(this)||this;a.z2=2,a.textConfig={inside:!0},pe(a).seriesIndex=n.seriesIndex;var i=new Te({z2:4,silent:e.getModel().get(["label","silent"])});return a.setTextContent(i),a.updateData(!0,e,n,r,o),a}return Et(e,t),e.prototype.updateData=function(t,e,n,r,o){this.node=e,e.piece=this,n=n||this._seriesModel,r=r||this._ecModel;var a=this;pe(a).dataIndex=e.dataIndex;var i=e.getModel(),s=i.getModel("emphasis"),l=e.getLayout(),u=Ae({},l);u.label=null;var c=e.getVisual("style");c.lineJoin="bevel";var d=e.getVisual("decal");d&&(c.decal=Me(d,o));var f=Ce(i.getModel("itemStyle"),u,!0);Ae(u,f),Rt(je,(function(t){var e=a.ensureState(t),n=i.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var r=Ce(n,u);r&&(e.shape=r)})),t?(a.setShape(u),a.shape.r=l.r0,De(a,{shape:{r:l.r}},n,e.dataIndex)):(Ee(a,{shape:u},n),Le(a)),a.useStyle(c),this._updateLabel(n);var p=i.getShallow("cursor");p&&a.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=r||this._ecModel;var h=s.get("focus"),v="relative"===h?Pe(e.getAncestorsIndices(),e.getDescendantIndices()):"ancestor"===h?e.getAncestorsIndices():"descendant"===h?e.getDescendantIndices():h;Re(this,v,s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),r=n.getModel("label"),o=this.node.getLayout(),a=o.endAngle-o.startAngle,i=(o.startAngle+o.endAngle)/2,s=Math.cos(i),l=Math.sin(i),u=this,c=u.getTextContent(),d=this.node.dataIndex,f=r.get("minAngle")/180*Math.PI,p=r.get("show")&&!(null!=f&&Math.abs(a)<f);function h(t,e){var n=t.get(e);return null==n?r.get(e):n}c.ignore=!p,Rt(Ne,(function(r){var f="normal"===r?n.getModel("label"):n.getModel([r,"label"]),p="normal"===r,v=p?c:c.ensureState(r),g=t.getFormattedLabel(d,r);p&&(g=g||e.node.name),v.style=ke(f,{},null,"normal"!==r,!0),g&&(v.style.text=g);var y=f.get("show");null==y||p||(v.ignore=!y);var m,b=h(f,"position"),x=p?u:u.states[r],w=x.style.fill;x.textConfig={outsideFill:"inherit"===f.get("color")?w:null,inside:"outside"!==b};var I=h(f,"distance")||0,_=h(f,"align"),S=h(f,"rotate"),T=.5*Math.PI,A=1.5*Math.PI,M=Oe("tangential"===S?Math.PI/2-i:i),C=M>T&&!Be(M-T)&&M<A;"outside"===b?(m=o.r+I,_=C?"right":"left"):_&&"center"!==_?"left"===_?(m=o.r0+I,_=C?"right":"left"):"right"===_&&(m=o.r-I,_=C?"left":"right"):(m=a===2*Math.PI&&0===o.r0?0:(o.r+o.r0)/2,_="center"),v.style.align=_,v.style.verticalAlign=h(f,"verticalAlign")||"middle",v.x=m*s+o.cx,v.y=m*l+o.cy;var j=0;"radial"===S?j=Oe(-i)+(C?Math.PI:0):"tangential"===S?j=Oe(Math.PI/2-i)+(C?Math.PI:0):Ve(S)&&(j=S*Math.PI/180),v.rotation=Oe(j)})),c.dirtyStyle()},e}(ze),es="sunburstRootToNode",ns="sunburstHighlight";var rs=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Et(e,t),e.prototype.render=function(t,e,n,r){var o=this;this.seriesModel=t,this.api=n,this.ecModel=e;var a=t.getData(),i=a.tree.root,s=t.getViewRoot(),l=this.group,u=t.get("renderLabelForZeroData"),c=[];s.eachNode((function(t){c.push(t)}));var d,f,p=this._oldChildren||[];!function(r,o){if(0===r.length&&0===o.length)return;function s(t){return t.getId()}function c(s,c){!function(r,o){u||!r||r.getValue()||(r=null);if(r!==i&&o!==i)if(o&&o.piece)r?(o.piece.updateData(!1,r,t,e,n),a.setItemGraphicEl(r.dataIndex,o.piece)):function(t){if(!t)return;t.piece&&(l.remove(t.piece),t.piece=null)}(o);else if(r){var s=new ts(r,t,e,n);l.add(s),a.setItemGraphicEl(r.dataIndex,s)}}(null==s?null:r[s],null==c?null:o[c])}new Fe(o,r,s,s).add(c).update(c).remove($e(c,null)).execute()}(c,p),d=i,(f=s).depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,d,t,e,n):(o.virtualPiece=new ts(d,t,e,n),l.add(o.virtualPiece)),f.piece.off("click"),o.virtualPiece.on("click",(function(t){o._rootToNode(f.parentNode)}))):o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null),this._initEvents(),this._oldChildren=c},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",(function(e){var n=!1;t.seriesModel.getViewRoot().eachNode((function(r){if(!n&&r.piece&&r.piece===e.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)t._rootToNode(r);else if("link"===o){var a=r.getModel(),i=a.get("link");if(i){var s=a.get("target",!0)||"_blank";Ge(i,s)}}n=!0}}))}))},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:es,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var r=t[0]-n.cx,o=t[1]-n.cy,a=Math.sqrt(r*r+o*o);return a<=n.r&&a>=n.r0}},e.type="sunburst",e}(ve),os=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return Et(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};as(n);var r=this._levelModels=ae(t.levels||[],(function(t){return new He(t,this,e)}),this),o=Ki.createTree(n,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=o.getNodeByDataIndex(e),a=r[n.depth];return a&&(t.parentModel=a),t}))}));return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=Yi(r,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){Qi(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(ue);function as(t){var e=0;Rt(t.children,(function(t){as(t);var n=t.value;ge(n)&&(n=n[0]),e+=n}));var n=t.value;ge(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),ge(t.value)?t.value[0]=n:t.value=n}var is=Math.PI/180;function ss(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.get("center"),r=t.get("radius");ge(r)||(r=[0,r]),ge(e)||(e=[e,e]);var o=n.getWidth(),a=n.getHeight(),i=Math.min(o,a),s=Ue(e[0],o),l=Ue(e[1],a),u=Ue(r[0],i/2),c=Ue(r[1],i/2),d=-t.get("startAngle")*is,f=t.get("minAngle")*is,p=t.getData().tree.root,h=t.getViewRoot(),v=h.depth,g=t.get("sort");null!=g&&ls(h,g);var y=0;Rt(h.children,(function(t){!isNaN(t.getValue())&&y++}));var m=h.getValue(),b=Math.PI/(m||y)*2,x=h.depth>0,w=h.height-(x?-1:1),I=(c-u)/(w||1),_=t.get("clockwise"),S=t.get("stillShowZeroSum"),T=_?1:-1,A=function(e,n){if(e){var r=n;if(e!==p){var o=e.getValue(),a=0===m&&S?b:o*b;a<f&&(a=f),r=n+T*a;var c=e.depth-v-(x?-1:1),d=u+I*c,h=u+I*(c+1),g=t.getLevelModel(e);if(g){var y=g.get("r0",!0),w=g.get("r",!0),M=g.get("radius",!0);null!=M&&(y=M[0],w=M[1]),null!=y&&(d=Ue(y,i/2)),null!=w&&(h=Ue(w,i/2))}e.setLayout({angle:a,startAngle:n,endAngle:r,clockwise:_,cx:s,cy:l,r0:d,r:h})}if(e.children&&e.children.length){var C=0;Rt(e.children,(function(t){C+=A(t,n+C)}))}return r-n}};if(x){var M=u,C=u+I,j=2*Math.PI;p.setLayout({angle:j,startAngle:d,endAngle:d+j,clockwise:_,cx:s,cy:l,r0:M,r:C})}A(h,d)}))}function ls(t,e){var n=t.children||[];t.children=function(t,e){if(we(e)){var n=ae(t,(function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}}));return n.sort((function(t,n){return e(t.params,n.params)})),ae(n,(function(e){return t[e.index]}))}var r="asc"===e;return t.sort((function(t,e){var n=(t.getValue()-e.getValue())*(r?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(r?-1:1):n}))}(n,e),n.length&&Rt(t.children,(function(t){ls(t,e)}))}function us(t){var e={};t.eachSeriesByType("sunburst",(function(t){var n=t.getData(),r=n.tree;r.eachNode((function(o){var a=o.getModel().getModel("itemStyle").getItemStyle();a.fill||(a.fill=function(t,n,r){for(var o=t;o&&o.depth>1;)o=o.parentNode;var a=n.getColorFromPalette(o.name||o.dataIndex+"",e);return t.depth>1&&Ie(a)&&(a=We(a,(t.depth-1)/(r-1)*.5)),a}(o,t,r.root.height));var i=n.ensureUniqueItemVisual(o.dataIndex,"style");Ae(i,a)}))}))}function cs(t){t.registerChartView(rs),t.registerSeriesModel(os),t.registerLayout($e(ss,"sunburst")),t.registerProcessor($e(At,"sunburst")),t.registerVisual(us),function(t){t.registerAction({type:es,update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){var r=Zi(t,[es],e);if(r){var o=e.getViewRoot();o&&(t.direction=Ji(o,r.node)?"rollUp":"drillDown"),e.resetViewRoot(r.node)}}))})),t.registerAction({type:ns,update:"none"},(function(t,e,n){t=Ae({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e){var n=Zi(t,[ns],e);n&&(t.dataIndex=n.node.dataIndex)})),n.dispatchAction(Ae(t,{type:"highlight"}))})),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(t,e,n){t=Ae({},t),n.dispatchAction(Ae(t,{type:"downplay"}))}))}(t)}var ds=qe.CMD;function fs(t,e){return Math.abs(t-e)<1e-5}function ps(t){var e,n,r,o,a,i,s,l,u,c,d,f,p,h,v,g,y,m,b,x,w,I,_,S,T=t.data,A=t.len(),M=[],C=0,j=0,D=0,E=0;function L(t,n){e&&e.length>2&&M.push(e),e=[t,n]}function P(t,n,r,o){fs(t,r)&&fs(n,o)||e.push(t,n,r,o,r,o)}for(var R=0;R<A;){var k=T[R++],O=1===R;switch(O&&(D=C=T[R],E=j=T[R+1],k!==ds.L&&k!==ds.C&&k!==ds.Q||(e=[D,E])),k){case ds.M:C=D=T[R++],j=E=T[R++],L(D,E);break;case ds.L:P(C,j,n=T[R++],r=T[R++]),C=n,j=r;break;case ds.C:e.push(T[R++],T[R++],T[R++],T[R++],C=T[R++],j=T[R++]);break;case ds.Q:n=T[R++],r=T[R++],o=T[R++],a=T[R++],e.push(C+2/3*(n-C),j+2/3*(r-j),o+2/3*(n-o),a+2/3*(r-a),o,a),C=o,j=a;break;case ds.A:var N=T[R++],z=T[R++],B=T[R++],V=T[R++],F=T[R++],$=T[R++]+F;R+=1;var G=!T[R++];n=Math.cos(F)*B+N,r=Math.sin(F)*V+z,O?L(D=n,E=r):P(C,j,n,r),C=Math.cos($)*B+N,j=Math.sin($)*V+z;for(var H=(G?-1:1)*Math.PI/2,U=F;G?U>$:U<$;U+=H){var W=G?Math.max(U+H,$):Math.min(U+H,$);i=U,s=W,l=N,u=z,c=B,d=V,f=void 0,p=void 0,h=void 0,v=void 0,g=void 0,y=void 0,m=void 0,b=void 0,x=void 0,w=void 0,I=void 0,_=void 0,S=void 0,f=Math.abs(s-i),p=4*Math.tan(f/4)/3,h=s<i?-1:1,v=Math.cos(i),g=Math.sin(i),y=Math.cos(s),m=Math.sin(s),b=v*c+l,x=g*d+u,w=y*c+l,I=m*d+u,_=c*p*h,S=d*p*h,e.push(b-_*g,x+S*v,w+_*m,I-S*y,w,I)}break;case ds.R:D=C=T[R++],E=j=T[R++],n=D+T[R++],r=E+T[R++],L(n,E),P(n,E,n,r),P(n,r,D,r),P(D,r,D,E),P(D,E,n,E);break;case ds.Z:e&&P(C,j,D,E),C=D,j=E}}return e&&e.length>2&&M.push(e),M}function hs(t,e,n,r,o,a,i,s,l,u){if(fs(t,n)&&fs(e,r)&&fs(o,i)&&fs(a,s))l.push(i,s);else{var c=2/u,d=c*c,f=i-t,p=s-e,h=Math.sqrt(f*f+p*p);f/=h,p/=h;var v=n-t,g=r-e,y=o-i,m=a-s,b=v*v+g*g,x=y*y+m*m;if(b<d&&x<d)l.push(i,s);else{var w=f*v+p*g,I=-f*y-p*m;if(b-w*w<d&&w>=0&&x-I*I<d&&I>=0)l.push(i,s);else{var _=[],S=[];Ke(t,n,o,i,.5,_),Ke(e,r,a,s,.5,S),hs(_[0],S[0],_[1],S[1],_[2],S[2],_[3],S[3],l,u),hs(_[4],S[4],_[5],S[5],_[6],S[6],_[7],S[7],l,u)}}}}function vs(t,e,n){var r=t[e],o=t[1-e],a=Math.abs(r/o),i=Math.ceil(Math.sqrt(a*n)),s=Math.floor(n/i);0===s&&(s=1,i=n);for(var l=[],u=0;u<i;u++)l.push(s);var c=n-i*s;if(c>0)for(u=0;u<c;u++)l[u%i]+=1;return l}function gs(t,e,n){for(var r=t.r0,o=t.r,a=t.startAngle,i=t.endAngle,s=Math.abs(i-a),l=s*o,u=o-r,c=l>Math.abs(u),d=vs([l,u],c?0:1,e),f=(c?s:u)/d.length,p=0;p<d.length;p++)for(var h=(c?u:s)/d[p],v=0;v<d[p];v++){var g={};c?(g.startAngle=a+f*p,g.endAngle=a+f*(p+1),g.r0=r+h*v,g.r=r+h*(v+1)):(g.startAngle=a+h*v,g.endAngle=a+h*(v+1),g.r0=r+f*p,g.r=r+f*(p+1)),g.clockwise=t.clockwise,g.cx=t.cx,g.cy=t.cy,n.push(g)}}function ys(t,e,n,r){return t*r-n*e}function ms(t,e,n,r,o,a,i,s){var l=n-t,u=r-e,c=i-o,d=s-a,f=ys(c,d,l,u);if(Math.abs(f)<1e-6)return null;var p=ys(t-o,e-a,c,d)/f;return p<0||p>1?null:new Qe(p*l+t,p*u+e)}function bs(t,e,n){var r=new Qe;Qe.sub(r,n,e),r.normalize();var o=new Qe;return Qe.sub(o,t,e),o.dot(r)}function xs(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function ws(t){var e=t.points,n=[],r=[];Ze(e,n,r);var o=new ce(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=o.width,i=o.height,s=o.x,l=o.y,u=new Qe,c=new Qe;return a>i?(u.x=c.x=s+a/2,u.y=l,c.y=l+i):(u.y=c.y=l+i/2,u.x=s,c.x=s+a),function(t,e,n){for(var r=t.length,o=[],a=0;a<r;a++){var i=t[a],s=t[(a+1)%r],l=ms(i[0],i[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&o.push({projPt:bs(l,e,n),pt:l,idx:a})}if(o.length<2)return[{points:t},{points:t}];o.sort((function(t,e){return t.projPt-e.projPt}));var u=o[0],c=o[o.length-1];if(c.idx<u.idx){var d=u;u=c,c=d}var f=[u.pt.x,u.pt.y],p=[c.pt.x,c.pt.y],h=[f],v=[p];for(a=u.idx+1;a<=c.idx;a++)xs(h,t[a].slice());for(xs(h,p),xs(h,f),a=c.idx+1;a<=u.idx+r;a++)xs(v,t[a%r].slice());return xs(v,f),xs(v,p),[{points:h},{points:v}]}(e,u,c)}function Is(t,e,n,r){if(1===n)r.push(e);else{var o=Math.floor(n/2),a=t(e);Is(t,a[0],o,r),Is(t,a[1],n-o,r)}return r}function _s(t,e){var n,r=[],o=t.shape;switch(t.type){case"rect":!function(t,e,n){for(var r=t.width,o=t.height,a=r>o,i=vs([r,o],a?0:1,e),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",d=t[s]/i.length,f=0;f<i.length;f++)for(var p=t[l]/i[f],h=0;h<i[f];h++){var v={};v[u]=f*d,v[c]=h*p,v[s]=d,v[l]=p,v.x+=t.x,v.y+=t.y,n.push(v)}}(o,e,r),n=Ye;break;case"sector":gs(o,e,r),n=ze;break;case"circle":gs({r0:0,r:o.r,startAngle:0,endAngle:2*Math.PI,cx:o.cx,cy:o.cy},e,r),n=ze;break;default:var a=t.getComputedTransform(),i=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=ae(function(t,e){var n=ps(t),r=[];e=e||1;for(var o=0;o<n.length;o++){var a=n[o],i=[],s=a[0],l=a[1];i.push(s,l);for(var u=2;u<a.length;){var c=a[u++],d=a[u++],f=a[u++],p=a[u++],h=a[u++],v=a[u++];hs(s,l,c,d,f,p,h,v,i,e),s=h,l=v}r.push(i)}return r}(t.getUpdatedPathProxy(),i),(function(t){return function(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}(t)})),l=s.length;if(0===l)Is(ws,{points:s[0]},e,r);else if(l===e)for(var u=0;u<l;u++)r.push({points:s[u]});else{var c=0,d=ae(s,(function(t){var e=[],n=[];Ze(t,e,n);var r=(n[1]-e[1])*(n[0]-e[0]);return c+=r,{poly:t,area:r}}));d.sort((function(t,e){return e.area-t.area}));var f=e;for(u=0;u<l;u++){var p=d[u];if(f<=0)break;var h=u===l-1?f:Math.ceil(p.area/c*e);h<0||(Is(ws,{points:p.poly},h,r),f-=h)}}n=Je}if(!n)return function(t,e){for(var n=[],r=0;r<e;r++)n.push(Xe(t));return n}(t,e);var v,g,y=[];for(u=0;u<r.length;u++){var m=new n;m.setShape(r[u]),v=t,(g=m).setStyle(v.style),g.z=v.z,g.z2=v.z2,g.zlevel=v.zlevel,y.push(m)}return y}function Ss(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var o=[],a=[],i=n<r?t:e,s=Math.min(n,r),l=Math.abs(r-n)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,d=[i[0],i[1]],f=l,p=2;p<s;){var h=i[p-2],v=i[p-1],g=i[p++],y=i[p++],m=i[p++],b=i[p++],x=i[p++],w=i[p++];if(f<=0)d.push(g,y,m,b,x,w);else{for(var I=Math.min(f,c-1)+1,_=1;_<=I;_++){var S=_/I;Ke(h,g,m,x,S,o),Ke(v,y,b,w,S,a),h=o[3],v=a[3],d.push(o[1],a[1],o[2],a[2],h,v),g=o[5],y=a[5],m=o[6],b=a[6]}f-=I-1}}return i===t?[d,e]:[t,d]}function Ts(t,e){for(var n=t.length,r=t[n-2],o=t[n-1],a=[],i=0;i<e.length;)a[i++]=r,a[i++]=o;return a}function As(t){for(var e=0,n=0,r=0,o=t.length,a=0,i=o-2;a<o;i=a,a+=2){var s=t[i],l=t[i+1],u=t[a],c=t[a+1],d=s*c-u*l;e+=d,n+=(s+u)*d,r+=(l+c)*d}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function Ms(t,e,n,r){for(var o=(t.length-2)/6,a=1/0,i=0,s=t.length,l=s-2,u=0;u<o;u++){for(var c=6*u,d=0,f=0;f<s;f+=2){var p=0===f?c:(c+f-2)%l+2,h=t[p]-n[0],v=t[p+1]-n[1],g=e[f]-r[0]-h,y=e[f+1]-r[1]-v;d+=g*g+y*y}d<a&&(a=d,i=u)}return i}function Cs(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function js(t){return t.__isCombineMorphing}var Ds="__mOriginal_";function Es(t,e,n){var r=Ds+e,o=t[r]||t[e];t[r]||(t[r]=t[e]);var a=n.replace,i=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=a?a.apply(this,e):o.apply(this,e),i&&i.apply(this,e),t}}function Ls(t,e){var n=Ds+e;t[n]&&(t[e]=t[n],t[n]=null)}function Ps(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;){var a=r[o],i=r[o+1];r[o++]=e[0]*a+e[2]*i+e[4],r[o++]=e[1]*a+e[3]*i+e[5]}}function Rs(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),o=function(t,e){for(var n,r,o,a=[],i=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],u=e[s],c=void 0,d=void 0;l?u?(r=c=(n=Ss(l,u))[0],o=d=n[1]):(d=Ts(o||l,l),c=l):(c=Ts(r||u,u),d=u),a.push(c),i.push(d)}return[a,i]}(ps(n),ps(r)),a=o[0],i=o[1],s=t.getComputedTransform(),l=e.getComputedTransform();s&&Ps(a,s),l&&Ps(i,l),Es(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var u=function(t,e,n,r){for(var o,a=[],i=0;i<t.length;i++){var s=t[i],l=e[i],u=As(s),c=As(l);null==o&&(o=u[2]<0!=c[2]<0);var d=[],f=[],p=0,h=1/0,v=[],g=s.length;o&&(s=Cs(s));for(var y=6*Ms(s,l,u,c),m=g-2,b=0;b<m;b+=2){var x=(y+b)%m+2;d[b+2]=s[x]-u[0],d[b+3]=s[x+1]-u[1]}d[0]=s[y]-u[0],d[1]=s[y+1]-u[1];for(var w=r/n,I=-r/2;I<=r/2;I+=w){var _=Math.sin(I),S=Math.cos(I),T=0;for(b=0;b<s.length;b+=2){var A=d[b],M=d[b+1],C=l[b]-c[0],j=l[b+1]-c[1],D=C*S-j*_,E=C*_+j*S;v[b]=D,v[b+1]=E;var L=D-A,P=E-M;T+=L*L+P*P}if(T<h){h=T,p=I;for(var R=0;R<v.length;R++)f[R]=v[R]}}a.push({from:d,to:f,fromCp:u,toCp:c,rotation:-p})}return a}(a,i,10,Math.PI),c=[];Es(e,"buildPath",{replace:function(t){for(var n=e.__morphT,r=1-n,o=[],a=0;a<u.length;a++){var i=u[a],s=i.from,l=i.to,d=i.rotation*n,f=i.fromCp,p=i.toCp,h=Math.sin(d),v=Math.cos(d);tn(o,f,p,n);for(var g=0;g<s.length;g+=2){var y=s[g],m=s[g+1],b=y*r+(_=l[g])*n,x=m*r+(S=l[g+1])*n;c[g]=b*v-x*h+o[0],c[g+1]=b*h+x*v+o[1]}var w=c[0],I=c[1];t.moveTo(w,I);for(g=2;g<s.length;){var _=c[g++],S=c[g++],T=c[g++],A=c[g++],M=c[g++],C=c[g++];w===_&&I===S&&T===M&&A===C?t.lineTo(M,C):t.bezierCurveTo(_,S,T,A,M,C),w=M,I=C}}}})}function ks(t,e,n){if(!t||!e)return e;var r=n.done,o=n.during;return Rs(t,e),e.__morphT=0,e.animateTo({__morphT:1},Vt({during:function(t){e.dirtyShape(),o&&o(t)},done:function(){Ls(e,"buildPath"),Ls(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),r&&r()}},n)),e}function Os(t,e,n,r,o,a){t=o===n?0:Math.round(32767*(t-n)/(o-n)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var i,s=0,l=32768;l>0;l/=2){var u=0,c=0;(t&l)>0&&(u=1),(e&l)>0&&(c=1),s+=l*l*(3*u^c),0===c&&(1===u&&(t=l-1-t,e=l-1-e),i=t,t=e,e=i)}return s}function Ns(t){var e=1/0,n=1/0,r=-1/0,o=-1/0,a=ae(t,(function(t){var a=t.getBoundingRect(),i=t.getComputedTransform(),s=a.x+a.width/2+(i?i[4]:0),l=a.y+a.height/2+(i?i[5]:0);return e=Math.min(s,e),n=Math.min(l,n),r=Math.max(s,r),o=Math.max(l,o),[s,l]}));return ae(a,(function(a,i){return{cp:a,z:Os(a[0],a[1],e,n,r,o),path:t[i]}})).sort((function(t,e){return t.z-e.z})).map((function(t){return t.path}))}function zs(t){return _s(t.path,t.count)}function Bs(t){return ge(t[0])}function Vs(t,e){for(var n=[],r=t.length,o=0;o<r;o++)n.push({one:t[o],many:[]});for(o=0;o<e.length;o++){var a=e[o].length,i=void 0;for(i=0;i<a;i++)n[i%r].many.push(e[o][i])}var s=0;for(o=r-1;o>=0;o--)if(!n[o].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}a=l.length;var u=Math.ceil(a/2);n[o].many=l.slice(u,a),n[s].many=l.slice(0,u),s++}return n}var Fs={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),r=0;r<t.count;r++){var o=Xe(t.path);o.setStyle("opacity",n),e.push(o)}return e},split:null};function $s(t,e,n,r,o,a){if(t.length&&e.length){var i=nn("update",r,o);if(i&&i.duration>0){var s,l,u=r.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},i);Bs(t)&&(s=t,l=e),Bs(e)&&(s=e,l=t);for(var d=s?s===t:t.length>e.length,f=s?Vs(l,s):Vs(d?e:t,[d?t:e]),p=0,h=0;h<f.length;h++)p+=f[h].many.length;var v=0;for(h=0;h<f.length;h++)g(f[h],d,v,p),v+=f[h].many.length}}function g(t,e,r,o,i){var s=t.many,l=t.one;if(1!==s.length||i)for(var d=Vt({dividePath:Fs[n],individualDelay:u&&function(t,e,n,a){return u(t+r,o)}},c),f=e?function(t,e,n){var r=[];!function t(e){for(var n=0;n<e.length;n++){var o=e[n];js(o)?t(o.childrenRef()):o instanceof de&&r.push(o)}}(t);var o=r.length;if(!o)return{fromIndividuals:[],toIndividuals:[],count:0};var a=(n.dividePath||zs)({path:e,count:o});if(a.length!==o)return{fromIndividuals:[],toIndividuals:[],count:0};r=Ns(r),a=Ns(a);for(var i=n.done,s=n.during,l=n.individualDelay,u=new en,c=0;c<o;c++){var d=r[c],f=a[c];f.parent=e,f.copyTransform(u),l||Rs(d,f)}function p(t){for(var e=0;e<a.length;e++)a[e].addSelfToZr(t)}function h(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,Ls(e,"addSelfToZr"),Ls(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return a},Es(e,"addSelfToZr",{after:function(t){p(t)}}),Es(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<a.length;e++)a[e].removeSelfFromZr(t)}});var v=a.length;if(l){var g=v,y=function(){0==--g&&(h(),i&&i())};for(c=0;c<v;c++){var m=l?Vt({delay:(n.delay||0)+l(c,v,r[c],a[c]),done:y},n):n;ks(r[c],a[c],m)}}else e.__morphT=0,e.animateTo({__morphT:1},Vt({during:function(t){for(var n=0;n<v;n++){var r=a[n];r.__morphT=e.__morphT,r.dirtyShape()}s&&s(t)},done:function(){h();for(var e=0;e<t.length;e++)Ls(t[e],"updateTransform");i&&i()}},n));return e.__zr&&p(e.__zr),{fromIndividuals:r,toIndividuals:a,count:v}}(s,l,d):function(t,e,n){var r=e.length,o=[],a=n.dividePath||zs;if(js(t)){!function t(e){for(var n=0;n<e.length;n++){var r=e[n];js(r)?t(r.childrenRef()):r instanceof de&&o.push(r)}}(t.childrenRef());var i=o.length;if(i<r)for(var s=0,l=i;l<r;l++)o.push(Xe(o[s++%i]));o.length=r}else{o=a({path:t,count:r});var u=t.getComputedTransform();for(l=0;l<o.length;l++)o[l].setLocalTransform(u);if(o.length!==r)return{fromIndividuals:[],toIndividuals:[],count:0}}o=Ns(o),e=Ns(e);var c=n.individualDelay;for(l=0;l<r;l++){var d=c?Vt({delay:(n.delay||0)+c(l,r,o[l],e[l])},n):n;ks(o[l],e[l],d)}return{fromIndividuals:o,toIndividuals:e,count:e.length}}(l,s,d),p=f.fromIndividuals,h=f.toIndividuals,v=p.length,y=0;y<v;y++){m=u?Vt({delay:u(y,v)},c):c;a(p[y],h[y],e?s[y]:t.one,e?t.one:s[y],m)}else{var m,b=e?s[0]:l,x=e?l:s[0];if(js(b))g({many:[b],one:x},!0,r,o,!0);else ks(b,x,m=u?Vt({delay:u(r,o)},c):c),a(b,x,b,x,m)}}}function Gs(t){if(!t)return[];if(ge(t)){for(var e=[],n=0;n<t.length;n++)e.push(Gs(t[n]));return e}var r=[];return t.traverse((function(t){t instanceof de&&!t.disableMorphing&&!t.invisible&&!t.ignore&&r.push(t)})),r}var Hs=an();function Us(t,e,n,r){var o=function(t,e){for(var n=t.dimensions,r=0;r<n.length;r++){var o=t.getDimensionInfo(n[r]);if(o&&0===o.otherDims[e])return n[r]}}(t,r?"itemChildGroupId":"itemGroupId");if(o){var a=function(t,e,n){var r=t.getDimensionInfo(n),o=r&&r.ordinalMeta;if(r){var a=t.get(r.name,e);return o&&o.categories[a]||a+""}}(t,e,o);return a}var i=t.getRawDataItem(e),s=r?"childGroupId":"groupId";return i&&i[s]?i[s]+"":r?void 0:n||t.getId(e)}function Ws(t){var e=[];return Rt(t,(function(t){var n=t.data,r=t.dataGroupId;if(!(n.count()>1e4))for(var o=n.getIndices(),a=0;a<o.length;a++)e.push({data:n,groupId:Us(n,a,r,!1),childGroupId:Us(n,a,r,!0),divide:t.divide,dataIndex:a})})),e}function qs(t,e,n){t.traverse((function(t){t instanceof de&&De(t,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})}))}function Ks(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function Zs(t){t.stopAnimation(),t.isGroup&&t.traverse((function(t){t.stopAnimation()}))}function Xs(t,e,n){var r=Ws(t),o=Ws(e);function a(t,e,n,r,o){(n||t)&&e.animateFrom({style:n&&n!==t?Ae(Ae({},n.style),t.style):t.style},o)}var i=!1,s=0,l=sn(),u=sn();r.forEach((function(t){t.groupId&&l.set(t.groupId,!0),t.childGroupId&&u.set(t.childGroupId,!0)}));for(var c=0;c<o.length;c++){var d=o[c].groupId;if(u.get(d)){s=1;break}var f=o[c].childGroupId;if(f&&l.get(f)){s=2;break}}function p(t,e){return function(n){var r=n.data,o=n.dataIndex;return e?r.getId(o):t?1===s?n.childGroupId:n.groupId:2===s?n.childGroupId:n.groupId}}var h=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++){var o=t[r],a=e[r];if(o.data.getId(o.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}(r,o),v={};if(!h)for(c=0;c<o.length;c++){var g=o[c],y=g.data.getItemGraphicEl(g.dataIndex);y&&(v[y.id]=!0)}function m(t,e){var n=r[e],s=o[t],l=s.data.hostModel,u=n.data.getItemGraphicEl(n.dataIndex),c=s.data.getItemGraphicEl(s.dataIndex);u!==c?u&&v[u.id]||c&&(Zs(c),u?(Zs(u),Ks(u),i=!0,$s(Gs(u),Gs(c),s.divide,l,t,a)):qs(c,l,t)):c&&function(t,e,n){var r=nn("update",n,e);r&&t.traverse((function(t){if(t instanceof un){var e=cn(t);e&&t.animateFrom({style:e},r)}}))}(c,s.dataIndex,l)}new Fe(r,o,p(!0,h),p(!1,h),null,"multiple").update(m).updateManyToOne((function(t,e){var n=o[t],s=n.data,l=s.hostModel,u=s.getItemGraphicEl(n.dataIndex),c=ln(ae(e,(function(t){return r[t].data.getItemGraphicEl(r[t].dataIndex)})),(function(t){return t&&t!==u&&!v[t.id]}));u&&(Zs(u),c.length?(Rt(c,(function(t){Zs(t),Ks(t)})),i=!0,$s(Gs(c),Gs(u),n.divide,l,t,a)):qs(u,l,n.dataIndex))})).updateOneToMany((function(t,e){var n=r[e],s=n.data.getItemGraphicEl(n.dataIndex);if(!s||!v[s.id]){var l=ln(ae(t,(function(t){return o[t].data.getItemGraphicEl(o[t].dataIndex)})),(function(t){return t&&t!==s})),u=o[t[0]].data.hostModel;l.length&&(Rt(l,(function(t){return Zs(t)})),s?(Zs(s),Ks(s),i=!0,$s(Gs(s),Gs(l),n.divide,u,t[0],a)):Rt(l,(function(e){return qs(e,u,t[0])})))}})).updateManyToMany((function(t,e){new Fe(e,t,(function(t){return r[t].data.getId(r[t].dataIndex)}),(function(t){return o[t].data.getId(o[t].dataIndex)})).update((function(n,r){m(t[n],e[r])})).execute()})).execute(),i&&Rt(e,(function(t){var e=t.data.hostModel,r=e&&n.getViewOfSeriesModel(e),o=nn("update",e,0);r&&e.isAnimationEnabled()&&o&&o.duration>0&&r.group.traverse((function(t){t instanceof de&&!t.animators.length&&t.animateFrom({style:{opacity:0}},o)}))}))}function Js(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function Ys(t){return ge(t)?t.sort().join(","):t}function Qs(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function tl(t,e){for(var n=0;n<t.length;n++){if(null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id)return n}}function el(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){Rt(rn(n.seriesTransition),(function(t){Rt(rn(t.to),(function(t){for(var e=n.updatedSeries,r=0;r<e.length;r++)(null!=t.seriesIndex&&t.seriesIndex===e[r].seriesIndex||null!=t.seriesId&&t.seriesId===e[r].id)&&(e[r][on]=!0)}))}))})),t.registerUpdateLifecycle("series:transition",(function(t,e,n){var r=Hs(e);if(r.oldSeries&&n.updatedSeries&&n.optionChanged){var o=n.seriesTransition;if(o)Rt(rn(o),(function(t){!function(t,e,n,r){var o=[],a=[];Rt(rn(t.from),(function(t){var n=tl(e.oldSeries,t);n>=0&&o.push({dataGroupId:e.oldDataGroupIds[n],data:e.oldData[n],divide:Qs(e.oldData[n]),groupIdDim:t.dimension})})),Rt(rn(t.to),(function(t){var r=tl(n.updatedSeries,t);if(r>=0){var o=n.updatedSeries[r].getData();a.push({dataGroupId:e.oldDataGroupIds[r],data:o,divide:Qs(o),groupIdDim:t.dimension})}})),o.length>0&&a.length>0&&Xs(o,a,r)}(t,r,n,e)}));else{var a=function(t,e){var n=sn(),r=sn(),o=sn();return Rt(t.oldSeries,(function(e,n){var a=t.oldDataGroupIds[n],i=t.oldData[n],s=Js(e),l=Ys(s);r.set(l,{dataGroupId:a,data:i}),ge(s)&&Rt(s,(function(t){o.set(t,{key:l,dataGroupId:a,data:i})}))})),Rt(e.updatedSeries,(function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.get("dataGroupId"),a=t.getData(),i=Js(t),s=Ys(i),l=r.get(s);if(l)n.set(s,{oldSeries:[{dataGroupId:l.dataGroupId,divide:Qs(l.data),data:l.data}],newSeries:[{dataGroupId:e,divide:Qs(a),data:a}]});else if(ge(i)){var u=[];Rt(i,(function(t){var e=r.get(t);e.data&&u.push({dataGroupId:e.dataGroupId,divide:Qs(e.data),data:e.data})})),u.length&&n.set(s,{oldSeries:u,newSeries:[{dataGroupId:e,data:a,divide:Qs(a)}]})}else{var c=o.get(i);if(c){var d=n.get(c.key);d||(d={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:Qs(c.data)}],newSeries:[]},n.set(c.key,d)),d.newSeries.push({dataGroupId:e,data:a,divide:Qs(a)})}}}})),n}(r,n);Rt(a.keys(),(function(t){var n=a.get(t);Xs(n.oldSeries,n.newSeries,e)}))}Rt(n.updatedSeries,(function(t){t[on]&&(t[on]=!1)}))}for(var i=t.getSeries(),s=r.oldSeries=[],l=r.oldDataGroupIds=[],u=r.oldData=[],c=0;c<i.length;c++){var d=i[c].getData();d.count()<1e4&&(s.push(i[c]),l.push(i[c].get("dataGroupId")),u.push(d))}}))}export{vi as E,Ki as T,xi as _,Ji as a,cs as b,Bi as c,el as d,Qi as e,hi as f,Xi as g,Wi as i,Vi as p,Zi as r,Yi as w};
