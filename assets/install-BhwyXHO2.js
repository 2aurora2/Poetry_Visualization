import{_ as e,av as t,Q as a,al as n,bu as o,bR as i,bS as r,bt as s,bT as l,aM as u,h as d,aK as c,bU as p,b2 as h,bV as g,$ as f,L as y,bW as m,bX as v,R as _,a7 as x,e as I,a8 as b,b6 as S,a6 as L,b7 as w,bd as M,V as D,ab as T,b4 as N,b5 as A,bY as E,G as V,bP as C,bZ as R,T as P,bf as z,ag as k,a3 as B,b8 as X,b_ as Y,b$ as O,c0 as G,c1 as j,c2 as F,c3 as H,aI as Z,ap as U,q as W,c4 as K,c5 as q,c6 as $,U as Q,C as J,aA as ee,k as te,d as ae,W as ne,P as oe,c7 as ie,a0 as re,X as se,Y as le,bK as ue,ak as de,bb as ce,c8 as pe,M as he,S as ge,aS as fe}from"./vintage-C7obykgs.js";import{S as ye,l as me}from"./linkSeriesData-Ci6zc3W4.js";import{e as ve,o as _e}from"./install-fLrLa5PJ.js";var xe=o,Ie=function(u){function d(e){var a=u.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new t,a._rawTransformable=new t,a.name=e,a}return e(d,u),d.prototype.setBoundingRect=function(e,t,n,o){return this._rect=new a(e,t,n,o),this._rect},d.prototype.getBoundingRect=function(){return this._rect},d.prototype.setViewRect=function(e,t,n,o){this._transformTo(e,t,n,o),this._viewRect=new a(e,t,n,o)},d.prototype._transformTo=function(e,t,n,o){var i=this.getBoundingRect(),r=this._rawTransformable;r.transform=i.calculateTransform(new a(e,t,n,o));var s=r.parent;r.parent=null,r.decomposeTransform(),r.parent=s,this._updateTransform()},d.prototype.setCenter=function(e,t){e&&(this._center=[n(e[0],t.getWidth()),n(e[1],t.getHeight())],this._updateCenterAndZoom())},d.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},d.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},d.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},d.prototype.getZoom=function(){return this._zoom||1},d.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},d.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,a=this.getDefaultCenter(),n=this.getCenter(),i=this.getZoom();n=o([],n,e),a=o([],a,e),t.originX=n[0],t.originY=n[1],t.x=a[0]-n[0],t.y=a[1]-n[1],t.scaleX=t.scaleY=i,this._updateTransform()},d.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),i(this.transform||(this.transform=[]),t.transform||r()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],s(this.invTransform,this.transform),this.decomposeTransform()},d.prototype.getTransformInfo=function(){var e=this._rawTransformable,a=this._roamTransformable,n=new t;return n.transform=a.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},d.prototype.getViewRect=function(){return this._viewRect},d.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},d.prototype.dataToPoint=function(e,t,a){var n=t?this._rawTransform:this.transform;return a=a||[],n?xe(a,e,n):l(a,e)},d.prototype.pointToData=function(e){var t=this.invTransform;return t?xe([],e,t):[e[0],e[1]]},d.prototype.convertToPixel=function(e,t,a){var n=be(t);return n===this?n.dataToPoint(a):null},d.prototype.convertFromPixel=function(e,t,a){var n=be(t);return n===this?n.pointToData(a):null},d.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},d.dimensions=["x","y"],d}(t);function be(e){var t=e.seriesModel;return t?t.coordinateSystem:null}function Se(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}var Le=function(t){function a(e){var a=t.call(this)||this;a._zr=e;var n=u(a._mousedownHandler,a),o=u(a._mousemoveHandler,a),i=u(a._mouseupHandler,a),r=u(a._mousewheelHandler,a),s=u(a._pinchHandler,a);return a.enable=function(t,a){this.disable(),this._opt=d(c(a)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",i)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",s))},a.disable=function(){e.off("mousedown",n),e.off("mousemove",o),e.off("mouseup",i),e.off("mousewheel",r),e.off("pinch",s)},a}return e(a,t),a.prototype.isDragging=function(){return this._dragging},a.prototype.isPinching=function(){return this._pinching},a.prototype.setPointerChecker=function(e){this.pointerChecker=e},a.prototype.dispose=function(){this.disable()},a.prototype._mousedownHandler=function(e){if(!p(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var a=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,a,n)&&(this._x=a,this._y=n,this._dragging=!0)}},a.prototype._mousemoveHandler=function(e){if(this._dragging&&De("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!ve(this._zr,"globalPan")){var t=e.offsetX,a=e.offsetY,n=this._x,o=this._y,i=t-n,r=a-o;this._x=t,this._y=a,this._opt.preventDefaultMouseMove&&h(e.event),Me(this,"pan","moveOnMouseMove",e,{dx:i,dy:r,oldX:n,oldY:o,newX:t,newY:a,isAvailableBehavior:null})}},a.prototype._mouseupHandler=function(e){p(e)||(this._dragging=!1)},a.prototype._mousewheelHandler=function(e){var t=De("zoomOnMouseWheel",e,this._opt),a=De("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,o=Math.abs(n),i=e.offsetX,r=e.offsetY;if(0!==n&&(t||a)){if(t){var s=o>3?1.4:o>1?1.2:1.1;we(this,"zoom","zoomOnMouseWheel",e,{scale:n>0?s:1/s,originX:i,originY:r,isAvailableBehavior:null})}if(a){var l=Math.abs(n);we(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(n>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:i,originY:r,isAvailableBehavior:null})}}},a.prototype._pinchHandler=function(e){ve(this._zr,"globalPan")||we(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},a}(g);function we(e,t,a,n,o){e.pointerChecker&&e.pointerChecker(n,o.originX,o.originY)&&(h(n.event),Me(e,t,a,n,o))}function Me(e,t,a,n,o){o.isAvailableBehavior=u(De,null,a,n),e.trigger(t,o)}function De(e,t,a){var n=a[e];return!e||n&&(!f(n)||t.event[n+"Key"])}var Te=y.prototype,Ne=m.prototype,Ae=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}();function Ee(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}!function(t){function a(){return null!==t&&t.apply(this,arguments)||this}e(a,t)}(Ae);var Ve=function(t){function a(e){var a=t.call(this,e)||this;return a.type="ec-line",a}return e(a,t),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new Ae},a.prototype.buildPath=function(e,t){Ee(t)?Te.buildPath.call(this,e,t):Ne.buildPath.call(this,e,t)},a.prototype.pointAt=function(e){return Ee(this.shape)?Te.pointAt.call(this,e):Ne.pointAt.call(this,e)},a.prototype.tangentAt=function(e){var t=this.shape,a=Ee(t)?[t.x2-t.x1,t.y2-t.y1]:Ne.tangentAt.call(this,e);return v(a,a)},a}(_),Ce=["fromSymbol","toSymbol"];function Re(e){return"_"+e+"Type"}function Pe(e,t,a){var n=t.getItemVisual(a,e);if(!n||"none"===n)return n;var o=t.getItemVisual(a,e+"Size"),i=t.getItemVisual(a,e+"Rotate"),r=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=C(o);return n+l+R(r||0,l)+(i||"")+(s||"")}function ze(e,t,a){var n=t.getItemVisual(a,e);if(n&&"none"!==n){var o=t.getItemVisual(a,e+"Size"),i=t.getItemVisual(a,e+"Rotate"),r=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=C(o),u=R(r||0,l),d=P(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return d.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,d.name=e,d}}function ke(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var a=t[2];a?(e.cpx1=a[0],e.cpy1=a[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Be=function(t){function a(e,a,n){var o=t.call(this)||this;return o._createLine(e,a,n),o}return e(a,t),a.prototype._createLine=function(e,t,a){var n=e.hostModel,o=function(e){var t=new Ve({name:"line",subPixelOptimize:!0});return ke(t.shape,e),t}(e.getItemLayout(t));o.shape.percent=0,x(o,{shape:{percent:1}},n,t),this.add(o),I(Ce,(function(a){var n=ze(a,e,t);this.add(n),this[Re(a)]=Pe(a,e,t)}),this),this._updateCommonStl(e,t,a)},a.prototype.updateData=function(e,t,a){var n=e.hostModel,o=this.childOfName("line"),i=e.getItemLayout(t),r={shape:{}};ke(r.shape,i),b(o,r,n,t),I(Ce,(function(a){var n=Pe(a,e,t),o=Re(a);if(this[o]!==n){this.remove(this.childOfName(a));var i=ze(a,e,t);this.add(i)}this[o]=n}),this),this._updateCommonStl(e,t,a)},a.prototype.getLinePath=function(){return this.childAt(0)},a.prototype._updateCommonStl=function(e,t,a){var n=e.hostModel,o=this.childOfName("line"),i=a&&a.emphasisLineStyle,r=a&&a.blurLineStyle,s=a&&a.selectLineStyle,l=a&&a.labelStatesModels,u=a&&a.emphasisDisabled,d=a&&a.focus,c=a&&a.blurScope;if(!a||e.hasItemOption){var p=e.getItemModel(t),h=p.getModel("emphasis");i=h.getModel("lineStyle").getLineStyle(),r=p.getModel(["blur","lineStyle"]).getLineStyle(),s=p.getModel(["select","lineStyle"]).getLineStyle(),u=h.get("disabled"),d=h.get("focus"),c=h.get("blurScope"),l=S(p)}var g=e.getItemVisual(t,"style"),f=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=i,o.ensureState("blur").style=r,o.ensureState("select").style=s,I(Ce,(function(e){var t=this.childOfName(e);if(t){t.setColor(f),t.style.opacity=g.opacity;for(var a=0;a<L.length;a++){var n=L[a],i=o.getState(n);if(i){var r=i.style||{},s=t.ensureState(n),l=s.style||(s.style={});null!=r.stroke&&(l[t.__isEmptyBrush?"stroke":"fill"]=r.stroke),null!=r.opacity&&(l.opacity=r.opacity)}}t.markRedraw()}}),this);var y=n.getRawValue(t);w(this,l,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,a){return n.getFormattedLabel(t,a,e.dataType)}},inheritColor:f||"#000",defaultOpacity:g.opacity,defaultText:(null==y?e.getName(t):isFinite(y)?M(y):y)+""});var m=this.getTextContent();if(m){var v=l.normal;m.__align=m.style.align,m.__verticalAlign=m.style.verticalAlign,m.__position=v.get("position")||"middle";var _=v.get("distance");D(_)||(_=[_,_]),m.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),T(this,d,c,u)},a.prototype.highlight=function(){N(this)},a.prototype.downplay=function(){A(this)},a.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},a.prototype.setLinePoints=function(e){var t=this.childOfName("line");ke(t.shape,e),t.dirty()},a.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),a=e.childOfName("toSymbol"),n=e.getTextContent();if(t||a||n&&!n.ignore){for(var o=1,i=this.parent;i;)i.scaleX&&(o/=i.scaleX),i=i.parent;var r=e.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,l=r.pointAt(0),u=r.pointAt(s),d=E([],u,l);if(v(d,d),t&&(t.setPosition(l),L(t,0),t.scaleX=t.scaleY=o*s,t.markRedraw()),a&&(a.setPosition(u),L(a,1),a.scaleX=a.scaleY=o*s,a.markRedraw()),n&&!n.ignore){n.x=n.y=0,n.originX=n.originY=0;var c=void 0,p=void 0,h=n.__labelDistance,g=h[0]*o,f=h[1]*o,y=s/2,m=r.tangentAt(y),_=[m[1],-m[0]],x=r.pointAt(y);_[1]>0&&(_[0]=-_[0],_[1]=-_[1]);var I=m[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var b=-Math.atan2(m[1],m[0]);u[0]<l[0]&&(b=Math.PI+b),n.rotation=b}var S=void 0;switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":S=-f,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":S=f,p="top";break;default:S=0,p="middle"}switch(n.__position){case"end":n.x=d[0]*g+u[0],n.y=d[1]*f+u[1],c=d[0]>.8?"left":d[0]<-.8?"right":"center",p=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":n.x=-d[0]*g+l[0],n.y=-d[1]*f+l[1],c=d[0]>.8?"right":d[0]<-.8?"left":"center",p=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":n.x=g*I+l[0],n.y=l[1]+S,c=m[0]<0?"right":"left",n.originX=-g*I,n.originY=-S;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":n.x=x[0],n.y=x[1]+S,c="center",n.originY=-S;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":n.x=-g*I+u[0],n.y=u[1]+S,c=m[0]>=0?"right":"left",n.originX=g*I,n.originY=-S}n.scaleX=n.scaleY=o,n.setStyle({verticalAlign:n.__verticalAlign||p,align:n.__align||c})}}}function L(e,t){var a=e.__specifiedRotation;if(null==a){var n=r.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(n[1],n[0]))}else e.attr("rotation",a)}},a}(V),Xe=function(){function e(e){this.group=new V,this._LineCtor=e||Be}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var a=this,n=a.group,o=a._lineData;a._lineData=e,o||n.removeAll();var i=Ye(e);e.diff(o).add((function(a){t._doAdd(e,a,i)})).update((function(a,n){t._doUpdate(o,e,n,a,i)})).remove((function(e){n.remove(o.getItemGraphicEl(e))})).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,a){t.updateLayout(e,a)}),this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ye(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function a(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var n=e.start;n<e.end;n++){if(Ge(t.getItemLayout(n))){var o=new this._LineCtor(t,n,this._seriesScope);o.traverse(a),this.group.add(o),t.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){z(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,a){if(Ge(e.getItemLayout(t))){var n=new this._LineCtor(e,t,a);e.setItemGraphicEl(t,n),this.group.add(n)}},e.prototype._doUpdate=function(e,t,a,n,o){var i=e.getItemGraphicEl(a);Ge(t.getItemLayout(n))?(i?i.updateData(t,n,o):i=new this._LineCtor(t,n,o),t.setItemGraphicEl(n,i),this.group.add(i)):this.group.remove(i)},e}();function Ye(e){var t=e.hostModel,a=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:S(t)}}function Oe(e){return isNaN(e[0])||isNaN(e[1])}function Ge(e){return e&&!Oe(e[0])&&!Oe(e[1])}var je=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}();function Fe(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),n=e.getGraph().data,o=a.mapArray(a.getName);n.filterSelf((function(e){var a=n.getItemModel(e).getShallow("category");if(null!=a){k(a)&&(a=o[a]);for(var i=0;i<t.length;i++)if(!t[i].isSelected(a))return!1}return!0}))}))}function He(e){var t={};e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),n=e.getData(),o={};a.each((function(n){var i=a.getName(n);o["ec-"+i]=n;var r=a.getItemModel(n),s=r.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(i,t)),a.setItemVisual(n,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var d=r.getShallow(l[u],!0);null!=d&&a.setItemVisual(n,l[u],d)}})),a.count()&&n.each((function(e){var t=n.getItemModel(e).getShallow("category");if(null!=t){f(t)&&(t=o["ec-"+t]);var i=a.getItemVisual(t,"style"),r=n.ensureUniqueItemVisual(e,"style");B(r,i);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++)n.setItemVisual(e,s[l],a.getItemVisual(t,s[l]))}}))}))}function Ze(e){return e instanceof Array||(e=[e,e]),e}function Ue(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),a=e.getEdgeData(),n=Ze(e.get("edgeSymbol")),o=Ze(e.get("edgeSymbolSize"));a.setVisual("fromSymbol",n&&n[0]),a.setVisual("toSymbol",n&&n[1]),a.setVisual("fromSymbolSize",o&&o[0]),a.setVisual("toSymbolSize",o&&o[1]),a.setVisual("style",e.getModel("lineStyle").getLineStyle()),a.each((function(e){var n=a.getItemModel(e),o=t.getEdgeByIndex(e),i=Ze(n.getShallow("symbol",!0)),r=Ze(n.getShallow("symbolSize",!0)),s=n.getModel("lineStyle").getLineStyle(),l=a.ensureUniqueItemVisual(e,"style");switch(B(l,s),l.stroke){case"source":var u=o.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=o.node2.getVisual("style");l.stroke=u&&u.fill}i[0]&&o.setVisual("fromSymbol",i[0]),i[1]&&o.setVisual("toSymbol",i[1]),r[0]&&o.setVisual("fromSymbolSize",r[0]),r[1]&&o.setVisual("toSymbolSize",r[1])}))}))}var We="--\x3e",Ke=function(e){return e.get("autoCurveness")||null},qe=function(e,t){var a=Ke(e),n=20,o=[];if(k(a))n=a;else if(D(a))return void(e.__curvenessList=a);t>n&&(n=t);var i=n%2?n+2:n+3;o=[];for(var r=0;r<i;r++)o.push((r%2?r+1:r)/10*(r%2?-1:1));e.__curvenessList=o},$e=function(e,t,a){var n=[e.id,e.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[a.uid,n,o].join(We)},Qe=function(e){var t=e.split(We);return[t[0],t[2],t[1]].join(We)},Je=function(e,t){var a=t.__edgeMap;return a[e]?a[e].length:0};function et(e,t,a,n){var o=Ke(t),i=D(o);if(!o)return null;var r=function(e,t){var a=$e(e.node1,e.node2,t);return t.__edgeMap[a]}(e,t);if(!r)return null;for(var s=-1,l=0;l<r.length;l++)if(r[l]===a){s=l;break}var u=function(e,t){return Je($e(e.node1,e.node2,t),t)+Je($e(e.node2,e.node1,t),t)}(e,t);qe(t,u),e.lineStyle=e.lineStyle||{};var d=$e(e.node1,e.node2,t),c=t.__curvenessList,p=i||u%2?0:1;if(r.isForward)return c[p+s];var h=Qe(d),g=Je(h,t),f=c[s+g+p];return n?i?o&&0===o[0]?(g+p)%2?f:-f:((g%2?0:1)+p)%2?f:-f:(g+p)%2?f:-f:c[s+g+p]}function tt(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var a=e.getGraph();a.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),at(a,e)}}function at(e,t){e.eachEdge((function(e,a){var n=X(e.getModel().get(["lineStyle","curveness"]),-et(e,t,a,!0),0),o=Y(e.node1.getLayout()),i=Y(e.node2.getLayout()),r=[o,i];+n&&r.push([(o[0]+i[0])/2-(o[1]-i[1])*n,(o[1]+i[1])/2-(i[0]-o[0])*n]),e.setLayout(r)}))}function nt(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),a=e.coordinateSystem;if(a&&"view"!==a.type){var n=e.getData(),o=[];I(a.dimensions,(function(e){o=o.concat(n.mapDimensionsAll(e))}));for(var i=0;i<n.count();i++){for(var r=[],s=!1,l=0;l<o.length;l++){var u=n.get(o[l],i);isNaN(u)||(s=!0),r.push(u)}s?n.setItemLayout(i,a.dataToPoint(r)):n.setItemLayout(i,[NaN,NaN])}at(n.graph,e)}else t&&"none"!==t||tt(e)}))}function ot(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=e.option.nodeScaleRatio,n=t.scaleX;return((t.getZoom()-1)*a+1)/n}function it(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var rt=Math.PI,st=[];function lt(e,t,a,n){var o=e.coordinateSystem;if(!o||"view"===o.type){var i=o.getBoundingRect(),r=e.getData(),s=r.graph,l=i.width/2+i.x,u=i.height/2+i.y,d=Math.min(i.width,i.height)/2,c=r.count();if(r.setLayout({cx:l,cy:u}),c){if(a){var p=o.pointToData(n),h=p[0],g=p[1],f=[h-l,g-u];v(f,f),O(f,f,d),a.setLayout([l+f[0],u+f[1]],!0),dt(a,e.get(["circular","rotateLabel"]),l,u)}ut[t](e,s,r,d,l,u,c),s.eachEdge((function(t,a){var n,o=X(t.getModel().get(["lineStyle","curveness"]),et(t,e,a),0),i=Y(t.node1.getLayout()),r=Y(t.node2.getLayout()),s=(i[0]+r[0])/2,d=(i[1]+r[1])/2;+o&&(n=[l*(o*=3)+s*(1-o),u*o+d*(1-o)]),t.setLayout([i,r,n])}))}}}var ut={value:function(e,t,a,n,o,i,r){var s=0,l=a.getSum("value"),u=2*Math.PI/(l||r);t.eachNode((function(e){var t=e.getValue("value"),a=u*(l?t:1)/2;s+=a,e.setLayout([n*Math.cos(s)+o,n*Math.sin(s)+i]),s+=a}))},symbolSize:function(e,t,a,n,o,i,r){var s=0;st.length=r;var l=ot(e);t.eachNode((function(e){var t=it(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var a=Math.asin(t/2/n);isNaN(a)&&(a=rt/2),st[e.dataIndex]=a,s+=2*a}));var u=(2*rt-s)/r/2,d=0;t.eachNode((function(e){var t=u+st[e.dataIndex];d+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([n*Math.cos(d)+o,n*Math.sin(d)+i]),d+=t}))}};function dt(e,t,a,n){var o=e.getGraphicEl();if(o){var i=e.getModel().get(["label","rotate"])||0,r=o.getSymbolPath();if(t){var s=e.getLayout(),l=Math.atan2(s[1]-n,s[0]-a);l<0&&(l=2*Math.PI+l);var u=s[0]<a;u&&(l-=Math.PI);var d=u?"left":"right";r.setTextConfig({rotation:-l,position:d,origin:"center"});var c=r.ensureState("emphasis");B(c.textConfig||(c.textConfig={}),{position:d})}else r.setTextConfig({rotation:i*=Math.PI/180})}}function ct(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&lt(e,"symbolSize")}))}var pt=H;function ht(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var a=e.preservedPoints||{},n=e.getGraph(),o=n.data,i=n.edgeData,r=e.getModel("force"),s=r.get("initLayout");e.preservedPoints?o.each((function(e){var t=o.getId(e);o.setItemLayout(e,a[t]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&lt(e,"value"):tt(e);var u=o.getDataExtent("value"),d=i.getDataExtent("value"),c=r.get("repulsion"),p=r.get("edgeLength"),h=D(c)?c:[c,c],g=D(p)?p:[p,p];g=[g[1],g[0]];var f=o.mapArray("value",(function(e,t){var a=o.getItemLayout(t),n=Z(e,u,h);return isNaN(n)&&(n=(h[0]+h[1])/2),{w:n,rep:n,fixed:o.getItemModel(t).get("fixed"),p:!a||isNaN(a[0])||isNaN(a[1])?null:a}})),y=i.mapArray("value",(function(t,a){var o=n.getEdgeByIndex(a),i=Z(t,d,g);isNaN(i)&&(i=(g[0]+g[1])/2);var r=o.getModel(),s=X(o.getModel().get(["lineStyle","curveness"]),-et(o,e,a,!0),0);return{n1:f[o.node1.dataIndex],n2:f[o.node2.dataIndex],d:i,curveness:s,ignoreForceLayout:r.get("ignoreForceLayout")}})),m=t.getBoundingRect(),_=function(e,t,a){for(var n=e,o=t,i=a.rect,r=i.width,s=i.height,u=[i.x+r/2,i.y+s/2],d=null==a.gravity?.1:a.gravity,c=0;c<n.length;c++){var p=n[c];p.p||(p.p=G(r*(Math.random()-.5)+u[0],s*(Math.random()-.5)+u[1])),p.pp=Y(p.p),p.edges=null}var h,g,f=null==a.friction?.6:a.friction,y=f;return{warmUp:function(){y=.8*f},setFixed:function(e){n[e].fixed=!0},setUnfixed:function(e){n[e].fixed=!1},beforeStep:function(e){h=e},afterStep:function(e){g=e},step:function(e){h&&h(n,o);for(var t=[],a=n.length,i=0;i<o.length;i++){var r=o[i];if(!r.ignoreForceLayout){var s=r.n1,c=r.n2;E(t,c.p,s.p);var p=j(t)-r.d,f=c.w/(s.w+c.w);isNaN(f)&&(f=0),v(t,t),!s.fixed&&pt(s.p,s.p,t,f*p*y),!c.fixed&&pt(c.p,c.p,t,-(1-f)*p*y)}}for(i=0;i<a;i++)(I=n[i]).fixed||(E(t,u,I.p),pt(I.p,I.p,t,d*y));for(i=0;i<a;i++){s=n[i];for(var m=i+1;m<a;m++){c=n[m],E(t,c.p,s.p),0===(p=j(t))&&(F(t,Math.random()-.5,Math.random()-.5),p=1);var _=(s.rep+c.rep)/p/p;!s.fixed&&pt(s.pp,s.pp,t,_),!c.fixed&&pt(c.pp,c.pp,t,-_)}}var x=[];for(i=0;i<a;i++){var I;(I=n[i]).fixed||(E(x,I.p,I.pp),pt(I.p,I.p,x,y),l(I.pp,I.p))}var b=(y*=.992)<.01;g&&g(n,o,b),e&&e(b)}}}(f,y,{rect:m,gravity:r.get("gravity"),friction:r.get("friction")});_.beforeStep((function(e,t){for(var a=0,o=e.length;a<o;a++)e[a].fixed&&l(e[a].p,n.getNodeByIndex(a).getLayout())})),_.afterStep((function(e,t,i){for(var r=0,s=e.length;r<s;r++)e[r].fixed||n.getNodeByIndex(r).setLayout(e[r].p),a[o.getId(r)]=e[r].p;for(r=0,s=t.length;r<s;r++){var u=t[r],d=n.getEdgeByIndex(r),c=u.n1.p,p=u.n2.p,h=d.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],l(h[0],c),l(h[1],p),+u.curveness&&(h[2]=[(c[0]+p[0])/2-(c[1]-p[1])*u.curveness,(c[1]+p[1])/2-(p[0]-c[0])*u.curveness]),d.setLayout(h)}})),e.forceLayout=_,e.preservedPoints=a,_.step()}else e.forceLayout=null}))}function gt(e,t){var a=[];return e.eachSeriesByType("graph",(function(e){var n=e.get("coordinateSystem");if(!n||"view"===n){var o=e.getData(),i=o.mapArray((function(e){var t=o.getItemModel(e);return[+t.get("x"),+t.get("y")]})),r=[],s=[];U(i,r,s),s[0]-r[0]==0&&(s[0]+=1,r[0]-=1),s[1]-r[1]==0&&(s[1]+=1,r[1]-=1);var l=(s[0]-r[0])/(s[1]-r[1]),u=function(e,t,a){var n=B(e.getBoxLayoutParams(),{aspect:a});return W(n,{width:t.getWidth(),height:t.getHeight()})}(e,t,l);isNaN(l)&&(r=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var d=s[0]-r[0],c=s[1]-r[1],p=u.width,h=u.height,g=e.coordinateSystem=new Ie;g.zoomLimit=e.get("scaleLimit"),g.setBoundingRect(r[0],r[1],d,c),g.setViewRect(u.x,u.y,p,h),g.setCenter(e.get("center"),t),g.setZoom(e.get("zoom")),a.push(g)}})),a}var ft=[],yt=[],mt=[],vt=q,_t=$,xt=Math.abs;function It(e,t,a){for(var n,o=e[0],i=e[1],r=e[2],s=1/0,l=a*a,u=.1,d=.1;d<=.9;d+=.1){ft[0]=vt(o[0],i[0],r[0],d),ft[1]=vt(o[1],i[1],r[1],d),(h=xt(_t(ft,t)-l))<s&&(s=h,n=d)}for(var c=0;c<32;c++){var p=n+u;yt[0]=vt(o[0],i[0],r[0],n),yt[1]=vt(o[1],i[1],r[1],n),mt[0]=vt(o[0],i[0],r[0],p),mt[1]=vt(o[1],i[1],r[1],p);var h=_t(yt,t)-l;if(xt(h)<.01)break;var g=_t(mt,t)-l;u/=2,h<0?g>=0?n+=u:n-=u:g>=0?n-=u:n+=u}return n}function bt(e,t){var a=[],n=K,o=[[],[],[]],i=[[],[]],r=[];t/=2,e.eachEdge((function(e,s){var u=e.getLayout(),d=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");u.__original||(u.__original=[Y(u[0]),Y(u[1])],u[2]&&u.__original.push(Y(u[2])));var p=u.__original;if(null!=u[2]){if(l(o[0],p[0]),l(o[1],p[2]),l(o[2],p[1]),d&&"none"!==d){var h=it(e.node1),g=It(o,p[0],h*t);n(o[0][0],o[1][0],o[2][0],g,a),o[0][0]=a[3],o[1][0]=a[4],n(o[0][1],o[1][1],o[2][1],g,a),o[0][1]=a[3],o[1][1]=a[4]}if(c&&"none"!==c){h=it(e.node2),g=It(o,p[1],h*t);n(o[0][0],o[1][0],o[2][0],g,a),o[1][0]=a[1],o[2][0]=a[2],n(o[0][1],o[1][1],o[2][1],g,a),o[1][1]=a[1],o[2][1]=a[2]}l(u[0],o[0]),l(u[1],o[2]),l(u[2],o[1])}else{if(l(i[0],p[0]),l(i[1],p[1]),E(r,i[1],i[0]),v(r,r),d&&"none"!==d){h=it(e.node1);H(i[0],i[0],r,h*t)}if(c&&"none"!==c){h=it(e.node2);H(i[1],i[1],r,-h*t)}l(u[0],i[0]),l(u[1],i[1])}}))}function St(e){return"view"===e.type}var Lt=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e}return e(a,t),a.prototype.init=function(e,t){var a=new ye,n=new Xe,o=this.group;this._controller=new Le(t.getZr()),this._controllerHost={target:o},o.add(a.group),o.add(n.group),this._symbolDraw=a,this._lineDraw=n,this._firstRender=!0},a.prototype.render=function(e,t,a){var n=this,o=e.coordinateSystem;this._model=e;var i=this._symbolDraw,r=this._lineDraw,s=this.group;if(St(o)){var l={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?s.attr(l):b(s,l,e)}bt(e.getGraph(),ot(e));var u=e.getData();i.updateData(u);var d=e.getEdgeData();r.updateData(d),this._updateNodeAndLinkScale(),this._updateController(e,t,a),clearTimeout(this._layoutTimeout);var c=e.forceLayout,p=e.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,p);var h=e.get("layout");u.graph.eachNode((function(t){var a=t.dataIndex,o=t.getGraphicEl(),i=t.getModel();if(o){o.off("drag").off("dragend");var r=i.get("draggable");r&&o.on("drag",(function(i){switch(h){case"force":c.warmUp(),!n._layouting&&n._startForceLayoutIteration(c,p),c.setFixed(a),u.setItemLayout(a,[o.x,o.y]);break;case"circular":u.setItemLayout(a,[o.x,o.y]),t.setLayout({fixed:!0},!0),lt(e,"symbolSize",t,[i.offsetX,i.offsetY]),n.updateLayout(e);break;default:u.setItemLayout(a,[o.x,o.y]),at(e.getGraph(),e),n.updateLayout(e)}})).on("dragend",(function(){c&&c.setUnfixed(a)})),o.setDraggable(r,!!i.get("cursor")),"adjacency"===i.get(["emphasis","focus"])&&(Q(o).focus=t.getAdjacentDataIndices())}})),u.graph.eachEdge((function(e){var t=e.getGraphicEl(),a=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===a&&(Q(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var g="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),f=u.getLayout("cx"),y=u.getLayout("cy");u.graph.eachNode((function(e){dt(e,g,f,y)})),this._firstRender=!1},a.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype._startForceLayoutIteration=function(e,t){var a=this;!function n(){e.step((function(e){a.updateLayout(a._model),(a._layouting=!e)&&(t?a._layoutTimeout=setTimeout(n,16):n())}))}()},a.prototype._updateController=function(e,t,a){var n=this,o=this._controller,i=this._controllerHost,r=this.group;o.setPointerChecker((function(t,n,o){var i=r.getBoundingRect();return i.applyTransform(r.transform),i.contain(n,o)&&!_e(t,a,e)})),St(e.coordinateSystem)?(o.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",(function(t){!function(e,t,a){var n=e.target;n.x+=t,n.y+=a,n.dirty()}(i,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){!function(e,t,a,n){var o=e.target,i=e.zoomLimit,r=e.zoom=e.zoom||1;if(r*=t,i){var s=i.min||0,l=i.max||1/0;r=Math.max(Math.min(l,r),s)}var u=r/e.zoom;e.zoom=r,o.x-=(a-o.x)*(u-1),o.y-=(n-o.y)*(u-1),o.scaleX*=u,o.scaleY*=u,o.dirty()}(i,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),n._updateNodeAndLinkScale(),bt(e.getGraph(),ot(e)),n._lineDraw.updateLayout(),a.updateLabelLayout()}))):o.disable()},a.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),a=ot(e);t.eachItemGraphicEl((function(e,t){e&&e.setSymbolScale(a)}))},a.prototype.updateLayout=function(e){bt(e.getGraph(),ot(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},a.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},a.type="graph",a}(J);function wt(e){return"_EC_"+e}var Mt=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var a=this._nodesMap;if(!a[wt(e)]){var n=new Dt(e,t);return n.hostGraph=this,this.nodes.push(n),a[wt(e)]=n,n}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[wt(e)]},e.prototype.addEdge=function(e,t,a){var n=this._nodesMap,o=this._edgesMap;if(k(e)&&(e=this.nodes[e]),k(t)&&(t=this.nodes[t]),e instanceof Dt||(e=n[wt(e)]),t instanceof Dt||(t=n[wt(t)]),e&&t){var i=e.id+"-"+t.id,r=new Tt(e,t,a);return r.hostGraph=this,this._directed&&(e.outEdges.push(r),t.inEdges.push(r)),e.edges.push(r),e!==t&&t.edges.push(r),this.edges.push(r),o[i]=r,r}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof Dt&&(e=e.id),t instanceof Dt&&(t=t.id);var a=this._edgesMap;return this._directed?a[e+"-"+t]:a[e+"-"+t]||a[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var a=this.nodes,n=a.length,o=0;o<n;o++)a[o].dataIndex>=0&&e.call(t,a[o],o)},e.prototype.eachEdge=function(e,t){for(var a=this.edges,n=a.length,o=0;o<n;o++)a[o].dataIndex>=0&&a[o].node1.dataIndex>=0&&a[o].node2.dataIndex>=0&&e.call(t,a[o],o)},e.prototype.breadthFirstTraverse=function(e,t,a,n){if(t instanceof Dt||(t=this._nodesMap[wt(t)]),t){for(var o="out"===a?"outEdges":"in"===a?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!e.call(n,t,null))for(var r=[t];r.length;){var s=r.shift(),l=s[o];for(i=0;i<l.length;i++){var u=l[i],d=u.node1===s?u.node2:u.node1;if(!d.__visited){if(e.call(n,d,s))return;r.push(d),d.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,a=this.nodes,n=this.edges,o=0,i=a.length;o<i;o++)a[o].dataIndex=-1;for(o=0,i=e.count();o<i;o++)a[e.getRawIndex(o)].dataIndex=o;t.filterSelf((function(e){var a=n[t.getRawIndex(e)];return a.node1.dataIndex>=0&&a.node2.dataIndex>=0}));for(o=0,i=n.length;o<i;o++)n[o].dataIndex=-1;for(o=0,i=t.count();o<i;o++)n[t.getRawIndex(o)].dataIndex=o},e.prototype.clone=function(){for(var t=new e(this._directed),a=this.nodes,n=this.edges,o=0;o<a.length;o++)t.addNode(a[o].id,a[o].dataIndex);for(o=0;o<n.length;o++){var i=n[o];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},e}(),Dt=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var a=this.edges[t];a.dataIndex<0||(e.edge.push(a.dataIndex),e.node.push(a.node1.dataIndex,a.node2.dataIndex))}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=ee(),t=ee(),a=0;a<this.edges.length;a++){var n=this.edges[a];if(!(n.dataIndex<0)){e.set(n.dataIndex,!0);for(var o=[n.node1],i=[n.node2],r=0;r<o.length;){var s=o[r];r++,t.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)e.set(s.inEdges[l].dataIndex,!0),o.push(s.inEdges[l].node1)}for(r=0;r<i.length;){var u=i[r];r++,t.set(u.dataIndex,!0);for(l=0;l<u.outEdges.length;l++)e.set(u.outEdges[l].dataIndex,!0),i.push(u.outEdges[l].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),Tt=function(){function e(e,t,a){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==a?-1:a}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=ee(),t=ee();e.set(this.dataIndex,!0);for(var a=[this.node1],n=[this.node2],o=0;o<a.length;){var i=a[o];o++,t.set(i.dataIndex,!0);for(var r=0;r<i.inEdges.length;r++)e.set(i.inEdges[r].dataIndex,!0),a.push(i.inEdges[r].node1)}for(o=0;o<n.length;){var s=n[o];o++,t.set(s.dataIndex,!0);for(r=0;r<s.outEdges.length;r++)e.set(s.outEdges[r].dataIndex,!0),n.push(s.outEdges[r].node2)}return{edge:e.keys(),node:t.keys()}},e}();function Nt(e,t){return{getValue:function(a){var n=this[e][t];return n.getStore().get(n.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,n){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,a,n)},getVisual:function(a){return this[e][t].getItemVisual(this.dataIndex,a)},setLayout:function(a,n){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,a,n)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function At(e,t,a,n,o){for(var i=new Mt(n),r=0;r<e.length;r++)i.addNode(ae(e[r].id,e[r].name,r),r);var s=[],l=[],u=0;for(r=0;r<t.length;r++){var d=t[r],c=d.source,p=d.target;i.addEdge(c,p,u)&&(l.push(d),s.push(ae(ne(d.id,null),c+" > "+p)),u++)}var h,g=a.get("coordinateSystem");if("cartesian2d"===g||"polar"===g)h=oe(e,a);else{var f=ie.get(g),y=f&&f.dimensions||[];re(y,"value")<0&&y.concat(["value"]);var m=se(e,{coordDimensions:y,encodeDefine:a.getEncode()}).dimensions;(h=new le(m,a)).initData(e)}var v=new le(["value"],a);return v.initData(l,s),o&&o(h,v),me({mainData:h,struct:i,structAttr:"graph",datas:{node:h,edge:v},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}te(Dt,Nt("hostGraph","data")),te(Tt,Nt("hostGraph","edgeData"));var Et=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments);var a=this;function n(){return a._categoriesData}this.legendVisualProvider=new je(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},a.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},a.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),ue(e,"edgeLabel",["show"])},a.prototype.getInitialData=function(e,t){var a=e.edges||e.links||[],n=e.data||e.nodes||[],o=this;Ke(i=this)&&(i.__curvenessList=[],i.__edgeMap={},qe(i));var i,r=At(n,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=o._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var a=de.prototype.getModel;function n(e,t){var n=a.call(this,e,t);return n.resolveParentPath=i,n}function i(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=i,e.getModel=n,e}))}));return I(r.edges,(function(e){!function(e,t,a,n){if(Ke(a)){var o=$e(e,t,a),i=a.__edgeMap,r=i[Qe(o)];i[o]&&!r?i[o].isForward=!0:r&&i[o]&&(r.isForward=!0,i[o].isForward=!1),i[o]=i[o]||[],i[o].push(n)}}(e.node1,e.node2,this,e.dataIndex)}),this),r.data},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.getCategoriesData=function(){return this._categoriesData},a.prototype.formatTooltip=function(e,t,a){if("edge"===a){var n=this.getData(),o=this.getDataParams(e,a),i=n.graph.getEdgeByIndex(e),r=n.getName(i.node1.dataIndex),s=n.getName(i.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),ce("nameValue",{name:l.join(" > "),value:o.value,noValue:null==o.value})}return pe({series:this,dataIndex:e,multipleSeries:t})},a.prototype._updateCategoriesData=function(){var e=he(this.option.categories||[],(function(e){return null!=e.value?e:B({value:0},e)})),t=new le(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},a.prototype.setZoom=function(e){this.option.zoom=e},a.prototype.setCenter=function(e){this.option.center=e},a.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},a.type="series.graph",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(ge),Vt={type:"graphRoam",event:"graphRoam",update:"none"};function Ct(e){e.registerChartView(Lt),e.registerSeriesModel(Et),e.registerProcessor(Fe),e.registerVisual(He),e.registerVisual(Ue),e.registerLayout(nt),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,ct),e.registerLayout(ht),e.registerCoordinateSystem("graphView",{dimensions:Ie.dimensions,create:gt}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},fe),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},fe),e.registerAction(Vt,(function(e,t,a){t.eachComponent({mainType:"series",query:e},(function(t){var n=function(e,t,a,n){var o=e.getZoom(),i=e.getCenter(),r=t.zoom,s=e.projectedToPoint?e.projectedToPoint(i):e.dataToPoint(i);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(Se(e,s),n)),null!=r){e.scaleX*=r,e.scaleY*=r;var l=(t.originX-e.x)*(r-1),u=(t.originY-e.y)*(r-1);e.x-=l,e.y-=u,e.updateTransform(),e.setCenter(Se(e,s),n),e.setZoom(r*o)}return{center:e.getCenter(),zoom:e.getZoom()}}(t.coordinateSystem,e,0,a);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)}))}))}export{je as L,Le as R,At as c,Ct as i};
