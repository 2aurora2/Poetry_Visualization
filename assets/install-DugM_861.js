import{i as e}from"./installSimple-CTa7wU2f.js";import{Y as t,$ as a,G as i,ag as n,aD as o,a2 as r,M as s,e as l,z as d,a1 as u,dN as h,dO as c,bs as p,f as g,dP as f,b2 as y,cd as v,bq as m,_ as x,b5 as _,af as b,aE as w,v as S,a0 as M,aF as I,T as A,aJ as L,am as D,aT as V,dQ as E,be as T,y as k,b8 as C,Z as R,O as z,a3 as P,aI as O,bw as N,by as Z,l as B,ap as G,bu as H,ck as F,a7 as W,a8 as Y,bQ as X,aG as j,Q as U,bJ as K,bK as q,aS as J,dR as Q,bp as $,cv as ee,ar as te,cj as ae,bY as ie,cn as ne,P as oe,bT as re,ai as se,dC as le,aw as de,av as ue,bW as he,ch as ce,ay as pe,br as ge,dS as fe,bV as ye,cI as ve,cJ as me,cx as xe,cy as _e,cN as be,ab as we,N as Se,b7 as Me,g as Ie,cK as Ae}from"./vintage-NmjydPJY.js";import{D as Le,h as De,R as Ve,j as Ee,s as Te,k as ke,l as Ce,n as Re}from"./install-DZeSogCy.js";function ze(i){t(e),t(a)}var Pe=l,Oe=s,Ne=-1,Ze=function(){function e(t){var a=t.mappingMethod,o=t.type,r=this.option=i(t);this.type=o,this.mappingMethod=a,this._normalizeData=Ke[a];var u=e.visualHandlers[o];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[a],"piecewise"===a?(Be(r),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,l(t,(function(t,a){t.originIndex=a,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(r)):"category"===a?r.categories?function(e){var t=e.categories,a=e.categoryMap={},i=e.visual;if(Pe(t,(function(e,t){a[e]=t})),!d(i)){var n=[];s(i)?Pe(i,(function(e,t){var i=a[t];n[null!=i?i:Ne]=e})):n[-1]=i,i=Ue(e,n)}for(var o=t.length-1;o>=0;o--)null==i[o]&&(delete a[t[o]],t.pop())}(r):Be(r,!0):(n("linear"!==a||r.dataExtent),Be(r))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return o(this._normalizeData,this)},e.listVisualTypes=function(){return r(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,a){s(e)?l(e,t,a):t.call(a,e)},e.mapVisual=function(t,a,i){var n,o=d(t)?[]:s(t)?{}:(n=!0,null);return e.eachVisual(t,(function(e,t){var r=a.call(i,e,t);n?o=r:o[t]=r})),o},e.retrieveVisuals=function(t){var a,i={};return t&&Pe(e.visualHandlers,(function(e,n){t.hasOwnProperty(n)&&(i[n]=t[n],a=!0)})),a?i:null},e.prepareVisualTypes=function(e){if(d(e))e=e.slice();else{if(!Oe(e))return[];var t=[];Pe(e,(function(e,a){t.push(a)})),e=t}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,a){for(var i,n=1/0,o=0,r=t.length;o<r;o++){var s=t[o].value;if(null!=s){if(s===e||u(s)&&s===e+"")return o;a&&c(s,o)}}for(o=0,r=t.length;o<r;o++){var l=t[o],d=l.interval,h=l.close;if(d){if(d[0]===-1/0){if(qe(h[1],e,d[1]))return o}else if(d[1]===1/0){if(qe(h[0],d[0],e))return o}else if(qe(h[0],d[0],e)&&qe(h[1],e,d[1]))return o;a&&c(d[0],o),a&&c(d[1],o)}}if(a)return e===1/0?t.length-1:e===-1/0?0:i;function c(t,a){var o=Math.abs(t-e);o<n&&(n=o,i=a)}},e.visualHandlers={color:{applyVisual:Fe("color"),getColorMapper:function(){var e=this.option;return o("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),We.call(this,e)}:function(t,a,i){var n=!!i;return!a&&(t=this._normalizeData(t)),i=h(t,e.parsedVisual,i),n?i:c(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return c(h(e,this.option.parsedVisual),"rgba")},category:We,piecewise:function(e,t){var a=je.call(this,t);return null==a&&(a=c(h(e,this.option.parsedVisual),"rgba")),a},fixed:Ye}},colorHue:Ge((function(e,t){return v(e,t)})),colorSaturation:Ge((function(e,t){return v(e,null,t)})),colorLightness:Ge((function(e,t){return v(e,null,null,t)})),colorAlpha:Ge((function(e,t){return m(e,t)})),decal:{applyVisual:Fe("decal"),_normalizedToVisual:{linear:null,category:We,piecewise:null,fixed:null}},opacity:{applyVisual:Fe("opacity"),_normalizedToVisual:Xe([0,1])},liftZ:{applyVisual:Fe("liftZ"),_normalizedToVisual:{linear:Ye,category:Ye,piecewise:Ye,fixed:Ye}},symbol:{applyVisual:function(e,t,a){a("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:He,category:We,piecewise:function(e,t){var a=je.call(this,t);return null==a&&(a=He.call(this,e)),a},fixed:Ye}},symbolSize:{applyVisual:Fe("symbolSize"),_normalizedToVisual:Xe([0,1])}},e}();function Be(e,t){var a=e.visual,i=[];s(a)?Pe(a,(function(e){i.push(e)})):null!=a&&i.push(a);t||1!==i.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(i[1]=i[0]),Ue(e,i)}function Ge(e){return{applyVisual:function(t,a,i){var n=this.mapValueToVisual(t);i("color",e(a("color"),n))},_normalizedToVisual:Xe([0,1])}}function He(e){var t=this.option.visual;return t[Math.round(p(e,[0,1],[0,t.length-1],!0))]||{}}function Fe(e){return function(t,a,i){i(e,this.mapValueToVisual(t))}}function We(e){var t=this.option.visual;return t[this.option.loop&&e!==Ne?e%t.length:e]}function Ye(){return this.option.visual[0]}function Xe(e){return{linear:function(t){return p(t,e,this.option.visual,!0)},category:We,piecewise:function(t,a){var i=je.call(this,a);return null==i&&(i=p(t,e,this.option.visual,!0)),i},fixed:Ye}}function je(e){var t=this.option,a=t.pieceList;if(t.hasSpecialVisual){var i=a[Ze.findPieceIndex(e,a)];if(i&&i.visual)return i.visual[this.type]}}function Ue(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=g(t,(function(e){return f(e)||[0,0,0,1]}))),t}var Ke={linear:function(e){return p(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,a=Ze.findPieceIndex(e,t,!0);if(null!=a)return p(a,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?Ne:t},fixed:y};function qe(e,t,a){return e?t<=a:t<a}function Je(e,t){return e.type===t}var Qe=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return x(t,e),t.type="dataZoom.inside",t.defaultOption=_(Le.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(Le),$e=S();function et(e,t){if(t){e.removeKey(t.model.uid);var a=t.controller;a&&a.dispose()}}function tt(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function at(e,t,a,i){return e.coordinateSystem.containPoint([a,i])}function it(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var a=$e(t),i=a.coordSysRecordMap||(a.coordSysRecordMap=b());i.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){var a=De(e);l(a.infoList,(function(a){var n=a.model.uid,o=i.get(n)||i.set(n,function(e,t){var a={model:t,containsPoint:M(at,t),dispatchAction:M(tt,e),dataZoomInfoMap:null,controller:null},i=a.controller=new Ve(e.getZr());return l(["pan","zoom","scrollMove"],(function(e){i.on(e,(function(t){var i=[];a.dataZoomInfoMap.each((function(n){if(t.isAvailableBehavior(n.model.option)){var o=(n.getRange||{})[e],r=o&&o(n.dzReferCoordSysInfo,a.model.mainType,a.controller,t);!n.model.get("disabled",!0)&&r&&i.push({dataZoomId:n.model.id,start:r[0],end:r[1]})}})),i.length&&a.dispatchAction(i)}))})),a}(t,a.model));(o.dataZoomInfoMap||(o.dataZoomInfoMap=b())).set(e.uid,{dzReferCoordSysInfo:a,model:e,getRange:null})}))})),i.each((function(e){var t,a=e.controller,n=e.dataZoomInfoMap;if(n){var o=n.keys()[0];null!=o&&(t=n.get(o))}if(t){var r=function(e){var t,a="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each((function(e){var o=e.model,r=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");i[a+r]>i[a+t]&&(t=r),n=n&&o.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}(n);a.enable(r.controlType,r.opt),a.setPointerChecker(e.containsPoint),w(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else et(i,e)}))}))}var nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return x(t,e),t.prototype.render=function(t,a,i){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),function(e,t,a){$e(e).coordSysRecordMap.each((function(e){var i=e.dataZoomInfoMap.get(t.uid);i&&(i.getRange=a)}))}(i,t,{pan:o(ot.pan,this),zoom:o(ot.zoom,this),scrollMove:o(ot.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var a=$e(e).coordSysRecordMap,i=a.keys(),n=0;n<i.length;n++){var o=i[n],r=a.get(o),s=r.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||et(a,r))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Ee),ot={zoom:function(e,t,a,i){var n=this.range,o=n.slice(),r=e.axisModels[0];if(r){var s=st[t](null,[i.originX,i.originY],r,a,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],d=Math.max(1/i.scale,0);o[0]=(o[0]-l)*d+l,o[1]=(o[1]-l)*d+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Te(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,n[0]!==o[0]||n[1]!==o[1]?o:void 0}},pan:rt((function(e,t,a,i,n,o){var r=st[i]([o.oldX,o.oldY],[o.newX,o.newY],t,n,a);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength})),scrollMove:rt((function(e,t,a,i,n,o){return st[i]([0,0],[o.scrollDelta,o.scrollDelta],t,n,a).signal*(e[1]-e[0])*o.scrollDelta}))};function rt(e){return function(t,a,i,n){var o=this.range,r=o.slice(),s=t.axisModels[0];if(s){var l=e(r,s,t,a,i,n);return Te(l,r,[0,100],"all"),this.range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}}}var st={grid:function(e,t,a,i,n){var o=a.axis,r={},s=n.model.coordinateSystem.getRect();return e=e||[0,0],"x"===o.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=o.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=o.inverse?-1:1),r},polar:function(e,t,a,i,n){var o=a.axis,r={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),d=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===a.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=o.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=d[1]-d[0],r.pixelStart=d[0],r.signal=o.inverse?-1:1),r},singleAxis:function(e,t,a,i,n){var o=a.axis,r=n.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===o.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=o.inverse?-1:1),s}};function lt(e){ke(e),e.registerComponentModel(Qe),e.registerComponentView(nt),it(e)}var dt=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return x(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=_(Le.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(Le),ut=P,ht="horizontal",ct="vertical",pt=["line","bar","candlestick","scatter"],gt={easing:"cubicOut",duration:100,delay:0},ft=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._displayables={},a}return x(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=o(this._onBrush,this),this._onBrushEnd=o(this._onBrushEnd,this)},t.prototype.render=function(t,a,i,n){if(e.prototype.render.apply(this,arguments),w(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){I(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new A;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,a=e.get("brushSelect")?7:0,i=this._findCoordRect(),n={width:t.getWidth(),height:t.getHeight()},o=this._orient===ht?{right:n.width-i.x-i.width,top:n.height-30-7-a,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},r=L(e.option);l(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=o[e])}));var s=D(r,n);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===ct&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),n=i&&i.get("inverse"),o=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(a!==ht||n?a===ht&&n?{scaleY:r?1:-1,scaleX:-1}:a!==ct||n?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=e.getBoundingRect([o]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,a=this._displayables.sliderGroup,i=e.get("brushSelect");a.add(new ut({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var n=new ut({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:o(this._onClickPanel,this)}),r=this.api.getZr();i?(n.on("mousedown",this._onBrushStart,this),n.cursor="crosshair",r.on("mousemove",this._onBrush),r.on("mouseup",this._onBrushEnd)):(r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)),a.add(n)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,a=this._shadowSize||[],i=e.series,n=i.getRawData(),o=i.getShadowDim&&i.getShadowDim(),r=o&&n.getDimensionInfo(o)?i.getShadowDim():e.otherDim;if(null!=r){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(n!==this._shadowData||r!==this._shadowDim||t[0]!==a[0]||t[1]!==a[1]){var d=n.getDataExtent(r),u=.3*(d[1]-d[0]);d=[d[0]-u,d[1]+u];var h,c=[0,t[1]],g=[0,t[0]],f=[[t[0],0],[0,0]],y=[],v=g[1]/(n.count()-1),m=0,x=Math.round(n.count()/t[0]);n.each([r],(function(e,t){if(x>0&&t%x)m+=v;else{var a=null==e||isNaN(e)||""===e,i=a?0:p(e,d,c,!0);a&&!h&&t?(f.push([f[f.length-1][0],0]),y.push([y[y.length-1][0],0])):!a&&h&&(f.push([m,0]),y.push([m,0])),f.push([m,i]),y.push([m,i]),m+=v,h=a}})),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=y}this._shadowData=n,this._shadowDim=r,this._shadowSize=[t[0],t[1]];for(var _,b,w,S,M,I=this.dataZoomModel,L=0;L<3;L++){var D=(_=1===L,b=void 0,w=void 0,S=void 0,M=void 0,b=I.getModel(_?"selectedDataBackground":"dataBackground"),w=new A,S=new W({shape:{points:s},segmentIgnoreThreshold:1,style:b.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),M=new Y({shape:{points:l},segmentIgnoreThreshold:1,style:b.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),w.add(S),w.add(M),w);this._displayables.sliderGroup.add(D),this._displayables.dataShadowSegs.push(D)}}}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var a,i=this.ecModel;return e.eachTargetAxis((function(n,o){var r=e.getAxisProxy(n,o).getTargetSeriesModels();l(r,(function(e){if(!(a||!0!==t&&V(pt,e.get("type"))<0)){var r,s=i.getComponent(Ce(n),o).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[n],d=e.coordinateSystem;null!=l&&d.getOtherAxis&&(r=d.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),a={thisAxis:s,series:e,thisDim:n,otherDim:l,otherAxisInverse:r}}}),this)}),this),a}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,a=t.handles=[null,null],i=t.handleLabels=[null,null],n=this._displayables.sliderGroup,r=this._size,s=this.dataZoomModel,d=this.api,u=s.get("borderRadius")||0,h=s.get("brushSelect"),c=t.filler=new ut({silent:h,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});n.add(c),n.add(new ut({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1],r:u},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),l([0,1],(function(t){var r=s.get("handleIcon");!E[r]&&r.indexOf("path://")<0&&r.indexOf("image://")<0&&(r="path://"+r);var l=T(r,-1,0,2,2,null,!0);l.attr({cursor:yt(this._orient),draggable:!0,drift:o(this._onDragMove,this,t),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1),z2:5});var d=l.getBoundingRect(),u=s.get("handleSize");this._handleHeight=k(u,this._size[1]),this._handleWidth=d.width/d.height*this._handleHeight,l.setStyle(s.getModel("handleStyle").getItemStyle()),l.style.strokeNoScale=!0,l.rectHover=!0,l.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),C(l);var h=s.get("handleColor");null!=h&&(l.style.fill=h),n.add(a[t]=l);var c=s.getModel("textStyle"),p=(s.get("handleLabel")||{}).show||!1;e.add(i[t]=new R({silent:!0,invisible:!p,style:z(c,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:c.getTextColor(),font:c.getFont()}),z2:10}))}),this);var p=c;if(h){var g=k(s.get("moveHandleSize"),r[1]),f=t.moveHandle=new P({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:r[1]-.5,height:g}}),y=.8*g,v=t.moveHandleIcon=T(s.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);v.silent=!0,v.y=r[1]+g/2-.5,f.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(r[1]/2,Math.max(g,10));(p=t.moveZone=new P({invisible:!0,shape:{y:r[1]-m,height:g+m}})).on("mouseover",(function(){d.enterEmphasis(f)})).on("mouseout",(function(){d.leaveEmphasis(f)})),n.add(f),n.add(v),n.add(p)}p.attr({draggable:!0,cursor:yt(this._orient),drift:o(this._onDragMove,this,"all"),ondragstart:o(this._showDataInfo,this,!0),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[p(e[0],[0,100],t,!0),p(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var a=this.dataZoomModel,i=this._handleEnds,n=this._getViewExtent(),o=a.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];Te(t,i,n,a.get("zoomLock")?"all":e,null!=o.minSpan?p(o.minSpan,r,n,!0):null,null!=o.maxSpan?p(o.maxSpan,r,n,!0):null);var s=this._range,l=this._range=O([p(i[0],n,r,!0),p(i[1],n,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,a=this._handleEnds,i=O(a.slice()),n=this._size;l([0,1],(function(e){var i=t.handles[e],o=this._handleHeight;i.attr({scaleX:o/2,scaleY:o/2,x:a[e]+(e?-1:1),y:n[1]/2-o/2})}),this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:n[1]});var o={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(o),t.moveZone.setShape(o),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",o.x+o.width/2));for(var r=t.dataShadowSegs,s=[0,i[0],i[1],n[0]],d=0;d<r.length;d++){var u=r[d],h=u.getClipPath();h||(h=new P,u.setClipPath(h)),h.setShape({x:s[d],y:0,width:s[d+1]-s[d],height:n[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,a=this._displayables,i=a.handleLabels,n=this._orient,o=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,d=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();o=[this._formatLabel(d[0],s),this._formatLabel(d[1],s)]}}var u=O(this._handleEnds.slice());function h(e){var t=N(a.handles[e].parent,this.group),r=Z(0===e?"right":"left",t),s=this._handleWidth/2+5,l=B([u[e]+(0===e?-s:s),this._size[1]/2],t);i[e].setStyle({x:l[0],y:l[1],verticalAlign:n===ht?"middle":r,align:n===ht?r:"center",text:o[e]})}h.call(this,0),h.call(this,1)},t.prototype._formatLabel=function(e,t){var a=this.dataZoomModel,i=a.get("labelFormatter"),n=a.get("labelPrecision");null!=n&&"auto"!==n||(n=t.getPixelPrecision());var o=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(n,20));return G(i)?i(e,o):u(i)?i.replace("{value}",o):o},t.prototype._showDataInfo=function(e){var t=(this.dataZoomModel.get("handleLabel")||{}).show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]).get("show")||!1,i=e||this._dragging?a:t,n=this._displayables,o=n.handleLabels;o[0].attr("invisible",!i),o[1].attr("invisible",!i),n.moveHandle&&this.api[i?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},t.prototype._onDragMove=function(e,t,a,i){this._dragging=!0,H(i.event);var n=this._displayables.sliderGroup.getLocalTransform(),o=B([t,a],n,!0),r=this._updateInterval(e,o[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(a[0]<0||a[0]>t[0]||a[1]<0||a[1]>t[1])){var i=this._handleEnds,n=(i[0]+i[1])/2,o=this._updateInterval("all",a[0]-n);this._updateView(),o&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,a=e.offsetY;this._brushStart=new F(t,a),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var a=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(a.width)<5)){var i=this._getViewExtent(),n=[0,100];this._range=O([p(a.x,i,n,!0),p(a.x+a.width,i,n,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(H(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var a=this._displayables,i=this.dataZoomModel,n=a.brushRect;n||(n=a.brushRect=new ut({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(n)),n.attr("ignore",!1);var o=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(e,t),l=r.transformCoordToLocal(o.x,o.y),d=this._size;s[0]=Math.max(Math.min(d[0],s[0]),0),n.setShape({x:l[0],y:0,width:s[0]-l[0],height:d[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?gt:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=De(this.dataZoomModel).infoList;if(!e&&t.length){var a=t[0].model.coordinateSystem;e=a.getRect&&a.getRect()}if(!e){var i=this.api.getWidth(),n=this.api.getHeight();e={x:.2*i,y:.2*n,width:.6*i,height:.6*n}}return e},t.type="dataZoom.slider",t}(Ee);function yt(e){return"vertical"===e?"ns-resize":"ew-resize"}function vt(e){e.registerComponentModel(dt),e.registerComponentView(ft),ke(e)}function mt(e){t(lt),t(vt)}function xt(e,t,a,i,n){var o=e.getArea(),r=o.x,s=o.y,l=o.width,d=o.height,u=a.get(["lineStyle","width"])||0;r-=u/2,s-=u/2,l+=u,d+=u,l=Math.ceil(l),r!==Math.floor(r)&&(r=Math.floor(r),l++);var h=new P({shape:{x:r,y:s,width:l,height:d}});if(t){var c=e.getBaseAxis(),p=c.isHorizontal(),g=c.inverse;p?(g&&(h.shape.x+=l),h.shape.width=0):(g||(h.shape.y+=d),h.shape.height=0);var f=G(n)?function(e){n(e,h)}:null;X(h,{shape:{width:l,height:d,x:r,y:s}},a,null,i,f)}return h}function _t(e,t,a){var i=e.getArea(),n=j(i.r0,1),o=j(i.r,1),r=new U({shape:{cx:j(e.cx,1),cy:j(e.cy,1),r0:n,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});t&&("angle"===e.getBaseAxis().dim?r.shape.endAngle=i.startAngle:r.shape.r=n,X(r,{shape:{endAngle:i.endAngle,r:o}},a));return r}function bt(e,t,a,i,n){return e?"polar"===e.type?_t(e,t,a):"cartesian2d"===e.type?xt(e,t,a,i,n):null:null}var wt={average:function(e){for(var t=0,a=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],a++);return 0===a?NaN:t/a},sum:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a]||0;return t},max:function(e){for(var t=-1/0,a=0;a<e.length;a++)e[a]>t&&(t=e[a]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,a=0;a<e.length;a++)e[a]<t&&(t=e[a]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},St=function(e){return Math.round(e.length/2)};function Mt(e){return{seriesType:e,reset:function(e,t,a){var i=e.getData(),n=e.get("sampling"),o=e.coordinateSystem,r=i.count();if(r>10&&"cartesian2d"===o.type&&n){var s=o.getBaseAxis(),l=o.getOtherAxis(s),d=s.getExtent(),h=a.getDevicePixelRatio(),c=Math.abs(d[1]-d[0])*(h||1),p=Math.round(r/c);if(isFinite(p)&&p>1){"lttb"===n?e.setData(i.lttbDownSample(i.mapDimension(l.dim),1/p)):"minmax"===n&&e.setData(i.minmaxDownSample(i.mapDimension(l.dim),1/p));var g=void 0;u(n)?g=wt[n]:G(n)&&(g=n),g&&e.setData(i.downSample(i.mapDimension(l.dim),1/p,g,St))}}}}}var It=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return x(t,e),t.prototype.getInitialData=function(e,t){return K(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,a){var i=this.coordinateSystem;if(i&&i.clampData){var n=i.clampData(e),o=i.dataToPoint(n);if(a)l(i.getAxes(),(function(e,a){if("category"===e.type&&null!=t){var i=e.getTicksCoords(),r=e.getTickModel().get("alignWithLabel"),s=n[a],l="x1"===t[a]||"y1"===t[a];if(l&&!r&&(s+=1),i.length<2)return;if(2===i.length)return void(o[a]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var d=void 0,u=void 0,h=1,c=0;c<i.length;c++){var p=i[c].coord,g=c===i.length-1?i[c-1].tickValue+h:i[c].tickValue;if(g===s){u=p;break}if(g<s)d=p;else if(null!=d&&g>s){u=(p+d)/2;break}1===c&&(h=g-i[0].tickValue)}null==u&&(d?d&&(u=i[i.length-1].coord):u=i[0].coord),o[a]=e.toGlobalCoord(u)}}));else{var r=this.getData(),s=r.getLayout("offset"),d=r.getLayout("size"),u=i.getBaseAxis().isHorizontal()?0:1;o[u]+=s+d/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(q);q.registerClass(It);var At=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return x(t,e),t.prototype.getInitialData=function(){return K(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=_(It.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(It),Lt=function(){return function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),Dt=function(e){function t(t){var a=e.call(this,t)||this;return a.type="sausage",a}return x(t,e),t.prototype.getDefaultShape=function(){return new Lt},t.prototype.buildPath=function(e,t){var a=t.cx,i=t.cy,n=Math.max(t.r0||0,0),o=Math.max(t.r,0),r=.5*(o-n),s=n+r,l=t.startAngle,d=t.endAngle,u=t.clockwise,h=2*Math.PI,c=u?d-l<h:l-d<h;c||(l=d-(u?h:-h));var p=Math.cos(l),g=Math.sin(l),f=Math.cos(d),y=Math.sin(d);c?(e.moveTo(p*n+a,g*n+i),e.arc(p*s+a,g*s+i,r,-Math.PI+l,l,!u)):e.moveTo(p*o+a,g*o+i),e.arc(a,i,o,l,d,!u),e.arc(f*s+a,y*s+i,r,d-2*Math.PI,d-Math.PI,!u),0!==n&&e.arc(a,i,n,d,l,u)},t}(J);function Vt(e,t,a){return t*Math.sin(e)*(a?-1:1)}function Et(e,t,a){return t*Math.cos(e)*(a?1:-1)}var Tt=Math.max,kt=Math.min;var Ct=function(e){function t(){var a=e.call(this)||this;return a.type=t.type,a._isFirstFrame=!0,a}return x(t,e),t.prototype.render=function(e,t,a,i){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var n=e.get("coordinateSystem");"cartesian2d"!==n&&"polar"!==n||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){ee(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,a,i){var n,o=this.group,r=e.getData(),s=this._data,l=e.coordinateSystem,d=l.getBaseAxis();"cartesian2d"===l.type?n=d.isHorizontal():"polar"===l.type&&(n="angle"===d.dim);var u=e.isAnimationEnabled()?e:null,h=function(e,t){var a=e.get("realtimeSort",!0),i=t.getBaseAxis();if(a&&"category"===i.type&&"cartesian2d"===t.type)return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}(e,l);h&&this._enableRealtimeSort(h,r,a);var c=e.get("clip",!0)||h,p=function(e,t){var a=e.getArea&&e.getArea();if(Je(e,"cartesian2d")){var i=e.getBaseAxis();if("category"!==i.type||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(a.x-=n,a.width+=2*n):(a.y-=n,a.height+=2*n)}}return a}(l,r);o.removeClipPath();var g=e.get("roundCap",!0),f=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),v=y.get("borderRadius")||0,m=[],x=this._backgroundEls,_=i&&i.isInitSort,b=i&&"changeAxisOrder"===i.type;function w(e){var t=Gt[l.type](r,e),a=function(e,t,a){var i="polar"===e.type?U:P;return new i({shape:Ut(t,a,e),silent:!0,z2:0})}(l,n,t);return a.useStyle(y.getItemStyle()),"cartesian2d"===l.type?a.setShape("r",v):a.setShape("cornerRadius",v),m[e]=a,a}r.diff(s).add((function(t){var a=r.getItemModel(t),i=Gt[l.type](r,t,a);if(f&&w(t),r.hasValue(t)&&Bt[l.type](i)){var s=!1;c&&(s=Rt[l.type](p,i));var y=zt[l.type](e,r,t,i,n,u,d.model,!1,g);h&&(y.forceLabelAnimation=!0),Ft(y,r,t,a,i,e,n,"polar"===l.type),_?y.attr({shape:i}):h?Pt(h,u,y,i,t,n,!1,!1):X(y,{shape:i},e,t),r.setItemGraphicEl(t,y),o.add(y),y.ignore=s}})).update((function(t,a){var i=r.getItemModel(t),S=Gt[l.type](r,t,i);if(f){var M=void 0;0===x.length?M=w(a):((M=x[a]).useStyle(y.getItemStyle()),"cartesian2d"===l.type?M.setShape("r",v):M.setShape("cornerRadius",v),m[t]=M);var I=Gt[l.type](r,t),A=Ut(n,I,l);te(M,{shape:A},u,t)}var L=s.getItemGraphicEl(a);if(r.hasValue(t)&&Bt[l.type](S)){var D=!1;if(c&&(D=Rt[l.type](p,S))&&o.remove(L),L?ae(L):L=zt[l.type](e,r,t,S,n,u,d.model,!!L,g),h&&(L.forceLabelAnimation=!0),b){var V=L.getTextContent();if(V){var E=ie(V);null!=E.prevValue&&(E.prevValue=E.value)}}else Ft(L,r,t,i,S,e,n,"polar"===l.type);_?L.attr({shape:S}):h?Pt(h,u,L,S,t,n,!0,b):te(L,{shape:S},e,t,null),r.setItemGraphicEl(t,L),L.ignore=D,o.add(L)}else o.remove(L)})).remove((function(t){var a=s.getItemGraphicEl(t);a&&ne(a,e,t)})).execute();var S=this._backgroundGroup||(this._backgroundGroup=new A);S.removeAll();for(var M=0;M<m.length;++M)S.add(m[M]);o.add(S),this._backgroundEls=m,this._data=r},t.prototype._renderLarge=function(e,t,a){this._clear(),Xt(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Xt(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&bt(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,a){var i=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var o=function(e){var a=t.getItemGraphicEl(e),i=a&&a.shape;return i&&Math.abs(n.isHorizontal()?i.height:i.width)||0};this._onRendered=function(){i._updateSortWithinSameData(t,o,n,a)},a.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,a){var i=[];return e.each(e.mapDimension(t.dim),(function(e,t){var n=a(t);n=null==n?NaN:n,i.push({dataIndex:t,mappedValue:n,ordinalNumber:e})})),i.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:g(i,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var i=a.scale,n=e.mapDimension(a.dim),o=Number.MAX_VALUE,r=0,s=i.getOrdinalMeta().categories.length;r<s;++r){var l=e.rawIndexOf(n,i.getRawOrdinalNumber(r)),d=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(d>o)return!0;o=d}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,i=a.getExtent(),n=Math.max(0,i[0]),o=Math.min(i[1],a.getOrdinalMeta().categories.length-1);n<=o;++n)if(e.ordinalNumbers[n]!==a.getRawOrdinalNumber(n))return!0},t.prototype._updateSortWithinSameData=function(e,t,a,i){if(this._isOrderChangedWithinSameData(e,t,a)){var n=this._dataSort(e,a,t);this._isOrderDifferentInView(n,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:n}))}},t.prototype._dispatchInitSort=function(e,t,a){var i=t.baseAxis,n=this._dataSort(e,i,(function(a){return e.get(e.mapDimension(t.otherAxis.dim),a)}));a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:n})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl((function(t){ne(t,e,oe(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(re),Rt={cartesian2d:function(e,t){var a=t.width<0?-1:1,i=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,o=e.y+e.height,r=Tt(t.x,e.x),s=kt(t.x+t.width,n),l=Tt(t.y,e.y),d=kt(t.y+t.height,o),u=s<r,h=d<l;return t.x=u&&r>n?s:r,t.y=h&&l>o?d:l,t.width=u?0:s-r,t.height=h?0:d-l,a<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),u||h},polar:function(e,t){var a=t.r0<=t.r?1:-1;if(a<0){var i=t.r;t.r=t.r0,t.r0=i}var n=kt(t.r,e.r),o=Tt(t.r0,e.r0);t.r=n,t.r0=o;var r=n-o<0;if(a<0){i=t.r;t.r=t.r0,t.r0=i}return r}},zt={cartesian2d:function(e,t,a,i,n,o,r,s,l){var d=new P({shape:se({},i),z2:1});(d.__dataIndex=a,d.name="item",o)&&(d.shape[n?"height":"width"]=0);return d},polar:function(e,t,a,i,n,o,r,s,l){var d=!n&&l?Dt:U,u=new d({shape:i,z2:1});u.name="item";var h,c,p=Ht(n);if(u.calculateTextPosition=(h=p,c=({isRoundCap:d===Dt}||{}).isRoundCap,function(e,t,a){var i=t.position;if(!i||i instanceof Array)return Q(e,t,a);var n=h(i),o=null!=t.distance?t.distance:5,r=this.shape,s=r.cx,l=r.cy,d=r.r,u=r.r0,p=(d+u)/2,g=r.startAngle,f=r.endAngle,y=(g+f)/2,v=c?Math.abs(d-u)/2:0,m=Math.cos,x=Math.sin,_=s+d*m(g),b=l+d*x(g),w="left",S="top";switch(n){case"startArc":_=s+(u-o)*m(y),b=l+(u-o)*x(y),w="center",S="top";break;case"insideStartArc":_=s+(u+o)*m(y),b=l+(u+o)*x(y),w="center",S="bottom";break;case"startAngle":_=s+p*m(g)+Vt(g,o+v,!1),b=l+p*x(g)+Et(g,o+v,!1),w="right",S="middle";break;case"insideStartAngle":_=s+p*m(g)+Vt(g,-o+v,!1),b=l+p*x(g)+Et(g,-o+v,!1),w="left",S="middle";break;case"middle":_=s+p*m(y),b=l+p*x(y),w="center",S="middle";break;case"endArc":_=s+(d+o)*m(y),b=l+(d+o)*x(y),w="center",S="bottom";break;case"insideEndArc":_=s+(d-o)*m(y),b=l+(d-o)*x(y),w="center",S="top";break;case"endAngle":_=s+p*m(f)+Vt(f,o+v,!0),b=l+p*x(f)+Et(f,o+v,!0),w="left",S="middle";break;case"insideEndAngle":_=s+p*m(f)+Vt(f,-o+v,!0),b=l+p*x(f)+Et(f,-o+v,!0),w="right",S="middle";break;default:return Q(e,t,a)}return(e=e||{}).x=_,e.y=b,e.align=w,e.verticalAlign=S,e}),o){var g=n?"r":"endAngle",f={};u.shape[g]=n?i.r0:i.startAngle,f[g]=i[g],(s?te:X)(u,{shape:f},o)}return u}};function Pt(e,t,a,i,n,o,r,s){var l,d;o?(d={x:i.x,width:i.width},l={y:i.y,height:i.height}):(d={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(r?te:X)(a,{shape:l},t,n,null);var u=t?e.baseAxis.model:null;(r?te:X)(a,{shape:d},u,n)}function Ot(e,t){for(var a=0;a<t.length;a++)if(!isFinite(e[t[a]]))return!0;return!1}var Nt=["x","y","width","height"],Zt=["cx","cy","r","startAngle","endAngle"],Bt={cartesian2d:function(e){return!Ot(e,Nt)},polar:function(e){return!Ot(e,Zt)}},Gt={cartesian2d:function(e,t,a){var i=e.getItemLayout(t),n=a?function(e,t){var a=e.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,o)}(a,i):0,o=i.width>0?1:-1,r=i.height>0?1:-1;return{x:i.x+o*n/2,y:i.y+r*n/2,width:i.width-o*n,height:i.height-r*n}},polar:function(e,t,a){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Ht(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function Ft(e,t,a,i,n,o,r,s){var u=t.getItemVisual(a,"style");if(s){if(!o.get("roundCap")){var h=e.shape,c=le(i.getModel("itemStyle"),h,!0);se(h,c),e.setShape(h)}}else{var p=i.get(["itemStyle","borderRadius"])||0;e.setShape("r",p)}e.useStyle(u);var g=i.getShallow("cursor");g&&e.attr("cursor",g);var f=s?r?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":r?n.height>=0?"bottom":"top":n.width>=0?"right":"left",y=de(i);ue(e,y,{labelFetcher:o,labelDataIndex:a,defaultText:he(o.getData(),a),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:f});var v=e.getTextContent();if(s&&v){var m=i.get(["label","position"]);e.textConfig.inside="middle"===m||null,function(e,t,a,i){if($(i))e.setTextConfig({rotation:i});else if(d(t))e.setTextConfig({rotation:0});else{var n,o=e.shape,r=o.clockwise?o.startAngle:o.endAngle,s=o.clockwise?o.endAngle:o.startAngle,l=(r+s)/2,u=a(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":n=l;break;case"startAngle":case"insideStartAngle":n=r;break;case"endAngle":case"insideEndAngle":n=s;break;default:return void e.setTextConfig({rotation:0})}var h=1.5*Math.PI-n;"middle"===u&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),e.setTextConfig({rotation:h})}}(e,"outside"===m?f:m,Ht(r),i.get(["label","rotate"]))}ce(v,y,o.getRawValue(a),(function(e){return ye(t,e)}));var x=i.getModel(["emphasis"]);pe(e,x.get("focus"),x.get("blurScope"),x.get("disabled")),ge(e,i),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(n)&&(e.style.fill="none",e.style.stroke="none",l(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var Wt=function(){return function(){}}(),Yt=function(e){function t(t){var a=e.call(this,t)||this;return a.type="largeBar",a}return x(t,e),t.prototype.getDefaultShape=function(){return new Wt},t.prototype.buildPath=function(e,t){for(var a=t.points,i=this.baseDimIdx,n=1-this.baseDimIdx,o=[],r=[],s=this.barWidth,l=0;l<a.length;l+=3)r[i]=s,r[n]=a[l+2],o[i]=a[l+i],o[n]=a[l+n],e.rect(o[0],o[1],r[0],r[1])},t}(J);function Xt(e,t,a,i){var n=e.getData(),o=n.getLayout("valueAxisHorizontal")?1:0,r=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),d=n.getLayout("largeBackgroundPoints");if(d){var u=new Yt({shape:{points:d},incremental:!!i,silent:!0,z2:0});u.baseDimIdx=o,u.largeDataIndices=r,u.barWidth=s,u.useStyle(l.getItemStyle()),t.add(u),a&&a.push(u)}var h=new Yt({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=o,h.largeDataIndices=r,h.barWidth=s,t.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,oe(h).seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",jt),h.on("mousemove",jt)),a&&a.push(h)}var jt=fe((function(e){var t=function(e,t,a){for(var i=e.baseDimIdx,n=1-i,o=e.shape.points,r=e.largeDataIndices,s=[],l=[],d=e.barWidth,u=0,h=o.length/3;u<h;u++){var c=3*u;if(l[i]=d,l[n]=o[c+2],s[i]=o[c+i],s[n]=o[c+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&a>=s[1]&&a<=s[1]+l[1])return r[u]}return-1}(this,e.offsetX,e.offsetY);oe(this).dataIndex=t>=0?t:null}),30,!1);function Ut(e,t,a){if(Je(a,"cartesian2d")){var i=t,n=a.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}var o=t;return{cx:(n=a.getArea()).cx,cy:n.cy,r0:e?n.r0:o.r0,r:e?n.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:2*Math.PI}}function Kt(e){e.registerChartView(Ct),e.registerSeriesModel(At),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,M(me,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ve("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Mt("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}var qt=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}}(),Jt=function(e){function t(t){return e.call(this,t)||this}return x(t,e),t.prototype.getDefaultShape=function(){return new qt},t.prototype.buildPath=function(e,t){var a=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+a,t.y2),e.bezierCurveTo(t.cpx2+a,t.cpy2,t.cpx1+a,t.cpy1,t.x1+a,t.y1)):(e.lineTo(t.x2,t.y2+a),e.bezierCurveTo(t.cpx2,t.cpy2+a,t.cpx1,t.cpy1+a,t.x1,t.y1+a)),e.closePath()},t.prototype.highlight=function(){xe(this)},t.prototype.downplay=function(){_e(this)},t}(J),Qt=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._focusAdjacencyDisabled=!1,a}return x(t,e),t.prototype.render=function(e,t,a){var i=this,n=e.getGraph(),o=this.group,r=e.layoutInfo,s=r.width,l=r.height,d=e.getData(),u=e.getData("edge"),h=e.get("orient");this._model=e,o.removeAll(),o.x=r.x,o.y=r.y,n.eachEdge((function(t){var a=new Jt,i=oe(a);i.dataIndex=t.dataIndex,i.seriesIndex=e.seriesIndex,i.dataType="edge";var n,r,d,c,p,g,f,y,v=t.getModel(),m=v.getModel("lineStyle"),x=m.get("curveness"),_=t.node1.getLayout(),b=t.node1.getModel(),w=b.get("localX"),S=b.get("localY"),M=t.node2.getLayout(),I=t.node2.getModel(),A=I.get("localX"),L=I.get("localY"),D=t.getLayout();a.shape.extent=Math.max(1,D.dy),a.shape.orient=h,"vertical"===h?(n=(null!=w?w*s:_.x)+D.sy,r=(null!=S?S*l:_.y)+_.dy,d=(null!=A?A*s:M.x)+D.ty,p=n,g=r*(1-x)+(c=null!=L?L*l:M.y)*x,f=d,y=r*x+c*(1-x)):(n=(null!=w?w*s:_.x)+_.dx,r=(null!=S?S*l:_.y)+D.sy,p=n*(1-x)+(d=null!=A?A*s:M.x)*x,g=r,f=n*x+d*(1-x),y=c=(null!=L?L*l:M.y)+D.ty),a.setShape({x1:n,y1:r,x2:d,y2:c,cpx1:p,cpy1:g,cpx2:f,cpy2:y}),a.useStyle(m.getItemStyle()),$t(a.style,h,t);var V=""+v.get("value"),E=de(v,"edgeLabel");ue(a,E,{labelFetcher:{getFormattedLabel:function(t,a,i,n,o,r){return e.getFormattedLabel(t,a,"edge",n,be(o,E.normal&&E.normal.get("formatter"),V),r)}},labelDataIndex:t.dataIndex,defaultText:V}),a.setTextConfig({position:"inside"});var T=v.getModel("emphasis");ge(a,v,"lineStyle",(function(e){var a=e.getItemStyle();return $t(a,h,t),a})),o.add(a),u.setItemGraphicEl(t.dataIndex,a);var k=T.get("focus");pe(a,"adjacency"===k?t.getAdjacentDataIndices():"trajectory"===k?t.getTrajectoryDataIndices():k,T.get("blurScope"),T.get("disabled"))})),n.eachNode((function(t){var a=t.getLayout(),i=t.getModel(),n=i.get("localX"),r=i.get("localY"),u=i.getModel("emphasis"),h=i.get(["itemStyle","borderRadius"])||0,c=new P({shape:{x:null!=n?n*s:a.x,y:null!=r?r*l:a.y,width:a.dx,height:a.dy,r:h},style:i.getModel("itemStyle").getItemStyle(),z2:10});ue(c,de(i),{labelFetcher:{getFormattedLabel:function(t,a){return e.getFormattedLabel(t,a,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),c.disableLabelAnimation=!0,c.setStyle("fill",t.getVisual("color")),c.setStyle("decal",t.getVisual("style").decal),ge(c,i),o.add(c),d.setItemGraphicEl(t.dataIndex,c),oe(c).dataType="node";var p=u.get("focus");pe(c,"adjacency"===p?t.getAdjacentDataIndices():"trajectory"===p?t.getTrajectoryDataIndices():p,u.get("blurScope"),u.get("disabled"))})),d.eachItemGraphicEl((function(t,n){d.getItemModel(n).get("draggable")&&(t.drift=function(t,o){i._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=o,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:d.getRawIndex(n),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){i._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&o.setClipPath(function(e,t,a){var i=new P({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return X(i,{shape:{width:e.width+20}},t,a),i}(o.getBoundingRect(),e,(function(){o.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(re);function $t(e,t,a){switch(e.fill){case"source":e.fill=a.node1.getVisual("color"),e.decal=a.node1.getVisual("style").decal;break;case"target":e.fill=a.node2.getVisual("color"),e.decal=a.node2.getVisual("style").decal;break;case"gradient":var i=a.node1.getVisual("color"),n=a.node2.getVisual("color");u(i)&&u(n)&&(e.fill=new we(0,0,+("horizontal"===t),+("vertical"===t),[{color:i,offset:0},{color:n,offset:1}]))}}var ea=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return x(t,e),t.prototype.getInitialData=function(e,t){var a=e.edges||e.links||[],i=e.data||e.nodes||[],n=e.levels||[];this.levelModels=[];for(var o=this.levelModels,r=0;r<n.length;r++)null!=n[r].depth&&n[r].depth>=0&&(o[n[r].depth]=new Se(n[r],this,t));return Re(i,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var a=e.parentModel,i=a.getData().getItemLayout(t);if(i){var n=i.depth,o=a.levelModels[n];o&&(e.parentModel=o)}return e})),t.wrapMethod("getItemModel",(function(e,t){var a=e.parentModel,i=a.getGraph().getEdgeByIndex(t).node1.getLayout();if(i){var n=i.depth,o=a.levelModels[n];o&&(e.parentModel=o)}return e}))})).data},t.prototype.setNodePosition=function(e,t){var a=(this.option.data||this.option.nodes)[e];a.localX=t[0],a.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,a){function i(e){return isNaN(e)||null==e}if("edge"===a){var n=this.getDataParams(e,a),o=n.data,r=n.value,s=o.source+" -- "+o.target;return Me("nameValue",{name:s,value:r,noValue:i(r)})}var l=this.getGraph().getNodeByIndex(e).getLayout().value,d=this.getDataParams(e,a).data.name;return Me("nameValue",{name:null!=d?d+"":null,value:l,noValue:i(l)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,a){var i=e.prototype.getDataParams.call(this,t,a);if(null==i.value&&"node"===a){var n=this.getGraph().getNodeByIndex(t).getLayout().value;i.value=n}return i},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(q);function ta(e,t){e.eachSeriesByType("sankey",(function(e){var a=e.get("nodeWidth"),i=e.get("nodeGap"),n=function(e,t){return D(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var o=n.width,r=n.height,s=e.getGraph(),d=s.nodes,u=s.edges;!function(e){l(e,(function(e){var t=ha(e.outEdges,ua),a=ha(e.inEdges,ua),i=e.getValue()||0,n=Math.max(t,a,i);e.setLayout({value:n},!0)}))}(d),function(e,t,a,i,n,o,r,s,d){(function(e,t,a,i,n,o,r){for(var s=[],d=[],u=[],h=[],c=0,p=0;p<t.length;p++)s[p]=1;for(p=0;p<e.length;p++)d[p]=e[p].inEdges.length,0===d[p]&&u.push(e[p]);var g=-1;for(;u.length;){for(var f=0;f<u.length;f++){var y=u[f],v=y.hostGraph.data.getRawDataItem(y.dataIndex),m=null!=v.depth&&v.depth>=0;m&&v.depth>g&&(g=v.depth),y.setLayout({depth:m?v.depth:c},!0),"vertical"===o?y.setLayout({dy:a},!0):y.setLayout({dx:a},!0);for(var x=0;x<y.outEdges.length;x++){var _=y.outEdges[x];s[t.indexOf(_)]=0;var b=_.node2;0==--d[e.indexOf(b)]&&h.indexOf(b)<0&&h.push(b)}}++c,u=h,h=[]}for(p=0;p<s.length;p++)if(1===s[p])throw new Error("Sankey is a DAG, the original data has cycle!");var w=g>c-1?g:c-1;r&&"left"!==r&&function(e,t,a,i){if("right"===t){for(var n=[],o=e,r=0;o.length;){for(var s=0;s<o.length;s++){var d=o[s];d.setLayout({skNodeHeight:r},!0);for(var u=0;u<d.inEdges.length;u++){var h=d.inEdges[u];n.indexOf(h.node1)<0&&n.push(h.node1)}}o=n,n=[],++r}l(e,(function(e){aa(e)||e.setLayout({depth:Math.max(0,i-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){l(e,(function(e){aa(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,i)}(e,r,0,w);var S="vertical"===o?(n-a)/w:(i-a)/w;!function(e,t,a){l(e,(function(e){var i=e.getLayout().depth*t;"vertical"===a?e.setLayout({y:i},!0):e.setLayout({x:i},!0)}))}(e,S,o)})(e,t,a,n,o,s,d),function(e,t,a,i,n,o,r){var s=function(e,t){var a=[],i="vertical"===t?"y":"x",n=Ae(e,(function(e){return e.getLayout()[i]}));return n.keys.sort((function(e,t){return e-t})),l(n.keys,(function(e){a.push(n.buckets.get(e))})),a}(e,r);(function(e,t,a,i,n,o){var r=1/0;l(e,(function(e){var t=e.length,s=0;l(e,(function(e){s+=e.getLayout().value}));var d="vertical"===o?(i-(t-1)*n)/s:(a-(t-1)*n)/s;d<r&&(r=d)})),l(e,(function(e){l(e,(function(e,t){var a=e.getLayout().value*r;"vertical"===o?(e.setLayout({x:t},!0),e.setLayout({dx:a},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:a},!0))}))})),l(t,(function(e){var t=+e.getValue()*r;e.setLayout({dy:t},!0)}))})(s,t,a,i,n,r),ia(s,n,a,i,r);for(var d=1;o>0;o--)na(s,d*=.99,r),ia(s,n,a,i,r),ca(s,d,r),ia(s,n,a,i,r)}(e,t,o,n,i,r,s),function(e,t){var a="vertical"===t?"x":"y";l(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[a]-t.node2.getLayout()[a]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[a]-t.node1.getLayout()[a]}))})),l(e,(function(e){var t=0,a=0;l(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),l(e.inEdges,(function(e){e.setLayout({ty:a},!0),a+=e.getLayout().dy}))}))}(e,s)}(d,u,a,i,o,r,0!==Ie(d,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}function aa(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function ia(e,t,a,i,n){var o="vertical"===n?"x":"y";l(e,(function(e){var r,s,l;e.sort((function(e,t){return e.getLayout()[o]-t.getLayout()[o]}));for(var d=0,u=e.length,h="vertical"===n?"dx":"dy",c=0;c<u;c++)(l=d-(s=e[c]).getLayout()[o])>0&&(r=s.getLayout()[o]+l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),d=s.getLayout()[o]+s.getLayout()[h]+t;if((l=d-t-("vertical"===n?i:a))>0){r=s.getLayout()[o]-l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0),d=r;for(c=u-2;c>=0;--c)(l=(s=e[c]).getLayout()[o]+s.getLayout()[h]+t-d)>0&&(r=s.getLayout()[o]-l,"vertical"===n?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),d=s.getLayout()[o]}}))}function na(e,t,a){l(e.slice().reverse(),(function(e){l(e,(function(e){if(e.outEdges.length){var i=ha(e.outEdges,oa,a)/ha(e.outEdges,ua);if(isNaN(i)){var n=e.outEdges.length;i=n?ha(e.outEdges,ra,a)/n:0}if("vertical"===a){var o=e.getLayout().x+(i-da(e,a))*t;e.setLayout({x:o},!0)}else{var r=e.getLayout().y+(i-da(e,a))*t;e.setLayout({y:r},!0)}}}))}))}function oa(e,t){return da(e.node2,t)*e.getValue()}function ra(e,t){return da(e.node2,t)}function sa(e,t){return da(e.node1,t)*e.getValue()}function la(e,t){return da(e.node1,t)}function da(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function ua(e){return e.getValue()}function ha(e,t,a){for(var i=0,n=e.length,o=-1;++o<n;){var r=+t(e[o],a);isNaN(r)||(i+=r)}return i}function ca(e,t,a){l(e,(function(e){l(e,(function(e){if(e.inEdges.length){var i=ha(e.inEdges,sa,a)/ha(e.inEdges,ua);if(isNaN(i)){var n=e.inEdges.length;i=n?ha(e.inEdges,la,a)/n:0}if("vertical"===a){var o=e.getLayout().x+(i-da(e,a))*t;e.setLayout({x:o},!0)}else{var r=e.getLayout().y+(i-da(e,a))*t;e.setLayout({y:r},!0)}}}))}))}function pa(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph(),a=t.nodes,i=t.edges;if(a.length){var n=1/0,o=-1/0;l(a,(function(e){var t=e.getLayout().value;t<n&&(n=t),t>o&&(o=t)})),l(a,(function(t){var a=new Ze({type:"color",mappingMethod:"linear",dataExtent:[n,o],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),i=t.getModel().get(["itemStyle","color"]);null!=i?(t.setVisual("color",i),t.setVisual("style",{fill:i})):(t.setVisual("color",a),t.setVisual("style",{fill:a}))}))}i.length&&l(i,(function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)}))}))}function ga(e){e.registerChartView(Qt),e.registerSeriesModel(ea),e.registerLayout(ta),e.registerVisual(pa),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}export{It as B,Dt as S,Ze as V,_t as a,bt as b,xt as c,Mt as d,ze as e,Kt as f,ga as g,mt as h,Je as i,lt as j,vt as k};
