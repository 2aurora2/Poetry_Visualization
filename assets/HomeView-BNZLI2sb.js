import{a as e}from"./axios-DMXdiZgf.js";import{w as t,_ as i,e as n,B as o,i as a,m as r,a as s,b as l,c as p,d as u,f as c,g as h,h as d,k as g,G as f,R as v,j as y,T as m,C as _,L as S,E as b,P as x,l as w,Z as M,n as I,o as T,p as D,q as C,t as L,r as O,s as A,u as R,v as N,x as k,y as V,z as P,A as G,S as F,D as z,F as E,H,I as B,J as X,K as U,M as Y,N as j,O as W,Q as J,U as Z,V as K,W as $,X as q,Y as Q,$ as ee,a0 as te,a1 as ie,a2 as ne,a3 as oe,a4 as ae,a5 as re,a6 as se,a7 as le,a8 as pe,a9 as ue,aa as ce,ab as he,ac as de,ad as ge,ae as fe,af as ve,ag as ye,ah as me,ai as _e,aj as Se,ak as be,al as xe,am as we,an as Me,ao as Ie,ap as Te,aq as De,ar as Ce,as as Le,at as Oe,au as Ae,av as Re,aw as Ne,ax as ke,ay as Ve,az as Pe,aA as Ge,aB as Fe,aC as ze,aD as Ee,aE as He,aF as Be,aG as Xe,aH as Ue,aI as Ye,aJ as je,aK as We,aL as Je,aM as Ze,aN as Ke,aO as $e,aP as qe,aQ as Qe,aR as et,aS as tt,aT as it,aU as nt,aV as ot,aW as at,aX as rt,aY as st,aZ as lt,a_ as pt,a$ as ut,b0 as ct,b1 as ht,b2 as dt,b3 as gt,b4 as ft,b5 as vt,b6 as yt,b7 as mt,b8 as _t,b9 as St,ba as bt,bb as xt,bc as wt,bd as Mt}from"./installCanvasRenderer-B0UAo2nS.js";import{V as It,R as Tt,u as Dt,a as Ct,b as Lt,c as Ot,i as At,d as Rt,e as Nt,f as kt,g as Vt,h as Pt,j as Gt}from"./install-rkyIBmIs.js";import{c as Ft}from"./createSeriesDataSimply-CvqqxuGx.js";import{p as zt,i as Et}from"./install-AeKrIvwl.js";import{d as Ht,r as Bt,o as Xt,a as Ut,c as Yt,b as jt,_ as Wt,e as Jt,f as Zt,g as Kt}from"./index-5VF5cRbG.js";function $t(e,t){return Math.abs(e-t)<1e-8}function qt(e,i,n){var o=0,a=e[0];if(!a)return!1;for(var r=1;r<e.length;r++){var s=e[r];o+=t(a[0],a[1],s[0],s[1],i,n),a=s}var l=e[0];return $t(a[0],l[0])&&$t(a[1],l[1])||(o+=t(a[0],a[1],l[0],l[1],i,n)),0!==o}var Qt=[];function ei(e,t){for(var i=0;i<e.length;i++)l(e[i],e[i],t)}function ti(e,t,i,n){for(var o=0;o<e.length;o++){var a=e[o];n&&(a=n.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(p(t,t,a),u(i,i,a))}}var ii,ni=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},e}(),oi=function(){return function(e,t){this.type="polygon",this.exterior=e,this.interiors=t}}(),ai=function(){return function(e){this.type="linestring",this.points=e}}(),ri=function(e){function t(t,i,n){var o=e.call(this,t)||this;return o.type="geoJSON",o.geometries=i,o._center=n&&[n[0],n[1]],o}return i(t,e),t.prototype.calcCenter=function(){for(var e,t=this.geometries,i=0,n=0;n<t.length;n++){var o=t[n],a=o.exterior,r=a&&a.length;r>i&&(e=o,i=r)}if(e)return function(e){for(var t=0,i=0,n=0,o=e.length,a=e[o-1][0],r=e[o-1][1],s=0;s<o;s++){var l=e[s][0],p=e[s][1],u=a*p-l*r;t+=u,i+=(a+l)*u,n+=(r+p)*u,a=l,r=p}return t?[i/t/3,n/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},t.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var i=[1/0,1/0],a=[-1/0,-1/0],r=this.geometries;return n(r,(function(t){"polygon"===t.type?ti(t.exterior,i,a,e):n(t.points,(function(t){ti(t,i,a,e)}))})),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),t=new o(i[0],i[1],a[0]-i[0],a[1]-i[1]),e||(this._rect=t),t},t.prototype.contain=function(e){var t=this.getBoundingRect(),i=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var n=0,o=i.length;n<o;n++){var a=i[n];if("polygon"===a.type){var r=a.exterior,s=a.interiors;if(qt(r,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(qt(s[l],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,t,i,a){var r=this.getBoundingRect(),s=r.width/r.height;i?a||(a=i/s):i=s*a;for(var l=new o(e,t,i,a),p=r.calculateTransform(l),u=this.geometries,c=0;c<u.length;c++){var h=u[c];"polygon"===h.type?(ei(h.exterior,p),n(h.interiors,(function(e){ei(e,p)}))):n(h.points,(function(e){ei(e,p)}))}(r=this._rect).copy(l),this._center=[r.x+r.width/2,r.y+r.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var i=new t(e,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},t}(ni),si=function(e){function t(t,i){var n=e.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return i(t,e),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),i=[t.x+t.width/2,t.y+t.height/2],n=a(Qt),o=e;o&&!o.isGeoSVGGraphicRoot;)r(n,o.getLocalTransform(),n),o=o.parent;return s(n,n),l(i,i,n),i},t}(ni);function li(e,t,i){for(var n=0;n<e.length;n++)e[n]=pi(e[n],t[n],i)}function pi(e,t,i){for(var n=[],o=t[0],a=t[1],r=0;r<e.length;r+=2){var s=e.charCodeAt(r)-64,l=e.charCodeAt(r+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,a=l+=a,n.push([s/i,l/i])}return n}function ui(e,t){return e=function(e){if(!e.UTF8Encoding)return e;var t=e,i=t.UTF8Scale;null==i&&(i=1024);var o=t.features;return n(o,(function(e){var t=e.geometry,o=t.encodeOffsets,a=t.coordinates;if(o)switch(t.type){case"LineString":t.coordinates=pi(a,o,i);break;case"Polygon":case"MultiLineString":li(a,o,i);break;case"MultiPolygon":n(a,(function(e,t){return li(e,o[t],i)}))}})),t.UTF8Encoding=!1,t}(e),c(h(e.features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var i=e.properties,o=e.geometry,a=[];switch(o.type){case"Polygon":var r=o.coordinates;a.push(new oi(r[0],r.slice(1)));break;case"MultiPolygon":n(o.coordinates,(function(e){e[0]&&a.push(new oi(e[0],e.slice(1)))}));break;case"LineString":a.push(new ai([o.coordinates]));break;case"MultiLineString":a.push(new ai(o.coordinates))}var s=new ri(i[t||"name"],a,i.cp);return s.properties=i,s}))}function ci(e){d(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var hi={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},di=g(hi),gi={"alignment-baseline":"textBaseline","stop-color":"stopColor"},fi=g(gi),vi=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var i=ci(e);this._defsUsePending=[];var n=new f;this._root=n;var o=[],a=i.getAttribute("viewBox")||"",r=parseFloat(i.getAttribute("width")||t.width),s=parseFloat(i.getAttribute("height")||t.height);isNaN(r)&&(r=null),isNaN(s)&&(s=null),xi(i,n,null,!0,!1);for(var l,p,u=i.firstChild;u;)this._parseNode(u,n,o,null,!1,!1),u=u.nextSibling;if(function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n[0].style[n[1]]=e[n[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],a){var c=Ti(a);c.length>=4&&(l={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(l&&null!=r&&null!=s&&(p=Ai(l,{x:0,y:0,width:r,height:s}),!t.ignoreViewBox)){var h=n;(n=new f).add(h),h.scaleX=h.scaleY=p.scale,h.x=p.x,h.y=p.y}return t.ignoreRootClip||null==r||null==s||n.setClipPath(new v({shape:{x:0,y:0,width:r,height:s}})),{root:n,width:r,height:s,viewBoxRect:l,viewBoxTransform:p,named:o}},e.prototype._parseNode=function(e,t,i,n,o,a){var r,s=e.nodeName.toLowerCase(),l=n;if("defs"===s&&(o=!0),"text"===s&&(a=!0),"defs"===s||"switch"===s)r=t;else{if(!o){var p=ii[s];if(p&&y(ii,s)){r=p.call(this,e,t);var u=e.getAttribute("name");if(u){var c={name:u,namedFrom:null,svgNodeTagLower:s,el:r};i.push(c),"g"===s&&(l=c)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:r});t.add(r)}}var h=yi[s];if(h&&y(yi,s)){var d=h.call(this,e),g=e.getAttribute("id");g&&(this._defs[g]=d)}}if(r&&r.isGroup)for(var f=e.firstChild;f;)1===f.nodeType?this._parseNode(f,r,i,l,o,a):3===f.nodeType&&a&&this._parseText(f,r),f=f.nextSibling},e.prototype._parseText=function(e,t){var i=new m({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Si(t,i),xi(e,i,this._defsUsePending,!1,!1),function(e,t){var i=t.__selfStyle;if(i){var n=i.textBaseline,o=n;n&&"auto"!==n?"baseline"===n?o="alphabetic":"before-edge"===n||"text-before-edge"===n?o="top":"after-edge"===n||"text-after-edge"===n?o="bottom":"central"!==n&&"mathematical"!==n||(o="middle"):o="alphabetic",e.style.textBaseline=o}var a=t.__inheritedStyle;if(a){var r=a.textAlign,s=r;r&&("middle"===r&&(s="center"),e.style.textAlign=s)}}(i,t);var n=i.style,o=n.fontSize;o&&o<9&&(n.fontSize=9,i.scaleX*=o/9,i.scaleY*=o/9);var a=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=a;var r=i.getBoundingRect();return this._textX+=r.width,t.add(i),i},e.internalField=void(ii={g:function(e,t){var i=new f;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i},rect:function(e,t){var i=new v;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(e,t){var i=new _;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),i.silent=!0,i},line:function(e,t){var i=new S;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(e,t){var i=new b;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(e,t){var i,n=e.getAttribute("points");n&&(i=bi(n));var o=new x({shape:{points:i||[]},silent:!0});return Si(t,o),xi(e,o,this._defsUsePending,!1,!1),o},polyline:function(e,t){var i,n=e.getAttribute("points");n&&(i=bi(n));var o=new w({shape:{points:i||[]},silent:!0});return Si(t,o),xi(e,o,this._defsUsePending,!1,!1),o},image:function(e,t){var i=new M;return Si(t,i),xi(e,i,this._defsUsePending,!1,!1),i.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),i.silent=!0,i},text:function(e,t){var i=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",o=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(n)+parseFloat(a);var r=new f;return Si(t,r),xi(e,r,this._defsUsePending,!1,!0),r},tspan:function(e,t){var i=e.getAttribute("x"),n=e.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));var o=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0",r=new f;return Si(t,r),xi(e,r,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(a),r},path:function(e,t){var i=e.getAttribute("d")||"",n=I(i);return Si(t,n),xi(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),e}(),yi={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),i=parseInt(e.getAttribute("y1")||"0",10),n=parseInt(e.getAttribute("x2")||"10",10),o=parseInt(e.getAttribute("y2")||"0",10),a=new T(t,i,n,o);return mi(e,a),_i(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),i=parseInt(e.getAttribute("cy")||"0",10),n=parseInt(e.getAttribute("r")||"0",10),o=new D(t,i,n);return mi(e,o),_i(e,o),o}};function mi(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function _i(e,t){for(var i=e.firstChild;i;){if(1===i.nodeType&&"stop"===i.nodeName.toLocaleLowerCase()){var n=i.getAttribute("offset"),o=void 0;o=n&&n.indexOf("%")>0?parseInt(n,10)/100:n?parseFloat(n):0;var a={};Oi(i,a,a);var r=a.stopColor||i.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:o,color:r})}i=i.nextSibling}}function Si(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),C(t.__inheritedStyle,e.__inheritedStyle))}function bi(e){for(var t=Ti(e),i=[],n=0;n<t.length;n+=2){var o=parseFloat(t[n]),a=parseFloat(t[n+1]);i.push([o,a])}return i}function xi(e,t,i,o,a){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},p={};1===e.nodeType&&(function(e,t){var i=e.getAttribute("transform");if(i){i=i.replace(/,/g," ");var n=[],o=null;i.replace(Di,(function(e,t,i){return n.push(t,i),""}));for(var a=n.length-1;a>0;a-=2){var s=n[a],l=n[a-1],p=Ti(s);switch(o=o||N(),l){case"translate":R(o,o,[parseFloat(p[0]),parseFloat(p[1]||"0")]);break;case"scale":A(o,o,[parseFloat(p[0]),parseFloat(p[1]||p[0])]);break;case"rotate":O(o,o,-parseFloat(p[0])*Ci,[parseFloat(p[1]||"0"),parseFloat(p[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(p[0])*Ci);r(o,[1,0,u,1,0,0],o);break;case"skewY":var c=Math.tan(parseFloat(p[0])*Ci);r(o,[1,c,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(p[0]),o[1]=parseFloat(p[1]),o[2]=parseFloat(p[2]),o[3]=parseFloat(p[3]),o[4]=parseFloat(p[4]),o[5]=parseFloat(p[5])}}t.setLocalTransform(o)}}(e,t),Oi(e,l,p),o||function(e,t,i){for(var n=0;n<di.length;n++){var o=di[n];null!=(a=e.getAttribute(o))&&(t[hi[o]]=a)}for(n=0;n<fi.length;n++){var a;o=fi[n];null!=(a=e.getAttribute(o))&&(i[gi[o]]=a)}}(e,l,p)),s.style=s.style||{},null!=l.fill&&(s.style.fill=Mi(s,"fill",l.fill,i)),null!=l.stroke&&(s.style.stroke=Mi(s,"stroke",l.stroke,i)),n(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=l[e]&&(s.style[e]=parseFloat(l[e]))})),n(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(e){null!=l[e]&&(s.style[e]=l[e])})),a&&(s.__selfStyle=p),l.lineDash&&(s.style.lineDash=c(Ti(l.lineDash),(function(e){return parseFloat(e)}))),"hidden"!==l.visibility&&"collapse"!==l.visibility||(s.invisible=!0),"none"===l.display&&(s.ignore=!0)}var wi=/^url\(\s*#(.*?)\)/;function Mi(e,t,i,n){var o=i&&i.match(wi);if(!o)return"none"===i&&(i=null),i;var a=L(o[1]);n.push([e,t,a])}var Ii=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Ti(e){return e.match(Ii)||[]}var Di=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ci=Math.PI/180;var Li=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Oi(e,t,i){var n,o=e.getAttribute("style");if(o)for(Li.lastIndex=0;null!=(n=Li.exec(o));){var a=n[1],r=y(hi,a)?hi[a]:null;r&&(t[r]=n[2]);var s=y(gi,a)?gi[a]:null;s&&(i[s]=n[2])}}function Ai(e,t){var i=t.width/e.width,n=t.height/e.height,o=Math.min(i,n);return{scale:o,x:-(e.x+e.width/2)*o+(t.x+t.width/2),y:-(e.y+e.height/2)*o+(t.y+t.height/2)}}var Ri=k(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Ni=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=k(),this._freedGraphics=[],this._mapName=e,this._parsedXML=ci(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],i=k();return n(e,(function(e){if(null==e.namedFrom){var n=new si(e.name,e.el);t.push(n),i.set(e.name,n)}})),{regions:t,regionsMap:i}}(e.named),i=t.regions,o=t.regionsMap;this._regions=i,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,i,a,r;try{i=(t=e&&(a=e,r={ignoreViewBox:!0,ignoreRootClip:!0},(new vi).parse(a,r))||{}).root,V(null!=i)}catch(b){throw new Error("Invalid svg format\n"+b.message)}var s=new f;s.add(i),s.isGeoSVGGraphicRoot=!0;var l=t.width,p=t.height,u=t.viewBoxRect,c=this._boundingRect;if(!c){var h=void 0,d=void 0,g=void 0,y=void 0;if(null!=l?(h=0,g=l):u&&(h=u.x,g=u.width),null!=p?(d=0,y=p):u&&(d=u.y,y=u.height),null==h||null==d){var m=i.getBoundingRect();null==h&&(h=m.x,g=m.width),null==d&&(d=m.y,y=m.height)}c=this._boundingRect=new o(h,d,g,y)}if(u){var _=Ai(u,c);i.scaleX=i.scaleY=_.scale,i.x=_.x,i.y=_.y}s.setClipPath(new v({shape:c.plain()}));var S=[];return n(t.named,(function(e){var t;null!=Ri.get(e.svgNodeTagLower)&&(S.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:s,boundingRect:c,named:S}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,i),i)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);i&&(t.removeKey(e),this._freedGraphics.push(i))},e}();for(var ki=[126,25],Vi="南海诸岛",Pi=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Gi=0;Gi<Pi.length;Gi++)for(var Fi=0;Fi<Pi[Gi].length;Fi++)Pi[Gi][Fi][0]/=10.5,Pi[Gi][Fi][1]/=-14,Pi[Gi][Fi][0]+=ki[0],Pi[Gi][Fi][1]+=ki[1];var zi={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};var Ei=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var Hi=function(){function e(e,t,i){var n;this.type="geoJSON",this._parsedMap=k(),this._mapName=e,this._specialAreas=i,this._geoJSON=d(n=t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}return e.prototype.load=function(e,t){t=t||"name";var i=this._parsedMap.get(t);if(!i){var a=this._parseToRegions(t);i=this._parsedMap.set(t,{regions:a,boundingRect:Bi(a)})}var r=k(),s=[];return n(i.regions,(function(t){var i=t.name;e&&y(e,i)&&(t=t.cloneShallow(i=e[i])),s.push(t),r.set(i,t)})),{regions:s,boundingRect:i.boundingRect||new o(0,0,0,0),regionsMap:r}},e.prototype._parseToRegions=function(e){var t,i=this._mapName,o=this._geoJSON;try{t=o?ui(o,e):[]}catch(a){throw new Error("Invalid geoJson format\n"+a.message)}return function(e,t){if("china"===e){for(var i=0;i<t.length;i++)if(t[i].name===Vi)return;t.push(new ri(Vi,c(Pi,(function(e){return{type:"polygon",exterior:e}})),ki))}}(i,t),n(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var i=zi[t.name];if(i){var n=t.getCenter();n[0]+=i[0]/10.5,n[1]+=-i[1]/14,t.setCenter(n)}}}(i,e),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:Ei[0]})}(i,e);var n=this._specialAreas&&this._specialAreas[t];n&&e.transformTo(n.left,n.top,n.width,n.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function Bi(e){for(var t,i=0;i<e.length;i++){var n=e[i].getBoundingRect();(t=t||n.clone()).union(n)}return t}var Xi=k();const Ui=function(e,t,i){if(t.svg){var n=new Ni(e,t.svg);Xi.set(e,n)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?i=t.specialAreas:o=t;n=new Hi(e,o,i);Xi.set(e,n)}},Yi=function(e){return Xi.get(e)},ji=function(e){var t=Xi.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()},Wi=function(e,t,i){var n=Xi.get(e);if(n)return n.load(t,i)};var Ji={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Zi=["lng","lat"],Ki=function(e){function t(t,i,n){var o=e.call(this,t)||this;o.dimensions=Zi,o.type="geo",o._nameCoordMap=k(),o.map=i;var a=n.projection,r=Wi(i,n.nameMap,n.nameProperty),s=Yi(i);o.resourceType=s?s.type:null;var l,p=o.regions=r.regions,u=Ji[s.type];if(o._regionsMap=r.regionsMap,o.regions=r.regions,o.projection=a,a)for(var c=0;c<p.length;c++){var h=p[c].getBoundingRect(a);(l=l||h.clone()).union(h)}else l=r.boundingRect;return o.setBoundingRect(l.x,l.y,l.width,l.height),o.aspectScale=a?1:P(n.aspectScale,u.aspectScale),o._invertLongitute=!a&&u.invertLongitute,o}return i(t,e),t.prototype._transformTo=function(e,t,i,n){var a=this.getBoundingRect(),r=this._invertLongitute;a=a.clone(),r&&(a.y=-a.y-a.height);var s=this._rawTransformable;s.transform=a.calculateTransform(new o(e,t,i,n));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,r&&(s.scaleY=-s.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var t=this.regions,i=0;i<t.length;i++){var n=t[i];if("geoJSON"===n.type&&n.contain(e))return t[i]}},t.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},t.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},t.prototype.dataToPoint=function(e,t,i){if(d(e)&&(e=this.getGeoCoord(e)),e){var n=this.projection;return n&&(e=n.project(e)),e&&this.projectedToPoint(e,t,i)}},t.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(t){return e.prototype.pointToData.call(this,t)},t.prototype.projectedToPoint=function(t,i,n){return e.prototype.dataToPoint.call(this,t,i,n)},t.prototype.convertToPixel=function(e,t,i){var n=$i(t);return n===this?n.dataToPoint(i):null},t.prototype.convertFromPixel=function(e,t,i){var n=$i(t);return n===this?n.pointToData(i):null},t}(It);function $i(e){var t=e.geoModel,i=e.seriesModel;return t?t.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo",F).models[0]||{}).coordinateSystem:null}function qi(e,t){var i=e.get("boundingCoords");if(null!=i){var n=i[0],o=i[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var a=this.projection;if(a){var r=n[0],s=n[1],l=o[0],c=o[1];n=[1/0,1/0],o=[-1/0,-1/0];var h=function(e,t,i,r){for(var s=i-e,l=r-t,c=0;c<=100;c++){var h=c/100,d=a.project([e+s*h,t+l*h]);p(n,n,d),u(o,o,d)}};h(r,s,l,s),h(l,s,l,c),h(l,c,r,c),h(r,c,l,s)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}else;}var d,g,f,v=this.getBoundingRect(),y=e.get("layoutCenter"),m=e.get("layoutSize"),_=t.getWidth(),S=t.getHeight(),b=v.width/v.height*this.aspectScale,x=!1;if(y&&m&&(d=[X(y[0],_),X(y[1],S)],g=X(m,Math.min(_,S)),isNaN(d[0])||isNaN(d[1])||isNaN(g)||(x=!0)),x)f={},b>1?(f.width=g,f.height=g/b):(f.height=g,f.width=g*b),f.y=d[1]-f.height/2,f.x=d[0]-f.width/2;else{var w=e.getBoxLayoutParams();w.aspect=b,f=U(w,{width:_,height:S})}this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}G(Ki,It);var Qi=function(){function e(){this.dimensions=Zi}return e.prototype.create=function(e,t){var i=[];function o(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",(function(e,n){var a=e.get("map"),r=new Ki(a+n,a,z({nameMap:e.get("nameMap")},o(e)));r.zoomLimit=e.get("scaleLimit"),i.push(r),e.coordinateSystem=r,r.model=e,r.resize=qi,r.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=i[t]}}));var a={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();a[t]=a[t]||[],a[t].push(e)}})),n(a,(function(e,a){var r=c(e,(function(e){return e.get("nameMap")})),s=new Ki(a,a,z({nameMap:E(r)},o(e[0])));s.zoomLimit=H.apply(null,c(e,(function(e){return e.get("scaleLimit")}))),i.push(s),s.resize=qi,s.resize(e[0],t),n(e,(function(e){e.coordinateSystem=s,function(e,t){n(t.get("geoCoord"),(function(t,i){e.addGeoCoord(i,t)}))}(s,e)}))})),i},e.prototype.getFilledRegions=function(e,t,i,o){for(var a=(e||[]).slice(),r=k(),s=0;s<a.length;s++)r.set(a[s].name,a[s]);var l=Wi(t,i,o);return n(l.regions,(function(e){var t=e.name,i=r.get(t),n=e.properties&&e.properties.echartsStyle;i||(i={name:t},a.push(i)),n&&B(i,n)})),a},e}(),en=new Qi,tn=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return i(t,e),t.prototype.init=function(e,t,i){var n=Yi(e.map);if(n&&"geoJSON"===n.type){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,i),Y(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=en.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var i={};this._optionModelMap=j(t.regions||[],(function(t,n){var o=n.name;return o&&(t.set(o,new W(n,e,e.ecModel)),n.selected&&(i[o]=!0)),t}),k()),t.selectedMap||(t.selectedMap=i)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new W(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,t){var i=this.getRegionModel(e),n="normal"===t?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:e};return J(n)?(o.status=t,n(o)):d(n)?n.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var t=this.option,i=t.selectedMode;i&&("multiple"!==i&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Z),nn=["rect","circle","line","ellipse","polygon","polyline","path"],on=k(nn),an=k(nn.concat(["g"])),rn=k(nn.concat(["g"])),sn=K();function ln(e){var t=e.getItemStyle(),i=e.get("areaColor");return null!=i&&(t.fill=i),t}function pn(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var un=function(){function e(e){var t=new f;this.uid=$("ec_map_draw"),this._controller=new Tt(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new f),t.add(this._svgGroup=new f)}return e.prototype.draw=function(e,t,i,n,o){var a="geo"===e.mainType,r=e.getData&&e.getData();a&&t.eachComponent({mainType:"series",subType:"map"},(function(t){r||t.getHostGeoModel()!==e||(r=t.getData())}));var s=e.coordinateSystem,l=this._regionsGroup,p=this.group,u=s.getTransformInfo(),c=u.raw,h=u.roam;!l.childAt(0)||o?(p.x=h.x,p.y=h.y,p.scaleX=h.scaleX,p.scaleY=h.scaleY,p.dirty()):q(p,h,e);var d=r&&r.getVisual("visualMeta")&&r.getVisual("visualMeta").length>0,g={api:i,geo:s,mapOrGeoModel:e,data:r,isVisualEncodedByVisualMap:d,isGeo:a,transformInfoRaw:c};"geoJSON"===s.resourceType?this._buildGeoJSON(g):"geoSVG"===s.resourceType&&this._buildSVG(g),this._updateController(e,t,i),this._updateMapSelectHandler(e,l,i,n)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=k(),i=k(),o=this._regionsGroup,a=e.transformInfoRaw,r=e.mapOrGeoModel,s=e.data,l=e.geo.projection,p=l&&l.stream;function u(e,t){return t&&(e=t(e)),e&&[e[0]*a.scaleX+a.x,e[1]*a.scaleY+a.y]}function c(e){for(var t=[],i=!p&&l&&l.project,n=0;n<e.length;++n){var o=u(e[n],i);o&&t.push(o)}return t}function h(e){return{shape:{points:c(e)}}}o.removeAll(),n(e.geo.regions,(function(a){var c=a.name,d=t.get(c),g=i.get(c)||{},v=g.dataIdx,y=g.regionModel;if(!d){d=t.set(c,new f),o.add(d),v=s?s.indexOfName(c):null;var m=(y=e.isGeo?r.getRegionModel(c):s?s.getItemModel(v):null).get("silent",!0);null!=m&&(d.silent=m),i.set(c,{dataIdx:v,regionModel:y})}var _=[],S=[];n(a.geometries,(function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);p&&(t=vn(t,p)),n(t,(function(e){_.push(new x(h(e)))}))}else{var i=e.points;p&&(i=vn(i,p,!0)),n(i,(function(e){S.push(new w(h(e)))}))}}));var b=u(a.getCenter(),l&&l.project);function M(t,i){if(t.length){var o=new pe({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});d.add(o),cn(e,o,v,y),hn(e,o,c,y,r,v,b),i&&(pn(o),n(o.states,pn))}}M(_),M(S,!0)})),t.each((function(t,n){var o=i.get(n),a=o.dataIdx,s=o.regionModel;dn(e,t,n,s,r,a),gn(e,t,n,s,r),fn(e,t,n,s,r)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,i=e.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var o=this._svgDispatcherMap=k(),a=!1;n(this._svgGraphicRecord.named,(function(t){var i=t.name,n=e.mapOrGeoModel,r=e.data,s=t.svgNodeTagLower,l=t.el,p=r?r.indexOfName(i):null,u=n.getRegionModel(i);null!=on.get(s)&&l instanceof Q&&cn(e,l,p,u),l instanceof Q&&(l.culling=!0);var c=u.get("silent",!0);(null!=c&&(l.silent=c),l.z2EmphasisLift=0,t.namedFrom)||(null!=rn.get(s)&&hn(e,l,i,u,n,p,null),dn(e,l,i,u,n,p),gn(e,l,i,u,n),null!=an.get(s)&&("self"===fn(e,l,i,u,n)&&(a=!0),(o.get(i)||o.set(i,[])).push(l)))}),this),this._enableBlurEntireSVG(a,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var i=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){ee(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=i&&(t.opacity=i),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var i=t.coordinateSystem;if("geoJSON"===i.resourceType){var n=this._regionsGroupByName;if(n){var o=n.get(e);return o?[o]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=Yi(e);if(t&&"geoSVG"===t.type){var i=t.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=Yi(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,i){var n=e.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=n.getZoom(),o.enable(e.get("roam")||!1);var r=e.mainType;function s(){var t={type:"geoRoam",componentType:r};return t[r+"Id"]=e.id,t}o.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,Dt(a,e.dx,e.dy),i.dispatchAction(z(s(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))}),this),o.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,Ct(a,e.scale,e.originX,e.originY),i.dispatchAction(z(s(),{totalZoom:a.zoom,zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))}),this),o.setPointerChecker((function(t,o,a){return n.containPoint([o,a])&&!te(t,i,e)}))},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=sn(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,i,n){var o=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){o._mouseDownFlag=!0})),t.on("click",(function(e){o._mouseDownFlag&&(o._mouseDownFlag=!1)})))},e}();function cn(e,t,i,n){var o=n.getModel("itemStyle"),a=n.getModel(["emphasis","itemStyle"]),r=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=ln(o),p=ln(a),u=ln(s),c=ln(r),h=e.data;if(h){var d=h.getItemVisual(i,"style"),g=h.getItemVisual(i,"decal");e.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),g&&(l.decal=ie(g,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=p,t.ensureState("select").style=u,t.ensureState("blur").style=c,ee(t)}function hn(e,t,i,n,o,a,r){var s=e.data,l=e.isGeo,p=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||p||u&&u.showLabel){var c=l?i:a,h=void 0;(!s||a>=0)&&(h=o);var d=r?{normal:{align:"center",verticalAlign:"middle"}}:null;ne(t,oe(n),{labelFetcher:h,labelDataIndex:c,defaultText:i},d);var g=t.getTextContent();if(g&&(sn(g).ignore=g.ignore,t.textConfig&&r)){var f=t.getBoundingRect().clone();t.textConfig.layoutRect=f,t.textConfig.position=[(r[0]-f.x)/f.width*100+"%",(r[1]-f.y)/f.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function dn(e,t,i,n,o,a){e.data?e.data.setItemGraphicEl(a,t):ae(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:i,region:n&&n.option||{}}}function gn(e,t,i,n,o){e.data||re({el:t,componentModel:o,itemName:i,itemTooltipOption:n.get("tooltip")})}function fn(e,t,i,n,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var a=n.getModel("emphasis"),r=a.get("focus");return se(t,r,a.get("blurScope"),a.get("disabled")),e.isGeo&&le(t,o,i),r}function vn(e,t,i){var o,a=[];function r(){o=[]}function s(){o.length&&(a.push(o),o=[])}var l=t({polygonStart:r,polygonEnd:s,lineStart:r,lineEnd:s,point:function(e,t){isFinite(e)&&isFinite(t)&&o.push([e,t])},sphere:function(){}});return!i&&l.polygonStart(),n(e,(function(e){l.lineStart();for(var t=0;t<e.length;t++)l.point(e[t][0],e[t][1]);l.lineEnd()})),!i&&l.polygonEnd(),a}var yn=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.focusBlurEnabled=!0,i}return i(t,e),t.prototype.init=function(e,t){this._api=t},t.prototype.render=function(e,t,i,n){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new un(i));var o=this._mapDraw;o.draw(e,t,i,this,n),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,t,i)},t.prototype._handleRegionClick=function(e){var t;ue(e.target,(function(e){return null!=(t=ae(e).eventData)}),!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},t.prototype.updateSelectStatus=function(e,t,i){var n=this;this._mapDraw.group.traverse((function(e){var t=ae(e).eventData;if(t)return n._model.isSelected(t.name)?i.enterSelect(e):i.leaveSelect(e),!0}))},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ce);function mn(e,t,i){Ui(e,t,i)}function _n(e){function t(t,i){i.update="geo:updateSelectStatus",e.registerAction(i,(function(e,i){var o={},a=[];return i.eachComponent({mainType:"geo",query:e},(function(i){i[t](e.name);var r=i.coordinateSystem;n(r.regions,(function(e){o[e.name]=i.isSelected(e.name)||!1}));var s=[];n(o,(function(e,t){o[t]&&s.push(t)})),a.push({geoIndex:i.componentIndex,name:s})})),{selected:o,allSelected:a,name:e.name}}))}e.registerCoordinateSystem("geo",en),e.registerComponentModel(tn),e.registerComponentView(yn),e.registerImpl("registerMap",mn),e.registerImpl("getMap",(function(e){return ji(e)})),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t,i){var o=e.componentType||"series";t.eachComponent({mainType:o,query:e},(function(t){var a=t.coordinateSystem;if("geo"===a.type){var r=Lt(a,e,t.get("scaleLimit"),i);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom),"series"===o&&n(t.seriesGroup,(function(e){e.setCenter(r.center),e.setZoom(r.zoom)}))}}))}))}var Sn=n;function bn(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function xn(e,t,i){var n={};return Sn(t,(function(t){var o,a=n[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);Sn(e[t],(function(e,n){if(Ot.isValidType(n)){var o={type:n,visual:e};i&&i(o,t),a[n]=new Ot(o),"opacity"===n&&((o=he(o)).type="colorAlpha",a.__hidden.__alphaForOpacity=new Ot(o))}}))})),n}var wn=function(e,t,i){var n=he((Mn[e]||{})[t]);return i&&fe(n)?n[n.length-1]:n},Mn={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},In=Ot.mapVisual,Tn=Ot.eachVisual,Dn=fe,Cn=n,Ln=me,On=_e,An=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.stateList=["inRange","outOfRange"],i.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],i.layoutMode={type:"box",ignoreSize:!0},i.dataBound=[-1/0,1/0],i.targetVisuals={},i.controllerVisuals={},i}return i(t,e),t.prototype.init=function(e,t,i){this.mergeDefaultAndTheme(e,i)},t.prototype.optionUpdated=function(e,t){var i=this.option;!t&&function(e,t,i){var o;n(i,(function(e){t.hasOwnProperty(e)&&bn(t[e])&&(o=!0)})),o&&n(i,(function(i){t.hasOwnProperty(i)&&bn(t[i])?e[i]=he(t[i]):delete e[i]}))}(i,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var t=this.stateList;e=ve(e,this),this.controllerVisuals=xn(this.option.controller,t,e),this.targetVisuals=xn(this.option.target,t,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,i){t.push(i)})):t=ye(e),t},t.prototype.eachTargetSeries=function(e,t){n(this.getTargetSeriesIndices(),(function(i){var n=this.ecModel.getSeriesByIndex(i);n&&e.call(t,n)}),this)},t.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries((function(i){i===e&&(t=!0)})),t},t.prototype.formatValueText=function(e,t,i){var n,o=this.option,a=o.precision,r=this.dataBound,s=o.formatter;i=i||["<",">"],fe(e)&&(e=e.slice(),n=!0);var l=t?e:n?[p(e[0]),p(e[1])]:p(e);return d(s)?s.replace("{value}",n?l[0]:l).replace("{value2}",n?l[1]:l):J(s)?n?s(e[0],e[1]):s(e):n?e[0]===r[0]?i[0]+" "+l[1]:e[1]===r[1]?i[1]+" "+l[0]:l[0]+" - "+l[1]:l;function p(e){return e===r[0]?"min":e===r[1]?"max":(+e).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var e=this.option,t=Ln([e.min,e.max]);this._dataExtent=t},t.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var i=e.dimensions,n=i.length-1;n>=0;n--){var o=i[n],a=e.getDimensionInfo(o);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,i={inRange:t.inRange,outOfRange:t.outOfRange},n=t.target||(t.target={}),o=t.controller||(t.controller={});B(n,i),B(o,i);var a=this.isCategory();function r(i){Dn(t.color)&&!i.inRange&&(i.inRange={color:t.color.slice().reverse()}),i.inRange=i.inRange||{color:e.get("gradientColor")}}r.call(this,n),r.call(this,o),function(e,t,i){var n=e[t],o=e[i];n&&!o&&(o=e[i]={},Cn(n,(function(e,t){if(Ot.isValidType(t)){var i=wn(t,"inactive",a);null!=i&&(o[t]=i,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,i=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,n=this.get("inactiveColor"),o=this.getItemSymbol()||"roundRect";Cn(this.stateList,(function(r){var s=this.itemSize,l=e[r];l||(l=e[r]={color:a?n:[n]}),null==l.symbol&&(l.symbol=t&&he(t)||(a?o:[o])),null==l.symbolSize&&(l.symbolSize=i&&he(i)||(a?s[0]:[s[0],s[0]])),l.symbol=In(l.symbol,(function(e){return"none"===e?o:e}));var p=l.symbolSize;if(null!=p){var u=-1/0;Tn(p,(function(e){e>u&&(u=e)})),l.symbolSize=In(p,(function(e){return On(e,[0,u],[0,s[0]],!0)}))}}),this)}.call(this,o)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Z),Rn=[20,140],Nn=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return i(t,e),t.prototype.optionUpdated=function(t,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=Rn[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=Rn[1])},t.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):fe(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),n(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)}),this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),t=me((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},t.prototype.getValueState=function(e){var t=this.option.range,i=this.getExtent();return(t[0]<=i[0]||t[0]<=e)&&(t[1]>=i[1]||e<=t[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries((function(i){var n=[],o=i.getData();o.each(this.getDataDimensionIndex(o),(function(t,i){e[0]<=t&&t<=e[1]&&n.push(i)}),this),t.push({seriesId:i.id,dataIndex:n})}),this),t},t.prototype.getVisualMeta=function(e){var t=kn(this,"outOfRange",this.getExtent()),i=kn(this,"inRange",this.option.range.slice()),n=[];function o(t,i){n.push({value:t,color:e(t,i)})}for(var a=0,r=0,s=i.length,l=t.length;r<l&&(!i.length||t[r]<=i[0]);r++)t[r]<i[a]&&o(t[r],"outOfRange");for(var p=1;a<s;a++,p=0)p&&n.length&&o(i[a],"outOfRange"),o(i[a],"inRange");for(p=1;r<l;r++)(!i.length||i[i.length-1]<t[r])&&(p&&(n.length&&o(n[n.length-1].value,"outOfRange"),p=0),o(t[r],"outOfRange"));var u=n.length;return{stops:n,outerColors:[u?n[0].color:"transparent",u?n[u-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Se(An.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(An);function kn(e,t,i){if(i[0]===i[1])return i.slice();for(var n=(i[1]-i[0])/200,o=i[0],a=[],r=0;r<=200&&o<i[1];r++)a.push(o),o+=n;return a.push(i[1]),a}var Vn=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.autoPositionValues={left:1,right:1,top:1,bottom:1},i}return i(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t},t.prototype.render=function(e,t,i,n){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,i,n):this.group.removeAll()},t.prototype.renderBackground=function(e){var t=this.visualMapModel,i=be(t.get("padding")||0),n=e.getBoundingRect();e.add(new v({z2:-1,silent:!0,shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[3]+i[1],height:n.height+i[0]+i[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,t,i){var o=(i=i||{}).forceState,a=this.visualMapModel,r={};if("color"===t){var s=a.get("contentColor");r.color=s}function l(e){return r[e]}function p(e,t){r[e]=t}var u=a.controllerVisuals[o||a.getValueState(e)],c=Ot.prepareVisualTypes(u);return n(c,(function(n){var o=u[n];i.convertOpacityToAlpha&&"opacity"===n&&(n="colorAlpha",o=u.__alphaForOpacity),Ot.dependsOn(n,t)&&o&&o.applyVisual(e,l,p)})),r[t]},t.prototype.positionGroup=function(e){var t=this.visualMapModel,i=this.api;xe(e,t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(e,t,i,n){},t.type="visualMap",t}(ce),Pn=[["left","right","width"],["top","bottom","height"]];function Gn(e,t,i){var n=e.option,o=n.align;if(null!=o&&"auto"!==o)return o;for(var a={width:t.getWidth(),height:t.getHeight()},r="horizontal"===n.orient?1:0,s=Pn[r],l=[0,null,10],p={},u=0;u<3;u++)p[Pn[1-r][u]]=l[u],p[s[u]]=2===u?i[0]:n[s[u]];var c=[["x","width",3],["y","height",0]][r],h=U(p,a,n.padding);return s[(h.margin[c[2]]||0)+h[c[0]]+.5*h[c[1]]<.5*a[c[1]]?0:1]}function Fn(e,t){return n(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var zn=_e,En=n,Hn=Math.min,Bn=Math.max,Xn=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i._shapes={},i._dataInterval=[],i._handleEnds=[],i._hoverLinkDataIndices=[],i}return i(t,e),t.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this._hoverLinkFromSeriesMouseOver=ve(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ve(this._hideIndicator,this)},t.prototype.doRender=function(e,t,i,n){n&&"selectDataRange"===n.type&&n.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var i=e.get("text");this._renderEndsText(t,i,0),this._renderEndsText(t,i,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},t.prototype._renderEndsText=function(e,t,i){if(t){var n=t[1-i];n=null!=n?n+"":"";var o=this.visualMapModel,a=o.get("textGap"),r=o.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([r[0]/2,0===i?-a:r[1]+a],s),p=this._applyTransform(0===i?"bottom":"top",s),u=this._orient,c=this.visualMapModel.textStyleModel;this.group.add(new we({style:Me(c,{x:l[0],y:l[1],verticalAlign:"horizontal"===u?"middle":p,align:"horizontal"===u?p:"center",text:n})}))}},t.prototype._renderBar=function(e){var t=this.visualMapModel,i=this._shapes,n=t.itemSize,o=this._orient,a=this._useHandle,r=Gn(t,this.api,n),s=i.mainGroup=this._createBarGroup(r),l=new f;s.add(l),l.add(i.outOfRange=Un()),l.add(i.inRange=Un(null,a?jn(this._orient):null,ve(this._dragHandle,this,"all",!1),ve(this._dragHandle,this,"all",!0))),l.setClipPath(new v({shape:{x:0,y:0,width:n[0],height:n[1],r:3}}));var p=t.textStyleModel.getTextRect("国"),u=Bn(p.width,p.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(t,s,0,n,u,o),this._createHandle(t,s,1,n,u,o)),this._createIndicator(t,s,n,u,o),e.add(s)},t.prototype._createHandle=function(e,t,i,n,o,a){var r=ve(this._dragHandle,this,i,!1),s=ve(this._dragHandle,this,i,!0),l=Ie(e.get("handleSize"),n[0]),p=Te(e.get("handleIcon"),-l/2,-l/2,l,l,null,!0),u=jn(this._orient);p.attr({cursor:u,draggable:!0,drift:r,ondragend:s,onmousemove:function(e){De(e.event)}}),p.x=n[0]/2,p.useStyle(e.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Ce(p,!0),t.add(p);var c=this.visualMapModel.textStyleModel,h=new we({cursor:u,draggable:!0,drift:r,onmousemove:function(e){De(e.event)},ondragend:s,style:Me(c,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var d=[l,0],g=this._shapes;g.handleThumbs[i]=p,g.handleLabelPoints[i]=d,g.handleLabels[i]=h},t.prototype._createIndicator=function(e,t,i,n,o){var a=Ie(e.get("indicatorSize"),i[0]),r=Te(e.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);r.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var s=e.getModel("indicatorStyle").getItemStyle();if(r instanceof M){var l=r.style;r.useStyle(z({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else r.useStyle(s);t.add(r);var p=this.visualMapModel.textStyleModel,u=new we({silent:!0,invisible:!0,style:Me(p,{x:0,y:0,text:""})});this.group.add(u);var c=[("horizontal"===o?n/2:6)+i[0]/2,0],h=this._shapes;h.indicator=r,h.indicatorLabel=u,h.indicatorLabelPoint=c,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,t,i,n){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([i,n],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():Yn(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),i=e.getExtent(),n=[0,e.itemSize[1]];this._handleEnds=[zn(t[0],i,n,!0),zn(t[1],i,n,!0)]},t.prototype._updateInterval=function(e,t){t=t||0;var i=this.visualMapModel,n=this._handleEnds,o=[0,i.itemSize[1]];Le(t,n,o,e,0);var a=i.getExtent();this._dataInterval=[zn(n[0],o,a,!0),zn(n[1],o,a,!0)]},t.prototype._updateView=function(e){var t=this.visualMapModel,i=t.getExtent(),n=this._shapes,o=[0,t.itemSize[1]],a=e?o:this._handleEnds,r=this._createBarVisual(this._dataInterval,i,a,"inRange"),s=this._createBarVisual(i,i,o,"outOfRange");n.inRange.setStyle({fill:r.barColor}).setShape("points",r.barPoints),n.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(a,r)},t.prototype._createBarVisual=function(e,t,i,n){var o={forceState:n,convertOpacityToAlpha:!0},a=this._makeColorGradient(e,o),r=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(i,r);return{barColor:new T(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(e,t){var i=[],n=(e[1]-e[0])/100;i.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var a=e[0]+n*o;if(a>e[1])break;i.push({color:this.getControllerVisual(a,"color",t),offset:o/100})}return i.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),i},t.prototype._createBarPoints=function(e,t){var i=this.visualMapModel.itemSize;return[[i[0]-t[0],e[0]],[i[0],e[0]],[i[0],e[1]],[i[0]-t[1],e[1]]]},t.prototype._createBarGroup=function(e){var t=this._orient,i=this.visualMapModel.get("inverse");return new f("horizontal"!==t||i?"horizontal"===t&&i?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||i?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,t){if(this._useHandle){var i=this._shapes,n=this.visualMapModel,o=i.handleThumbs,a=i.handleLabels,r=n.itemSize,s=n.getExtent(),l=this._applyTransform("left",i.mainGroup);En([0,1],(function(p){var u=o[p];u.setStyle("fill",t.handlesColor[p]),u.y=e[p];var c=zn(e[p],[0,r[1]],s,!0),h=this.getControllerVisual(c,"symbolSize");u.scaleX=u.scaleY=h/r[0],u.x=r[0]-h/2;var d=Oe(i.handleLabelPoints[p],Ae(u,this.group));if("horizontal"===this._orient){var g="left"===l||"top"===l?(r[0]-h)/2:(r[0]-h)/-2;d[1]+=g}a[p].setStyle({x:d[0],y:d[1],text:n.formatValueText(this._dataInterval[p]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",i.mainGroup):"center"})}),this)}},t.prototype._showIndicator=function(e,t,i,n){var o=this.visualMapModel,a=o.getExtent(),r=o.itemSize,s=[0,r[1]],l=this._shapes,p=l.indicator;if(p){p.attr("invisible",!1);var u=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),c=this.getControllerVisual(e,"symbolSize"),h=zn(e,a,s,!0),d=r[0]-c/2,g={x:p.x,y:p.y};p.y=h,p.x=d;var f=Oe(l.indicatorLabelPoint,Ae(p,this.group)),v=l.indicatorLabel;v.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),m="horizontal"===this._orient;v.setStyle({text:(i||"")+o.formatValueText(t),verticalAlign:m?y:"middle",align:m?"center":y});var _={x:d,y:h,style:{fill:u}},S={style:{x:f[0],y:f[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};p.x=g.x,p.y=g.y,p.animateTo(_,b),v.animateTo(S,b)}else p.attr(_),v.attr(S);this._firstShowIndicator=!1;var x=this._shapes.handleLabels;if(x)for(var w=0;w<x.length;w++)this.api.enterBlur(x[w])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var i=e.visualMapModel.itemSize,n=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);n[1]=Hn(Bn(0,n[1]),i[1]),e._doHoverLinkToSeries(n[1],0<=n[0]&&n[0]<=i[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,t){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var o=[0,n[1]],a=i.getExtent();e=Hn(Bn(o[0],e),o[1]);var r=function(e,t,i){var n=6,o=e.get("hoverLinkDataSize");o&&(n=zn(o,t,i,!0)/2);return n}(i,a,o),s=[e-r,e+r],l=zn(e,o,a,!0),p=[zn(s[0],o,a,!0),zn(s[1],o,a,!0)];s[0]<o[0]&&(p[0]=-1/0),s[1]>o[1]&&(p[1]=1/0),t&&(p[0]===-1/0?this._showIndicator(l,p[1],"< ",r):p[1]===1/0?this._showIndicator(l,p[0],"> ",r):this._showIndicator(l,l,"≈ ",r));var u=this._hoverLinkDataIndices,c=[];(t||Yn(i))&&(c=this._hoverLinkDataIndices=i.findTargetDataIndices(p));var h=Re(u,c);this._dispatchHighDown("downplay",Fn(h[0],i)),this._dispatchHighDown("highlight",Fn(h[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(ue(e.target,(function(e){var i=ae(e);if(null!=i.dataIndex)return t=i,!0}),!0),t){var i=this.ecModel.getSeriesByIndex(t.seriesIndex),n=this.visualMapModel;if(n.isTargetSeries(i)){var o=i.getData(t.dataType),a=o.getStore().get(n.getDataDimensionIndex(o),t.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var i=0;i<t.length;i++)this.api.leaveBlur(t[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Fn(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,t,i,n){var o=Ae(t,n?null:this.group);return fe(e)?Oe(e,o,i):Ne(e,o,i)},t.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(Vn);function Un(e,t,i,n){return new x({shape:{points:e},draggable:!!i,cursor:t,drift:i,onmousemove:function(e){De(e.event)},ondragend:n})}function Yn(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function jn(e){return"vertical"===e?"ns-resize":"ew-resize"}var Wn={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Jn=function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))},Zn=[{createOnAllSeries:!0,reset:function(e,t){var i=[];return t.eachComponent("visualMap",(function(t){var o,a,r,s,l,p=e.pipelineContext;!t.isTargetSeries(e)||p&&p.large||i.push((o=t.stateList,a=t.targetVisuals,r=ve(t.getValueState,t),s=t.getDataDimensionIndex(e.getData()),l={},n(o,(function(e){var t=Ot.prepareVisualTypes(a[e]);l[e]=t})),{progress:function(e,t){var i,n;function o(e){return de(t,n,e)}function p(e,i){ge(t,n,e,i)}null!=s&&(i=t.getDimensionIndex(s));for(var u=t.getStore();null!=(n=e.next());){var c=t.getRawDataItem(n);if(!c||!1!==c.visualMap)for(var h=null!=s?u.get(i,n):n,d=r(h),g=a[d],f=l[d],v=0,y=f.length;v<y;v++){var m=f[v];g[m]&&g[m].applyVisual(h,o,p)}}}}))})),i}},{createOnAllSeries:!0,reset:function(e,t){var i=e.getData(),n=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(ve(Kn,null,e,t))||{stops:[],outerColors:[]},a=t.getDataDimensionIndex(i);a>=0&&(o.dimension=a,n.push(o))}})),e.getData().setVisual("visualMeta",n)}}];function Kn(e,t,i,n){for(var o=t.targetVisuals[n],a=Ot.prepareVisualTypes(o),r={color:ke(e.getData(),"color")},s=0,l=a.length;s<l;s++){var p=a[s],u=o["opacity"===p?"__alphaForOpacity":p];u&&u.applyVisual(i,c,h)}return r.color;function c(e){return r[e]}function h(e,t){r[e]=t}}var $n=n;function qn(e){var t=e&&e.visualMap;fe(t)||(t=t?[t]:[]),$n(t,(function(e){if(e){Qn(e,"splitList")&&!Qn(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&fe(t)&&$n(t,(function(e){Ve(e)&&(Qn(e,"start")&&!Qn(e,"min")&&(e.min=e.start),Qn(e,"end")&&!Qn(e,"max")&&(e.max=e.end))}))}}))}function Qn(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var eo=!1;function to(e){eo||(eo=!0,e.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"})),e.registerAction(Wn,Jn),n(Zn,(function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)})),e.registerPreprocessor(qn))}function io(e){e.registerComponentModel(Nn),e.registerComponentView(Xn),to(e)}var no=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i._pieceList=[],i}return i(t,e),t.prototype.optionUpdated=function(t,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],oo[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var o=this.option.categories;this.resetVisual((function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=he(o)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=c(this._pieceList,(function(e){return e=he(e),"inRange"!==t&&(e.visual=null),e})))}))},t.prototype.completeVisualOption=function(){var t=this.option,i={},o=Ot.listVisualTypes(),a=this.isCategory();function r(e,t,i){return e&&e[t]&&e[t].hasOwnProperty(i)}n(t.pieces,(function(e){n(o,(function(t){e.hasOwnProperty(t)&&(i[t]=1)}))})),n(i,(function(e,i){var o=!1;n(this.stateList,(function(e){o=o||r(t,e,i)||r(t.target,e,i)}),this),!o&&n(this.stateList,(function(e){(t[e]||(t[e]={}))[i]=wn(i,"inRange"===e?"active":"inactive",a)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var i=this.option,o=this._pieceList,a=(t?i:e).selected||{};if(i.selected=a,n(o,(function(e,t){var i=this.getSelectedMapKey(e);a.hasOwnProperty(i)||(a[i]=!0)}),this),"single"===i.selectedMode){var r=!1;n(o,(function(e,t){var i=this.getSelectedMapKey(e);a[i]&&(r?a[i]=!1:r=!0)}),this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=he(e)},t.prototype.getValueState=function(e){var t=Ot.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],i=this._pieceList;return this.eachTargetSeries((function(n){var o=[],a=n.getData();a.each(this.getDataDimensionIndex(a),(function(t,n){Ot.findPieceIndex(t,i)===e&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var i=e.interval||[];t=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],i=["",""],o=this,a=this._pieceList.slice();if(a.length){var r=a[0].interval[0];r!==-1/0&&a.unshift({interval:[-1/0,r]}),(r=a[a.length-1].interval[1])!==1/0&&a.push({interval:[r,1/0]})}else a.push({interval:[-1/0,1/0]});var s=-1/0;return n(a,(function(e){var t=e.interval;t&&(t[0]>s&&l([s,t[0]],"outOfRange"),l(t.slice()),s=t[1])}),this),{stops:t,outerColors:i}}function l(n,a){var r=o.getRepresentValue({interval:n});a||(a=o.getValueState(r));var s=e(r,a);n[0]===-1/0?i[0]=s:n[1]===1/0?i[1]=s:t.push({value:n[0],color:s},{value:n[1],color:s})}},t.type="visualMap.piecewise",t.defaultOption=Se(An.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(An),oo={splitNumber:function(e){var t=this.option,i=Math.min(t.precision,20),o=this.getExtent(),a=t.splitNumber;a=Math.max(parseInt(a,10),1),t.splitNumber=a;for(var r=(o[1]-o[0])/a;+r.toFixed(i)!==r&&i<5;)i++;t.precision=i,r=+r.toFixed(i),t.minOpen&&e.push({interval:[-1/0,o[0]],close:[0,0]});for(var s=0,l=o[0];s<a;l+=r,s++){var p=s===a-1?o[1]:l+r;e.push({interval:[l,p],close:[1,1]})}t.maxOpen&&e.push({interval:[o[1],1/0],close:[0,0]}),Pe(e),n(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;n(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),ao(t,e)},pieces:function(e){var t=this.option;n(t.pieces,(function(t,i){Ve(t)||(t={value:t});var n={text:"",index:i};if(null!=t.label&&(n.text=t.label),t.hasOwnProperty("value")){var o=n.value=t.value;n.interval=[o,o],n.close=[1,1]}else{for(var a=n.interval=[],r=n.close=[0,0],s=[1,0,1],l=[-1/0,1/0],p=[],u=0;u<2;u++){for(var c=[["gte","gt","min"],["lte","lt","max"]][u],h=0;h<3&&null==a[u];h++)a[u]=t[c[h]],r[u]=s[h],p[u]=2===h;null==a[u]&&(a[u]=l[u])}p[0]&&a[1]===1/0&&(r[0]=0),p[1]&&a[0]===-1/0&&(r[1]=0),a[0]===a[1]&&r[0]&&r[1]&&(n.value=a[0])}n.visual=Ot.retrieveVisuals(t),e.push(n)}),this),ao(t,e),Pe(e),n(e,(function(e){var t=e.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,i)}),this)}};function ao(e,t){var i=e.inverse;("vertical"===e.orient?!i:i)&&t.reverse()}var ro=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return i(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,i=t.get("textGap"),o=t.textStyleModel,a=o.getFont(),r=o.getTextColor(),s=this._getItemAlign(),l=t.itemSize,p=this._getViewData(),u=p.endsText,c=H(t.get("showLabel",!0),!u),h=!t.get("selectedMode");u&&this._renderEndsText(e,u[0],l,c,s),n(p.viewPieceList,(function(n){var o=n.piece,p=new f;p.onclick=ve(this._onItemClick,this,o),this._enableHoverLink(p,n.indexInModelPieceList);var u=t.getRepresentValue(o);if(this._createItemSymbol(p,u,[0,0,l[0],l[1]],h),c){var d=this.visualMapModel.getValueState(u);p.add(new we({style:{x:"right"===s?-i:l[0]+i,y:l[1]/2,text:o.text,verticalAlign:"middle",align:s,font:a,fill:r,opacity:"outOfRange"===d?.5:1},silent:h}))}e.add(p)}),this),u&&this._renderEndsText(e,u[1],l,c,s),Ge(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var i=this;e.on("mouseover",(function(){return n("highlight")})).on("mouseout",(function(){return n("downplay")}));var n=function(e){var n=i.visualMapModel;n.option.hoverLink&&i.api.dispatchAction({type:e,batch:Fn(n.findTargetDataIndices(t),n)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return Gn(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},t.prototype._renderEndsText=function(e,t,i,n,o){if(t){var a=new f,r=this.visualMapModel.textStyleModel;a.add(new we({style:Me(r,{x:n?"right"===o?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:n?o:"center",text:t})})),e.add(a)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=c(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),i=e.get("text"),n=e.get("orient"),o=e.get("inverse");return("horizontal"===n?o:!o)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},t.prototype._createItemSymbol=function(e,t,i,n){var o=Te(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color"));o.silent=n,e.add(o)},t.prototype._onItemClick=function(e){var t=this.visualMapModel,i=t.option,o=i.selectedMode;if(o){var a=he(i.selected),r=t.getSelectedMapKey(e);"single"===o||!0===o?(a[r]=!0,n(a,(function(e,t){a[t]=t===r}))):a[r]=!a[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(Vn);function so(e){e.registerComponentModel(no),e.registerComponentView(ro),to(e)}function lo(e){Fe(io),Fe(so)}var po=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return i(t,e),t.prototype.getInitialData=function(e){return ze(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new f,i=Te("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(i),i.setStyle(e.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),a="none"===n?"circle":n,r=.8*e.itemHeight,s=Te(a,(e.itemWidth-r)/2,(e.itemHeight-r)/2,r,r,e.itemStyle.fill);t.add(s),s.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?o:e.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([e.itemWidth/2,e.itemHeight/2]),a.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Ee);function uo(e,t,i){var n=e.getBaseAxis(),o=e.getOtherAxis(n),a=function(e,t){var i=0,n=e.scale.getExtent();"start"===t?i=n[0]:"end"===t?i=n[1]:Be(t)&&!isNaN(t)?i=t:n[0]>0?i=n[0]:n[1]<0&&(i=n[1]);return i}(o,i),r=n.dim,s=o.dim,l=t.mapDimension(s),p=t.mapDimension(r),u="x"===s||"radius"===s?1:0,h=c(e.dimensions,(function(e){return t.mapDimension(e)})),d=!1,g=t.getCalculationInfo("stackResultDimension");return He(t,h[0])&&(d=!0,h[0]=g),He(t,h[1])&&(d=!0,h[1]=g),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:r,stacked:!!d,valueDim:l,baseDim:p,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function co(e,t,i,n){var o=NaN;e.stacked&&(o=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=e.valueStart);var a=e.baseDataOffset,r=[];return r[a]=i.get(e.baseDim,n),r[1-a]=o,t.dataToPoint(r)}var ho=Math.min,go=Math.max;function fo(e,t){return isNaN(e)||isNaN(t)}function vo(e,t,i,n,o,a,r,s,l){for(var p,u,c,h,d,g,f=i,v=0;v<n;v++){var y=t[2*f],m=t[2*f+1];if(f>=o||f<0)break;if(fo(y,m)){if(l){f+=a;continue}break}if(f===i)e[a>0?"moveTo":"lineTo"](y,m),c=y,h=m;else{var _=y-p,S=m-u;if(_*_+S*S<.5){f+=a;continue}if(r>0){for(var b=f+a,x=t[2*b],w=t[2*b+1];x===y&&w===m&&v<n;)v++,f+=a,x=t[2*(b+=a)],w=t[2*b+1],_=(y=t[2*f])-p,S=(m=t[2*f+1])-u;var M=v+1;if(l)for(;fo(x,w)&&M<n;)M++,x=t[2*(b+=a)],w=t[2*b+1];var I=.5,T=0,D=0,C=void 0,L=void 0;if(M>=n||fo(x,w))d=y,g=m;else{T=x-p,D=w-u;var O=y-p,A=x-y,R=m-u,N=w-m,k=void 0,V=void 0;if("x"===s){var P=T>0?1:-1;d=y-P*(k=Math.abs(O))*r,g=m,C=y+P*(V=Math.abs(A))*r,L=m}else if("y"===s){var G=D>0?1:-1;d=y,g=m-G*(k=Math.abs(R))*r,C=y,L=m+G*(V=Math.abs(N))*r}else k=Math.sqrt(O*O+R*R),d=y-T*r*(1-(I=(V=Math.sqrt(A*A+N*N))/(V+k))),g=m-D*r*(1-I),L=m+D*r*I,C=ho(C=y+T*r*I,go(x,y)),L=ho(L,go(w,m)),C=go(C,ho(x,y)),g=m-(D=(L=go(L,ho(w,m)))-m)*k/V,d=ho(d=y-(T=C-y)*k/V,go(p,y)),g=ho(g,go(u,m)),C=y+(T=y-(d=go(d,ho(p,y))))*V/k,L=m+(D=m-(g=go(g,ho(u,m))))*V/k}e.bezierCurveTo(c,h,d,g,y,m),c=C,h=L}else e.lineTo(y,m)}p=y,u=m,f+=a}return v}var yo=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),mo=function(e){function t(t){var i=e.call(this,t)||this;return i.type="ec-polyline",i}return i(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new yo},t.prototype.buildPath=function(e,t){var i=t.points,n=0,o=i.length/2;if(t.connectNulls){for(;o>0&&fo(i[2*o-2],i[2*o-1]);o--);for(;n<o&&fo(i[2*n],i[2*n+1]);n++);}for(;n<o;)n+=vo(e,i,n,o,o,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,n,o=this.path.data,a=je.CMD,r="x"===t,s=[],l=0;l<o.length;){var p=void 0,u=void 0,c=void 0,h=void 0,d=void 0,g=void 0,f=void 0;switch(o[l++]){case a.M:i=o[l++],n=o[l++];break;case a.L:if(p=o[l++],u=o[l++],(f=r?(e-i)/(p-i):(e-n)/(u-n))<=1&&f>=0){var v=r?(u-n)*f+n:(p-i)*f+i;return r?[e,v]:[v,e]}i=p,n=u;break;case a.C:p=o[l++],u=o[l++],c=o[l++],h=o[l++],d=o[l++],g=o[l++];var y=r?Ue(i,p,c,d,e,s):Ue(n,u,h,g,e,s);if(y>0)for(var m=0;m<y;m++){var _=s[m];if(_<=1&&_>=0){v=r?We(n,u,h,g,_):We(i,p,c,d,_);return r?[e,v]:[v,e]}}i=d,n=g}}},t}(Ye),_o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(yo),So=function(e){function t(t){var i=e.call(this,t)||this;return i.type="ec-polygon",i}return i(t,e),t.prototype.getDefaultShape=function(){return new _o},t.prototype.buildPath=function(e,t){var i=t.points,n=t.stackedOnPoints,o=0,a=i.length/2,r=t.smoothMonotone;if(t.connectNulls){for(;a>0&&fo(i[2*a-2],i[2*a-1]);a--);for(;o<a&&fo(i[2*o],i[2*o+1]);o++);}for(;o<a;){var s=vo(e,i,o,a,a,1,t.smooth,r,t.connectNulls);vo(e,n,o+s-1,s,a,-1,t.stackedOnSmooth,r,t.connectNulls),o+=s+1,e.closePath()}},t}(Ye);function bo(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return;return!0}}function xo(e){for(var t=1/0,i=1/0,n=-1/0,o=-1/0,a=0;a<e.length;){var r=e[a++],s=e[a++];isNaN(r)||(t=Math.min(r,t),n=Math.max(r,n)),isNaN(s)||(i=Math.min(s,i),o=Math.max(s,o))}return[[t,i],[n,o]]}function wo(e,t){var i=xo(e),n=i[0],o=i[1],a=xo(t),r=a[0],s=a[1];return Math.max(Math.abs(n[0]-r[0]),Math.abs(n[1]-r[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function Mo(e){return Be(e)?e:e?.5:0}function Io(e,t,i,n,o){var a=i.getBaseAxis(),r="x"===a.dim||"radius"===a.dim?0:1,s=[],l=0,p=[],u=[],c=[],h=[];if(o){for(l=0;l<e.length;l+=2){var d=t||e;isNaN(d[l])||isNaN(d[l+1])||h.push(e[l],e[l+1])}e=h}for(l=0;l<e.length-2;l+=2)switch(c[0]=e[l+2],c[1]=e[l+3],u[0]=e[l],u[1]=e[l+1],s.push(u[0],u[1]),n){case"end":p[r]=c[r],p[1-r]=u[1-r],s.push(p[0],p[1]);break;case"middle":var g=(u[r]+c[r])/2,f=[];p[r]=f[r]=g,p[1-r]=u[1-r],f[1-r]=c[1-r],s.push(p[0],p[1]),s.push(f[0],f[1]);break;default:p[r]=u[r],p[1-r]=c[1-r],s.push(p[0],p[1])}return s.push(e[l++],e[l++]),s}function To(e,t,i){var o=e.getVisual("visualMeta");if(o&&o.length&&e.count()&&"cartesian2d"===t.type){for(var a,r,s=o.length-1;s>=0;s--){var l=e.getDimensionInfo(o[s].dimension);if("x"===(a=l&&l.coordDim)||"y"===a){r=o[s];break}}if(r){var p=t.getAxis(a),u=c(r.stops,(function(e){return{coord:p.toGlobalCoord(p.dataToCoord(e.value)),color:e.color}})),h=u.length,d=r.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),d.reverse());var g=function(e,t){var i,n,o=[],a=e.length;function r(e,t,i){var n=e.coord,o=(i-n)/(t.coord-n);return{coord:i,color:st(o,[e.color,t.color])}}for(var s=0;s<a;s++){var l=e[s],p=l.coord;if(p<0)i=l;else{if(p>t){n?o.push(r(n,l,t)):i&&o.push(r(i,l,0),r(i,l,t));break}i&&(o.push(r(i,l,0)),i=null),o.push(l),n=l}}return o}(u,"x"===a?i.getWidth():i.getHeight()),f=g.length;if(!f&&h)return u[0].coord<0?d[1]?d[1]:u[h-1].color:d[0]?d[0]:u[0].color;var v=g[0].coord-10,y=g[f-1].coord+10,m=y-v;if(m<.001)return"transparent";n(g,(function(e){e.offset=(e.coord-v)/m})),g.push({offset:f?g[f-1].offset:.5,color:d[1]||"transparent"}),g.unshift({offset:f?g[0].offset:.5,color:d[0]||"transparent"});var _=new T(0,0,0,0,g,!0);return _[a]=v,_[a+"2"]=y,_}}}function Do(e,t,i){var o=e.get("showAllSymbol"),a="auto"===o;if(!o||a){var r=i.getAxesByScale("ordinal")[0];if(r&&(!a||!function(e,t){var i=e.getExtent(),n=Math.abs(i[1]-i[0])/e.scale.count();isNaN(n)&&(n=0);for(var o=t.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*Qe.getSymbolSize(t,r)[e.isHorizontal()?1:0]>n)return!1;return!0}(r,t))){var s=t.mapDimension(r.dim),l={};return n(r.getViewLabels(),(function(e){var t=r.scale.getRawOrdinalNumber(e.tickValue);l[t]=1})),function(e){return!l.hasOwnProperty(t.get(s,e))}}}}function Co(e,t){return[e[2*t],e[2*t+1]]}function Lo(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<rt.length;t++)if(e.get([rt[t],"endLabel","show"]))return!0;return!1}function Oo(e,t,i,n){if(At(t,"cartesian2d")){var o=n.getModel("endLabel"),a=o.get("valueAnimation"),r=n.getData(),s={lastFrameIndex:0},l=Lo(n)?function(i,n){e._endLabelOnDuring(i,n,r,s,a,o,t)}:null,p=t.getBaseAxis().isHorizontal(),u=Rt(t,i,n,(function(){var t=e._endLabel;t&&i&&null!=s.originalX&&t.attr({x:s.originalX,y:s.originalY})}),l);if(!n.get("clip",!0)){var c=u.shape,h=Math.max(c.width,c.height);p?(c.y-=h,c.height+=2*h):(c.x-=h,c.width+=2*h)}return l&&l(1,u),u}return Nt(t,i,n)}var Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(){var e=new f,t=new Je;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e,this._changePolyState=ve(this._changePolyState,this)},t.prototype.render=function(e,t,i){var n=e.coordinateSystem,o=this.group,a=e.getData(),r=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=a.getLayout("points")||[],p="polar"===n.type,u=this._coordSys,c=this._symbolDraw,h=this._polyline,d=this._polygon,g=this._lineGroup,f=!t.ssr&&e.get("animation"),v=!s.isEmpty(),y=s.get("origin"),m=uo(n,a,y),_=v&&function(e,t,i){if(!i.valueDim)return[];for(var n=t.count(),o=Xe(2*n),a=0;a<n;a++){var r=co(i,e,t,a);o[2*a]=r[0],o[2*a+1]=r[1]}return o}(n,a,m),S=e.get("showSymbol"),b=e.get("connectNulls"),x=S&&!p&&Do(e,a,n),w=this._data;w&&w.eachItemGraphicEl((function(e,t){e.__temp&&(o.remove(e),w.setItemGraphicEl(t,null))})),S||c.remove(),o.add(g);var M,I=!p&&e.get("step");n&&n.getArea&&e.get("clip",!0)&&(null!=(M=n.getArea()).width?(M.x-=.1,M.y-=.1,M.width+=.2,M.height+=.2):M.r0&&(M.r0-=.5,M.r+=.5)),this._clipShapeForSymbol=M;var T=To(a,n,i)||a.getVisual("style")[a.getVisual("drawType")];if(h&&u.type===n.type&&I===this._step){v&&!d?d=this._newPolygon(l,_):d&&!v&&(g.remove(d),d=this._polygon=null),p||this._initOrUpdateEndLabel(e,n,Ze(T));var D=g.getClipPath();if(D){var L=Oo(this,n,!1,e);Ke(D,{shape:L.shape},e)}else g.setClipPath(Oo(this,n,!0,e));S&&c.updateData(a,{isIgnore:x,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),bo(this._stackedOnPoints,_)&&bo(this._points,l)||(f?this._doUpdateAnimation(a,_,n,i,I,y,b):(I&&(_&&(_=Io(_,l,n,I,b)),l=Io(l,null,n,I,b)),h.setShape({points:l}),d&&d.setShape({points:l,stackedOnPoints:_})))}else S&&c.updateData(a,{isIgnore:x,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),f&&this._initSymbolLabelAnimation(a,n,M),I&&(_&&(_=Io(_,l,n,I,b)),l=Io(l,null,n,I,b)),h=this._newPolyline(l),v?d=this._newPolygon(l,_):d&&(g.remove(d),d=this._polygon=null),p||this._initOrUpdateEndLabel(e,n,Ze(T)),g.setClipPath(Oo(this,n,!0,e));var O=e.getModel("emphasis"),A=O.get("focus"),R=O.get("blurScope"),N=O.get("disabled");(h.useStyle(C(r.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"})),$e(h,e,"lineStyle"),h.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(h.getState("emphasis").style.lineWidth=+h.style.lineWidth+1);ae(h).seriesIndex=e.seriesIndex,se(h,A,R,N);var k=Mo(e.get("smooth")),V=e.get("smoothMonotone");if(h.setShape({smooth:k,smoothMonotone:V,connectNulls:b}),d){var P=a.getCalculationInfo("stackedOnSeries"),G=0;d.useStyle(C(s.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),P&&(G=Mo(P.get("smooth"))),d.setShape({smooth:k,stackedOnSmooth:G,smoothMonotone:V,connectNulls:b}),$e(d,e,"areaStyle"),ae(d).seriesIndex=e.seriesIndex,se(d,A,R,N)}var F=this._changePolyState;a.eachItemGraphicEl((function(e){e&&(e.onHoverStateChange=F)})),this._polyline.onHoverStateChange=F,this._data=a,this._coordSys=n,this._stackedOnPoints=_,this._points=l,this._step=I,this._valueOrigin=y,e.get("triggerLineEvent")&&(this.packEventData(e,h),d&&this.packEventData(e,d))},t.prototype.packEventData=function(e,t){ae(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,t,i,n){var o=e.getData(),a=qe(o,n);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var r=o.getLayout("points"),s=o.getItemGraphicEl(a);if(!s){var l=r[2*a],p=r[2*a+1];if(isNaN(l)||isNaN(p))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,p))return;var u=e.get("zlevel")||0,c=e.get("z")||0;(s=new Qe(o,a)).x=l,s.y=p,s.setZ(u,c);var h=s.getSymbolPath().getTextContent();h&&(h.zlevel=u,h.z=c,h.z2=this._polyline.z2+1),s.__temp=!0,o.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else et.prototype.highlight.call(this,e,t,i,n)},t.prototype.downplay=function(e,t,i,n){var o=e.getData(),a=qe(o,n);if(this._changePolyState("normal"),null!=a&&a>=0){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else et.prototype.downplay.call(this,e,t,i,n)},t.prototype._changePolyState=function(e){var t=this._polygon;tt(this._polyline,e),t&&tt(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new mo({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new So({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(e,t,i){var n,o,a=t.getBaseAxis(),r=a.inverse;"cartesian2d"===t.type?(n=a.isHorizontal(),o=!1):"polar"===t.type&&(n="angle"===a.dim,o=!0);var s=e.hostModel,l=s.get("animationDuration");J(l)&&(l=l(null));var p=s.get("animationDelay")||0,u=J(p)?p(null):p;e.eachItemGraphicEl((function(e,a){var s=e;if(s){var c=[e.x,e.y],h=void 0,d=void 0,g=void 0;if(i)if(o){var f=i,v=t.pointToCoord(c);n?(h=f.startAngle,d=f.endAngle,g=-v[1]/180*Math.PI):(h=f.r0,d=f.r,g=v[0])}else{var y=i;n?(h=y.x,d=y.x+y.width,g=e.x):(h=y.y+y.height,d=y.y,g=e.y)}var m=d===h?0:(g-h)/(d-h);r&&(m=1-m);var _=J(p)?p(a):l*m+u,S=s.getSymbolPath(),b=S.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:_}),b&&b.animateFrom({style:{opacity:0}},{duration:300,delay:_}),S.disableLabelAnimation=!0}}))},t.prototype._initOrUpdateEndLabel=function(e,t,i){var n=e.getModel("endLabel");if(Lo(e)){var o=e.getData(),a=this._polyline,r=o.getLayout("points");if(!r)return a.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new we({z2:200})).ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var l=function(e){for(var t,i,n=e.length/2;n>0&&(t=e[2*n-2],i=e[2*n-1],isNaN(t)||isNaN(i));n--);return n-1}(r);l>=0&&(ne(a,oe(e,"endLabel"),{inheritColor:i,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,i){return null!=i?it(o,i):nt(o,e)},enableTextSetter:!0},function(e,t){var i=t.getBaseAxis(),n=i.isHorizontal(),o=i.inverse,a=n?o?"right":"left":"center",r=n?"middle":o?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||r}}}(n,t)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,i,n,o,a,r){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==n.originalX&&(n.originalX=s.x,n.originalY=s.y);var p=i.getLayout("points"),u=i.hostModel,c=u.get("connectNulls"),h=a.get("precision"),d=a.get("distance")||0,g=r.getBaseAxis(),f=g.isHorizontal(),v=g.inverse,y=t.shape,m=v?f?y.x:y.y+y.height:f?y.x+y.width:y.y,_=(f?d:0)*(v?-1:1),S=(f?0:-d)*(v?-1:1),b=f?"x":"y",x=function(e,t,i){for(var n,o,a=e.length/2,r="x"===i?0:1,s=0,l=-1,p=0;p<a;p++)if(o=e[2*p+r],!isNaN(o)&&!isNaN(e[2*p+1-r]))if(0!==p){if(n<=t&&o>=t||n>=t&&o<=t){l=p;break}s=p,n=o}else n=o;return{range:[s,l],t:(t-n)/(o-n)}}(p,m,b),w=x.range,M=w[1]-w[0],I=void 0;if(M>=1){if(M>1&&!c){var T=Co(p,w[0]);s.attr({x:T[0]+_,y:T[1]+S}),o&&(I=u.getRawValue(w[0]))}else{(T=l.getPointOn(m,b))&&s.attr({x:T[0]+_,y:T[1]+S});var D=u.getRawValue(w[0]),C=u.getRawValue(w[1]);o&&(I=ot(i,h,D,C,x.t))}n.lastFrameIndex=w[0]}else{var L=1===e||n.lastFrameIndex>0?w[0]:0;T=Co(p,L);o&&(I=u.getRawValue(L)),s.attr({x:T[0]+_,y:T[1]+S})}if(o){var O=at(s);"function"==typeof O.setLabelText&&O.setLabelText(I)}}},t.prototype._doUpdateAnimation=function(e,t,i,n,o,a,r){var s=this._polyline,l=this._polygon,p=e.hostModel,u=function(e,t,i,n,o,a,r){for(var s=function(e,t){var i=[];return t.diff(e).add((function(e){i.push({cmd:"+",idx:e})})).update((function(e,t){i.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){i.push({cmd:"-",idx:e})})).execute(),i}(e,t),l=[],p=[],u=[],c=[],h=[],d=[],g=[],f=uo(o,t,r),v=e.getLayout("points")||[],y=t.getLayout("points")||[],m=0;m<s.length;m++){var _=s[m],S=!0,b=void 0,x=void 0;switch(_.cmd){case"=":b=2*_.idx,x=2*_.idx1;var w=v[b],M=v[b+1],I=y[x],T=y[x+1];(isNaN(w)||isNaN(M))&&(w=I,M=T),l.push(w,M),p.push(I,T),u.push(i[b],i[b+1]),c.push(n[x],n[x+1]),g.push(t.getRawIndex(_.idx1));break;case"+":var D=_.idx,C=f.dataDimsForPoint,L=o.dataToPoint([t.get(C[0],D),t.get(C[1],D)]);x=2*D,l.push(L[0],L[1]),p.push(y[x],y[x+1]);var O=co(f,o,t,D);u.push(O[0],O[1]),c.push(n[x],n[x+1]),g.push(t.getRawIndex(D));break;case"-":S=!1}S&&(h.push(_),d.push(d.length))}d.sort((function(e,t){return g[e]-g[t]}));var A=l.length,R=Xe(A),N=Xe(A),k=Xe(A),V=Xe(A),P=[];for(m=0;m<d.length;m++){var G=d[m],F=2*m,z=2*G;R[F]=l[z],R[F+1]=l[z+1],N[F]=p[z],N[F+1]=p[z+1],k[F]=u[z],k[F+1]=u[z+1],V[F]=c[z],V[F+1]=c[z+1],P[m]=h[G]}return{current:R,next:N,stackedOnCurrent:k,stackedOnNext:V,status:P}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),c=u.current,h=u.stackedOnCurrent,d=u.next,g=u.stackedOnNext;if(o&&(h=Io(u.stackedOnCurrent,u.current,i,o,r),c=Io(u.current,null,i,o,r),g=Io(u.stackedOnNext,u.next,i,o,r),d=Io(u.next,null,i,o,r)),wo(c,d)>3e3||l&&wo(h,g)>3e3)return s.stopAnimation(),s.setShape({points:d}),void(l&&(l.stopAnimation(),l.setShape({points:d,stackedOnPoints:g})));s.shape.__points=u.current,s.shape.points=c;var f={shape:{points:d}};u.current!==c&&(f.shape.__points=u.next),s.stopAnimation(),q(s,f,p),l&&(l.setShape({points:c,stackedOnPoints:h}),l.stopAnimation(),q(l,{shape:{stackedOnPoints:g}},p),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var v=[],y=u.status,m=0;m<y.length;m++){if("="===y[m].cmd){var _=e.getItemGraphicEl(y[m].idx1);_&&v.push({el:_,ptIdx:m})}}s.animators&&s.animators.length&&s.animators[0].during((function(){l&&l.dirtyShape();for(var e=s.shape.__points,t=0;t<v.length;t++){var i=v[t].el,n=2*v[t].ptIdx;i.x=e[n],i.y=e[n+1],i.markRedraw()}}))},t.prototype.remove=function(e){var t=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl((function(e,n){e.__temp&&(t.remove(e),i.setItemGraphicEl(n,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(et);var Ro=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return i(t,e),t.prototype.render=function(e,t,i,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&n&&"geoRoam"===n.type&&this._mapDraw.resetForLabelLayout(),n&&"geoRoam"===n.type&&"series"===n.componentType&&n.seriesId===e.id)(a=this._mapDraw)&&o.add(a.group);else if(e.needsDrawMap){var a=this._mapDraw||new un(i);o.add(a.group),a.draw(e,t,i,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,i)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,i){var n=e.originalData,o=this.group;n.each(n.mapDimension("value"),(function(t,i){if(!isNaN(t)){var a=n.getItemLayout(i);if(a&&a.point){var r=a.point,s=a.offset,l=new _({style:{fill:e.getData().getVisual("style").fill},shape:{cx:r[0]+9*s,cy:r[1],r:3},silent:!0,z2:8+(s?0:lt+1)});if(!s){var p=e.mainSeries.getData(),u=n.getName(i),c=p.indexOfName(u),h=n.getItemModel(i),d=h.getModel("label"),g=p.getItemGraphicEl(c);ne(l,oe(h),{labelFetcher:{getFormattedLabel:function(t,i){return e.getFormattedLabel(c,i)}},defaultText:u}),l.disableLabelAnimation=!0,d.get("position")||l.setTextConfig({position:"bottom"}),g.onHoverStateChange=function(e){tt(l,e)}}o.add(l)}}}))},t.type="map",t}(et),No=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.needsDrawMap=!1,i.seriesGroup=[],i.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),i=this.coordinateSystem,n=i.getRegion(t);return n&&i.dataToPoint(n.getCenter())}},i}return i(t,e),t.prototype.getInitialData=function(e){for(var t=Ft(this,{coordDimensions:["value"],encodeDefaulter:pt(ut,this)}),i=k(),o=[],a=0,r=t.count();a<r;a++){var s=t.getName(a);i.set(s,a)}var l=Wi(this.getMapType(),this.option.nameMap,this.option.nameProperty);return n(l.regions,(function(e){var n,a=e.name,r=i.get(a),s=e.properties&&e.properties.echartsStyle;null==r?(n={name:a},o.push(n)):n=t.getRawDataItem(r),s&&B(n,s)})),t.appendData(o),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,i){for(var n=this.getData(),o=this.getRawValue(e),a=n.getName(e),r=this.seriesGroup,s=[],l=0;l<r.length;l++){var p=r[l].originalData.indexOfName(a),u=n.mapDimension("value");isNaN(r[l].originalData.get(u,p))||s.push(r[l].name)}return ct("section",{header:s.join(", "),noHeader:!s.length,blocks:[ct("nameValue",{name:a,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",i=Te(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return i.setStyle(e.itemStyle),i.style.stroke="none",t.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Ee);function ko(e){var t={};e.eachSeriesByType("map",(function(e){var i=e.getHostGeoModel(),n=i?"o"+i.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)})),n(t,(function(e,t){for(var i,o,a,r=(i=c(e,(function(e){return e.getData()})),o=e[0].get("mapValueCalculation"),a={},n(i,(function(e){e.each(e.mapDimension("value"),(function(t,i){var n="ec-"+e.getName(i);a[n]=a[n]||[],isNaN(t)||a[n].push(t)}))})),i[0].map(i[0].mapDimension("value"),(function(e,t){for(var n="ec-"+i[0].getName(t),r=0,s=1/0,l=-1/0,p=a[n].length,u=0;u<p;u++)s=Math.min(s,a[n][u]),l=Math.max(l,a[n][u]),r+=a[n][u];return 0===p?NaN:"min"===o?s:"max"===o?l:"average"===o?r/p:r}))),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(r.cloneShallow()),e[s].mainSeries=e[0]}))}function Vo(e){var t={};e.eachSeriesByType("map",(function(i){var o=i.getMapType();if(!i.getHostGeoModel()&&!t[o]){var a={};n(i.seriesGroup,(function(t){var i=t.coordinateSystem,n=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&n.each(n.mapDimension("value"),(function(e,t){var o=n.getName(t),r=i.getRegion(o);if(r&&!isNaN(e)){var s=a[o]||0,l=i.dataToPoint(r.getCenter());a[o]=s+1,n.setItemLayout(t,{point:l,offset:s})}}))}));var r=i.getData();r.each((function(e){var t=r.getName(e),i=r.getItemLayout(e)||{};i.showLabel=!a[t],r.setItemLayout(e,i)})),t[o]=!0}}))}function Po(e){Fe(_n),e.registerChartView(Ro),e.registerSeriesModel(No),e.registerLayout(Vo),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,ko),ht("map",e.registerAction)}function Go(e,t){var i=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?i:null,fill:"fill"===t.brushType?i:null}})}))}var Fo=function(e){function t(t,i){var n=e.call(this)||this,o=new Qe(t,i),a=new f;return n.add(o),n.add(a),n.updateData(t,i),n}return i(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,i=e.color,n=e.rippleNumber,o=this.childAt(1),a=0;a<n;a++){var r=Te(t,-1,-1,2,2,i);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-a/n*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),o.add(r)}Go(o,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,i=this.childAt(1),n=["symbolType","period","rippleScale","rippleNumber"],o=0;o<n.length;o++){var a=n[o];if(t[a]!==e[a])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}Go(i,e)},t.prototype.highlight=function(){dt(this)},t.prototype.downplay=function(){gt(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,t){var i=this,n=e.hostModel;this.childAt(0).updateData(e,t);var o=this.childAt(1),a=e.getItemModel(t),r=e.getItemVisual(t,"symbol"),s=ft(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),p=l&&l.fill,u=a.getModel("emphasis");o.setScale(s),o.traverse((function(e){e.setStyle("fill",p)}));var c=vt(e.getItemVisual(t,"symbolOffset"),s);c&&(o.x=c[0],o.y=c[1]);var h=e.getItemVisual(t,"symbolRotate");o.rotation=(h||0)*Math.PI/180||0;var d={};d.showEffectOn=n.get("showEffectOn"),d.rippleScale=a.get(["rippleEffect","scale"]),d.brushType=a.get(["rippleEffect","brushType"]),d.period=1e3*a.get(["rippleEffect","period"]),d.effectOffset=t/e.count(),d.z=n.getShallow("z")||0,d.zlevel=n.getShallow("zlevel")||0,d.symbolType=r,d.color=p,d.rippleEffectColor=a.get(["rippleEffect","color"]),d.rippleNumber=a.get(["rippleEffect","number"]),"render"===d.showEffectOn?(this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==d.showEffectOn&&i.startEffectAnimation(d):"normal"===e&&"render"!==d.showEffectOn&&i.stopEffectAnimation()}),this._effectCfg=d,se(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(f),zo=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i}return i(t,e),t.prototype.init=function(){this._symbolDraw=new Je(Fo)},t.prototype.render=function(e,t,i){var n=e.getData(),o=this._symbolDraw;o.updateData(n,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,i=t&&t.getArea&&t.getArea();return e.get("clip",!0)?i:null},t.prototype.updateTransform=function(e,t,i){var n=e.getData();this.group.dirty();var o=zt("").reset(e,t,i);o.progress&&o.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=yt(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(et),Eo=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return i(t,e),t.prototype.getInitialData=function(e,t){return ze(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,i){return i.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Ee);function Ho(e){e.registerChartView(zo),e.registerSeriesModel(Eo),e.registerLayout(zt("effectScatter"))}const Bo=Wt(Ht({__name:"ChinaMapComp",setup(t){Fe([mt,lo,_t,Po,Et,Ho,St,bt]);const i=[{name:"河南省",value:50}],n=[{name:"陕西省",value:30}],o=[{name:"浙江省",value:20}],a=Bt();let r=null;async function s(t){return(await e.get(`https://geo.datav.aliyun.com/areas_v2/bound/${t}`)).data}async function l(){if(a.value){r=xt(a.value);try{const[e,t]=await Promise.all([s("all.json"),s("100000_full.json")]);!function(e,t,a){const r={};e.features.forEach((e=>{const t=e.properties.name;t&&(r[t]=e.properties.center)})),wt(t,e);const s=e=>e.map((e=>{const t=r[e.name];return t?{name:e.name,value:t.concat(e.value)}:null})).filter((e=>null!==e)),l={title:{text:t,left:"center",top:"4%",textStyle:{fontFamily:"TitleFont",fontSize:25}},tooltip:{triggerOn:"mousemove",formatter:e=>{const t=isNaN(e.value)?0:e.value;return`<span>${e.name}：</span><br/><span>值：${t}</span>`},backgroundColor:"rgba(29, 38, 71)",extraCssText:"box-shadow:0 0 4px rgba(11, 19, 43,0.8)"},geo:{show:!0,top:"10%",map:t,label:{show:!1,emphasis:{show:!0,color:"#31322c"}},roam:!1,itemStyle:{areaColor:"#fff",borderColor:"#686a67",emphasis:{areaColor:"#00828B"}}},series:[{name:"唐",type:"effectScatter",coordinateSystem:"geo",data:s(i),symbolSize:e=>e[2]/5,itemStyle:{color:"red"},rippleEffect:{scale:2.5,brushType:"stroke"}},{name:"宋",type:"effectScatter",coordinateSystem:"geo",data:s(n),symbolSize:e=>e[2]/5,itemStyle:{color:"blue"},rippleEffect:{scale:2.5,brushType:"stroke"}},{name:"元",type:"effectScatter",coordinateSystem:"geo",data:s(o),symbolSize:e=>e[2]/5,itemStyle:{color:"green"},rippleEffect:{scale:2.5,brushType:"stroke"}}],legend:{data:["唐","宋","元"],bottom:"5%",right:"5%",textStyle:{fontSize:16,color:"#333"},selected:{"唐":!0,"宋":!0,"元":!0}}};a.setOption(l);const p=()=>null==a?void 0:a.resize();window.addEventListener("resize",p),jt((()=>{window.removeEventListener("resize",p),null==a||a.dispose()}))}(t,"诗人籍贯分布演变",r)}catch(e){}}}return Xt((()=>{l()})),(e,t)=>(Ut(),Yt("div",{ref_key:"chartContainer",ref:a,class:"chart-container"},null,512))}}),[["__scopeId","data-v-6d194f12"]]);Fe([Mt,mt,Vt,Pt,Gt,function(e){e.registerChartView(Ao),e.registerSeriesModel(po),e.registerLayout(zt("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),i=e.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,kt("line"))},St]);const Xo={ref:"chartContainer",style:{width:"100%",height:"500px"}};const Uo=Wt({name:"PoetryDataChart",setup(){const e=Bt(null),t=["唐代","宋代","元代"],i=[57347,19484,8771],n=[3662,1489,230];return Xt((()=>{const o=xt(e.value),a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(e){let t=`${e[0].name}<br/>`;return e.forEach((e=>{t+=`${e.marker}${e.seriesName}: ${e.value}<br/>`})),t}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"],title:{line:"折线图",bar:"柱状图"}},restore:{show:!0,title:"重置"},saveAsImage:{show:!0,title:"保存为png"}}},legend:{data:["作品总量","诗人总数"]},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"作品总量",position:"left",axisLabel:{formatter:"{value}"}},{type:"value",name:"诗人总数",position:"right",axisLabel:{formatter:"{value}"}}],series:[{name:"作品总量",type:"bar",data:i,tooltip:{valueFormatter:function(e){return`${e} 首`}}},{name:"诗人总数",type:"line",yAxisIndex:1,data:n,tooltip:{valueFormatter:function(e){return`${e} 位`}},smooth:!0}]};o.setOption(a)})),{chartContainer:e}}},[["render",function(e,t,i,n,o,a){return Ut(),Yt("div",Xo,null,512)}]]),Yo={class:"layout"},jo={class:"content-section"},Wo=Wt({__name:"HomeView",setup:e=>(e,t)=>(Ut(),Yt("div",Yo,[t[0]||(t[0]=Jt('<div class="overview-section" data-v-3caf39af><div class="card" data-v-3caf39af><h2 class="card-title" data-v-3caf39af>诗词数量</h2><b class="card-content" data-v-3caf39af> 唐诗：57,347首，宋词：19,484首，元曲：8771首 </b></div><div class="card" data-v-3caf39af><h2 class="card-title" data-v-3caf39af>诗人数量</h2><b class="card-content" data-v-3caf39af> 唐代：3662人，宋代：1489人，元代：230人 </b></div></div>',1)),Zt("div",jo,[Kt(Bo,{class:"map-comp"}),Kt(Uo,{class:"chart-comp"})])]))},[["__scopeId","data-v-3caf39af"]]);export{Wo as default};
