import{_ as e,e8 as t,e9 as a,ea as n,C as i,X as r,cf as l,bs as s,am as o,z as g,y as c,v as u,e as h,ck as d,eb as p,ec as f,bp as y,ed as m,Z as v,ai as b,dC as x,bQ as A,ar as S,cj as w,br as M,ay as L,av as D,aw as T,a8 as N,cl as I,cN as C,cm as P,Q as _,cn as k,bT as O,cL as E,b4 as G,co as W,aD as B,a0 as U,c0 as V,ee as z,an as R,bK as Y,c1 as X}from"./vintage-CnjK_xF9.js";var q=function(i){function r(){var e=null!==i&&i.apply(this,arguments)||this;return e.type="dataset",e}return e(r,i),r.prototype.init=function(e,n,r){i.prototype.init.call(this,e,n,r),this._sourceManager=new t(this),a(this)},r.prototype.mergeOption=function(e,t){i.prototype.mergeOption.call(this,e,t),a(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:n},r}(i),F=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return e(a,t),a.type="dataset",a}(r);function H(e){e.registerComponentModel(q),e.registerComponentView(F)}var Z=2*Math.PI,j=Math.PI/180;function Q(e,t){return o(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function J(e,t){var a=Q(e,t),n=e.get("center"),i=e.get("radius");g(i)||(i=[0,i]);var r,l,s=c(a.width,t.getWidth()),o=c(a.height,t.getHeight()),u=Math.min(s,o),h=c(i[0],u/2),d=c(i[1],u/2),p=e.coordinateSystem;if(p){var f=p.dataToPoint(n);r=f[0]||0,l=f[1]||0}else g(n)||(n=[n,n]),r=c(n[0],s)+a.x,l=c(n[1],o)+a.y;return{cx:r,cy:l,r0:h,r:d}}function K(e,t,a){t.eachSeriesByType(e,(function(e){var t=e.getData(),n=t.mapDimension("value"),i=Q(e,a),r=J(e,a),o=r.cx,g=r.cy,c=r.r,u=r.r0,h=-e.get("startAngle")*j,d=e.get("endAngle"),p=e.get("padAngle")*j;d="auto"===d?h-Z:-d*j;var f=e.get("minAngle")*j+p,y=0;t.each(n,(function(e){!isNaN(e)&&y++}));var m=t.getSum(n),v=Math.PI/(m||y)*2,b=e.get("clockwise"),x=e.get("roseType"),A=e.get("stillShowZeroSum"),S=t.getDataExtent(n);S[0]=0;var w=b?1:-1,M=[h,d],L=w*p/2;l(M,!b),h=M[0],d=M[1];var D=$(e);D.startAngle=h,D.endAngle=d,D.clockwise=b;var T=Math.abs(d-h),N=T,I=0,C=h;if(t.setLayout({viewRect:i,r:c}),t.each(n,(function(e,a){var n;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:o,cy:g,r0:u,r:x?NaN:c});else{(n="area"!==x?0===m&&A?v:e*v:T/y)<f?(n=f,N-=f):I+=e;var i=C+w*n,r=0,l=0;p>n?l=r=C+w*n/2:(r=C+L,l=i-L),t.setItemLayout(a,{angle:n,startAngle:r,endAngle:l,clockwise:b,cx:o,cy:g,r0:u,r:x?s(e,S,[u,c]):c}),C=i}})),N<Z&&y)if(N<=.001){var P=T/y;t.each(n,(function(e,a){if(!isNaN(e)){var n=t.getItemLayout(a);n.angle=P;var i=0,r=0;P<p?r=i=h+w*(a+.5)*P:(i=h+w*a*P+L,r=h+w*(a+1)*P-L),n.startAngle=i,n.endAngle=r}}))}else v=N/I,C=h,t.each(n,(function(e,a){if(!isNaN(e)){var n=t.getItemLayout(a),i=n.angle===f?f:e*v,r=0,l=0;i<p?l=r=C+w*i/2:(r=C+L,l=C+w*i-L),n.startAngle=r,n.endAngle=l,C+=w*i}}))}))}var $=u();function ee(e){return{seriesType:e,reset:function(e,t){var a=t.findComponents({mainType:"legend"});if(a&&a.length){var n=e.getData();n.filterSelf((function(e){for(var t=n.getName(e),i=0;i<a.length;i++)if(!a[i].isSelected(t))return!1;return!0}))}}}}var te=Math.PI/180;function ae(e,t,a,n,i,r,l,s,o,g){if(!(e.length<2)){for(var c=e.length,u=0;u<c;u++)if("outer"===e[u].position&&"labelLine"===e[u].labelAlignTo){var h=e[u].label.x-g;e[u].linePoints[1][0]+=h,e[u].label.x=g}m(e,o,o+l)&&function(e){for(var r={list:[],maxY:0},l={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var o=e[s],g=o.label.y>a?l:r,c=Math.abs(o.label.y-a);if(c>=g.maxY){var u=o.label.x-t-o.len2*i,h=n+o.len,p=Math.abs(u)<h?Math.sqrt(c*c/(1-u*u/h/h)):h;g.rB=p,g.maxY=c}g.list.push(o)}d(r),d(l)}(e)}function d(e){for(var r=e.rB,l=r*r,s=0;s<e.list.length;s++){var o=e.list[s],g=Math.abs(o.label.y-a),c=n+o.len,u=c*c,h=Math.sqrt(Math.abs((1-g*g/l)*u)),d=t+(h+o.len2)*i,p=d-o.label.x;ne(o,o.targetTextWidth-p*i,!0),o.label.x=d}}}function ne(e,t,a){if(void 0===a&&(a=!1),null==e.labelStyleWidth){var n=e.label,i=n.style,r=e.rect,l=i.backgroundColor,s=i.padding,o=s?s[1]+s[3]:0,g=i.overflow,c=r.width+(l?0:o);if(t<c||a){var u=r.height;if(g&&g.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",t-o);var h=n.getBoundingRect();n.setStyle("width",Math.ceil(h.width)),n.setStyle("backgroundColor",l)}else{var d=t-o,p=t<c?d:a?d>e.unconstrainedWidth?null:d:null;n.setStyle("width",p)}var f=n.getBoundingRect();r.width=f.width;var y=(n.style.margin||0)+2.1;r.height=f.height+y,r.y-=(r.height-u)/2}}}function ie(e){return"center"===e.position}function re(e){var t,a,n=e.getData(),i=[],r=!1,l=(e.get("minShowLabelAngle")||0)*te,s=n.getLayout("viewRect"),o=n.getLayout("r"),g=s.width,u=s.x,m=s.y,v=s.height;function b(e){e.ignore=!0}n.each((function(e){var s=n.getItemGraphicEl(e),p=s.shape,f=s.getTextContent(),m=s.getTextGuideLine(),v=n.getItemModel(e),x=v.getModel("label"),A=x.get("position")||v.get(["emphasis","label","position"]),S=x.get("distanceToLabelLine"),w=x.get("alignTo"),M=c(x.get("edgeDistance"),g),L=x.get("bleedMargin"),D=v.getModel("labelLine"),T=D.get("length");T=c(T,g);var N=D.get("length2");if(N=c(N,g),Math.abs(p.endAngle-p.startAngle)<l)return h(f.states,b),f.ignore=!0,void(m&&(h(m.states,b),m.ignore=!0));if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(f)){var I,C,P,_,k=(p.startAngle+p.endAngle)/2,O=Math.cos(k),E=Math.sin(k);t=p.cx,a=p.cy;var G="inside"===A||"inner"===A;if("center"===A)I=p.cx,C=p.cy,_="center";else{var W=(G?(p.r+p.r0)/2*O:p.r*O)+t,B=(G?(p.r+p.r0)/2*E:p.r*E)+a;if(I=W+3*O,C=B+3*E,!G){var U=W+O*(T+o-p.r),V=B+E*(T+o-p.r),z=U+(O<0?-1:1)*N;I="edge"===w?O<0?u+M:u+g-M:z+(O<0?-S:S),C=V,P=[[W,B],[U,V],[z,V]]}_=G?"center":"edge"===w?O>0?"right":"left":O>0?"left":"right"}var R=Math.PI,Y=0,X=x.get("rotate");if(y(X))Y=X*(R/180);else if("center"===A)Y=0;else if("radial"===X||!0===X){Y=O<0?-k+R:-k}else if("tangential"===X&&"outside"!==A&&"outer"!==A){var q=Math.atan2(O,E);q<0&&(q=2*R+q),E>0&&(q=R+q),Y=q-R}if(r=!!Y,f.x=I,f.y=C,f.rotation=Y,f.setStyle({verticalAlign:"middle"}),G){f.setStyle({align:_});var F=f.states.select;F&&(F.x+=f.x,F.y+=f.y)}else{var H=f.getBoundingRect().clone();H.applyTransform(f.getComputedTransform());var Z=(f.style.margin||0)+2.1;H.y-=Z/2,H.height+=Z,i.push({label:f,labelLine:m,position:A,len:T,len2:N,minTurnAngle:D.get("minTurnAngle"),maxSurfaceAngle:D.get("maxSurfaceAngle"),surfaceNormal:new d(O,E),linePoints:P,textAlign:_,labelDistance:S,labelAlignTo:w,edgeDistance:M,bleedMargin:L,rect:H,unconstrainedWidth:H.width,labelStyleWidth:f.style.width})}s.setTextConfig({inside:G})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,a,n,i,r,l,s){for(var o=[],g=[],c=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<e.length;h++){var d=e[h].label;ie(e[h])||(d.x<t?(c=Math.min(c,d.x),o.push(e[h])):(u=Math.max(u,d.x),g.push(e[h])))}for(h=0;h<e.length;h++)if(!ie(y=e[h])&&y.linePoints){if(null!=y.labelStyleWidth)continue;d=y.label;var p=y.linePoints,f=void 0;f="edge"===y.labelAlignTo?d.x<t?p[2][0]-y.labelDistance-l-y.edgeDistance:l+i-y.edgeDistance-p[2][0]-y.labelDistance:"labelLine"===y.labelAlignTo?d.x<t?c-l-y.bleedMargin:l+i-u-y.bleedMargin:d.x<t?d.x-l-y.bleedMargin:l+i-d.x-y.bleedMargin,y.targetTextWidth=f,ne(y,f)}for(ae(g,t,a,n,1,0,r,0,s,u),ae(o,t,a,n,-1,0,r,0,s,c),h=0;h<e.length;h++){var y;if(!ie(y=e[h])&&y.linePoints){d=y.label,p=y.linePoints;var m="edge"===y.labelAlignTo,v=d.style.padding,b=v?v[1]+v[3]:0,x=d.style.backgroundColor?0:b,A=y.rect.width+x,S=p[1][0]-p[2][0];m?d.x<t?p[2][0]=l+y.edgeDistance+A+y.labelDistance:p[2][0]=l+i-y.edgeDistance-A-y.labelDistance:(d.x<t?p[2][0]=d.x+y.labelDistance:p[2][0]=d.x-y.labelDistance,p[1][0]=p[2][0]+S),p[1][1]=p[2][1]=d.y}}}(i,t,a,o,g,v,u,m);for(var x=0;x<i.length;x++){var A=i[x],S=A.label,w=A.labelLine,M=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:A.textAlign}),M&&(h(S.states,b),S.ignore=!0);var L=S.states.select;L&&(L.x+=S.x,L.y+=S.y)}if(w){var D=A.linePoints;M||!D?(h(w.states,b),w.ignore=!0):(p(D,A.minTurnAngle),f(D,A.surfaceNormal,A.maxSurfaceAngle),w.setShape({points:D}),S.__hostTarget.textGuideLineConfig={anchor:new d(D[0][0],D[0][1])})}}}var le=function(t){function a(e,a,n){var i=t.call(this)||this;i.z2=2;var r=new v;return i.setTextContent(r),i.updateData(e,a,n,!0),i}return e(a,t),a.prototype.updateData=function(e,t,a,n){var i=this,r=e.hostModel,l=e.getItemModel(t),s=l.getModel("emphasis"),o=e.getItemLayout(t),g=b(x(l.getModel("itemStyle"),o,!0),o);if(isNaN(g.startAngle))i.setShape(g);else{if(n){i.setShape(g);var c=r.getShallow("animationType");r.ecModel.ssr?(A(i,{scaleX:0,scaleY:0},r,{dataIndex:t,isFrom:!0}),i.originX=g.cx,i.originY=g.cy):"scale"===c?(i.shape.r=o.r0,A(i,{shape:{r:o.r}},r,t)):null!=a?(i.setShape({startAngle:a,endAngle:a}),A(i,{shape:{startAngle:o.startAngle,endAngle:o.endAngle}},r,t)):(i.shape.endAngle=o.startAngle,S(i,{shape:{endAngle:o.endAngle}},r,t))}else w(i),S(i,{shape:g},r,t);i.useStyle(e.getItemVisual(t,"style")),M(i,l);var u=(o.startAngle+o.endAngle)/2,h=r.get("selectedOffset"),d=Math.cos(u)*h,p=Math.sin(u)*h,f=l.getShallow("cursor");f&&i.attr("cursor",f),this._updateLabel(r,e,t),i.ensureState("emphasis").shape=b({r:o.r+(s.get("scale")&&s.get("scaleSize")||0)},x(s.getModel("itemStyle"),o)),b(i.ensureState("select"),{x:d,y:p,shape:x(l.getModel(["select","itemStyle"]),o)}),b(i.ensureState("blur"),{shape:x(l.getModel(["blur","itemStyle"]),o)});var y=i.getTextGuideLine(),m=i.getTextContent();y&&b(y.ensureState("select"),{x:d,y:p}),b(m.ensureState("select"),{x:d,y:p}),L(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},a.prototype._updateLabel=function(e,t,a){var n=this,i=t.getItemModel(a),r=i.getModel("labelLine"),l=t.getItemVisual(a,"style"),s=l&&l.fill,o=l&&l.opacity;D(n,T(i),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:s,defaultOpacity:o,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var g=n.getTextContent();n.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var c=e.get(["label","position"]);if("outside"!==c&&"outer"!==c)n.removeTextGuideLine();else{var u=this.getTextGuideLine();u||(u=new N,this.setTextGuideLine(u)),I(this,P(i),{stroke:s,opacity:C(r.get(["lineStyle","opacity"]),o,1)})}},a}(_),se=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return e(a,t),a.prototype.render=function(e,t,a,n){var i,r=e.getData(),l=this._data,s=this.group;if(!l&&r.count()>0){for(var o=r.getItemLayout(0),g=1;isNaN(o&&o.startAngle)&&g<r.count();++g)o=r.getItemLayout(g);o&&(i=o.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===r.count()&&e.get("showEmptyCircle")){var c=$(e),u=new _({shape:b(J(e,a),c)});u.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,s.add(u)}r.diff(l).add((function(e){var t=new le(r,e,i);r.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var a=l.getItemGraphicEl(t);a.updateData(r,e,i),a.off("click"),s.add(a),r.setItemGraphicEl(e,a)})).remove((function(t){var a=l.getItemGraphicEl(t);k(a,e,t)})).execute(),re(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},a.prototype.dispose=function(){},a.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var n=e[0]-a.cx,i=e[1]-a.cy,r=Math.sqrt(n*n+i*i);return r<=a.r&&r>=a.r0}},a.type="pie",a}(O);function oe(e,t,a){t=g(t)&&{coordDimensions:t}||b({encodeDefine:e.getEncode()},t);var n=e.getSource(),i=E(n,t).dimensions,r=new G(i,e);return r.initData(n,a),r}var ge=u(),ce=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new W(B(this.getData,this),B(this.getRawData,this)),this._defaultLabelLine(e)},a.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return oe(this,{coordDimensions:["value"],encodeDefaulter:U(V,this)})},a.prototype.getDataParams=function(e){var a=this.getData(),n=ge(a),i=n.seats;if(!i){var r=[];a.each(a.mapDimension("value"),(function(e){r.push(e)})),i=n.seats=z(r,a.hostModel.get("percentPrecision"))}var l=t.prototype.getDataParams.call(this,e);return l.percent=i[e]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(e){R(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(Y);function ue(e){e.registerChartView(se),e.registerSeriesModel(ce),X("pie",e.registerAction),e.registerLayout(U(K,"pie")),e.registerProcessor(ee("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var a=e.getData();a.filterSelf((function(e){var t=a.mapDimension("value"),n=a.get(t,e);return!(y(n)&&!isNaN(n)&&n<0)}))}})}export{H as a,oe as c,ee as d,ue as i};
