import{da as e,_ as t,x as i,am as n,db as o,dc as a,dd as r,de as s,df as l,dg as p,E as u,V as c,a2 as h,aA as d,Q as g,at as f,az as v,cP as y,U as m,L as _,dh as S,a6 as b,a5 as x,aQ as w,di as M,dj as I,dk as T,J as D,dl as C,h as L,bP as O,t as A,l as R,af as N,cV as k,aO as V,n as P,S as G,ae as F,bm as z,bf as E,a1 as H,v as B,ag as X,b8 as U,aB as Y,M as W,a3 as j,C as J,q as Z,dm as K,aM as q,aD as Q,bJ as $,bD as ee,cr as te,bi as ie,bj as ne,O as oe,aK as ae,bl as re,dn as se,cI as le,dp as pe,X as ue,F as ce,dq as he,dr as de,w as ge,ab as fe,aa as ve,ak as ye,bY as me,aY as _e,ds as Se,aL as be,Z as xe,N as we,b0 as Me,b4 as Ie,dt as Te,bS as De,ah as Ce,j as Le,du as Oe,dv as Ae,dw as Re,be as Ne,K as ke,dx as Ve,dy as Pe,u as Ge,c7 as Fe,bB as ze,W as Ee,a9 as He,ce as Be,dz as Xe,aE as Ue,cN as Ye,dA as We,bd as je,dB as Je,bw as Ze,bk as Ke,dC as qe,bE as Qe,by as $e,bH as et,dD as tt,cn as it,dE as nt,dF as ot,ct as at,dG as rt,bN as st,bz as lt,a0 as pt,c4 as ut,a_ as ct,dH as ht,dI as dt,dJ as gt,b5 as ft,b6 as vt,dK as yt}from"./installCanvasRenderer-DOho8wCD.js";import{V as mt,R as _t,u as St,d as bt,e as xt,f as wt,c as Mt,h as It,j as Tt,k as Dt}from"./install-B8Boz6OP.js";import{p as Ct}from"./install-4l2eCgn0.js";function Lt(e,t){return Math.abs(e-t)<1e-8}function Ot(t,i,n){var o=0,a=t[0];if(!a)return!1;for(var r=1;r<t.length;r++){var s=t[r];o+=e(a[0],a[1],s[0],s[1],i,n),a=s}var l=t[0];return Lt(a[0],l[0])&&Lt(a[1],l[1])||(o+=e(a[0],a[1],l[0],l[1],i,n)),0!==o}var At=[];function Rt(e,t){for(var i=0;i<e.length;i++)s(e[i],e[i],t)}function Nt(e,t,i,n){for(var o=0;o<e.length;o++){var a=e[o];n&&(a=n.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(l(t,t,a),p(i,i,a))}}var kt,Vt=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},e}(),Pt=function(){return function(e,t){this.type="polygon",this.exterior=e,this.interiors=t}}(),Gt=function(){return function(e){this.type="linestring",this.points=e}}(),Ft=function(e){function o(t,i,n){var o=e.call(this,t)||this;return o.type="geoJSON",o.geometries=i,o._center=n&&[n[0],n[1]],o}return t(o,e),o.prototype.calcCenter=function(){for(var e,t=this.geometries,i=0,n=0;n<t.length;n++){var o=t[n],a=o.exterior,r=a&&a.length;r>i&&(e=o,i=r)}if(e)return function(e){for(var t=0,i=0,n=0,o=e.length,a=e[o-1][0],r=e[o-1][1],s=0;s<o;s++){var l=e[s][0],p=e[s][1],u=a*p-l*r;t+=u,i+=(a+l)*u,n+=(r+p)*u,a=l,r=p}return t?[i/t/3,n/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},o.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var o=[1/0,1/0],a=[-1/0,-1/0],r=this.geometries;return i(r,(function(t){"polygon"===t.type?Nt(t.exterior,o,a,e):i(t.points,(function(t){Nt(t,o,a,e)}))})),isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])||(o[0]=o[1]=a[0]=a[1]=0),t=new n(o[0],o[1],a[0]-o[0],a[1]-o[1]),e||(this._rect=t),t},o.prototype.contain=function(e){var t=this.getBoundingRect(),i=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var n=0,o=i.length;n<o;n++){var a=i[n];if("polygon"===a.type){var r=a.exterior,s=a.interiors;if(Ot(r,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(Ot(s[l],e[0],e[1]))continue e;return!0}}}return!1},o.prototype.transformTo=function(e,t,o,a){var r=this.getBoundingRect(),s=r.width/r.height;o?a||(a=o/s):o=s*a;for(var l=new n(e,t,o,a),p=r.calculateTransform(l),u=this.geometries,c=0;c<u.length;c++){var h=u[c];"polygon"===h.type?(Rt(h.exterior,p),i(h.interiors,(function(e){Rt(e,p)}))):i(h.points,(function(e){Rt(e,p)}))}(r=this._rect).copy(l),this._center=[r.x+r.width/2,r.y+r.height/2]},o.prototype.cloneShallow=function(e){null==e&&(e=this.name);var t=new o(e,this.geometries,this._center);return t._rect=this._rect,t.transformTo=null,t},o}(Vt),zt=function(e){function i(t,i){var n=e.call(this,t)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return t(i,e),i.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),i=[t.x+t.width/2,t.y+t.height/2],n=o(At),l=e;l&&!l.isGeoSVGGraphicRoot;)a(n,l.getLocalTransform(),n),l=l.parent;return r(n,n),s(i,i,n),i},i}(Vt);function Et(e,t,i){for(var n=0;n<e.length;n++)e[n]=Ht(e[n],t[n],i)}function Ht(e,t,i){for(var n=[],o=t[0],a=t[1],r=0;r<e.length;r+=2){var s=e.charCodeAt(r)-64,l=e.charCodeAt(r+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,a=l+=a,n.push([s/i,l/i])}return n}function Bt(e,t){return e=function(e){if(!e.UTF8Encoding)return e;var t=e,n=t.UTF8Scale;null==n&&(n=1024);var o=t.features;return i(o,(function(e){var t=e.geometry,o=t.encodeOffsets,a=t.coordinates;if(o)switch(t.type){case"LineString":t.coordinates=Ht(a,o,n);break;case"Polygon":case"MultiLineString":Et(a,o,n);break;case"MultiPolygon":i(a,(function(e,t){return Et(e,o[t],n)}))}})),t.UTF8Encoding=!1,t}(e),u(c(e.features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var n=e.properties,o=e.geometry,a=[];switch(o.type){case"Polygon":var r=o.coordinates;a.push(new Pt(r[0],r.slice(1)));break;case"MultiPolygon":i(o.coordinates,(function(e){e[0]&&a.push(new Pt(e[0],e.slice(1)))}));break;case"LineString":a.push(new Gt([o.coordinates]));break;case"MultiLineString":a.push(new Gt(o.coordinates))}var s=new Ft(n[t||"name"],a,n.cp);return s.properties=n,s}))}function Xt(e){h(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var Ut={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Yt=d(Ut),Wt={"alignment-baseline":"textBaseline","stop-color":"stopColor"},jt=d(Wt),Jt=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var i=Xt(e);this._defsUsePending=[];var n=new g;this._root=n;var o=[],a=i.getAttribute("viewBox")||"",r=parseFloat(i.getAttribute("width")||t.width),s=parseFloat(i.getAttribute("height")||t.height);isNaN(r)&&(r=null),isNaN(s)&&(s=null),ei(i,n,null,!0,!1);for(var l,p,u=i.firstChild;u;)this._parseNode(u,n,o,null,!1,!1),u=u.nextSibling;if(function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n[0].style[n[1]]=e[n[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],a){var c=oi(a);c.length>=4&&(l={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(l&&null!=r&&null!=s&&(p=pi(l,{x:0,y:0,width:r,height:s}),!t.ignoreViewBox)){var h=n;(n=new g).add(h),h.scaleX=h.scaleY=p.scale,h.x=p.x,h.y=p.y}return t.ignoreRootClip||null==r||null==s||n.setClipPath(new f({shape:{x:0,y:0,width:r,height:s}})),{root:n,width:r,height:s,viewBoxRect:l,viewBoxTransform:p,named:o}},e.prototype._parseNode=function(e,t,i,n,o,a){var r,s=e.nodeName.toLowerCase(),l=n;if("defs"===s&&(o=!0),"text"===s&&(a=!0),"defs"===s||"switch"===s)r=t;else{if(!o){var p=kt[s];if(p&&v(kt,s)){r=p.call(this,e,t);var u=e.getAttribute("name");if(u){var c={name:u,namedFrom:null,svgNodeTagLower:s,el:r};i.push(c),"g"===s&&(l=c)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:r});t.add(r)}}var h=Zt[s];if(h&&v(Zt,s)){var d=h.call(this,e),g=e.getAttribute("id");g&&(this._defs[g]=d)}}if(r&&r.isGroup)for(var f=e.firstChild;f;)1===f.nodeType?this._parseNode(f,r,i,l,o,a):3===f.nodeType&&a&&this._parseText(f,r),f=f.nextSibling},e.prototype._parseText=function(e,t){var i=new y({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),function(e,t){var i=t.__selfStyle;if(i){var n=i.textBaseline,o=n;n&&"auto"!==n?"baseline"===n?o="alphabetic":"before-edge"===n||"text-before-edge"===n?o="top":"after-edge"===n||"text-after-edge"===n?o="bottom":"central"!==n&&"mathematical"!==n||(o="middle"):o="alphabetic",e.style.textBaseline=o}var a=t.__inheritedStyle;if(a){var r=a.textAlign,s=r;r&&("middle"===r&&(s="center"),e.style.textAlign=s)}}(i,t);var n=i.style,o=n.fontSize;o&&o<9&&(n.fontSize=9,i.scaleX*=o/9,i.scaleY*=o/9);var a=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=a;var r=i.getBoundingRect();return this._textX+=r.width,t.add(i),i},e.internalField=void(kt={g:function(e,t){var i=new g;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i},rect:function(e,t){var i=new f;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(e,t){var i=new m;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),i.silent=!0,i},line:function(e,t){var i=new _;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(e,t){var i=new S;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(e,t){var i,n=e.getAttribute("points");n&&(i=$t(n));var o=new b({shape:{points:i||[]},silent:!0});return Qt(t,o),ei(e,o,this._defsUsePending,!1,!1),o},polyline:function(e,t){var i,n=e.getAttribute("points");n&&(i=$t(n));var o=new x({shape:{points:i||[]},silent:!0});return Qt(t,o),ei(e,o,this._defsUsePending,!1,!1),o},image:function(e,t){var i=new w;return Qt(t,i),ei(e,i,this._defsUsePending,!1,!1),i.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),i.silent=!0,i},text:function(e,t){var i=e.getAttribute("x")||"0",n=e.getAttribute("y")||"0",o=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(n)+parseFloat(a);var r=new g;return Qt(t,r),ei(e,r,this._defsUsePending,!1,!0),r},tspan:function(e,t){var i=e.getAttribute("x"),n=e.getAttribute("y");null!=i&&(this._textX=parseFloat(i)),null!=n&&(this._textY=parseFloat(n));var o=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0",r=new g;return Qt(t,r),ei(e,r,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(a),r},path:function(e,t){var i=e.getAttribute("d")||"",n=M(i);return Qt(t,n),ei(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),e}(),Zt={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),i=parseInt(e.getAttribute("y1")||"0",10),n=parseInt(e.getAttribute("x2")||"10",10),o=parseInt(e.getAttribute("y2")||"0",10),a=new I(t,i,n,o);return Kt(e,a),qt(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),i=parseInt(e.getAttribute("cy")||"0",10),n=parseInt(e.getAttribute("r")||"0",10),o=new T(t,i,n);return Kt(e,o),qt(e,o),o}};function Kt(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function qt(e,t){for(var i=e.firstChild;i;){if(1===i.nodeType&&"stop"===i.nodeName.toLocaleLowerCase()){var n=i.getAttribute("offset"),o=void 0;o=n&&n.indexOf("%")>0?parseInt(n,10)/100:n?parseFloat(n):0;var a={};li(i,a,a);var r=a.stopColor||i.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:o,color:r})}i=i.nextSibling}}function Qt(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),D(t.__inheritedStyle,e.__inheritedStyle))}function $t(e){for(var t=oi(e),i=[],n=0;n<t.length;n+=2){var o=parseFloat(t[n]),a=parseFloat(t[n+1]);i.push([o,a])}return i}function ei(e,t,n,o,r){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},p={};1===e.nodeType&&(function(e,t){var i=e.getAttribute("transform");if(i){i=i.replace(/,/g," ");var n=[],o=null;i.replace(ai,(function(e,t,i){return n.push(t,i),""}));for(var r=n.length-1;r>0;r-=2){var s=n[r],l=n[r-1],p=oi(s);switch(o=o||R(),l){case"translate":A(o,o,[parseFloat(p[0]),parseFloat(p[1]||"0")]);break;case"scale":O(o,o,[parseFloat(p[0]),parseFloat(p[1]||p[0])]);break;case"rotate":L(o,o,-parseFloat(p[0])*ri,[parseFloat(p[1]||"0"),parseFloat(p[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(p[0])*ri);a(o,[1,0,u,1,0,0],o);break;case"skewY":var c=Math.tan(parseFloat(p[0])*ri);a(o,[1,c,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(p[0]),o[1]=parseFloat(p[1]),o[2]=parseFloat(p[2]),o[3]=parseFloat(p[3]),o[4]=parseFloat(p[4]),o[5]=parseFloat(p[5])}}t.setLocalTransform(o)}}(e,t),li(e,l,p),o||function(e,t,i){for(var n=0;n<Yt.length;n++){var o=Yt[n];null!=(a=e.getAttribute(o))&&(t[Ut[o]]=a)}for(n=0;n<jt.length;n++){var a;o=jt[n];null!=(a=e.getAttribute(o))&&(i[Wt[o]]=a)}}(e,l,p)),s.style=s.style||{},null!=l.fill&&(s.style.fill=ii(s,"fill",l.fill,n)),null!=l.stroke&&(s.style.stroke=ii(s,"stroke",l.stroke,n)),i(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=l[e]&&(s.style[e]=parseFloat(l[e]))})),i(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(e){null!=l[e]&&(s.style[e]=l[e])})),r&&(s.__selfStyle=p),l.lineDash&&(s.style.lineDash=u(oi(l.lineDash),(function(e){return parseFloat(e)}))),"hidden"!==l.visibility&&"collapse"!==l.visibility||(s.invisible=!0),"none"===l.display&&(s.ignore=!0)}var ti=/^url\(\s*#(.*?)\)/;function ii(e,t,i,n){var o=i&&i.match(ti);if(!o)return"none"===i&&(i=null),i;var a=C(o[1]);n.push([e,t,a])}var ni=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function oi(e){return e.match(ni)||[]}var ai=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,ri=Math.PI/180;var si=/([^\s:;]+)\s*:\s*([^:;]+)/g;function li(e,t,i){var n,o=e.getAttribute("style");if(o)for(si.lastIndex=0;null!=(n=si.exec(o));){var a=n[1],r=v(Ut,a)?Ut[a]:null;r&&(t[r]=n[2]);var s=v(Wt,a)?Wt[a]:null;s&&(i[s]=n[2])}}function pi(e,t){var i=t.width/e.width,n=t.height/e.height,o=Math.min(i,n);return{scale:o,x:-(e.x+e.width/2)*o+(t.x+t.width/2),y:-(e.y+e.height/2)*o+(t.y+t.height/2)}}var ui=N(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),ci=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=N(),this._freedGraphics=[],this._mapName=e,this._parsedXML=Xt(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],n=N();return i(e,(function(e){if(null==e.namedFrom){var i=new zt(e.name,e.el);t.push(i),n.set(e.name,i)}})),{regions:t,regionsMap:n}}(e.named),n=t.regions,o=t.regionsMap;this._regions=n,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,o,a,r;try{o=(t=e&&(a=e,r={ignoreViewBox:!0,ignoreRootClip:!0},(new Jt).parse(a,r))||{}).root,k(null!=o)}catch(b){throw new Error("Invalid svg format\n"+b.message)}var s=new g;s.add(o),s.isGeoSVGGraphicRoot=!0;var l=t.width,p=t.height,u=t.viewBoxRect,c=this._boundingRect;if(!c){var h=void 0,d=void 0,v=void 0,y=void 0;if(null!=l?(h=0,v=l):u&&(h=u.x,v=u.width),null!=p?(d=0,y=p):u&&(d=u.y,y=u.height),null==h||null==d){var m=o.getBoundingRect();null==h&&(h=m.x,v=m.width),null==d&&(d=m.y,y=m.height)}c=this._boundingRect=new n(h,d,v,y)}if(u){var _=pi(u,c);o.scaleX=o.scaleY=_.scale,o.x=_.x,o.y=_.y}s.setClipPath(new f({shape:c.plain()}));var S=[];return i(t.named,(function(e){var t;null!=ui.get(e.svgNodeTagLower)&&(S.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:s,boundingRect:c,named:S}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,i),i)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,i=t.get(e);i&&(t.removeKey(e),this._freedGraphics.push(i))},e}();for(var hi=[126,25],di="南海诸岛",gi=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],fi=0;fi<gi.length;fi++)for(var vi=0;vi<gi[fi].length;vi++)gi[fi][vi][0]/=10.5,gi[fi][vi][1]/=-14,gi[fi][vi][0]+=hi[0],gi[fi][vi][1]+=hi[1];var yi={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};var mi=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var _i=function(){function e(e,t,i){var n;this.type="geoJSON",this._parsedMap=N(),this._mapName=e,this._specialAreas=i,this._geoJSON=h(n=t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}return e.prototype.load=function(e,t){t=t||"name";var o=this._parsedMap.get(t);if(!o){var a=this._parseToRegions(t);o=this._parsedMap.set(t,{regions:a,boundingRect:Si(a)})}var r=N(),s=[];return i(o.regions,(function(t){var i=t.name;e&&v(e,i)&&(t=t.cloneShallow(i=e[i])),s.push(t),r.set(i,t)})),{regions:s,boundingRect:o.boundingRect||new n(0,0,0,0),regionsMap:r}},e.prototype._parseToRegions=function(e){var t,n=this._mapName,o=this._geoJSON;try{t=o?Bt(o,e):[]}catch(a){throw new Error("Invalid geoJson format\n"+a.message)}return function(e,t){if("china"===e){for(var i=0;i<t.length;i++)if(t[i].name===di)return;t.push(new Ft(di,u(gi,(function(e){return{type:"polygon",exterior:e}})),hi))}}(n,t),i(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var i=yi[t.name];if(i){var n=t.getCenter();n[0]+=i[0]/10.5,n[1]+=-i[1]/14,t.setCenter(n)}}}(n,e),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:mi[0]})}(n,e);var i=this._specialAreas&&this._specialAreas[t];i&&e.transformTo(i.left,i.top,i.width,i.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function Si(e){for(var t,i=0;i<e.length;i++){var n=e[i].getBoundingRect();(t=t||n.clone()).union(n)}return t}var bi=N();const xi=function(e,t,i){if(t.svg){var n=new ci(e,t.svg);bi.set(e,n)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?i=t.specialAreas:o=t;n=new _i(e,o,i);bi.set(e,n)}},wi=function(e){return bi.get(e)},Mi=function(e){var t=bi.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()},Ii=function(e,t,i){var n=bi.get(e);if(n)return n.load(t,i)};var Ti={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Di=["lng","lat"],Ci=function(e){function i(t,i,n){var o=e.call(this,t)||this;o.dimensions=Di,o.type="geo",o._nameCoordMap=N(),o.map=i;var a=n.projection,r=Ii(i,n.nameMap,n.nameProperty),s=wi(i);o.resourceType=s?s.type:null;var l,p=o.regions=r.regions,u=Ti[s.type];if(o._regionsMap=r.regionsMap,o.regions=r.regions,o.projection=a,a)for(var c=0;c<p.length;c++){var h=p[c].getBoundingRect(a);(l=l||h.clone()).union(h)}else l=r.boundingRect;return o.setBoundingRect(l.x,l.y,l.width,l.height),o.aspectScale=a?1:V(n.aspectScale,u.aspectScale),o._invertLongitute=!a&&u.invertLongitute,o}return t(i,e),i.prototype._transformTo=function(e,t,i,o){var a=this.getBoundingRect(),r=this._invertLongitute;a=a.clone(),r&&(a.y=-a.y-a.height);var s=this._rawTransformable;s.transform=a.calculateTransform(new n(e,t,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,r&&(s.scaleY=-s.scaleY),this._updateTransform()},i.prototype.getRegion=function(e){return this._regionsMap.get(e)},i.prototype.getRegionByCoord=function(e){for(var t=this.regions,i=0;i<t.length;i++){var n=t[i];if("geoJSON"===n.type&&n.contain(e))return t[i]}},i.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},i.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},i.prototype.dataToPoint=function(e,t,i){if(h(e)&&(e=this.getGeoCoord(e)),e){var n=this.projection;return n&&(e=n.project(e)),e&&this.projectedToPoint(e,t,i)}},i.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},i.prototype.pointToProjected=function(t){return e.prototype.pointToData.call(this,t)},i.prototype.projectedToPoint=function(t,i,n){return e.prototype.dataToPoint.call(this,t,i,n)},i.prototype.convertToPixel=function(e,t,i){var n=Li(t);return n===this?n.dataToPoint(i):null},i.prototype.convertFromPixel=function(e,t,i){var n=Li(t);return n===this?n.pointToData(i):null},i}(mt);function Li(e){var t=e.geoModel,i=e.seriesModel;return t?t.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo",G).models[0]||{}).coordinateSystem:null}function Oi(e,t){var i=e.get("boundingCoords");if(null!=i){var n=i[0],o=i[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var a=this.projection;if(a){var r=n[0],s=n[1],u=o[0],c=o[1];n=[1/0,1/0],o=[-1/0,-1/0];var h=function(e,t,i,r){for(var s=i-e,u=r-t,c=0;c<=100;c++){var h=c/100,d=a.project([e+s*h,t+u*h]);l(n,n,d),p(o,o,d)}};h(r,s,u,s),h(u,s,u,c),h(u,c,r,c),h(r,c,u,s)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}else;}var d,g,f,v=this.getBoundingRect(),y=e.get("layoutCenter"),m=e.get("layoutSize"),_=t.getWidth(),S=t.getHeight(),b=v.width/v.height*this.aspectScale,x=!1;if(y&&m&&(d=[B(y[0],_),B(y[1],S)],g=B(m,Math.min(_,S)),isNaN(d[0])||isNaN(d[1])||isNaN(g)||(x=!0)),x)f={},b>1?(f.width=g,f.height=g/b):(f.height=g,f.width=g*b),f.y=d[1]-f.height/2,f.x=d[0]-f.width/2;else{var w=e.getBoxLayoutParams();w.aspect=b,f=X(w,{width:_,height:S})}this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}P(Ci,mt);var Ai=function(){function e(){this.dimensions=Di}return e.prototype.create=function(e,t){var n=[];function o(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",(function(e,i){var a=e.get("map"),r=new Ci(a+i,a,F({nameMap:e.get("nameMap")},o(e)));r.zoomLimit=e.get("scaleLimit"),n.push(r),e.coordinateSystem=r,r.model=e,r.resize=Oi,r.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}}));var a={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();a[t]=a[t]||[],a[t].push(e)}})),i(a,(function(e,a){var r=u(e,(function(e){return e.get("nameMap")})),s=new Ci(a,a,F({nameMap:z(r)},o(e[0])));s.zoomLimit=E.apply(null,u(e,(function(e){return e.get("scaleLimit")}))),n.push(s),s.resize=Oi,s.resize(e[0],t),i(e,(function(e){e.coordinateSystem=s,function(e,t){i(t.get("geoCoord"),(function(t,i){e.addGeoCoord(i,t)}))}(s,e)}))})),n},e.prototype.getFilledRegions=function(e,t,n,o){for(var a=(e||[]).slice(),r=N(),s=0;s<a.length;s++)r.set(a[s].name,a[s]);var l=Ii(t,n,o);return i(l.regions,(function(e){var t=e.name,i=r.get(t),n=e.properties&&e.properties.echartsStyle;i||(i={name:t},a.push(i)),n&&H(i,n)})),a},e}(),Ri=new Ai,Ni=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.prototype.init=function(e,t,i){var n=wi(e.map);if(n&&"geoJSON"===n.type){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,i),U(e,"label",["show"])},i.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=Ri.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var i={};this._optionModelMap=Y(t.regions||[],(function(t,n){var o=n.name;return o&&(t.set(o,new W(n,e,e.ecModel)),n.selected&&(i[o]=!0)),t}),N()),t.selectedMap||(t.selectedMap=i)},i.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new W(null,this,this.ecModel)},i.prototype.getFormattedLabel=function(e,t){var i=this.getRegionModel(e),n="normal"===t?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:e};return j(n)?(o.status=t,n(o)):h(n)?n.replace("{a}",null!=e?e:""):void 0},i.prototype.setZoom=function(e){this.option.zoom=e},i.prototype.setCenter=function(e){this.option.center=e},i.prototype.select=function(e){var t=this.option,i=t.selectedMode;i&&("multiple"!==i&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},i.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},i.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},i.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},i.type="geo",i.layoutMode="box",i.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},i}(J),ki=["rect","circle","line","ellipse","polygon","polyline","path"],Vi=N(ki),Pi=N(ki.concat(["g"])),Gi=N(ki.concat(["g"])),Fi=Z();function zi(e){var t=e.getItemStyle(),i=e.get("areaColor");return null!=i&&(t.fill=i),t}function Ei(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Hi=function(){function e(e){var t=new g;this.uid=K("ec_map_draw"),this._controller=new _t(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new g),t.add(this._svgGroup=new g)}return e.prototype.draw=function(e,t,i,n,o){var a="geo"===e.mainType,r=e.getData&&e.getData();a&&t.eachComponent({mainType:"series",subType:"map"},(function(t){r||t.getHostGeoModel()!==e||(r=t.getData())}));var s=e.coordinateSystem,l=this._regionsGroup,p=this.group,u=s.getTransformInfo(),c=u.raw,h=u.roam;!l.childAt(0)||o?(p.x=h.x,p.y=h.y,p.scaleX=h.scaleX,p.scaleY=h.scaleY,p.dirty()):q(p,h,e);var d=r&&r.getVisual("visualMeta")&&r.getVisual("visualMeta").length>0,g={api:i,geo:s,mapOrGeoModel:e,data:r,isVisualEncodedByVisualMap:d,isGeo:a,transformInfoRaw:c};"geoJSON"===s.resourceType?this._buildGeoJSON(g):"geoSVG"===s.resourceType&&this._buildSVG(g),this._updateController(e,t,i),this._updateMapSelectHandler(e,l,i,n)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=N(),n=N(),o=this._regionsGroup,a=e.transformInfoRaw,r=e.mapOrGeoModel,s=e.data,l=e.geo.projection,p=l&&l.stream;function u(e,t){return t&&(e=t(e)),e&&[e[0]*a.scaleX+a.x,e[1]*a.scaleY+a.y]}function c(e){for(var t=[],i=!p&&l&&l.project,n=0;n<e.length;++n){var o=u(e[n],i);o&&t.push(o)}return t}function h(e){return{shape:{points:c(e)}}}o.removeAll(),i(e.geo.regions,(function(a){var c=a.name,d=t.get(c),f=n.get(c)||{},v=f.dataIdx,y=f.regionModel;if(!d){d=t.set(c,new g),o.add(d),v=s?s.indexOfName(c):null;var m=(y=e.isGeo?r.getRegionModel(c):s?s.getItemModel(v):null).get("silent",!0);null!=m&&(d.silent=m),n.set(c,{dataIdx:v,regionModel:y})}var _=[],S=[];i(a.geometries,(function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);p&&(t=ji(t,p)),i(t,(function(e){_.push(new b(h(e)))}))}else{var n=e.points;p&&(n=ji(n,p,!0)),i(n,(function(e){S.push(new x(h(e)))}))}}));var w=u(a.getCenter(),l&&l.project);function M(t,n){if(t.length){var o=new le({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});d.add(o),Bi(e,o,v,y),Xi(e,o,c,y,r,v,w),n&&(Ei(o),i(o.states,Ei))}}M(_),M(S,!0)})),t.each((function(t,i){var o=n.get(i),a=o.dataIdx,s=o.regionModel;Ui(e,t,i,s,r,a),Yi(e,t,i,s,r),Wi(e,t,i,s,r)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var o=this._svgDispatcherMap=N(),a=!1;i(this._svgGraphicRecord.named,(function(t){var i=t.name,n=e.mapOrGeoModel,r=e.data,s=t.svgNodeTagLower,l=t.el,p=r?r.indexOfName(i):null,u=n.getRegionModel(i);null!=Vi.get(s)&&l instanceof Q&&Bi(e,l,p,u),l instanceof Q&&(l.culling=!0);var c=u.get("silent",!0);(null!=c&&(l.silent=c),l.z2EmphasisLift=0,t.namedFrom)||(null!=Gi.get(s)&&Xi(e,l,i,u,n,p,null),Ui(e,l,i,u,n,p),Yi(e,l,i,u,n),null!=Pi.get(s)&&("self"===Wi(e,l,i,u,n)&&(a=!0),(o.get(i)||o.set(i,[])).push(l)))}),this),this._enableBlurEntireSVG(a,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var i=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){$(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=i&&(t.opacity=i),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var i=t.coordinateSystem;if("geoJSON"===i.resourceType){var n=this._regionsGroupByName;if(n){var o=n.get(e);return o?[o]:[]}}else if("geoSVG"===i.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=wi(e);if(t&&"geoSVG"===t.type){var i=t.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=wi(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,i){var n=e.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=n.getZoom(),o.enable(e.get("roam")||!1);var r=e.mainType;function s(){var t={type:"geoRoam",componentType:r};return t[r+"Id"]=e.id,t}o.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,St(a,e.dx,e.dy),i.dispatchAction(F(s(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))}),this),o.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,bt(a,e.scale,e.originX,e.originY),i.dispatchAction(F(s(),{totalZoom:a.zoom,zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))}),this),o.setPointerChecker((function(t,o,a){return n.containPoint([o,a])&&!ee(t,i,e)}))},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=Fi(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,i,n){var o=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){o._mouseDownFlag=!0})),t.on("click",(function(e){o._mouseDownFlag&&(o._mouseDownFlag=!1)})))},e}();function Bi(e,t,i,n){var o=n.getModel("itemStyle"),a=n.getModel(["emphasis","itemStyle"]),r=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=zi(o),p=zi(a),u=zi(s),c=zi(r),h=e.data;if(h){var d=h.getItemVisual(i,"style"),g=h.getItemVisual(i,"decal");e.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),g&&(l.decal=te(g,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=p,t.ensureState("select").style=u,t.ensureState("blur").style=c,$(t)}function Xi(e,t,i,n,o,a,r){var s=e.data,l=e.isGeo,p=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||p||u&&u.showLabel){var c=l?i:a,h=void 0;(!s||a>=0)&&(h=o);var d=r?{normal:{align:"center",verticalAlign:"middle"}}:null;ie(t,ne(n),{labelFetcher:h,labelDataIndex:c,defaultText:i},d);var g=t.getTextContent();if(g&&(Fi(g).ignore=g.ignore,t.textConfig&&r)){var f=t.getBoundingRect().clone();t.textConfig.layoutRect=f,t.textConfig.position=[(r[0]-f.x)/f.width*100+"%",(r[1]-f.y)/f.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function Ui(e,t,i,n,o,a){e.data?e.data.setItemGraphicEl(a,t):oe(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:i,region:n&&n.option||{}}}function Yi(e,t,i,n,o){e.data||ae({el:t,componentModel:o,itemName:i,itemTooltipOption:n.get("tooltip")})}function Wi(e,t,i,n,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var a=n.getModel("emphasis"),r=a.get("focus");return re(t,r,a.get("blurScope"),a.get("disabled")),e.isGeo&&se(t,o,i),r}function ji(e,t,n){var o,a=[];function r(){o=[]}function s(){o.length&&(a.push(o),o=[])}var l=t({polygonStart:r,polygonEnd:s,lineStart:r,lineEnd:s,point:function(e,t){isFinite(e)&&isFinite(t)&&o.push([e,t])},sphere:function(){}});return!n&&l.polygonStart(),i(e,(function(e){l.lineStart();for(var t=0;t<e.length;t++)l.point(e[t][0],e[t][1]);l.lineEnd()})),!n&&l.polygonEnd(),a}var Ji=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t.focusBlurEnabled=!0,t}return t(i,e),i.prototype.init=function(e,t){this._api=t},i.prototype.render=function(e,t,i,n){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new Hi(i));var o=this._mapDraw;o.draw(e,t,i,this,n),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,t,i)},i.prototype._handleRegionClick=function(e){var t;pe(e.target,(function(e){return null!=(t=oe(e).eventData)}),!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},i.prototype.updateSelectStatus=function(e,t,i){var n=this;this._mapDraw.group.traverse((function(e){var t=oe(e).eventData;if(t)return n._model.isSelected(t.name)?i.enterSelect(e):i.leaveSelect(e),!0}))},i.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},i.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},i.type="geo",i}(ue);function Zi(e,t,i){xi(e,t,i)}function Ki(e){function t(t,n){n.update="geo:updateSelectStatus",e.registerAction(n,(function(e,n){var o={},a=[];return n.eachComponent({mainType:"geo",query:e},(function(n){n[t](e.name);var r=n.coordinateSystem;i(r.regions,(function(e){o[e.name]=n.isSelected(e.name)||!1}));var s=[];i(o,(function(e,t){o[t]&&s.push(t)})),a.push({geoIndex:n.componentIndex,name:s})})),{selected:o,allSelected:a,name:e.name}}))}e.registerCoordinateSystem("geo",Ri),e.registerComponentModel(Ni),e.registerComponentView(Ji),e.registerImpl("registerMap",Zi),e.registerImpl("getMap",(function(e){return Mi(e)})),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t,n){var o=e.componentType||"series";t.eachComponent({mainType:o,query:e},(function(t){var a=t.coordinateSystem;if("geo"===a.type){var r=xt(a,e,t.get("scaleLimit"),n);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom),"series"===o&&i(t.seriesGroup,(function(e){e.setCenter(r.center),e.setZoom(r.zoom)}))}}))}))}var qi=i;function Qi(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function $i(e,t,i){var n={};return qi(t,(function(t){var o,a=n[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);qi(e[t],(function(e,n){if(wt.isValidType(n)){var o={type:n,visual:e};i&&i(o,t),a[n]=new wt(o),"opacity"===n&&((o=ce(o)).type="colorAlpha",a.__hidden.__alphaForOpacity=new wt(o))}}))})),n}function en(e,t,n){var o;i(n,(function(e){t.hasOwnProperty(e)&&Qi(t[e])&&(o=!0)})),o&&i(n,(function(i){t.hasOwnProperty(i)&&Qi(t[i])?e[i]=ce(t[i]):delete e[i]}))}function tn(e,t,n,o,a,r){var s,l={};function p(e){return he(n,s,e)}function u(e,t){de(n,s,e,t)}i(e,(function(e){var i=wt.prepareVisualTypes(t[e]);l[e]=i})),n.each((function(e,i){s=e;var r=n.getRawDataItem(s);if(r&&!1===r.visualMap)return;for(var c=o.call(a,e),h=t[c],d=l[c],g=0,f=d.length;g<f;g++){var v=d[g];h[v]&&h[v].applyVisual(e,p,u)}}))}var nn=function(e,t,i){var n=ce((on[e]||{})[t]);return i&&ge(n)?n[n.length-1]:n},on={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},an=wt.mapVisual,rn=wt.eachVisual,sn=ge,ln=i,pn=ye,un=me,cn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return t(n,e),n.prototype.init=function(e,t,i){this.mergeDefaultAndTheme(e,i)},n.prototype.optionUpdated=function(e,t){var i=this.option;!t&&en(i,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(e){var t=this.stateList;e=fe(e,this),this.controllerVisuals=$i(this.option.controller,t,e),this.targetVisuals=$i(this.option.target,t,e)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,i){t.push(i)})):t=ve(e),t},n.prototype.eachTargetSeries=function(e,t){i(this.getTargetSeriesIndices(),(function(i){var n=this.ecModel.getSeriesByIndex(i);n&&e.call(t,n)}),this)},n.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries((function(i){i===e&&(t=!0)})),t},n.prototype.formatValueText=function(e,t,i){var n,o=this.option,a=o.precision,r=this.dataBound,s=o.formatter;i=i||["<",">"],ge(e)&&(e=e.slice(),n=!0);var l=t?e:n?[p(e[0]),p(e[1])]:p(e);return h(s)?s.replace("{value}",n?l[0]:l).replace("{value2}",n?l[1]:l):j(s)?n?s(e[0],e[1]):s(e):n?e[0]===r[0]?i[0]+" "+l[1]:e[1]===r[1]?i[1]+" "+l[0]:l[0]+" - "+l[1]:l;function p(e){return e===r[0]?"min":e===r[1]?"max":(+e).toFixed(Math.min(a,20))}},n.prototype.resetExtent=function(){var e=this.option,t=pn([e.min,e.max]);this._dataExtent=t},n.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var i=e.dimensions,n=i.length-1;n>=0;n--){var o=i[n],a=e.getDimensionInfo(o);if(!a.isCalculationCoord)return a.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,i={inRange:t.inRange,outOfRange:t.outOfRange},n=t.target||(t.target={}),o=t.controller||(t.controller={});H(n,i),H(o,i);var a=this.isCategory();function r(i){sn(t.color)&&!i.inRange&&(i.inRange={color:t.color.slice().reverse()}),i.inRange=i.inRange||{color:e.get("gradientColor")}}r.call(this,n),r.call(this,o),function(e,t,i){var n=e[t],o=e[i];n&&!o&&(o=e[i]={},ln(n,(function(e,t){if(wt.isValidType(t)){var i=nn(t,"inactive",a);null!=i&&(o[t]=i,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,i=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,n=this.get("inactiveColor"),o=this.getItemSymbol()||"roundRect";ln(this.stateList,(function(r){var s=this.itemSize,l=e[r];l||(l=e[r]={color:a?n:[n]}),null==l.symbol&&(l.symbol=t&&ce(t)||(a?o:[o])),null==l.symbolSize&&(l.symbolSize=i&&ce(i)||(a?s[0]:[s[0],s[0]])),l.symbol=an(l.symbol,(function(e){return"none"===e?o:e}));var p=l.symbolSize;if(null!=p){var u=-1/0;rn(p,(function(e){e>u&&(u=e)})),l.symbolSize=an(p,(function(e){return un(e,[0,u],[0,s[0]],!0)}))}}),this)}.call(this,o)},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(e){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(e){return null},n.prototype.getVisualMeta=function(e){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(J),hn=[20,140],dn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.optionUpdated=function(t,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},n.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=hn[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=hn[1])},n.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):ge(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},n.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),i(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)}),this)},n.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},n.prototype.getSelected=function(){var e=this.getExtent(),t=ye((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},n.prototype.getValueState=function(e){var t=this.option.range,i=this.getExtent();return(t[0]<=i[0]||t[0]<=e)&&(t[1]>=i[1]||e<=t[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries((function(i){var n=[],o=i.getData();o.each(this.getDataDimensionIndex(o),(function(t,i){e[0]<=t&&t<=e[1]&&n.push(i)}),this),t.push({seriesId:i.id,dataIndex:n})}),this),t},n.prototype.getVisualMeta=function(e){var t=gn(this,"outOfRange",this.getExtent()),i=gn(this,"inRange",this.option.range.slice()),n=[];function o(t,i){n.push({value:t,color:e(t,i)})}for(var a=0,r=0,s=i.length,l=t.length;r<l&&(!i.length||t[r]<=i[0]);r++)t[r]<i[a]&&o(t[r],"outOfRange");for(var p=1;a<s;a++,p=0)p&&n.length&&o(i[a],"outOfRange"),o(i[a],"inRange");for(p=1;r<l;r++)(!i.length||i[i.length-1]<t[r])&&(p&&(n.length&&o(n[n.length-1].value,"outOfRange"),p=0),o(t[r],"outOfRange"));var u=n.length;return{stops:n,outerColors:[u?n[0].color:"transparent",u?n[u-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=_e(cn.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(cn);function gn(e,t,i){if(i[0]===i[1])return i.slice();for(var n=(i[1]-i[0])/200,o=i[0],a=[],r=0;r<=200&&o<i[1];r++)a.push(o),o+=n;return a.push(i[1]),a}var fn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return t(n,e),n.prototype.init=function(e,t){this.ecModel=e,this.api=t},n.prototype.render=function(e,t,i,n){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,i,n):this.group.removeAll()},n.prototype.renderBackground=function(e){var t=this.visualMapModel,i=Se(t.get("padding")||0),n=e.getBoundingRect();e.add(new f({z2:-1,silent:!0,shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[3]+i[1],height:n.height+i[0]+i[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},n.prototype.getControllerVisual=function(e,t,n){var o=(n=n||{}).forceState,a=this.visualMapModel,r={};if("color"===t){var s=a.get("contentColor");r.color=s}function l(e){return r[e]}function p(e,t){r[e]=t}var u=a.controllerVisuals[o||a.getValueState(e)],c=wt.prepareVisualTypes(u);return i(c,(function(i){var o=u[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",o=u.__alphaForOpacity),wt.dependsOn(i,t)&&o&&o.applyVisual(e,l,p)})),r[t]},n.prototype.positionGroup=function(e){var t=this.visualMapModel,i=this.api;be(e,t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},n.prototype.doRender=function(e,t,i,n){},n.type="visualMap",n}(ue),vn=[["left","right","width"],["top","bottom","height"]];function yn(e,t,i){var n=e.option,o=n.align;if(null!=o&&"auto"!==o)return o;for(var a={width:t.getWidth(),height:t.getHeight()},r="horizontal"===n.orient?1:0,s=vn[r],l=[0,null,10],p={},u=0;u<3;u++)p[vn[1-r][u]]=l[u],p[s[u]]=2===u?i[0]:n[s[u]];var c=[["x","width",3],["y","height",0]][r],h=X(p,a,n.padding);return s[(h.margin[c[2]]||0)+h[c[0]]+.5*h[c[1]]<.5*a[c[1]]?0:1]}function mn(e,t){return i(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var _n=me,Sn=i,bn=Math.min,xn=Math.max,wn=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return t(i,e),i.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this._hoverLinkFromSeriesMouseOver=fe(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=fe(this._hideIndicator,this)},i.prototype.doRender=function(e,t,i,n){n&&"selectDataRange"===n.type&&n.from===this.uid||this._buildView()},i.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var i=e.get("text");this._renderEndsText(t,i,0),this._renderEndsText(t,i,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},i.prototype._renderEndsText=function(e,t,i){if(t){var n=t[1-i];n=null!=n?n+"":"";var o=this.visualMapModel,a=o.get("textGap"),r=o.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([r[0]/2,0===i?-a:r[1]+a],s),p=this._applyTransform(0===i?"bottom":"top",s),u=this._orient,c=this.visualMapModel.textStyleModel;this.group.add(new xe({style:we(c,{x:l[0],y:l[1],verticalAlign:"horizontal"===u?"middle":p,align:"horizontal"===u?p:"center",text:n})}))}},i.prototype._renderBar=function(e){var t=this.visualMapModel,i=this._shapes,n=t.itemSize,o=this._orient,a=this._useHandle,r=yn(t,this.api,n),s=i.mainGroup=this._createBarGroup(r),l=new g;s.add(l),l.add(i.outOfRange=Mn()),l.add(i.inRange=Mn(null,a?Tn(this._orient):null,fe(this._dragHandle,this,"all",!1),fe(this._dragHandle,this,"all",!0))),l.setClipPath(new f({shape:{x:0,y:0,width:n[0],height:n[1],r:3}}));var p=t.textStyleModel.getTextRect("国"),u=xn(p.width,p.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(t,s,0,n,u,o),this._createHandle(t,s,1,n,u,o)),this._createIndicator(t,s,n,u,o),e.add(s)},i.prototype._createHandle=function(e,t,i,n,o,a){var r=fe(this._dragHandle,this,i,!1),s=fe(this._dragHandle,this,i,!0),l=Me(e.get("handleSize"),n[0]),p=Ie(e.get("handleIcon"),-l/2,-l/2,l,l,null,!0),u=Tn(this._orient);p.attr({cursor:u,draggable:!0,drift:r,ondragend:s,onmousemove:function(e){Te(e.event)}}),p.x=n[0]/2,p.useStyle(e.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),De(p,!0),t.add(p);var c=this.visualMapModel.textStyleModel,h=new xe({cursor:u,draggable:!0,drift:r,onmousemove:function(e){Te(e.event)},ondragend:s,style:we(c,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var d=[l,0],g=this._shapes;g.handleThumbs[i]=p,g.handleLabelPoints[i]=d,g.handleLabels[i]=h},i.prototype._createIndicator=function(e,t,i,n,o){var a=Me(e.get("indicatorSize"),i[0]),r=Ie(e.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);r.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var s=e.getModel("indicatorStyle").getItemStyle();if(r instanceof w){var l=r.style;r.useStyle(F({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else r.useStyle(s);t.add(r);var p=this.visualMapModel.textStyleModel,u=new xe({silent:!0,invisible:!0,style:we(p,{x:0,y:0,text:""})});this.group.add(u);var c=[("horizontal"===o?n/2:6)+i[0]/2,0],h=this._shapes;h.indicator=r,h.indicatorLabel=u,h.indicatorLabelPoint=c,this._firstShowIndicator=!0},i.prototype._dragHandle=function(e,t,i,n){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([i,n],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():In(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},i.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),i=e.getExtent(),n=[0,e.itemSize[1]];this._handleEnds=[_n(t[0],i,n,!0),_n(t[1],i,n,!0)]},i.prototype._updateInterval=function(e,t){t=t||0;var i=this.visualMapModel,n=this._handleEnds,o=[0,i.itemSize[1]];Ce(t,n,o,e,0);var a=i.getExtent();this._dataInterval=[_n(n[0],o,a,!0),_n(n[1],o,a,!0)]},i.prototype._updateView=function(e){var t=this.visualMapModel,i=t.getExtent(),n=this._shapes,o=[0,t.itemSize[1]],a=e?o:this._handleEnds,r=this._createBarVisual(this._dataInterval,i,a,"inRange"),s=this._createBarVisual(i,i,o,"outOfRange");n.inRange.setStyle({fill:r.barColor}).setShape("points",r.barPoints),n.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(a,r)},i.prototype._createBarVisual=function(e,t,i,n){var o={forceState:n,convertOpacityToAlpha:!0},a=this._makeColorGradient(e,o),r=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(i,r);return{barColor:new I(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},i.prototype._makeColorGradient=function(e,t){var i=[],n=(e[1]-e[0])/100;i.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var a=e[0]+n*o;if(a>e[1])break;i.push({color:this.getControllerVisual(a,"color",t),offset:o/100})}return i.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),i},i.prototype._createBarPoints=function(e,t){var i=this.visualMapModel.itemSize;return[[i[0]-t[0],e[0]],[i[0],e[0]],[i[0],e[1]],[i[0]-t[1],e[1]]]},i.prototype._createBarGroup=function(e){var t=this._orient,i=this.visualMapModel.get("inverse");return new g("horizontal"!==t||i?"horizontal"===t&&i?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||i?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},i.prototype._updateHandle=function(e,t){if(this._useHandle){var i=this._shapes,n=this.visualMapModel,o=i.handleThumbs,a=i.handleLabels,r=n.itemSize,s=n.getExtent(),l=this._applyTransform("left",i.mainGroup);Sn([0,1],(function(p){var u=o[p];u.setStyle("fill",t.handlesColor[p]),u.y=e[p];var c=_n(e[p],[0,r[1]],s,!0),h=this.getControllerVisual(c,"symbolSize");u.scaleX=u.scaleY=h/r[0],u.x=r[0]-h/2;var d=Le(i.handleLabelPoints[p],Oe(u,this.group));if("horizontal"===this._orient){var g="left"===l||"top"===l?(r[0]-h)/2:(r[0]-h)/-2;d[1]+=g}a[p].setStyle({x:d[0],y:d[1],text:n.formatValueText(this._dataInterval[p]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",i.mainGroup):"center"})}),this)}},i.prototype._showIndicator=function(e,t,i,n){var o=this.visualMapModel,a=o.getExtent(),r=o.itemSize,s=[0,r[1]],l=this._shapes,p=l.indicator;if(p){p.attr("invisible",!1);var u=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),c=this.getControllerVisual(e,"symbolSize"),h=_n(e,a,s,!0),d=r[0]-c/2,g={x:p.x,y:p.y};p.y=h,p.x=d;var f=Le(l.indicatorLabelPoint,Oe(p,this.group)),v=l.indicatorLabel;v.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),m="horizontal"===this._orient;v.setStyle({text:(i||"")+o.formatValueText(t),verticalAlign:m?y:"middle",align:m?"center":y});var _={x:d,y:h,style:{fill:u}},S={style:{x:f[0],y:f[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};p.x=g.x,p.y=g.y,p.animateTo(_,b),v.animateTo(S,b)}else p.attr(_),v.attr(S);this._firstShowIndicator=!1;var x=this._shapes.handleLabels;if(x)for(var w=0;w<x.length;w++)this.api.enterBlur(x[w])}},i.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var i=e.visualMapModel.itemSize,n=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);n[1]=bn(xn(0,n[1]),i[1]),e._doHoverLinkToSeries(n[1],0<=n[0]&&n[0]<=i[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},i.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},i.prototype._doHoverLinkToSeries=function(e,t){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var o=[0,n[1]],a=i.getExtent();e=bn(xn(o[0],e),o[1]);var r=function(e,t,i){var n=6,o=e.get("hoverLinkDataSize");o&&(n=_n(o,t,i,!0)/2);return n}(i,a,o),s=[e-r,e+r],l=_n(e,o,a,!0),p=[_n(s[0],o,a,!0),_n(s[1],o,a,!0)];s[0]<o[0]&&(p[0]=-1/0),s[1]>o[1]&&(p[1]=1/0),t&&(p[0]===-1/0?this._showIndicator(l,p[1],"< ",r):p[1]===1/0?this._showIndicator(l,p[0],"> ",r):this._showIndicator(l,l,"≈ ",r));var u=this._hoverLinkDataIndices,c=[];(t||In(i))&&(c=this._hoverLinkDataIndices=i.findTargetDataIndices(p));var h=Ae(u,c);this._dispatchHighDown("downplay",mn(h[0],i)),this._dispatchHighDown("highlight",mn(h[1],i))}},i.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(pe(e.target,(function(e){var i=oe(e);if(null!=i.dataIndex)return t=i,!0}),!0),t){var i=this.ecModel.getSeriesByIndex(t.seriesIndex),n=this.visualMapModel;if(n.isTargetSeries(i)){var o=i.getData(t.dataType),a=o.getStore().get(n.getDataDimensionIndex(o),t.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},i.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var i=0;i<t.length;i++)this.api.leaveBlur(t[i])},i.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",mn(e,this.visualMapModel)),e.length=0},i.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},i.prototype._applyTransform=function(e,t,i,n){var o=Oe(t,n?null:this.group);return ge(e)?Le(e,o,i):Re(e,o,i)},i.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},i.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},i.type="visualMap.continuous",i}(fn);function Mn(e,t,i,n){return new b({shape:{points:e},draggable:!!i,cursor:t,drift:i,onmousemove:function(e){Te(e.event)},ondragend:n})}function In(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function Tn(e){return"vertical"===e?"ns-resize":"ew-resize"}var Dn={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Cn=function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))},Ln=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",(function(t){var o,a,r,s,l,p=e.pipelineContext;!t.isTargetSeries(e)||p&&p.large||n.push((o=t.stateList,a=t.targetVisuals,r=fe(t.getValueState,t),s=t.getDataDimensionIndex(e.getData()),l={},i(o,(function(e){var t=wt.prepareVisualTypes(a[e]);l[e]=t})),{progress:function(e,t){var i,n;function o(e){return he(t,n,e)}function p(e,i){de(t,n,e,i)}null!=s&&(i=t.getDimensionIndex(s));for(var u=t.getStore();null!=(n=e.next());){var c=t.getRawDataItem(n);if(!c||!1!==c.visualMap)for(var h=null!=s?u.get(i,n):n,d=r(h),g=a[d],f=l[d],v=0,y=f.length;v<y;v++){var m=f[v];g[m]&&g[m].applyVisual(h,o,p)}}}}))})),n}},{createOnAllSeries:!0,reset:function(e,t){var i=e.getData(),n=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(fe(On,null,e,t))||{stops:[],outerColors:[]},a=t.getDataDimensionIndex(i);a>=0&&(o.dimension=a,n.push(o))}})),e.getData().setVisual("visualMeta",n)}}];function On(e,t,i,n){for(var o=t.targetVisuals[n],a=wt.prepareVisualTypes(o),r={color:Ne(e.getData(),"color")},s=0,l=a.length;s<l;s++){var p=a[s],u=o["opacity"===p?"__alphaForOpacity":p];u&&u.applyVisual(i,c,h)}return r.color;function c(e){return r[e]}function h(e,t){r[e]=t}}var An=i;function Rn(e){var t=e&&e.visualMap;ge(t)||(t=t?[t]:[]),An(t,(function(e){if(e){Nn(e,"splitList")&&!Nn(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&ge(t)&&An(t,(function(e){ke(e)&&(Nn(e,"start")&&!Nn(e,"min")&&(e.min=e.start),Nn(e,"end")&&!Nn(e,"max")&&(e.max=e.end))}))}}))}function Nn(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var kn=!1;function Vn(e){kn||(kn=!0,e.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"})),e.registerAction(Dn,Cn),i(Ln,(function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)})),e.registerPreprocessor(Rn))}function Pn(e){e.registerComponentModel(dn),e.registerComponentView(wn),Vn(e)}var Gn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t._pieceList=[],t}return t(n,e),n.prototype.optionUpdated=function(t,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],Fn[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var o=this.option.categories;this.resetVisual((function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=ce(o)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=u(this._pieceList,(function(e){return e=ce(e),"inRange"!==t&&(e.visual=null),e})))}))},n.prototype.completeVisualOption=function(){var t=this.option,n={},o=wt.listVisualTypes(),a=this.isCategory();function r(e,t,i){return e&&e[t]&&e[t].hasOwnProperty(i)}i(t.pieces,(function(e){i(o,(function(t){e.hasOwnProperty(t)&&(n[t]=1)}))})),i(n,(function(e,n){var o=!1;i(this.stateList,(function(e){o=o||r(t,e,n)||r(t.target,e,n)}),this),!o&&i(this.stateList,(function(e){(t[e]||(t[e]={}))[n]=nn(n,"inRange"===e?"active":"inactive",a)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(e,t){var n=this.option,o=this._pieceList,a=(t?n:e).selected||{};if(n.selected=a,i(o,(function(e,t){var i=this.getSelectedMapKey(e);a.hasOwnProperty(i)||(a[i]=!0)}),this),"single"===n.selectedMode){var r=!1;i(o,(function(e,t){var i=this.getSelectedMapKey(e);a[i]&&(r?a[i]=!1:r=!0)}),this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(e){this.option.selected=ce(e)},n.prototype.getValueState=function(e){var t=wt.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(e){var t=[],i=this._pieceList;return this.eachTargetSeries((function(n){var o=[],a=n.getData();a.each(this.getDataDimensionIndex(a),(function(t,n){wt.findPieceIndex(t,i)===e&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},n.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var i=e.interval||[];t=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return t},n.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],n=["",""],o=this,a=this._pieceList.slice();if(a.length){var r=a[0].interval[0];r!==-1/0&&a.unshift({interval:[-1/0,r]}),(r=a[a.length-1].interval[1])!==1/0&&a.push({interval:[r,1/0]})}else a.push({interval:[-1/0,1/0]});var s=-1/0;return i(a,(function(e){var t=e.interval;t&&(t[0]>s&&l([s,t[0]],"outOfRange"),l(t.slice()),s=t[1])}),this),{stops:t,outerColors:n}}function l(i,a){var r=o.getRepresentValue({interval:i});a||(a=o.getValueState(r));var s=e(r,a);i[0]===-1/0?n[0]=s:i[1]===1/0?n[1]=s:t.push({value:i[0],color:s},{value:i[1],color:s})}},n.type="visualMap.piecewise",n.defaultOption=_e(cn.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(cn),Fn={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),o=this.getExtent(),a=t.splitNumber;a=Math.max(parseInt(a,10),1),t.splitNumber=a;for(var r=(o[1]-o[0])/a;+r.toFixed(n)!==r&&n<5;)n++;t.precision=n,r=+r.toFixed(n),t.minOpen&&e.push({interval:[-1/0,o[0]],close:[0,0]});for(var s=0,l=o[0];s<a;l+=r,s++){var p=s===a-1?o[1]:l+r;e.push({interval:[l,p],close:[1,1]})}t.maxOpen&&e.push({interval:[o[1],1/0],close:[0,0]}),Ve(e),i(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;i(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),zn(t,e)},pieces:function(e){var t=this.option;i(t.pieces,(function(t,i){ke(t)||(t={value:t});var n={text:"",index:i};if(null!=t.label&&(n.text=t.label),t.hasOwnProperty("value")){var o=n.value=t.value;n.interval=[o,o],n.close=[1,1]}else{for(var a=n.interval=[],r=n.close=[0,0],s=[1,0,1],l=[-1/0,1/0],p=[],u=0;u<2;u++){for(var c=[["gte","gt","min"],["lte","lt","max"]][u],h=0;h<3&&null==a[u];h++)a[u]=t[c[h]],r[u]=s[h],p[u]=2===h;null==a[u]&&(a[u]=l[u])}p[0]&&a[1]===1/0&&(r[0]=0),p[1]&&a[0]===-1/0&&(r[1]=0),a[0]===a[1]&&r[0]&&r[1]&&(n.value=a[0])}n.visual=wt.retrieveVisuals(t),e.push(n)}),this),zn(t,e),Ve(e),i(e,(function(e){var t=e.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,i)}),this)}};function zn(e,t){var i=e.inverse;("vertical"===e.orient?!i:i)&&t.reverse()}var En=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),o=t.textStyleModel,a=o.getFont(),r=o.getTextColor(),s=this._getItemAlign(),l=t.itemSize,p=this._getViewData(),u=p.endsText,c=E(t.get("showLabel",!0),!u),h=!t.get("selectedMode");u&&this._renderEndsText(e,u[0],l,c,s),i(p.viewPieceList,(function(i){var o=i.piece,p=new g;p.onclick=fe(this._onItemClick,this,o),this._enableHoverLink(p,i.indexInModelPieceList);var u=t.getRepresentValue(o);if(this._createItemSymbol(p,u,[0,0,l[0],l[1]],h),c){var d=this.visualMapModel.getValueState(u);p.add(new xe({style:{x:"right"===s?-n:l[0]+n,y:l[1]/2,text:o.text,verticalAlign:"middle",align:s,font:a,fill:r,opacity:"outOfRange"===d?.5:1},silent:h}))}e.add(p)}),this),u&&this._renderEndsText(e,u[1],l,c,s),Pe(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},n.prototype._enableHoverLink=function(e,t){var i=this;e.on("mouseover",(function(){return n("highlight")})).on("mouseout",(function(){return n("downplay")}));var n=function(e){var n=i.visualMapModel;n.option.hoverLink&&i.api.dispatchAction({type:e,batch:mn(n.findTargetDataIndices(t),n)})}},n.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return yn(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},n.prototype._renderEndsText=function(e,t,i,n,o){if(t){var a=new g,r=this.visualMapModel.textStyleModel;a.add(new xe({style:we(r,{x:n?"right"===o?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:n?o:"center",text:t})})),e.add(a)}},n.prototype._getViewData=function(){var e=this.visualMapModel,t=u(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),i=e.get("text"),n=e.get("orient"),o=e.get("inverse");return("horizontal"===n?o:!o)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},n.prototype._createItemSymbol=function(e,t,i,n){var o=Ie(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color"));o.silent=n,e.add(o)},n.prototype._onItemClick=function(e){var t=this.visualMapModel,n=t.option,o=n.selectedMode;if(o){var a=ce(n.selected),r=t.getSelectedMapKey(e);"single"===o||!0===o?(a[r]=!0,i(a,(function(e,t){a[t]=t===r}))):a[r]=!a[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},n.type="visualMap.piecewise",n}(fn);function Hn(e){e.registerComponentModel(Gn),e.registerComponentView(En),Vn(e)}function Bn(e){Ge(Pn),Ge(Hn)}var Xn=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t.hasSymbolVisual=!0,t}return t(i,e),i.prototype.getInitialData=function(e){return Fe(null,this,{useEncodeDefaulter:!0})},i.prototype.getLegendIcon=function(e){var t=new g,i=Ie("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(i),i.setStyle(e.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),a="none"===n?"circle":n,r=.8*e.itemHeight,s=Ie(a,(e.itemWidth-r)/2,(e.itemHeight-r)/2,r,r,e.itemStyle.fill);t.add(s),s.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?o:e.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([e.itemWidth/2,e.itemHeight/2]),a.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},i.type="series.line",i.dependencies=["grid","polar"],i.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},i}(ze);function Un(e,t,i){var n=e.getBaseAxis(),o=e.getOtherAxis(n),a=function(e,t){var i=0,n=e.scale.getExtent();"start"===t?i=n[0]:"end"===t?i=n[1]:He(t)&&!isNaN(t)?i=t:n[0]>0?i=n[0]:n[1]<0&&(i=n[1]);return i}(o,i),r=n.dim,s=o.dim,l=t.mapDimension(s),p=t.mapDimension(r),c="x"===s||"radius"===s?1:0,h=u(e.dimensions,(function(e){return t.mapDimension(e)})),d=!1,g=t.getCalculationInfo("stackResultDimension");return Ee(t,h[0])&&(d=!0,h[0]=g),Ee(t,h[1])&&(d=!0,h[1]=g),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:r,stacked:!!d,valueDim:l,baseDim:p,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Yn(e,t,i,n){var o=NaN;e.stacked&&(o=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=e.valueStart);var a=e.baseDataOffset,r=[];return r[a]=i.get(e.baseDim,n),r[1-a]=o,t.dataToPoint(r)}var Wn=Math.min,jn=Math.max;function Jn(e,t){return isNaN(e)||isNaN(t)}function Zn(e,t,i,n,o,a,r,s,l){for(var p,u,c,h,d,g,f=i,v=0;v<n;v++){var y=t[2*f],m=t[2*f+1];if(f>=o||f<0)break;if(Jn(y,m)){if(l){f+=a;continue}break}if(f===i)e[a>0?"moveTo":"lineTo"](y,m),c=y,h=m;else{var _=y-p,S=m-u;if(_*_+S*S<.5){f+=a;continue}if(r>0){for(var b=f+a,x=t[2*b],w=t[2*b+1];x===y&&w===m&&v<n;)v++,f+=a,x=t[2*(b+=a)],w=t[2*b+1],_=(y=t[2*f])-p,S=(m=t[2*f+1])-u;var M=v+1;if(l)for(;Jn(x,w)&&M<n;)M++,x=t[2*(b+=a)],w=t[2*b+1];var I=.5,T=0,D=0,C=void 0,L=void 0;if(M>=n||Jn(x,w))d=y,g=m;else{T=x-p,D=w-u;var O=y-p,A=x-y,R=m-u,N=w-m,k=void 0,V=void 0;if("x"===s){var P=T>0?1:-1;d=y-P*(k=Math.abs(O))*r,g=m,C=y+P*(V=Math.abs(A))*r,L=m}else if("y"===s){var G=D>0?1:-1;d=y,g=m-G*(k=Math.abs(R))*r,C=y,L=m+G*(V=Math.abs(N))*r}else k=Math.sqrt(O*O+R*R),d=y-T*r*(1-(I=(V=Math.sqrt(A*A+N*N))/(V+k))),g=m-D*r*(1-I),L=m+D*r*I,C=Wn(C=y+T*r*I,jn(x,y)),L=Wn(L,jn(w,m)),C=jn(C,Wn(x,y)),g=m-(D=(L=jn(L,Wn(w,m)))-m)*k/V,d=Wn(d=y-(T=C-y)*k/V,jn(p,y)),g=Wn(g,jn(u,m)),C=y+(T=y-(d=jn(d,Wn(p,y))))*V/k,L=m+(D=m-(g=jn(g,Wn(u,m))))*V/k}e.bezierCurveTo(c,h,d,g,y,m),c=C,h=L}else e.lineTo(y,m)}p=y,u=m,f+=a}return v}var Kn=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),qn=function(e){function i(t){var i=e.call(this,t)||this;return i.type="ec-polyline",i}return t(i,e),i.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},i.prototype.getDefaultShape=function(){return new Kn},i.prototype.buildPath=function(e,t){var i=t.points,n=0,o=i.length/2;if(t.connectNulls){for(;o>0&&Jn(i[2*o-2],i[2*o-1]);o--);for(;n<o&&Jn(i[2*n],i[2*n+1]);n++);}for(;n<o;)n+=Zn(e,i,n,o,o,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},i.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i,n,o=this.path.data,a=Ye.CMD,r="x"===t,s=[],l=0;l<o.length;){var p=void 0,u=void 0,c=void 0,h=void 0,d=void 0,g=void 0,f=void 0;switch(o[l++]){case a.M:i=o[l++],n=o[l++];break;case a.L:if(p=o[l++],u=o[l++],(f=r?(e-i)/(p-i):(e-n)/(u-n))<=1&&f>=0){var v=r?(u-n)*f+n:(p-i)*f+i;return r?[e,v]:[v,e]}i=p,n=u;break;case a.C:p=o[l++],u=o[l++],c=o[l++],h=o[l++],d=o[l++],g=o[l++];var y=r?Xe(i,p,c,d,e,s):Xe(n,u,h,g,e,s);if(y>0)for(var m=0;m<y;m++){var _=s[m];if(_<=1&&_>=0){v=r?We(n,u,h,g,_):We(i,p,c,d,_);return r?[e,v]:[v,e]}}i=d,n=g}}},i}(Ue),Qn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i}(Kn),$n=function(e){function i(t){var i=e.call(this,t)||this;return i.type="ec-polygon",i}return t(i,e),i.prototype.getDefaultShape=function(){return new Qn},i.prototype.buildPath=function(e,t){var i=t.points,n=t.stackedOnPoints,o=0,a=i.length/2,r=t.smoothMonotone;if(t.connectNulls){for(;a>0&&Jn(i[2*a-2],i[2*a-1]);a--);for(;o<a&&Jn(i[2*o],i[2*o+1]);o++);}for(;o<a;){var s=Zn(e,i,o,a,a,1,t.smooth,r,t.connectNulls);Zn(e,n,o+s-1,s,a,-1,t.stackedOnSmooth,r,t.connectNulls),o+=s+1,e.closePath()}},i}(Ue);function eo(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return;return!0}}function to(e){for(var t=1/0,i=1/0,n=-1/0,o=-1/0,a=0;a<e.length;){var r=e[a++],s=e[a++];isNaN(r)||(t=Math.min(r,t),n=Math.max(r,n)),isNaN(s)||(i=Math.min(s,i),o=Math.max(s,o))}return[[t,i],[n,o]]}function io(e,t){var i=to(e),n=i[0],o=i[1],a=to(t),r=a[0],s=a[1];return Math.max(Math.abs(n[0]-r[0]),Math.abs(n[1]-r[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function no(e){return He(e)?e:e?.5:0}function oo(e,t,i,n,o){var a=i.getBaseAxis(),r="x"===a.dim||"radius"===a.dim?0:1,s=[],l=0,p=[],u=[],c=[],h=[];if(o){for(l=0;l<e.length;l+=2){var d=t||e;isNaN(d[l])||isNaN(d[l+1])||h.push(e[l],e[l+1])}e=h}for(l=0;l<e.length-2;l+=2)switch(c[0]=e[l+2],c[1]=e[l+3],u[0]=e[l],u[1]=e[l+1],s.push(u[0],u[1]),n){case"end":p[r]=c[r],p[1-r]=u[1-r],s.push(p[0],p[1]);break;case"middle":var g=(u[r]+c[r])/2,f=[];p[r]=f[r]=g,p[1-r]=u[1-r],f[1-r]=c[1-r],s.push(p[0],p[1]),s.push(f[0],f[1]);break;default:p[r]=u[r],p[1-r]=c[1-r],s.push(p[0],p[1])}return s.push(e[l++],e[l++]),s}function ao(e,t,n){var o=e.getVisual("visualMeta");if(o&&o.length&&e.count()&&"cartesian2d"===t.type){for(var a,r,s=o.length-1;s>=0;s--){var l=e.getDimensionInfo(o[s].dimension);if("x"===(a=l&&l.coordDim)||"y"===a){r=o[s];break}}if(r){var p=t.getAxis(a),c=u(r.stops,(function(e){return{coord:p.toGlobalCoord(p.dataToCoord(e.value)),color:e.color}})),h=c.length,d=r.outerColors.slice();h&&c[0].coord>c[h-1].coord&&(c.reverse(),d.reverse());var g=function(e,t){var i,n,o=[],a=e.length;function r(e,t,i){var n=e.coord,o=(i-n)/(t.coord-n);return{coord:i,color:rt(o,[e.color,t.color])}}for(var s=0;s<a;s++){var l=e[s],p=l.coord;if(p<0)i=l;else{if(p>t){n?o.push(r(n,l,t)):i&&o.push(r(i,l,0),r(i,l,t));break}i&&(o.push(r(i,l,0)),i=null),o.push(l),n=l}}return o}(c,"x"===a?n.getWidth():n.getHeight()),f=g.length;if(!f&&h)return c[0].coord<0?d[1]?d[1]:c[h-1].color:d[0]?d[0]:c[0].color;var v=g[0].coord-10,y=g[f-1].coord+10,m=y-v;if(m<.001)return"transparent";i(g,(function(e){e.offset=(e.coord-v)/m})),g.push({offset:f?g[f-1].offset:.5,color:d[1]||"transparent"}),g.unshift({offset:f?g[0].offset:.5,color:d[0]||"transparent"});var _=new I(0,0,0,0,g,!0);return _[a]=v,_[a+"2"]=y,_}}}function ro(e,t,n){var o=e.get("showAllSymbol"),a="auto"===o;if(!o||a){var r=n.getAxesByScale("ordinal")[0];if(r&&(!a||!function(e,t){var i=e.getExtent(),n=Math.abs(i[1]-i[0])/e.scale.count();isNaN(n)&&(n=0);for(var o=t.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*Qe.getSymbolSize(t,r)[e.isHorizontal()?1:0]>n)return!1;return!0}(r,t))){var s=t.mapDimension(r.dim),l={};return i(r.getViewLabels(),(function(e){var t=r.scale.getRawOrdinalNumber(e.tickValue);l[t]=1})),function(e){return!l.hasOwnProperty(t.get(s,e))}}}}function so(e,t){return[e[2*t],e[2*t+1]]}function lo(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<at.length;t++)if(e.get([at[t],"endLabel","show"]))return!0;return!1}function po(e,t,i,n){if(Mt(t,"cartesian2d")){var o=n.getModel("endLabel"),a=o.get("valueAnimation"),r=n.getData(),s={lastFrameIndex:0},l=lo(n)?function(i,n){e._endLabelOnDuring(i,n,r,s,a,o,t)}:null,p=t.getBaseAxis().isHorizontal(),u=It(t,i,n,(function(){var t=e._endLabel;t&&i&&null!=s.originalX&&t.attr({x:s.originalX,y:s.originalY})}),l);if(!n.get("clip",!0)){var c=u.shape,h=Math.max(c.width,c.height);p?(c.y-=h,c.height+=2*h):(c.x-=h,c.width+=2*h)}return l&&l(1,u),u}return Tt(t,i,n)}var uo=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.init=function(){var e=new g,t=new je;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e,this._changePolyState=fe(this._changePolyState,this)},i.prototype.render=function(e,t,i){var n=e.coordinateSystem,o=this.group,a=e.getData(),r=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=a.getLayout("points")||[],p="polar"===n.type,u=this._coordSys,c=this._symbolDraw,h=this._polyline,d=this._polygon,g=this._lineGroup,f=!t.ssr&&e.get("animation"),v=!s.isEmpty(),y=s.get("origin"),m=Un(n,a,y),_=v&&function(e,t,i){if(!i.valueDim)return[];for(var n=t.count(),o=Be(2*n),a=0;a<n;a++){var r=Yn(i,e,t,a);o[2*a]=r[0],o[2*a+1]=r[1]}return o}(n,a,m),S=e.get("showSymbol"),b=e.get("connectNulls"),x=S&&!p&&ro(e,a,n),w=this._data;w&&w.eachItemGraphicEl((function(e,t){e.__temp&&(o.remove(e),w.setItemGraphicEl(t,null))})),S||c.remove(),o.add(g);var M,I=!p&&e.get("step");n&&n.getArea&&e.get("clip",!0)&&(null!=(M=n.getArea()).width?(M.x-=.1,M.y-=.1,M.width+=.2,M.height+=.2):M.r0&&(M.r0-=.5,M.r+=.5)),this._clipShapeForSymbol=M;var T=ao(a,n,i)||a.getVisual("style")[a.getVisual("drawType")];if(h&&u.type===n.type&&I===this._step){v&&!d?d=this._newPolygon(l,_):d&&!v&&(g.remove(d),d=this._polygon=null),p||this._initOrUpdateEndLabel(e,n,Je(T));var C=g.getClipPath();if(C){var L=po(this,n,!1,e);Ze(C,{shape:L.shape},e)}else g.setClipPath(po(this,n,!0,e));S&&c.updateData(a,{isIgnore:x,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),eo(this._stackedOnPoints,_)&&eo(this._points,l)||(f?this._doUpdateAnimation(a,_,n,i,I,y,b):(I&&(_&&(_=oo(_,l,n,I,b)),l=oo(l,null,n,I,b)),h.setShape({points:l}),d&&d.setShape({points:l,stackedOnPoints:_})))}else S&&c.updateData(a,{isIgnore:x,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),f&&this._initSymbolLabelAnimation(a,n,M),I&&(_&&(_=oo(_,l,n,I,b)),l=oo(l,null,n,I,b)),h=this._newPolyline(l),v?d=this._newPolygon(l,_):d&&(g.remove(d),d=this._polygon=null),p||this._initOrUpdateEndLabel(e,n,Je(T)),g.setClipPath(po(this,n,!0,e));var O=e.getModel("emphasis"),A=O.get("focus"),R=O.get("blurScope"),N=O.get("disabled");(h.useStyle(D(r.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"})),Ke(h,e,"lineStyle"),h.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(h.getState("emphasis").style.lineWidth=+h.style.lineWidth+1);oe(h).seriesIndex=e.seriesIndex,re(h,A,R,N);var k=no(e.get("smooth")),V=e.get("smoothMonotone");if(h.setShape({smooth:k,smoothMonotone:V,connectNulls:b}),d){var P=a.getCalculationInfo("stackedOnSeries"),G=0;d.useStyle(D(s.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),P&&(G=no(P.get("smooth"))),d.setShape({smooth:k,stackedOnSmooth:G,smoothMonotone:V,connectNulls:b}),Ke(d,e,"areaStyle"),oe(d).seriesIndex=e.seriesIndex,re(d,A,R,N)}var F=this._changePolyState;a.eachItemGraphicEl((function(e){e&&(e.onHoverStateChange=F)})),this._polyline.onHoverStateChange=F,this._data=a,this._coordSys=n,this._stackedOnPoints=_,this._points=l,this._step=I,this._valueOrigin=y,e.get("triggerLineEvent")&&(this.packEventData(e,h),d&&this.packEventData(e,d))},i.prototype.packEventData=function(e,t){oe(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},i.prototype.highlight=function(e,t,i,n){var o=e.getData(),a=qe(o,n);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var r=o.getLayout("points"),s=o.getItemGraphicEl(a);if(!s){var l=r[2*a],p=r[2*a+1];if(isNaN(l)||isNaN(p))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,p))return;var u=e.get("zlevel")||0,c=e.get("z")||0;(s=new Qe(o,a)).x=l,s.y=p,s.setZ(u,c);var h=s.getSymbolPath().getTextContent();h&&(h.zlevel=u,h.z=c,h.z2=this._polyline.z2+1),s.__temp=!0,o.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else $e.prototype.highlight.call(this,e,t,i,n)},i.prototype.downplay=function(e,t,i,n){var o=e.getData(),a=qe(o,n);if(this._changePolyState("normal"),null!=a&&a>=0){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else $e.prototype.downplay.call(this,e,t,i,n)},i.prototype._changePolyState=function(e){var t=this._polygon;et(this._polyline,e),t&&et(t,e)},i.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new qn({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},i.prototype._newPolygon=function(e,t){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new $n({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},i.prototype._initSymbolLabelAnimation=function(e,t,i){var n,o,a=t.getBaseAxis(),r=a.inverse;"cartesian2d"===t.type?(n=a.isHorizontal(),o=!1):"polar"===t.type&&(n="angle"===a.dim,o=!0);var s=e.hostModel,l=s.get("animationDuration");j(l)&&(l=l(null));var p=s.get("animationDelay")||0,u=j(p)?p(null):p;e.eachItemGraphicEl((function(e,a){var s=e;if(s){var c=[e.x,e.y],h=void 0,d=void 0,g=void 0;if(i)if(o){var f=i,v=t.pointToCoord(c);n?(h=f.startAngle,d=f.endAngle,g=-v[1]/180*Math.PI):(h=f.r0,d=f.r,g=v[0])}else{var y=i;n?(h=y.x,d=y.x+y.width,g=e.x):(h=y.y+y.height,d=y.y,g=e.y)}var m=d===h?0:(g-h)/(d-h);r&&(m=1-m);var _=j(p)?p(a):l*m+u,S=s.getSymbolPath(),b=S.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:_}),b&&b.animateFrom({style:{opacity:0}},{duration:300,delay:_}),S.disableLabelAnimation=!0}}))},i.prototype._initOrUpdateEndLabel=function(e,t,i){var n=e.getModel("endLabel");if(lo(e)){var o=e.getData(),a=this._polyline,r=o.getLayout("points");if(!r)return a.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new xe({z2:200})).ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var l=function(e){for(var t,i,n=e.length/2;n>0&&(t=e[2*n-2],i=e[2*n-1],isNaN(t)||isNaN(i));n--);return n-1}(r);l>=0&&(ie(a,ne(e,"endLabel"),{inheritColor:i,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,i){return null!=i?tt(o,i):it(o,e)},enableTextSetter:!0},function(e,t){var i=t.getBaseAxis(),n=i.isHorizontal(),o=i.inverse,a=n?o?"right":"left":"center",r=n?"middle":o?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||r}}}(n,t)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},i.prototype._endLabelOnDuring=function(e,t,i,n,o,a,r){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==n.originalX&&(n.originalX=s.x,n.originalY=s.y);var p=i.getLayout("points"),u=i.hostModel,c=u.get("connectNulls"),h=a.get("precision"),d=a.get("distance")||0,g=r.getBaseAxis(),f=g.isHorizontal(),v=g.inverse,y=t.shape,m=v?f?y.x:y.y+y.height:f?y.x+y.width:y.y,_=(f?d:0)*(v?-1:1),S=(f?0:-d)*(v?-1:1),b=f?"x":"y",x=function(e,t,i){for(var n,o,a=e.length/2,r="x"===i?0:1,s=0,l=-1,p=0;p<a;p++)if(o=e[2*p+r],!isNaN(o)&&!isNaN(e[2*p+1-r]))if(0!==p){if(n<=t&&o>=t||n>=t&&o<=t){l=p;break}s=p,n=o}else n=o;return{range:[s,l],t:(t-n)/(o-n)}}(p,m,b),w=x.range,M=w[1]-w[0],I=void 0;if(M>=1){if(M>1&&!c){var T=so(p,w[0]);s.attr({x:T[0]+_,y:T[1]+S}),o&&(I=u.getRawValue(w[0]))}else{(T=l.getPointOn(m,b))&&s.attr({x:T[0]+_,y:T[1]+S});var D=u.getRawValue(w[0]),C=u.getRawValue(w[1]);o&&(I=nt(i,h,D,C,x.t))}n.lastFrameIndex=w[0]}else{var L=1===e||n.lastFrameIndex>0?w[0]:0;T=so(p,L);o&&(I=u.getRawValue(L)),s.attr({x:T[0]+_,y:T[1]+S})}if(o){var O=ot(s);"function"==typeof O.setLabelText&&O.setLabelText(I)}}},i.prototype._doUpdateAnimation=function(e,t,i,n,o,a,r){var s=this._polyline,l=this._polygon,p=e.hostModel,u=function(e,t,i,n,o,a,r){for(var s=function(e,t){var i=[];return t.diff(e).add((function(e){i.push({cmd:"+",idx:e})})).update((function(e,t){i.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){i.push({cmd:"-",idx:e})})).execute(),i}(e,t),l=[],p=[],u=[],c=[],h=[],d=[],g=[],f=Un(o,t,r),v=e.getLayout("points")||[],y=t.getLayout("points")||[],m=0;m<s.length;m++){var _=s[m],S=!0,b=void 0,x=void 0;switch(_.cmd){case"=":b=2*_.idx,x=2*_.idx1;var w=v[b],M=v[b+1],I=y[x],T=y[x+1];(isNaN(w)||isNaN(M))&&(w=I,M=T),l.push(w,M),p.push(I,T),u.push(i[b],i[b+1]),c.push(n[x],n[x+1]),g.push(t.getRawIndex(_.idx1));break;case"+":var D=_.idx,C=f.dataDimsForPoint,L=o.dataToPoint([t.get(C[0],D),t.get(C[1],D)]);x=2*D,l.push(L[0],L[1]),p.push(y[x],y[x+1]);var O=Yn(f,o,t,D);u.push(O[0],O[1]),c.push(n[x],n[x+1]),g.push(t.getRawIndex(D));break;case"-":S=!1}S&&(h.push(_),d.push(d.length))}d.sort((function(e,t){return g[e]-g[t]}));var A=l.length,R=Be(A),N=Be(A),k=Be(A),V=Be(A),P=[];for(m=0;m<d.length;m++){var G=d[m],F=2*m,z=2*G;R[F]=l[z],R[F+1]=l[z+1],N[F]=p[z],N[F+1]=p[z+1],k[F]=u[z],k[F+1]=u[z+1],V[F]=c[z],V[F+1]=c[z+1],P[m]=h[G]}return{current:R,next:N,stackedOnCurrent:k,stackedOnNext:V,status:P}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),c=u.current,h=u.stackedOnCurrent,d=u.next,g=u.stackedOnNext;if(o&&(h=oo(u.stackedOnCurrent,u.current,i,o,r),c=oo(u.current,null,i,o,r),g=oo(u.stackedOnNext,u.next,i,o,r),d=oo(u.next,null,i,o,r)),io(c,d)>3e3||l&&io(h,g)>3e3)return s.stopAnimation(),s.setShape({points:d}),void(l&&(l.stopAnimation(),l.setShape({points:d,stackedOnPoints:g})));s.shape.__points=u.current,s.shape.points=c;var f={shape:{points:d}};u.current!==c&&(f.shape.__points=u.next),s.stopAnimation(),q(s,f,p),l&&(l.setShape({points:c,stackedOnPoints:h}),l.stopAnimation(),q(l,{shape:{stackedOnPoints:g}},p),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var v=[],y=u.status,m=0;m<y.length;m++){if("="===y[m].cmd){var _=e.getItemGraphicEl(y[m].idx1);_&&v.push({el:_,ptIdx:m})}}s.animators&&s.animators.length&&s.animators[0].during((function(){l&&l.dirtyShape();for(var e=s.shape.__points,t=0;t<v.length;t++){var i=v[t].el,n=2*v[t].ptIdx;i.x=e[n],i.y=e[n+1],i.markRedraw()}}))},i.prototype.remove=function(e){var t=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl((function(e,n){e.__temp&&(t.remove(e),i.setItemGraphicEl(n,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},i.type="line",i}($e);function co(e){e.registerChartView(uo),e.registerSeriesModel(Xn),e.registerLayout(Ct("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),i=e.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Dt("line"))}var ho=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.prototype.render=function(e,t,i,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&n&&"geoRoam"===n.type&&this._mapDraw.resetForLabelLayout(),n&&"geoRoam"===n.type&&"series"===n.componentType&&n.seriesId===e.id)(a=this._mapDraw)&&o.add(a.group);else if(e.needsDrawMap){var a=this._mapDraw||new Hi(i);o.add(a.group),a.draw(e,t,i,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,i)}}},i.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},i.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},i.prototype._renderSymbols=function(e,t,i){var n=e.originalData,o=this.group;n.each(n.mapDimension("value"),(function(t,i){if(!isNaN(t)){var a=n.getItemLayout(i);if(a&&a.point){var r=a.point,s=a.offset,l=new m({style:{fill:e.getData().getVisual("style").fill},shape:{cx:r[0]+9*s,cy:r[1],r:3},silent:!0,z2:8+(s?0:st+1)});if(!s){var p=e.mainSeries.getData(),u=n.getName(i),c=p.indexOfName(u),h=n.getItemModel(i),d=h.getModel("label"),g=p.getItemGraphicEl(c);ie(l,ne(h),{labelFetcher:{getFormattedLabel:function(t,i){return e.getFormattedLabel(c,i)}},defaultText:u}),l.disableLabelAnimation=!0,d.get("position")||l.setTextConfig({position:"bottom"}),g.onHoverStateChange=function(e){et(l,e)}}o.add(l)}}}))},i.type="map",i}($e),go=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),i=this.coordinateSystem,n=i.getRegion(t);return n&&i.dataToPoint(n.getCenter())}},t}return t(n,e),n.prototype.getInitialData=function(e){for(var t=lt(this,{coordDimensions:["value"],encodeDefaulter:pt(ut,this)}),n=N(),o=[],a=0,r=t.count();a<r;a++){var s=t.getName(a);n.set(s,a)}var l=Ii(this.getMapType(),this.option.nameMap,this.option.nameProperty);return i(l.regions,(function(e){var i,a=e.name,r=n.get(a),s=e.properties&&e.properties.echartsStyle;null==r?(i={name:a},o.push(i)):i=t.getRawDataItem(r),s&&H(i,s)})),t.appendData(o),t},n.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},n.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},n.prototype.formatTooltip=function(e,t,i){for(var n=this.getData(),o=this.getRawValue(e),a=n.getName(e),r=this.seriesGroup,s=[],l=0;l<r.length;l++){var p=r[l].originalData.indexOfName(a),u=n.mapDimension("value");isNaN(r[l].originalData.get(u,p))||s.push(r[l].name)}return ct("section",{header:s.join(", "),noHeader:!s.length,blocks:[ct("nameValue",{name:a,value:o})]})},n.prototype.setZoom=function(e){this.option.zoom=e},n.prototype.setCenter=function(e){this.option.center=e},n.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",i=Ie(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return i.setStyle(e.itemStyle),i.style.stroke="none",t.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(ze);function fo(e){var t={};e.eachSeriesByType("map",(function(e){var i=e.getHostGeoModel(),n=i?"o"+i.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)})),i(t,(function(e,t){for(var n,o,a,r=(n=u(e,(function(e){return e.getData()})),o=e[0].get("mapValueCalculation"),a={},i(n,(function(e){e.each(e.mapDimension("value"),(function(t,i){var n="ec-"+e.getName(i);a[n]=a[n]||[],isNaN(t)||a[n].push(t)}))})),n[0].map(n[0].mapDimension("value"),(function(e,t){for(var i="ec-"+n[0].getName(t),r=0,s=1/0,l=-1/0,p=a[i].length,u=0;u<p;u++)s=Math.min(s,a[i][u]),l=Math.max(l,a[i][u]),r+=a[i][u];return 0===p?NaN:"min"===o?s:"max"===o?l:"average"===o?r/p:r}))),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(r.cloneShallow()),e[s].mainSeries=e[0]}))}function vo(e){var t={};e.eachSeriesByType("map",(function(n){var o=n.getMapType();if(!n.getHostGeoModel()&&!t[o]){var a={};i(n.seriesGroup,(function(t){var i=t.coordinateSystem,n=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&n.each(n.mapDimension("value"),(function(e,t){var o=n.getName(t),r=i.getRegion(o);if(r&&!isNaN(e)){var s=a[o]||0,l=i.dataToPoint(r.getCenter());a[o]=s+1,n.setItemLayout(t,{point:l,offset:s})}}))}));var r=n.getData();r.each((function(e){var t=r.getName(e),i=r.getItemLayout(e)||{};i.showLabel=!a[t],r.setItemLayout(e,i)})),t[o]=!0}}))}function yo(e){Ge(Ki),e.registerChartView(ho),e.registerSeriesModel(go),e.registerLayout(vo),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,fo),ht("map",e.registerAction)}function mo(e,t){var i=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?i:null,fill:"fill"===t.brushType?i:null}})}))}var _o=function(e){function i(t,i){var n=e.call(this)||this,o=new Qe(t,i),a=new g;return n.add(o),n.add(a),n.updateData(t,i),n}return t(i,e),i.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},i.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,i=e.color,n=e.rippleNumber,o=this.childAt(1),a=0;a<n;a++){var r=Ie(t,-1,-1,2,2,i);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-a/n*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),o.add(r)}mo(o,e)},i.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,i=this.childAt(1),n=["symbolType","period","rippleScale","rippleNumber"],o=0;o<n.length;o++){var a=n[o];if(t[a]!==e[a])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}mo(i,e)},i.prototype.highlight=function(){dt(this)},i.prototype.downplay=function(){gt(this)},i.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},i.prototype.updateData=function(e,t){var i=this,n=e.hostModel;this.childAt(0).updateData(e,t);var o=this.childAt(1),a=e.getItemModel(t),r=e.getItemVisual(t,"symbol"),s=ft(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),p=l&&l.fill,u=a.getModel("emphasis");o.setScale(s),o.traverse((function(e){e.setStyle("fill",p)}));var c=vt(e.getItemVisual(t,"symbolOffset"),s);c&&(o.x=c[0],o.y=c[1]);var h=e.getItemVisual(t,"symbolRotate");o.rotation=(h||0)*Math.PI/180||0;var d={};d.showEffectOn=n.get("showEffectOn"),d.rippleScale=a.get(["rippleEffect","scale"]),d.brushType=a.get(["rippleEffect","brushType"]),d.period=1e3*a.get(["rippleEffect","period"]),d.effectOffset=t/e.count(),d.z=n.getShallow("z")||0,d.zlevel=n.getShallow("zlevel")||0,d.symbolType=r,d.color=p,d.rippleEffectColor=a.get(["rippleEffect","color"]),d.rippleNumber=a.get(["rippleEffect","number"]),"render"===d.showEffectOn?(this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==d.showEffectOn&&i.startEffectAnimation(d):"normal"===e&&"render"!==d.showEffectOn&&i.stopEffectAnimation()}),this._effectCfg=d,re(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},i.prototype.fadeOut=function(e){e&&e()},i}(g),So=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t}return t(i,e),i.prototype.init=function(){this._symbolDraw=new je(_o)},i.prototype.render=function(e,t,i){var n=e.getData(),o=this._symbolDraw;o.updateData(n,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},i.prototype._getClipShape=function(e){var t=e.coordinateSystem,i=t&&t.getArea&&t.getArea();return e.get("clip",!0)?i:null},i.prototype.updateTransform=function(e,t,i){var n=e.getData();this.group.dirty();var o=Ct("").reset(e,t,i);o.progress&&o.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout()},i.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=yt(t.getRoamTransform()),this.group.decomposeTransform())},i.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},i.type="effectScatter",i}($e),bo=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.type,t.hasSymbolVisual=!0,t}return t(i,e),i.prototype.getInitialData=function(e,t){return Fe(null,this,{useEncodeDefaulter:!0})},i.prototype.brushSelector=function(e,t,i){return i.point(t.getItemLayout(e))},i.type="series.effectScatter",i.dependencies=["grid","polar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},i}(ze);function xo(e){e.registerChartView(So),e.registerSeriesModel(bo),e.registerLayout(Ct("effectScatter"))}export{$n as E,yo as a,xo as b,co as c,Ot as d,$i as e,tn as f,Ki as g,Pn as h,Bn as i,Hn as j,en as r};
