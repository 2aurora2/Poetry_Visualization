import{_ as e,dK as t,B as n,y as o,b as i,ef as a,p as r,a as s,eg as u,eh as l,b2 as d,aD as c,K as p,G as h,ei as f,bu as g,ej as m,a1 as v,T as y,e as x,al as _,f as b,c8 as M,a8 as w,a7 as S,a0 as I,a3 as T,by as A,bw as C,ek as L,af as D,aT as k,el as R,S as N,C as O,X as E,bs as P,em as V,en as z,eo as B,aI as Z,N as X,aq as Y,cx as G,cy as W,bd as j,Z as H,cP as F,ax as U,ep as q,eq as K,ap as $,x as J,bh as Q,er as ee,es as te,ai as ne,g as oe,M as ie,z as ae,v as re,et as se,eu as ue,ev as le,Y as de,L as ce,c5 as pe,ew as he,aS as fe,bQ as ge,ar as me,aw as ve,bZ as ye,av as xe,aG as _e,ay as be,ex as Me,bf as we,bg as Se,be as Ie,cv as Te,bp as Ae,cN as Ce,ey as Le,ez as De,eA as ke,eB as Re,eC as Ne,eD as Oe,c2 as Ee,am as Pe,eE as Ve,cB as ze,eF as Be,bm as Ze,P as Xe,bT as Ye,q as Ge,ak as We,aX as je,bJ as He,cG as Fe,cL as Ue,b4 as qe,dB as Ke,co as $e,an as Je,b7 as Qe,eG as et,bK as tt}from"./vintage-Dh4XLpaN.js";var nt=i,ot=function(l){function d(e){var n=l.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new t,n._rawTransformable=new t,n.name=e,n}return e(d,l),d.prototype.setBoundingRect=function(e,t,o,i){return this._rect=new n(e,t,o,i),this._rect},d.prototype.getBoundingRect=function(){return this._rect},d.prototype.setViewRect=function(e,t,o,i){this._transformTo(e,t,o,i),this._viewRect=new n(e,t,o,i)},d.prototype._transformTo=function(e,t,o,i){var a=this.getBoundingRect(),r=this._rawTransformable;r.transform=a.calculateTransform(new n(e,t,o,i));var s=r.parent;r.parent=null,r.decomposeTransform(),r.parent=s,this._updateTransform()},d.prototype.setCenter=function(e,t){e&&(this._center=[o(e[0],t.getWidth()),o(e[1],t.getHeight())],this._updateCenterAndZoom())},d.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},d.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},d.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},d.prototype.getZoom=function(){return this._zoom||1},d.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},d.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=i([],o,e),n=i([],n,e),t.originX=o[0],t.originY=o[1],t.x=n[0]-o[0],t.y=n[1]-o[1],t.scaleX=t.scaleY=a,this._updateTransform()},d.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),a(this.transform||(this.transform=[]),t.transform||r()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],s(this.invTransform,this.transform),this.decomposeTransform()},d.prototype.getTransformInfo=function(){var e=this._rawTransformable,n=this._roamTransformable,o=new t;return o.transform=n.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},d.prototype.getViewRect=function(){return this._viewRect},d.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},d.prototype.dataToPoint=function(e,t,n){var o=t?this._rawTransform:this.transform;return n=n||[],o?nt(n,e,o):u(n,e)},d.prototype.pointToData=function(e){var t=this.invTransform;return t?nt([],e,t):[e[0],e[1]]},d.prototype.convertToPixel=function(e,t,n){var o=it(t);return o===this?o.dataToPoint(n):null},d.prototype.convertFromPixel=function(e,t,n){var o=it(t);return o===this?o.pointToData(n):null},d.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},d.dimensions=["x","y"],d}(t);function it(e){var t=e.seriesModel;return t?t.coordinateSystem:null}function at(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function rt(e,t,n,o){var i=e.getZoom(),a=e.getCenter(),r=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(at(e,s),o)),null!=r){if(n){var u=n.min||0,l=n.max||1/0;r=Math.max(Math.min(i*r,l),u)/i}e.scaleX*=r,e.scaleY*=r;var d=(t.originX-e.x)*(r-1),c=(t.originY-e.y)*(r-1);e.x-=d,e.y-=c,e.updateTransform(),e.setCenter(at(e,s),o),e.setZoom(r*i)}return{center:e.getCenter(),zoom:e.getZoom()}}var st="\0_ec_interaction_mutex";function ut(e,t){return!!lt(e)[t]}function lt(e){return e[st]||(e[st]={})}l({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},d);var dt=function(t){function n(e){var n=t.call(this)||this;n._zr=e;var o=c(n._mousedownHandler,n),i=c(n._mousemoveHandler,n),a=c(n._mouseupHandler,n),r=c(n._mousewheelHandler,n),s=c(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=p(h(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",s))},n.disable=function(){e.off("mousedown",o),e.off("mousemove",i),e.off("mouseup",a),e.off("mousewheel",r),e.off("pinch",s)},n}return e(n,t),n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(e){this.pointerChecker=e},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(e){if(!f(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},n.prototype._mousemoveHandler=function(e){if(this._dragging&&ht("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!ut(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,o=this._x,i=this._y,a=t-o,r=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&g(e.event),pt(this,"pan","moveOnMouseMove",e,{dx:a,dy:r,oldX:o,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(e){f(e)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(e){var t=ht("zoomOnMouseWheel",e,this._opt),n=ht("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),a=e.offsetX,r=e.offsetY;if(0!==o&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;ct(this,"zoom","zoomOnMouseWheel",e,{scale:o>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var u=Math.abs(o);ct(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(o>0?1:-1)*(u>3?.4:u>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(e){ut(this._zr,"globalPan")||ct(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},n}(m);function ct(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(g(o.event),pt(e,t,n,o,i))}function pt(e,t,n,o,i){i.isAvailableBehavior=c(ht,null,n,o),e.trigger(t,i)}function ht(e,t,n){var o=n[e];return!e||o&&(!v(o)||t.event[o+"Key"])}function ft(e,t,n){var o=e.target;o.x+=t,o.y+=n,o.dirty()}function gt(e,t,n,o){var i=e.target,a=e.zoomLimit,r=e.zoom=e.zoom||1;if(r*=t,a){var s=a.min||0,u=a.max||1/0;r=Math.max(Math.min(u,r),s)}var l=r/e.zoom;e.zoom=r,i.x-=(n-i.x)*(l-1),i.y-=(o-i.y)*(l-1),i.scaleX*=l,i.scaleY*=l,i.dirty()}var mt={axisPointer:1,tooltip:1,brush:1};function vt(e,t,n){var o=t.getComponentByElement(e.topTarget),i=o&&o.coordinateSystem;return o&&o!==n&&!mt.hasOwnProperty(o.mainType)&&i&&i.model!==n}function yt(e,t,n,o,i,a){e=e||0;var r=n[1]-n[0];if(null!=i&&(i=_t(i,[0,r])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===o){var s=Math.abs(t[1]-t[0]);s=_t(s,[0,r]),i=a=_t(s,[i,a]),o=0}t[0]=_t(t[0],n),t[1]=_t(t[1],n);var u=xt(t,o);t[o]+=e;var l,d=i||0,c=n.slice();return u.sign<0?c[0]+=d:c[1]-=d,t[o]=_t(t[o],c),l=xt(t,o),null!=i&&(l.sign!==u.sign||l.span<i)&&(t[1-o]=t[o]+u.sign*i),l=xt(t,o),null!=a&&l.span>a&&(t[1-o]=t[o]+l.sign*a),t}function xt(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function _t(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var bt=!0,Mt=Math.min,wt=Math.max,St=Math.pow,It="globalPan",Tt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},At={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ct={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Lt=0,Dt=function(t){function n(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new y,n._uid="brushController_"+Lt++,x(on,(function(e,t){this._handlers[t]=c(e,this)}),n),n}return e(n,t),n.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},n.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){lt(e)[t]=n}(t,It,this._uid),x(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=_(h(Ct),e,!0)},n.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var o=lt(e);o[t]===n&&(o[t]=null)}(e,It,this._uid),x(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},n.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};x(e,(function(e){t[e.panelId]=h(e)}))}else this._panels=null;return this},n.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},n.prototype.updateCovers=function(e){e=b(e,(function(e){return _(h(Ct),e,!0)}));var t=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new M(t,e,(function(e,t){return a(e.__brushOption,t)}),a).add(r).update(r).remove((function(e){t[e]!==i&&o.group.remove(t[e])})).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function r(a,r){var s=e[a];if(null!=r&&t[r]===i)n[a]=t[r];else{var u=n[a]=null!=r?(t[r].__brushOption=s,t[r]):Rt(o,kt(o,s));Et(o,u)}}},n.prototype.unmount=function(){return this.enableBrush(!1),Bt(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(m);function kt(e,t){var n=rn[t.brushType].createCover(e,t);return n.__brushOption=t,Ot(n,t),e.group.add(n),n}function Rt(e,t){var n=Pt(t);return n.endCreating&&(n.endCreating(e,t),Ot(t,t.__brushOption)),t}function Nt(e,t){var n=t.__brushOption;Pt(t).updateCoverShape(e,t,n.range,n)}function Ot(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function Et(e,t){Pt(t).updateCommon(e,t),Nt(e,t)}function Pt(e){return rn[e.__brushOption.brushType]}function Vt(e,t,n){var o,i=e._panels;if(!i)return bt;var a=e._transform;return x(i,(function(e){e.isTargetByCursor(t,n,a)&&(o=e)})),o}function zt(e,t){var n=e._panels;if(!n)return bt;var o=t.__brushOption.panelId;return null!=o?n[o]:bt}function Bt(e){var t=e._covers,n=t.length;return x(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function Zt(e,t){var n=b(e._covers,(function(e){var t=e.__brushOption,n=h(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Xt(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Yt(e,t,n,o){var i=new y;return i.add(new T({name:"main",style:Ht(n),silent:!0,draggable:!0,cursor:"move",drift:I(qt,e,t,i,["n","s","w","e"]),ondragend:I(Zt,t,{isEnd:!0})})),x(o,(function(n){i.add(new T({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:I(qt,e,t,i,n),ondragend:I(Zt,t,{isEnd:!0})}))})),i}function Gt(e,t,n,o){var i=o.brushStyle.lineWidth||0,a=wt(i,6),r=n[0][0],s=n[1][0],u=r-i/2,l=s-i/2,d=n[0][1],c=n[1][1],p=d-a+i/2,h=c-a+i/2,f=d-r,g=c-s,m=f+i,v=g+i;jt(e,t,"main",r,s,f,g),o.transformable&&(jt(e,t,"w",u,l,a,v),jt(e,t,"e",p,l,a,v),jt(e,t,"n",u,l,m,a),jt(e,t,"s",u,h,m,a),jt(e,t,"nw",u,l,a,a),jt(e,t,"ne",p,l,a,a),jt(e,t,"sw",u,h,a,a),jt(e,t,"se",p,h,a,a))}function Wt(e,t){var n=t.__brushOption,o=n.transformable,i=t.childAt(0);i.useStyle(Ht(n)),i.attr({silent:!o,cursor:o?"move":"default"}),x([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),a=1===n.length?Ut(e,n[0]):function(e,t){var n=[Ut(e,t[0]),Ut(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?At[a]+"-resize":null})}))}function jt(e,t,n,o,i,a,r){var s,u,l,d,c,p=t.childOfName(n);p&&p.setShape((s=Jt(e,t,[[o,i],[o+a,i+r]]),u=Mt(s[0][0],s[1][0]),l=Mt(s[0][1],s[1][1]),d=wt(s[0][0],s[1][0]),c=wt(s[0][1],s[1][1]),{x:u,y:l,width:d-u,height:c-l}))}function Ht(e){return p({strokeNoScale:!0},e.brushStyle)}function Ft(e,t,n,o){var i=[Mt(e,n),Mt(t,o)],a=[wt(e,n),wt(t,o)];return[[i[0],a[0]],[i[1],a[1]]]}function Ut(e,t){var n=A({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return C(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function qt(e,t,n,o,i,a){var r=n.__brushOption,s=e.toRectRange(r.range),u=$t(t,i,a);x(o,(function(e){var t=Tt[e];s[t[0]][t[1]]+=u[t[0]]})),r.range=e.fromRectRange(Ft(s[0][0],s[1][0],s[0][1],s[1][1])),Et(t,n),Zt(t,{isEnd:!1})}function Kt(e,t,n,o){var i=t.__brushOption.range,a=$t(e,n,o);x(i,(function(e){e[0]+=a[0],e[1]+=a[1]})),Et(e,t),Zt(e,{isEnd:!1})}function $t(e,t,n){var o=e.group,i=o.transformCoordToLocal(t,n),a=o.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Jt(e,t,n){var o=zt(e,t);return o&&o!==bt?o.clipPath(n,e._transform):h(n)}function Qt(e){var t=e.event;t.preventDefault&&t.preventDefault()}function en(e,t,n){return e.childOfName("main").contain(t,n)}function tn(e,t,n,o){var i,a=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],i=n[0]-o[0],a=n[1]-o[1];return St(i*i+a*a,.5)>6}(e)||a){if(r&&!a){"single"===s.brushMode&&Bt(e);var u=h(s);u.brushType=nn(u.brushType,r),u.panelId=r===bt?null:r.panelId,a=e._creatingCover=kt(e,u),e._covers.push(a)}if(a){var l=rn[nn(e._brushType,r)];a.__brushOption.range=l.getCreatingRange(Jt(e,a,e._track)),o&&(Rt(e,a),l.updateCommon(e,a)),Nt(e,a),i={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&Vt(e,t,n)&&Bt(e)&&(i={isEnd:o,removeOnClick:!0});return i}function nn(e,t){return"auto"===e?t.defaultBrushType:e}var on={mousedown:function(e){if(this._dragging)an(this,e);else if(!e.target||!e.target.draggable){Qt(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Vt(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,i=e._covers,a=Vt(e,t,n);if(!e._dragging)for(var r=0;r<i.length;r++){var s=i[r].__brushOption;if(a&&(a===bt||s.panelId===a.panelId)&&rn[s.brushType].contain(i[r],n[0],n[1]))return}a&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){Qt(e);var i=tn(this,e,o,!1);i&&Zt(this,i)}},mouseup:function(e){an(this,e)}};function an(e,t){if(e._dragging){Qt(t);var n=t.offsetX,o=t.offsetY,i=e.group.transformCoordToLocal(n,o),a=tn(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&Zt(e,a)}}var rn={lineX:sn(0),lineY:sn(1),rect:{createCover:function(e,t){function n(e){return e}return Yt({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=Xt(e);return Ft(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){Gt(e,t,n,o)},updateCommon:Wt,contain:en},polygon:{createCover:function(e,t){var n=new y;return n.add(new w({name:"main",style:Ht(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new S({name:"main",draggable:!0,drift:I(Kt,e,t),ondragend:I(Zt,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:Jt(e,t,n)})},updateCommon:Wt,contain:en}};function sn(e){return{createCover:function(t,n){return Yt({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=Xt(t);return[Mt(n[0][e],n[1][e]),wt(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,i){var a,r=zt(t,n);if(r!==bt&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var u=[o,a];e&&u.reverse(),Gt(t,n,u,i)},updateCommon:Wt,contain:en}}function un(e){return e=cn(e),function(t){return L(t,e)}}function ln(e,t){return e=cn(e),function(n){var o=null!=t?t:n,i=o?e.width:e.height,a=o?e.x:e.y;return[a,a+(i||0)]}}function dn(e,t,n){var o=cn(e);return function(e,i){return o.contain(i[0],i[1])&&!vt(e,t,n)}}function cn(e){return n.create(e)}var pn=["x","y","radius","angle","single"],hn=["cartesian2d","polar","singleAxis"];function fn(e){return e+"Axis"}function gn(e,t){var n,o=D(),i=[],a=D();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=o.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){a.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return i}function mn(e){var t=e.ecModel,n={infoList:[],infoMap:D()};return e.eachTargetAxis((function(e,o){var i=t.getComponent(fn(e),o);if(i){var a=i.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(i)}}})),n}var vn=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),yn=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return e(n,t),n.prototype.init=function(e,t,n){var o=xn(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},n.prototype.mergeOption=function(e){var t=xn(e);_(this.option,e,!0),_(this.settledOption,t,!0),this._doInit(t)},n.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;x([["start","startValue"],["end","endValue"]],(function(e,o){"value"===this._rangePropMode[o]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},n.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=D();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},n.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return x(pn,(function(n){var o=this.getReferringComponents(fn(n),R);if(o.specified){t=!0;var i=new vn;x(o.models,(function(e){i.add(e.componentIndex)})),e.set(n,i)}}),this),t},n.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,o=!0;if(o){var i="vertical"===t?"y":"x";a(n.findComponents({mainType:i+"Axis"}),i)}o&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function a(t,n){var i=t[0];if(i){var a=new vn;if(a.add(i.componentIndex),e.set(n,a),o=!1,"x"===n||"y"===n){var r=i.getReferringComponents("grid",N).models[0];r&&x(t,(function(e){i.componentIndex!==e.componentIndex&&r===e.getReferringComponents("grid",N).models[0]&&a.add(e.componentIndex)}))}}}o&&x(pn,(function(t){if(o){var i=n.findComponents({mainType:fn(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var a=new vn;a.add(i[0].componentIndex),e.set(t,a),o=!1}}}),this)},n.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");x([["start","startValue"],["end","endValue"]],(function(o,i){var a=null!=e[o[0]],r=null!=e[o[1]];a&&!r?t[i]="percent":!a&&r?t[i]="value":n?t[i]=n[i]:a&&(t[i]="percent")}))},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(fn(t),n))}),this),e},n.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,o){x(n.indexList,(function(n){e.call(t,o,n)}))}))},n.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},n.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(fn(e),t)},n.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;x([["start","startValue"],["end","endValue"]],(function(o){null==e[o[0]]&&null==e[o[1]]||(t[o[0]]=n[o[0]]=e[o[0]],t[o[1]]=n[o[1]]=e[o[1]])}),this),this._updateRangeUse(e)},n.prototype.setCalculatedRange=function(e){var t=this.option;x(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},n.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},n.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},n.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],a=this._targetAxisInfoMap.get(i),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(i,a.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(O);function xn(e){var t={};return x(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var _n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.type="dataZoom.select",n}(yn),bn=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},n.type="dataZoom",n}(E),Mn=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.type="dataZoom.select",n}(bn),wn=x,Sn=Z,In=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return k(hn,t)>=0}(t)){var n=fn(this._dimName),o=t.getReferringComponents(n,N).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return h(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];wn(["start","end"],(function(u,l){var d=e[u],c=e[u+"Value"];"percent"===i[l]?(null==d&&(d=a[l]),c=o.parse(P(d,a,n))):(t=!0,c=null==c?n[l]:o.parse(c),d=P(c,n,a)),s[l]=null==c||isNaN(c)?n[l]:c,r[l]=null==d||isNaN(d)?a[l]:d})),Sn(s),Sn(r);var u=this._minMaxSpan;function l(e,t,n,i,a){var r=a?"Span":"ValueSpan";yt(0,e,n,"all",u["min"+r],u["max"+r]);for(var s=0;s<2;s++)t[s]=P(e[s],n,i,!0),a&&(t[s]=o.parse(t[s]))}return t?l(s,r,n,a,!1):l(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];wn(n,(function(e){z(o,e.getData(),t)}));var i=e.getAxisModel(),a=B(i.axis.scale,i,o).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=e.get("filterMode"),a=this._valueWindow;"none"!==i&&wn(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var r=t.getStore(),s=b(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,u=0;u<o.length;u++){var l=r.get(s[u],e),d=!isNaN(l),c=l<a[0],p=l>a[1];if(d&&!c&&!p)return!0;d&&(i=!0),c&&(t=!0),p&&(n=!0)}return i&&t&&n}))}else wn(o,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var o={};o[n]=a,t.selectRange(o)}}));wn(o,(function(e){t.setApproximateExtent(a,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;wn(["min","max"],(function(o){var i=t.get(o+"Span"),a=t.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=P(n[0]+a,n,[0,100],!0):null!=i&&(a=P(i,[0,100],n,!0)-n[0]),e[o+"Span"]=i,e[o+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=V(n,[0,500]);o=Math.min(o,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},e}();var Tn={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,i){var a=e.getComponent(fn(o),i);t(o,i,a,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var n=[];t((function(t,o,i,a){i.__dzAxisProxy||(i.__dzAxisProxy=new In(t,o,a,e),n.push(i.__dzAxisProxy))}));var o=D();return x(n,(function(e){x(e.getTargetSeriesModels(),(function(e){o.set(e.uid,e)}))})),o},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}};var An=!1;function Cn(e){An||(An=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,Tn),function(e){e.registerAction("dataZoom",(function(e,t){var n=gn(t,e);x(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function Ln(e){e.registerComponentModel(_n),e.registerComponentView(Mn),Cn(e)}var Dn=function(){return function(){}}(),kn={};function Rn(e,t){kn[e]=t}function Nn(e){return kn[e]}var On=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;x(this.option.feature,(function(t,n){var o=Nn(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(e)),_(t,o.defaultOption))}))},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(O),En=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.render=function(e,t,n,o){var i=this.group;if(i.removeAll(),e.get("show")){var a=+e.get("itemSize"),r="vertical"===e.get("orient"),s=e.get("feature")||{},u=this._features||(this._features={}),l=[];x(s,(function(e,t){l.push(t)})),new M(this._featureNames||[],l).add(d).update(d).remove(I(d,null)).execute(),this._featureNames=l,q(i,e,n),i.add(K(i.getBoundingRect(),e)),r||i.eachChild((function(e){var t=e.__title,o=e.ensureState("emphasis"),r=o.textConfig||(o.textConfig={}),s=e.getTextContent(),u=s&&s.ensureState("emphasis");if(u&&!$(u)&&t){var l=u.style||(u.style={}),d=J(t,H.makeFont(l)),c=e.x+i.x,p=!1;e.y+i.y+a+d.height>n.getHeight()&&(r.position="top",p=!0);var h=p?-5-d.height:a+10;c+d.width/2>n.getWidth()?(r.position=["100%",h],l.align="right"):c-d.width/2<0&&(r.position=[0,h],l.align="left")}}))}function d(d,p){var h,f=l[d],g=l[p],m=s[f],y=new X(m,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===f&&(m.title=o.newTitle),f&&!g){if(function(e){return 0===e.indexOf("my")}(f))h={onclick:y.option.onclick,featureName:f};else{var _=Nn(f);if(!_)return;h=new _}u[f]=h}else if(!(h=u[g]))return;h.uid=Y("toolbox-feature"),h.model=y,h.ecModel=t,h.api=n;var b=h instanceof Dn;f||!g?!y.get("show")||b&&h.unusable?b&&h.remove&&h.remove(t,n):(!function(o,s,u){var l,d,p=o.getModel("iconStyle"),h=o.getModel(["emphasis","iconStyle"]),f=s instanceof Dn&&s.getIcons?s.getIcons():o.get("icon"),g=o.get("title")||{};v(f)?(l={})[u]=f:l=f;v(g)?(d={})[u]=g:d=g;var m=o.iconPaths={};x(l,(function(u,l){var f=j(u,{},{x:-a/2,y:-a/2,width:a,height:a});f.setStyle(p.getItemStyle()),f.ensureState("emphasis").style=h.getItemStyle();var g=new H({style:{text:d[l],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:F({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},t)},ignore:!0});f.setTextContent(g),U({el:f,componentModel:e,itemName:l,formatterParamsExtra:{title:d[l]}}),f.__title=d[l],f.on("mouseover",(function(){var t=h.getItemStyle(),o=r?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";g.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),f.setTextConfig({position:h.get("textPosition")||o}),g.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==o.get(["iconStatus",l])&&n.leaveEmphasis(this),g.hide()})),("emphasis"===o.get(["iconStatus",l])?G:W)(f),i.add(f),f.on("click",c(s.onclick,s,t,n,l)),m[l]=f}))}(y,h,f),y.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?G:W)(o[e])},h instanceof Dn&&h.render&&h.render(y,t,n,o)):b&&h.dispose&&h.dispose(t,n)}},n.prototype.updateView=function(e,t,n,o){x(this._features,(function(e){e instanceof Dn&&e.updateView&&e.updateView(e.model,t,n,o)}))},n.prototype.remove=function(e,t){x(this._features,(function(n){n instanceof Dn&&n.remove&&n.remove(e,t)})),this.group.removeAll()},n.prototype.dispose=function(e,t){x(this._features,(function(n){n instanceof Dn&&n.dispose&&n.dispose(e,t)}))},n.type="toolbox",n}(E);var Pn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",r=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=Q.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||i){var u=r.split(","),l=u[0].indexOf("base64")>-1,d=i?decodeURIComponent(u[1]):u[1];l&&(d=window.atob(d));var c=o+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var p=d.length,h=new Uint8Array(p);p--;)h[p]=d.charCodeAt(p);var f=new Blob([h]);window.navigator.msSaveOrOpenBlob(f,c)}else{var g=document.createElement("iframe");document.body.appendChild(g);var m=g.contentWindow,v=m.document;v.open("image/svg+xml","replace"),v.write(d),v.close(),m.focus(),v.execCommand("SaveAs",!0,c),document.body.removeChild(g)}}else{var y=n.get("lang"),x='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=o}else{var b=document.createElement("a");b.download=o+"."+a,b.target="_blank",b.href=r;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},n.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(Dn),Vn="__ec_magicType_stack__",zn=[["line","bar"],["stack"]],Bn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return x(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},n.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},n.prototype.onclick=function(e,t,n){var o=this.model,i=o.get(["seriesIndex",n]);if(Zn[n]){var a,r={series:[]};x(zn,(function(e){k(e,n)>=0&&x(e,(function(e){o.setIconStatus(e,"normal")}))})),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},(function(e){var t=e.subType,i=e.id,a=Zn[n](t,i,e,o);a&&(p(a,e.option),r.series.push(a));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var u=s.getAxesByScale("ordinal")[0];if(u){var l=u.dim+"Axis",d=e.getReferringComponents(l,N).models[0].componentIndex;r[l]=r[l]||[];for(var c=0;c<=d;c++)r[l][d]=r[l][d]||{};r[l][d].boundaryGap="bar"===n}}}));var s=n;"stack"===n&&(a=_({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(s="tiled")),t.dispatchAction({type:"changeMagicType",currentType:s,newOption:r,newTitle:a,featureName:"magicType"})}},n}(Dn),Zn={line:function(e,t,n,o){if("bar"===e)return _({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return _({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var i=n.get("stack")===Vn;if("line"===e||"bar"===e)return o.setIconStatus("stack",i?"normal":"emphasis"),_({id:t,stack:i?"":Vn},o.get(["option","stack"])||{},!0)}};l({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var Xn=new Array(60).join("-"),Yn="\t";function Gn(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Wn=new RegExp("[\t]+","g");function jn(e,t){var n=e.split(new RegExp("\n*"+Xn+"\n*","g")),o={series:[]};return x(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(Yn)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=Gn(t.shift()).split(Wn),o=[],i=b(n,(function(e){return{name:e,data:[]}})),a=0;a<t.length;a++){var r=Gn(t[a]).split(Wn);o.push(r.shift());for(var s=0;s<r.length;s++)i[s]&&(i[s].data[a]=r[s])}return{series:i,categories:o}}(e),a=t[n],r=a.axisDim+"Axis";a&&(o[r]=o[r]||[],o[r][a.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else{i=function(e){for(var t=e.split(/\n+/g),n=Gn(t.shift()),o=[],i=0;i<t.length;i++){var a=Gn(t[i]);if(a){var r=a.split(Wn),s="",u=void 0,l=!1;isNaN(r[0])?(l=!0,s=r[0],r=r.slice(1),o[i]={name:s,value:[]},u=o[i].value):u=o[i]=[];for(var d=0;d<r.length;d++)u.push(+r[d]);1===u.length&&(l?o[i].value=u[0]:o[i]=u[0])}}return{name:n,data:o}}(e);o.series.push(i)}})),o}var Hn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=o.get("lang")||[];a.innerHTML=r[0]||o.get("title"),a.style.cssText="margin:10px 20px",a.style.color=o.get("textColor");var s=document.createElement("div"),u=document.createElement("textarea");s.style.cssText="overflow:auto";var l=o.get("optionToContent"),d=o.get("contentToOption"),c=function(e){var t,n,o,i=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var a=i.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;t[r]||(t[r]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},o.push({axisDim:a.dim,axisIndex:a.index})),t[r].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:oe([(n=i.seriesGroupByCategoryAxis,o=[],x(n,(function(e,t){var n=e.categoryAxis,i=e.valueAxis.dim,a=[" "].concat(b(e.series,(function(e){return e.name}))),r=[n.model.getCategories()];x(e.series,(function(e){var t=e.getRawData();r.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var s=[a.join(Yn)],u=0;u<r[0].length;u++){for(var l=[],d=0;d<r.length;d++)l.push(r[d][u]);s.push(l.join(Yn))}o.push(s.join("\n"))})),o.join("\n\n"+Xn+"\n\n")),(t=i.other,b(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],a=t.getName(i),r=0;r<e-1;r++)o[r]=arguments[r];n.push((a?a+Yn:"")+o.join(Yn))})),n.join("\n")})).join("\n\n"+Xn+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+Xn+"\n\n"),meta:i.meta}}(e);if($(l)){var p=l(t.getOption());v(p)?s.innerHTML=p:ee(p)&&s.appendChild(p)}else{u.readOnly=o.get("readOnly");var h=u.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=o.get("textColor"),h.borderColor=o.get("textareaBorderColor"),h.backgroundColor=o.get("textareaColor"),u.value=c.value,s.appendChild(u)}var f=c.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",y=document.createElement("div"),_=document.createElement("div");m+=";background-color:"+o.get("buttonColor"),m+=";color:"+o.get("buttonTextColor");var M=this;function w(){n.removeChild(i),M._dom=null}te(y,"click",w),te(_,"click",(function(){if(null==d&&null!=l||null!=d&&null==l)w();else{var e;try{e=$(d)?d(s,t.getOption()):jn(u.value,f)}catch(n){throw w(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),w()}})),y.innerHTML=r[1],_.innerHTML=r[2],_.style.cssText=y.style.cssText=m,!o.get("readOnly")&&g.appendChild(_),g.appendChild(y),i.appendChild(a),i.appendChild(s),i.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},n.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},n.prototype.dispose=function(e,t){this.remove(e,t)},n.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},n}(Dn);function Fn(e,t){return b(e,(function(e,n){var o=t&&t[n];if(ie(o)&&!ae(o)){ie(e)&&!ae(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=p(e,o),i&&delete e.name,e}return e}))}l({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];x(e.newOption.series,(function(e){var o=t.getSeriesByName(e.name)[0];if(o){var i=o.get("data");n.push({name:e.name,data:Fn(e.data,i)})}else n.push(ne({type:"scatter"},e))})),t.mergeOption(p({series:n},e.newOption))}));var Un=x,qn=re();function Kn(e){var t=qn(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var $n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.onclick=function(e,t){!function(e){qn(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},n}(Dn);l({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var Jn=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Qn=function(){function e(e,t,n){var o=this;this._targetInfoList=[];var i=to(t,e);x(no,(function(e,t){(!n||!n.include||k(n.include,t)>=0)&&e(i,o._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=ao[e.brushType](0,n,t);e.__rangeOffset={offset:so[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){x(e,(function(e){var o=this.findTargetInfo(e,t);o&&!0!==o&&x(o.coordSyses,(function(o){var i=ao[e.brushType](1,o,e.range,!0);n(e,i.values,o,t)}))}),this)},e.prototype.setInputRanges=function(e,t){x(e,(function(e){var n,o,i,a,r,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var u=ao[e.brushType](0,s.coordSys,e.coordRange),l=e.__rangeOffset;e.range=l?so[e.brushType](u.values,l.offset,(n=u.xyMinMax,o=l.xyMinMax,i=lo(n),a=lo(o),r=[i[0]/a[0],i[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):u.values}}),this)},e.prototype.makePanelOpts=function(e,t){return b(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:un(o),isTargetByCursor:dn(o,e,n.coordSysModel),getLinearBrushOtherExtent:ln(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&k(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=to(t,e),i=0;i<n.length;i++){var a=n[i],r=e.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<oo.length;s++)if(oo[s](o,a))return a}return!0},e}();function eo(e){return e[0]>e[1]&&e.reverse(),e}function to(e,t){return se(e,t,{includeMainTypes:Jn})}var no={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,i=e.gridModels,a=D(),r={},s={};(n||o||i)&&(x(n,(function(e){var t=e.axis.grid.model;a.set(t.id,t),r[t.id]=!0})),x(o,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),x(i,(function(e){a.set(e.id,e),r[e.id]=!0,s[e.id]=!0})),a.each((function(e){var i=e.coordinateSystem,a=[];x(i.getCartesians(),(function(e,t){(k(n,e.getAxis("x").model)>=0||k(o,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:io.grid,xAxisDeclared:r[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){x(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:io.geo})}))}},oo=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],io={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(C(e)),t}},ao={lineX:I(ro,0),lineY:I(ro,1),rect:function(e,t,n,o){var i=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),a=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),r=[eo([i[0],a[0]]),eo([i[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:b(n,(function(n){var a=e?t.pointToData(n,o):t.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a})),xyMinMax:i}}};function ro(e,t,n,o){var i=n.getAxis(["x","y"][e]),a=eo(b([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(o[e]),!0):i.toGlobalCoord(i.dataToCoord(o[e]))}))),r=[];return r[e]=a,r[1-e]=[NaN,NaN],{values:a,xyMinMax:r}}var so={lineX:I(uo,0),lineY:I(uo,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return b(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function uo(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function lo(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var co=x,po=le("toolbox-dataZoom_"),ho=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new Dt(n.getZr()),this._brushController.on("brush",c(this._onBrush,this)).mount()),function(e,t,n,o,i){var a=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(a="dataZoomSelect"===o.key&&o.dataZoomSelectActive);n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var r=new Qn(go(e),t,{include:["grid"]}),s=r.makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!a||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(e,t){e.setIconStatus("back",function(e){return Kn(e).length}(t)>1?"emphasis":"normal")}(e,t)},n.prototype.onclick=function(e,t,n){fo[n].call(this)},n.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new Qn(go(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=Kn(e);Un(t,(function(t,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(a){var r=a.getPercentRange();n[0][o]={dataZoomId:o,start:r[0],end:r[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function i(e,t,i){var a=t.getAxis(e),r=a.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,r,o),u=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan||(i=yt(0,i.slice(),a.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},n.prototype._dispatchZoomAction=function(e){var t=[];co(e,(function(e,n){t.push(h(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},n.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},n}(Dn),fo={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=Kn(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return Un(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){o[n]=e;break}})),o}(this.ecModel))}};function go(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function mo(e){e.registerComponentModel(On),e.registerComponentView(En),Rn("saveAsImage",Pn),Rn("magicType",Bn),Rn("dataView",Hn),Rn("dataZoom",ho),Rn("restore",$n),de(Ln)}ue("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),i=[],a=go(o),r=se(e,a);return co(r.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),co(r.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var a=e.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:po+t+a};r[n]=a,i.push(r)}}));var vo=ce.prototype,yo=pe.prototype,xo=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}();function _o(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}e(n,t)}(xo);var bo=function(t){function n(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return e(n,t),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new xo},n.prototype.buildPath=function(e,t){_o(t)?vo.buildPath.call(this,e,t):yo.buildPath.call(this,e,t)},n.prototype.pointAt=function(e){return _o(this.shape)?vo.pointAt.call(this,e):yo.pointAt.call(this,e)},n.prototype.tangentAt=function(e){var t=this.shape,n=_o(t)?[t.x2-t.x1,t.y2-t.y1]:yo.tangentAt.call(this,e);return he(n,n)},n}(fe),Mo=["fromSymbol","toSymbol"];function wo(e){return"_"+e+"Type"}function So(e,t,n){var o=t.getItemVisual(n,e);if(!o||"none"===o)return o;var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),u=we(i);return o+u+Se(r||0,u)+(a||"")+(s||"")}function Io(e,t,n){var o=t.getItemVisual(n,e);if(o&&"none"!==o){var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),u=we(i),l=Se(r||0,u),d=Ie(o,-u[0]/2+l[0],-u[1]/2+l[1],u[0],u[1],null,s);return d.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,d.name=e,d}}function To(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Ao=function(t){function n(e,n,o){var i=t.call(this)||this;return i._createLine(e,n,o),i}return e(n,t),n.prototype._createLine=function(e,t,n){var o=e.hostModel,i=function(e){var t=new bo({name:"line",subPixelOptimize:!0});return To(t.shape,e),t}(e.getItemLayout(t));i.shape.percent=0,ge(i,{shape:{percent:1}},o,t),this.add(i),x(Mo,(function(n){var o=Io(n,e,t);this.add(o),this[wo(n)]=So(n,e,t)}),this),this._updateCommonStl(e,t,n)},n.prototype.updateData=function(e,t,n){var o=e.hostModel,i=this.childOfName("line"),a=e.getItemLayout(t),r={shape:{}};To(r.shape,a),me(i,r,o,t),x(Mo,(function(n){var o=So(n,e,t),i=wo(n);if(this[i]!==o){this.remove(this.childOfName(n));var a=Io(n,e,t);this.add(a)}this[i]=o}),this),this._updateCommonStl(e,t,n)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(e,t,n){var o=e.hostModel,i=this.childOfName("line"),a=n&&n.emphasisLineStyle,r=n&&n.blurLineStyle,s=n&&n.selectLineStyle,u=n&&n.labelStatesModels,l=n&&n.emphasisDisabled,d=n&&n.focus,c=n&&n.blurScope;if(!n||e.hasItemOption){var p=e.getItemModel(t),h=p.getModel("emphasis");a=h.getModel("lineStyle").getLineStyle(),r=p.getModel(["blur","lineStyle"]).getLineStyle(),s=p.getModel(["select","lineStyle"]).getLineStyle(),l=h.get("disabled"),d=h.get("focus"),c=h.get("blurScope"),u=ve(p)}var f=e.getItemVisual(t,"style"),g=f.stroke;i.useStyle(f),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=a,i.ensureState("blur").style=r,i.ensureState("select").style=s,x(Mo,(function(e){var t=this.childOfName(e);if(t){t.setColor(g),t.style.opacity=f.opacity;for(var n=0;n<ye.length;n++){var o=ye[n],a=i.getState(o);if(a){var r=a.style||{},s=t.ensureState(o),u=s.style||(s.style={});null!=r.stroke&&(u[t.__isEmptyBrush?"stroke":"fill"]=r.stroke),null!=r.opacity&&(u.opacity=r.opacity)}}t.markRedraw()}}),this);var m=o.getRawValue(t);xe(this,u,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,n){return o.getFormattedLabel(t,n,e.dataType)}},inheritColor:g||"#000",defaultOpacity:f.opacity,defaultText:(null==m?e.getName(t):isFinite(m)?_e(m):m)+""});var v=this.getTextContent();if(v){var y=u.normal;v.__align=v.style.align,v.__verticalAlign=v.style.verticalAlign,v.__position=y.get("position")||"middle";var _=y.get("distance");ae(_)||(_=[_,_]),v.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),be(this,d,c,l)},n.prototype.highlight=function(){G(this)},n.prototype.downplay=function(){W(this)},n.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},n.prototype.setLinePoints=function(e){var t=this.childOfName("line");To(t.shape,e),t.dirty()},n.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),o=e.getTextContent();if(t||n||o&&!o.ignore){for(var i=1,a=this.parent;a;)a.scaleX&&(i/=a.scaleX),a=a.parent;var r=e.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,u=r.pointAt(0),l=r.pointAt(s),d=Me([],l,u);if(he(d,d),t&&(t.setPosition(u),w(t,0),t.scaleX=t.scaleY=i*s,t.markRedraw()),n&&(n.setPosition(l),w(n,1),n.scaleX=n.scaleY=i*s,n.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var c=void 0,p=void 0,h=o.__labelDistance,f=h[0]*i,g=h[1]*i,m=s/2,v=r.tangentAt(m),y=[v[1],-v[0]],x=r.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var _=v[0]<0?-1:1;if("start"!==o.__position&&"end"!==o.__position){var b=-Math.atan2(v[1],v[0]);l[0]<u[0]&&(b=Math.PI+b),o.rotation=b}var M=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-g,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=g,p="top";break;default:M=0,p="middle"}switch(o.__position){case"end":o.x=d[0]*f+l[0],o.y=d[1]*g+l[1],c=d[0]>.8?"left":d[0]<-.8?"right":"center",p=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":o.x=-d[0]*f+u[0],o.y=-d[1]*g+u[1],c=d[0]>.8?"right":d[0]<-.8?"left":"center",p=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=f*_+u[0],o.y=u[1]+M,c=v[0]<0?"right":"left",o.originX=-f*_,o.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=x[0],o.y=x[1]+M,c="center",o.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-f*_+l[0],o.y=l[1]+M,c=v[0]>=0?"right":"left",o.originX=f*_,o.originY=-M}o.scaleX=o.scaleY=i,o.setStyle({verticalAlign:o.__verticalAlign||p,align:o.__align||c})}}}function w(e,t){var n=e.__specifiedRotation;if(null==n){var o=r.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(o[1],o[0]))}else e.attr("rotation",n)}},n}(y),Co=function(){function e(e){this.group=new y,this._LineCtor=e||Ao}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,o=n.group,i=n._lineData;n._lineData=e,i||o.removeAll();var a=Lo(e);e.diff(i).add((function(n){t._doAdd(e,n,a)})).update((function(n,o){t._doUpdate(i,e,o,n,a)})).remove((function(e){o.remove(i.getItemGraphicEl(e))})).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,n){t.updateLayout(e,n)}),this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Lo(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var o=e.start;o<e.end;o++){if(ko(t.getItemLayout(o))){var i=new this._LineCtor(t,o,this._seriesScope);i.traverse(n),this.group.add(i),t.setItemGraphicEl(o,i),this._progressiveEls.push(i)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){Te(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,n){if(ko(e.getItemLayout(t))){var o=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,o),this.group.add(o)}},e.prototype._doUpdate=function(e,t,n,o,i){var a=e.getItemGraphicEl(n);ko(t.getItemLayout(o))?(a?a.updateData(t,o,i):a=new this._LineCtor(t,o,i),t.setItemGraphicEl(o,a),this.group.add(a)):this.group.remove(a)},e}();function Lo(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ve(t)}}function Do(e){return isNaN(e[0])||isNaN(e[1])}function ko(e){return e&&!Do(e[0])&&!Do(e[1])}function Ro(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),o=e.getGraph().data,i=n.mapArray(n.getName);o.filterSelf((function(e){var n=o.getItemModel(e).getShallow("category");if(null!=n){Ae(n)&&(n=i[n]);for(var a=0;a<t.length;a++)if(!t[a].isSelected(n))return!1}return!0}))}))}function No(e){var t={};e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),o=e.getData(),i={};n.each((function(o){var a=n.getName(o);i["ec-"+a]=o;var r=n.getItemModel(o),s=r.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(a,t)),n.setItemVisual(o,"style",s);for(var u=["symbol","symbolSize","symbolKeepAspect"],l=0;l<u.length;l++){var d=r.getShallow(u[l],!0);null!=d&&n.setItemVisual(o,u[l],d)}})),n.count()&&o.each((function(e){var t=o.getItemModel(e).getShallow("category");if(null!=t){v(t)&&(t=i["ec-"+t]);var a=n.getItemVisual(t,"style"),r=o.ensureUniqueItemVisual(e,"style");ne(r,a);for(var s=["symbol","symbolSize","symbolKeepAspect"],u=0;u<s.length;u++)o.setItemVisual(e,s[u],n.getItemVisual(t,s[u]))}}))}))}function Oo(e){return e instanceof Array||(e=[e,e]),e}function Eo(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),n=e.getEdgeData(),o=Oo(e.get("edgeSymbol")),i=Oo(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each((function(e){var o=n.getItemModel(e),i=t.getEdgeByIndex(e),a=Oo(o.getShallow("symbol",!0)),r=Oo(o.getShallow("symbolSize",!0)),s=o.getModel("lineStyle").getLineStyle(),u=n.ensureUniqueItemVisual(e,"style");switch(ne(u,s),u.stroke){case"source":var l=i.node1.getVisual("style");u.stroke=l&&l.fill;break;case"target":l=i.node2.getVisual("style");u.stroke=l&&l.fill}a[0]&&i.setVisual("fromSymbol",a[0]),a[1]&&i.setVisual("toSymbol",a[1]),r[0]&&i.setVisual("fromSymbolSize",r[0]),r[1]&&i.setVisual("toSymbolSize",r[1])}))}))}var Po="--\x3e",Vo=function(e){return e.get("autoCurveness")||null},zo=function(e,t){var n=Vo(e),o=20,i=[];if(Ae(n))o=n;else if(ae(n))return void(e.__curvenessList=n);t>o&&(o=t);var a=o%2?o+2:o+3;i=[];for(var r=0;r<a;r++)i.push((r%2?r+1:r)/10*(r%2?-1:1));e.__curvenessList=i},Bo=function(e,t,n){var o=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[n.uid,o,i].join(Po)},Zo=function(e){var t=e.split(Po);return[t[0],t[2],t[1]].join(Po)},Xo=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function Yo(e,t,n,o){var i=Vo(t),a=ae(i);if(!i)return null;var r=function(e,t){var n=Bo(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!r)return null;for(var s=-1,u=0;u<r.length;u++)if(r[u]===n){s=u;break}var l=function(e,t){return Xo(Bo(e.node1,e.node2,t),t)+Xo(Bo(e.node2,e.node1,t),t)}(e,t);zo(t,l),e.lineStyle=e.lineStyle||{};var d=Bo(e.node1,e.node2,t),c=t.__curvenessList,p=a||l%2?0:1;if(r.isForward)return c[p+s];var h=Zo(d),f=Xo(h,t),g=c[s+f+p];return o?a?i&&0===i[0]?(f+p)%2?g:-g:((f%2?0:1)+p)%2?g:-g:(f+p)%2?g:-g:c[s+f+p]}function Go(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),Wo(n,e)}}function Wo(e,t){e.eachEdge((function(e,n){var o=Ce(e.getModel().get(["lineStyle","curveness"]),-Yo(e,t,n,!0),0),i=Le(e.node1.getLayout()),a=Le(e.node2.getLayout()),r=[i,a];+o&&r.push([(i[0]+a[0])/2-(i[1]-a[1])*o,(i[1]+a[1])/2-(a[0]-i[0])*o]),e.setLayout(r)}))}function jo(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var o=e.getData(),i=[];x(n.dimensions,(function(e){i=i.concat(o.mapDimensionsAll(e))}));for(var a=0;a<o.count();a++){for(var r=[],s=!1,u=0;u<i.length;u++){var l=o.get(i[u],a);isNaN(l)||(s=!0),r.push(l)}s?o.setItemLayout(a,n.dataToPoint(r)):o.setItemLayout(a,[NaN,NaN])}Wo(o.graph,e)}else t&&"none"!==t||Go(e)}))}function Ho(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,o=t.scaleX;return((t.getZoom()-1)*n+1)/o}function Fo(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Uo=Math.PI,qo=[];function Ko(e,t,n,o){var i=e.coordinateSystem;if(!i||"view"===i.type){var a=i.getBoundingRect(),r=e.getData(),s=r.graph,u=a.width/2+a.x,l=a.height/2+a.y,d=Math.min(a.width,a.height)/2,c=r.count();if(r.setLayout({cx:u,cy:l}),c){if(n){var p=i.pointToData(o),h=p[0],f=p[1],g=[h-u,f-l];he(g,g),De(g,g,d),n.setLayout([u+g[0],l+g[1]],!0),Jo(n,e.get(["circular","rotateLabel"]),u,l)}$o[t](e,s,r,d,u,l,c),s.eachEdge((function(t,n){var o,i=Ce(t.getModel().get(["lineStyle","curveness"]),Yo(t,e,n),0),a=Le(t.node1.getLayout()),r=Le(t.node2.getLayout()),s=(a[0]+r[0])/2,d=(a[1]+r[1])/2;+i&&(o=[u*(i*=3)+s*(1-i),l*i+d*(1-i)]),t.setLayout([a,r,o])}))}}}var $o={value:function(e,t,n,o,i,a,r){var s=0,u=n.getSum("value"),l=2*Math.PI/(u||r);t.eachNode((function(e){var t=e.getValue("value"),n=l*(u?t:1)/2;s+=n,e.setLayout([o*Math.cos(s)+i,o*Math.sin(s)+a]),s+=n}))},symbolSize:function(e,t,n,o,i,a,r){var s=0;qo.length=r;var u=Ho(e);t.eachNode((function(e){var t=Fo(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=u;var n=Math.asin(t/2/o);isNaN(n)&&(n=Uo/2),qo[e.dataIndex]=n,s+=2*n}));var l=(2*Uo-s)/r/2,d=0;t.eachNode((function(e){var t=l+qo[e.dataIndex];d+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([o*Math.cos(d)+i,o*Math.sin(d)+a]),d+=t}))}};function Jo(e,t,n,o){var i=e.getGraphicEl();if(i){var a=e.getModel().get(["label","rotate"])||0,r=i.getSymbolPath();if(t){var s=e.getLayout(),u=Math.atan2(s[1]-o,s[0]-n);u<0&&(u=2*Math.PI+u);var l=s[0]<n;l&&(u-=Math.PI);var d=l?"left":"right";r.setTextConfig({rotation:-u,position:d,origin:"center"});var c=r.ensureState("emphasis");ne(c.textConfig||(c.textConfig={}),{position:d})}else r.setTextConfig({rotation:a*=Math.PI/180})}}function Qo(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&Ko(e,"symbolSize")}))}var ei=Oe;function ti(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},o=e.getGraph(),i=o.data,a=o.edgeData,r=e.getModel("force"),s=r.get("initLayout");e.preservedPoints?i.each((function(e){var t=i.getId(e);i.setItemLayout(e,n[t]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&Ko(e,"value"):Go(e);var l=i.getDataExtent("value"),d=a.getDataExtent("value"),c=r.get("repulsion"),p=r.get("edgeLength"),h=ae(c)?c:[c,c],f=ae(p)?p:[p,p];f=[f[1],f[0]];var g=i.mapArray("value",(function(e,t){var n=i.getItemLayout(t),o=P(e,l,h);return isNaN(o)&&(o=(h[0]+h[1])/2),{w:o,rep:o,fixed:i.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),m=a.mapArray("value",(function(t,n){var i=o.getEdgeByIndex(n),a=P(t,d,f);isNaN(a)&&(a=(f[0]+f[1])/2);var r=i.getModel(),s=Ce(i.getModel().get(["lineStyle","curveness"]),-Yo(i,e,n,!0),0);return{n1:g[i.node1.dataIndex],n2:g[i.node2.dataIndex],d:a,curveness:s,ignoreForceLayout:r.get("ignoreForceLayout")}})),v=t.getBoundingRect(),y=function(e,t,n){for(var o=e,i=t,a=n.rect,r=a.width,s=a.height,l=[a.x+r/2,a.y+s/2],d=null==n.gravity?.1:n.gravity,c=0;c<o.length;c++){var p=o[c];p.p||(p.p=ke(r*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),p.pp=Le(p.p),p.edges=null}var h,f,g=null==n.friction?.6:n.friction,m=g;return{warmUp:function(){m=.8*g},setFixed:function(e){o[e].fixed=!0},setUnfixed:function(e){o[e].fixed=!1},beforeStep:function(e){h=e},afterStep:function(e){f=e},step:function(e){h&&h(o,i);for(var t=[],n=o.length,a=0;a<i.length;a++){var r=i[a];if(!r.ignoreForceLayout){var s=r.n1,c=r.n2;Me(t,c.p,s.p);var p=Re(t)-r.d,g=c.w/(s.w+c.w);isNaN(g)&&(g=0),he(t,t),!s.fixed&&ei(s.p,s.p,t,g*p*m),!c.fixed&&ei(c.p,c.p,t,-(1-g)*p*m)}}for(a=0;a<n;a++)(_=o[a]).fixed||(Me(t,l,_.p),ei(_.p,_.p,t,d*m));for(a=0;a<n;a++){s=o[a];for(var v=a+1;v<n;v++){c=o[v],Me(t,c.p,s.p),0===(p=Re(t))&&(Ne(t,Math.random()-.5,Math.random()-.5),p=1);var y=(s.rep+c.rep)/p/p;!s.fixed&&ei(s.pp,s.pp,t,y),!c.fixed&&ei(c.pp,c.pp,t,-y)}}var x=[];for(a=0;a<n;a++){var _;(_=o[a]).fixed||(Me(x,_.p,_.pp),ei(_.p,_.p,x,m),u(_.pp,_.p))}var b=(m*=.992)<.01;f&&f(o,i,b),e&&e(b)}}}(g,m,{rect:v,gravity:r.get("gravity"),friction:r.get("friction")});y.beforeStep((function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].fixed&&u(e[n].p,o.getNodeByIndex(n).getLayout())})),y.afterStep((function(e,t,a){for(var r=0,s=e.length;r<s;r++)e[r].fixed||o.getNodeByIndex(r).setLayout(e[r].p),n[i.getId(r)]=e[r].p;for(r=0,s=t.length;r<s;r++){var l=t[r],d=o.getEdgeByIndex(r),c=l.n1.p,p=l.n2.p,h=d.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],u(h[0],c),u(h[1],p),+l.curveness&&(h[2]=[(c[0]+p[0])/2-(c[1]-p[1])*l.curveness,(c[1]+p[1])/2-(p[0]-c[0])*l.curveness]),d.setLayout(h)}})),e.forceLayout=y,e.preservedPoints=n,y.step()}else e.forceLayout=null}))}function ni(e,t){var n=[];return e.eachSeriesByType("graph",(function(e){var o=e.get("coordinateSystem");if(!o||"view"===o){var i=e.getData(),a=i.mapArray((function(e){var t=i.getItemModel(e);return[+t.get("x"),+t.get("y")]})),r=[],s=[];Ee(a,r,s),s[0]-r[0]==0&&(s[0]+=1,r[0]-=1),s[1]-r[1]==0&&(s[1]+=1,r[1]-=1);var u=(s[0]-r[0])/(s[1]-r[1]),l=function(e,t,n){var o=ne(e.getBoxLayoutParams(),{aspect:n});return Pe(o,{width:t.getWidth(),height:t.getHeight()})}(e,t,u);isNaN(u)&&(r=[l.x,l.y],s=[l.x+l.width,l.y+l.height]);var d=s[0]-r[0],c=s[1]-r[1],p=l.width,h=l.height,f=e.coordinateSystem=new ot;f.zoomLimit=e.get("scaleLimit"),f.setBoundingRect(r[0],r[1],d,c),f.setViewRect(l.x,l.y,p,h),f.setCenter(e.get("center"),t),f.setZoom(e.get("zoom")),n.push(f)}})),n}var oi=[],ii=[],ai=[],ri=ze,si=Be,ui=Math.abs;function li(e,t,n){for(var o,i=e[0],a=e[1],r=e[2],s=1/0,u=n*n,l=.1,d=.1;d<=.9;d+=.1){oi[0]=ri(i[0],a[0],r[0],d),oi[1]=ri(i[1],a[1],r[1],d),(h=ui(si(oi,t)-u))<s&&(s=h,o=d)}for(var c=0;c<32;c++){var p=o+l;ii[0]=ri(i[0],a[0],r[0],o),ii[1]=ri(i[1],a[1],r[1],o),ai[0]=ri(i[0],a[0],r[0],p),ai[1]=ri(i[1],a[1],r[1],p);var h=si(ii,t)-u;if(ui(h)<.01)break;var f=si(ai,t)-u;l/=2,h<0?f>=0?o+=l:o-=l:f>=0?o-=l:o+=l}return o}function di(e,t){var n=[],o=Ve,i=[[],[],[]],a=[[],[]],r=[];t/=2,e.eachEdge((function(e,s){var l=e.getLayout(),d=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");l.__original||(l.__original=[Le(l[0]),Le(l[1])],l[2]&&l.__original.push(Le(l[2])));var p=l.__original;if(null!=l[2]){if(u(i[0],p[0]),u(i[1],p[2]),u(i[2],p[1]),d&&"none"!==d){var h=Fo(e.node1),f=li(i,p[0],h*t);o(i[0][0],i[1][0],i[2][0],f,n),i[0][0]=n[3],i[1][0]=n[4],o(i[0][1],i[1][1],i[2][1],f,n),i[0][1]=n[3],i[1][1]=n[4]}if(c&&"none"!==c){h=Fo(e.node2),f=li(i,p[1],h*t);o(i[0][0],i[1][0],i[2][0],f,n),i[1][0]=n[1],i[2][0]=n[2],o(i[0][1],i[1][1],i[2][1],f,n),i[1][1]=n[1],i[2][1]=n[2]}u(l[0],i[0]),u(l[1],i[2]),u(l[2],i[1])}else{if(u(a[0],p[0]),u(a[1],p[1]),Me(r,a[1],a[0]),he(r,r),d&&"none"!==d){h=Fo(e.node1);Oe(a[0],a[0],r,h*t)}if(c&&"none"!==c){h=Fo(e.node2);Oe(a[1],a[1],r,-h*t)}u(l[0],a[0]),u(l[1],a[1])}}))}function ci(e){return"view"===e.type}var pi=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.prototype.init=function(e,t){var n=new Ze,o=new Co,i=this.group;this._controller=new dt(t.getZr()),this._controllerHost={target:i},i.add(n.group),i.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},n.prototype.render=function(e,t,n){var o=this,i=e.coordinateSystem;this._model=e;var a=this._symbolDraw,r=this._lineDraw,s=this.group;if(ci(i)){var u={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?s.attr(u):me(s,u,e)}di(e.getGraph(),Ho(e));var l=e.getData();a.updateData(l);var d=e.getEdgeData();r.updateData(d),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var c=e.forceLayout,p=e.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,p);var h=e.get("layout");l.graph.eachNode((function(t){var n=t.dataIndex,i=t.getGraphicEl(),a=t.getModel();if(i){i.off("drag").off("dragend");var r=a.get("draggable");r&&i.on("drag",(function(a){switch(h){case"force":c.warmUp(),!o._layouting&&o._startForceLayoutIteration(c,p),c.setFixed(n),l.setItemLayout(n,[i.x,i.y]);break;case"circular":l.setItemLayout(n,[i.x,i.y]),t.setLayout({fixed:!0},!0),Ko(e,"symbolSize",t,[a.offsetX,a.offsetY]),o.updateLayout(e);break;default:l.setItemLayout(n,[i.x,i.y]),Wo(e.getGraph(),e),o.updateLayout(e)}})).on("dragend",(function(){c&&c.setUnfixed(n)})),i.setDraggable(r,!!a.get("cursor")),"adjacency"===a.get(["emphasis","focus"])&&(Xe(i).focus=t.getAdjacentDataIndices())}})),l.graph.eachEdge((function(e){var t=e.getGraphicEl(),n=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===n&&(Xe(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var f="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),g=l.getLayout("cx"),m=l.getLayout("cy");l.graph.eachNode((function(e){Jo(e,f,g,m)})),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(e,t){var n=this;!function o(){e.step((function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(o,16):o())}))}()},n.prototype._updateController=function(e,t,n){var o=this,i=this._controller,a=this._controllerHost,r=this.group;i.setPointerChecker((function(t,o,i){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(o,i)&&!vt(t,n,e)})),ci(e.coordinateSystem)?(i.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){ft(a,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){gt(a,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),o._updateNodeAndLinkScale(),di(e.getGraph(),Ho(e)),o._lineDraw.updateLayout(),n.updateLabelLayout()}))):i.disable()},n.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=Ho(e);t.eachItemGraphicEl((function(e,t){e&&e.setSymbolScale(n)}))},n.prototype.updateLayout=function(e){di(e.getGraph(),Ho(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(Ye);function hi(e){return"_EC_"+e}var fi=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[hi(e)]){var o=new gi(e,t);return o.hostGraph=this,this.nodes.push(o),n[hi(e)]=o,o}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[hi(e)]},e.prototype.addEdge=function(e,t,n){var o=this._nodesMap,i=this._edgesMap;if(Ae(e)&&(e=this.nodes[e]),Ae(t)&&(t=this.nodes[t]),e instanceof gi||(e=o[hi(e)]),t instanceof gi||(t=o[hi(t)]),e&&t){var a=e.id+"-"+t.id,r=new mi(e,t,n);return r.hostGraph=this,this._directed&&(e.outEdges.push(r),t.inEdges.push(r)),e.edges.push(r),e!==t&&t.edges.push(r),this.edges.push(r),i[a]=r,r}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof gi&&(e=e.id),t instanceof gi&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,o=n.length,i=0;i<o;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,o=n.length,i=0;i<o;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},e.prototype.breadthFirstTraverse=function(e,t,n,o){if(t instanceof gi||(t=this._nodesMap[hi(t)]),t){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(o,t,null))for(var r=[t];r.length;){var s=r.shift(),u=s[i];for(a=0;a<u.length;a++){var l=u[a],d=l.node1===s?l.node2:l.node1;if(!d.__visited){if(e.call(o,d,s))return;r.push(d),d.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,o=this.edges,i=0,a=n.length;i<a;i++)n[i].dataIndex=-1;for(i=0,a=e.count();i<a;i++)n[e.getRawIndex(i)].dataIndex=i;t.filterSelf((function(e){var n=o[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}));for(i=0,a=o.length;i<a;i++)o[i].dataIndex=-1;for(i=0,a=t.count();i<a;i++)o[t.getRawIndex(i)].dataIndex=i},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,o=this.edges,i=0;i<n.length;i++)t.addNode(n[i].id,n[i].dataIndex);for(i=0;i<o.length;i++){var a=o[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),gi=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=D(),t=D(),n=0;n<this.edges.length;n++){var o=this.edges[n];if(!(o.dataIndex<0)){e.set(o.dataIndex,!0);for(var i=[o.node1],a=[o.node2],r=0;r<i.length;){var s=i[r];r++,t.set(s.dataIndex,!0);for(var u=0;u<s.inEdges.length;u++)e.set(s.inEdges[u].dataIndex,!0),i.push(s.inEdges[u].node1)}for(r=0;r<a.length;){var l=a[r];r++,t.set(l.dataIndex,!0);for(u=0;u<l.outEdges.length;u++)e.set(l.outEdges[u].dataIndex,!0),a.push(l.outEdges[u].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),mi=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=D(),t=D();e.set(this.dataIndex,!0);for(var n=[this.node1],o=[this.node2],i=0;i<n.length;){var a=n[i];i++,t.set(a.dataIndex,!0);for(var r=0;r<a.inEdges.length;r++)e.set(a.inEdges[r].dataIndex,!0),n.push(a.inEdges[r].node1)}for(i=0;i<o.length;){var s=o[i];i++,t.set(s.dataIndex,!0);for(r=0;r<s.outEdges.length;r++)e.set(s.outEdges[r].dataIndex,!0),o.push(s.outEdges[r].node2)}return{edge:e.keys(),node:t.keys()}},e}();function vi(e,t){return{getValue:function(n){var o=this[e][t];return o.getStore().get(o.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,o){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,o)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,o){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function yi(e,t,n,o,i){for(var a=new fi(o),r=0;r<e.length;r++)a.addNode(We(e[r].id,e[r].name,r),r);var s=[],u=[],l=0;for(r=0;r<t.length;r++){var d=t[r],c=d.source,p=d.target;a.addEdge(c,p,l)&&(u.push(d),s.push(We(je(d.id,null),c+" > "+p)),l++)}var h,f=n.get("coordinateSystem");if("cartesian2d"===f||"polar"===f)h=He(e,n);else{var g=Fe.get(f),m=g&&g.dimensions||[];k(m,"value")<0&&m.concat(["value"]);var v=Ue(e,{coordDimensions:m,encodeDefine:n.getEncode()}).dimensions;(h=new qe(v,n)).initData(e)}var y=new qe(["value"],n);return y.initData(u,s),i&&i(h,y),Ke({mainData:h,struct:a,structAttr:"graph",datas:{node:h,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}Ge(gi,vi("hostGraph","data")),Ge(mi,vi("hostGraph","edgeData"));var xi=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e.hasSymbolVisual=!0,e}return e(n,t),n.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new $e(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},n.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Je(e,"edgeLabel",["show"])},n.prototype.getInitialData=function(e,t){var n=e.edges||e.links||[],o=e.data||e.nodes||[],i=this;Vo(a=this)&&(a.__curvenessList=[],a.__edgeMap={},zo(a));var a,r=yi(o,n,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=i._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var n=X.prototype.getModel;function o(e,t){var o=n.call(this,e,t);return o.resolveParentPath=a,o}function a(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=a,e.getModel=o,e}))}));return x(r.edges,(function(e){!function(e,t,n,o){if(Vo(n)){var i=Bo(e,t,n),a=n.__edgeMap,r=a[Zo(i)];a[i]&&!r?a[i].isForward=!0:r&&a[i]&&(r.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(o)}}(e.node1,e.node2,this,e.dataIndex)}),this),r.data},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(e,t,n){if("edge"===n){var o=this.getData(),i=this.getDataParams(e,n),a=o.graph.getEdgeByIndex(e),r=o.getName(a.node1.dataIndex),s=o.getName(a.node2.dataIndex),u=[];return null!=r&&u.push(r),null!=s&&u.push(s),Qe("nameValue",{name:u.join(" > "),value:i.value,noValue:null==i.value})}return et({series:this,dataIndex:e,multipleSeries:t})},n.prototype._updateCategoriesData=function(){var e=b(this.option.categories||[],(function(e){return null!=e.value?e:ne({value:0},e)})),t=new qe(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},n.prototype.setZoom=function(e){this.option.zoom=e},n.prototype.setCenter=function(e){this.option.center=e},n.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(tt),_i={type:"graphRoam",event:"graphRoam",update:"none"};function bi(e){e.registerChartView(pi),e.registerSeriesModel(xi),e.registerProcessor(Ro),e.registerVisual(No),e.registerVisual(Eo),e.registerLayout(jo),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,Qo),e.registerLayout(ti),e.registerCoordinateSystem("graphView",{dimensions:ot.dimensions,create:ni}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},d),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},d),e.registerAction(_i,(function(e,t,n){t.eachComponent({mainType:"series",query:e},(function(t){var o=rt(t.coordinateSystem,e,void 0,n);t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom)}))}))}export{Dt as B,yn as D,Co as L,dt as R,Dn as T,ot as V,gt as a,rt as b,dn as c,ln as d,Qn as e,Ao as f,mo as g,mn as h,bi as i,bn as j,Cn as k,fn as l,un as m,yi as n,vt as o,Rn as r,yt as s,ft as u};
