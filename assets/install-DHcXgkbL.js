import{u as e,Y as t,I as n,bN as r,be as i,_ as o,G as a,e as s,aW as l,bO as u,b4 as c,P as d,al as p,b7 as h,aT as g,av as f,am as m,aw as v,j as y,bx as x,bw as _,bP as b,U as A,aE as w,a4 as S,bQ as M,x as I,l as C,H as T,aM as k,bR as O,bS as R,bT as D,bv as P,w as L,bU as V,bV as N,bW as E,ao as B,bX as z,bk as G,bl as W,a3 as Z,bY as F,a6 as H,bZ as U,b_ as Y,a2 as X,b$ as j,c0 as q,c1 as K,c2 as $,a7 as J,aF as Q,ba as ee,Z as te,aD as ne,c3 as re,c4 as ie,c5 as oe,c6 as ae,ak as se,X as le,bd as ue,bc as ce,aR as de,aJ as pe,c as he,a8 as ge,W as fe,c7 as me,bt as ve,bq as ye,c8 as xe,c9 as _e,ac as be,bj as Ae,ai as we,T as Se,S as Me,V as Ie,ca as Ce,bp as Te,ab as ke,ad as Oe,cb as Re,aV as De,C as Pe,a9 as Le,aS as Ve,cc as Ne,cd as Ee,af as Be,aQ as ze,ce as Ge,cf as We,cg as Ze,ch as Fe}from"./vintage-BuqR8grH.js";function He(r){e(t),e(n)}var Ue="\0_ec_interaction_mutex";function Ye(e,t){return!!Xe(e)[t]}function Xe(e){return e[Ue]||(e[Ue]={})}r({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},i);var je={axisPointer:1,tooltip:1,brush:1};function qe(e,t,n){var r=t.getComponentByElement(e.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!je.hasOwnProperty(r.mainType)&&i&&i.model!==n}function Ke(e,t,n,r,i,o){e=e||0;var a=n[1]-n[0];if(null!=i&&(i=Je(i,[0,a])),null!=o&&(o=Math.max(o,null!=i?i:0)),"all"===r){var s=Math.abs(t[1]-t[0]);s=Je(s,[0,a]),i=o=Je(s,[i,o]),r=0}t[0]=Je(t[0],n),t[1]=Je(t[1],n);var l=$e(t,r);t[r]+=e;var u,c=i||0,d=n.slice();return l.sign<0?d[0]+=c:d[1]-=c,t[r]=Je(t[r],d),u=$e(t,r),null!=i&&(u.sign!==l.sign||u.span<i)&&(t[1-r]=t[r]+l.sign*i),u=$e(t,r),null!=o&&u.span>o&&(t[1-r]=t[r]+u.sign*o),t}function $e(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Je(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var Qe=!0,et=Math.min,tt=Math.max,nt=Math.pow,rt="globalPan",it={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},ot={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},at={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},st=0,lt=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new a,n._uid="brushController_"+st++,s(Vt,(function(e,t){this._handlers[t]=l(e,this)}),n),n}return o(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){Xe(e)[t]=n}(t,rt,this._uid),s(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=u(c(at),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var r=Xe(e);r[t]===n&&(r[t]=null)}(e,rt,this._uid),s(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};s(e,(function(e){t[e.panelId]=c(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=d(e,(function(e){return u(c(at),e,!0)}));var t=this._covers,n=this._covers=[],r=this,i=this._creatingCover;return new p(t,e,(function(e,t){return o(e.__brushOption,t)}),o).add(a).update(a).remove((function(e){t[e]!==i&&r.group.remove(t[e])})).execute(),this;function o(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function a(o,a){var s=e[o];if(null!=a&&t[a]===i)n[o]=t[a];else{var l=n[o]=null!=a?(t[a].__brushOption=s,t[a]):ct(r,ut(r,s));ht(r,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),vt(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(h);function ut(e,t){var n=Et[t.brushType].createCover(e,t);return n.__brushOption=t,pt(n,t),e.group.add(n),n}function ct(e,t){var n=gt(t);return n.endCreating&&(n.endCreating(e,t),pt(t,t.__brushOption)),t}function dt(e,t){var n=t.__brushOption;gt(t).updateCoverShape(e,t,n.range,n)}function pt(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function ht(e,t){gt(t).updateCommon(e,t),dt(e,t)}function gt(e){return Et[e.__brushOption.brushType]}function ft(e,t,n){var r,i=e._panels;if(!i)return Qe;var o=e._transform;return s(i,(function(e){e.isTargetByCursor(t,n,o)&&(r=e)})),r}function mt(e,t){var n=e._panels;if(!n)return Qe;var r=t.__brushOption.panelId;return null!=r?n[r]:Qe}function vt(e){var t=e._covers,n=t.length;return s(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function yt(e,t){var n=d(e._covers,(function(e){var t=e.__brushOption,n=c(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function xt(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function _t(e,t,n,r){var i=new a;return i.add(new v({name:"main",style:St(n),silent:!0,draggable:!0,cursor:"move",drift:m(Ct,e,t,i,["n","s","w","e"]),ondragend:m(yt,t,{isEnd:!0})})),s(r,(function(n){i.add(new v({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:m(Ct,e,t,i,n),ondragend:m(yt,t,{isEnd:!0})}))})),i}function bt(e,t,n,r){var i=r.brushStyle.lineWidth||0,o=tt(i,6),a=n[0][0],s=n[1][0],l=a-i/2,u=s-i/2,c=n[0][1],d=n[1][1],p=c-o+i/2,h=d-o+i/2,g=c-a,f=d-s,m=g+i,v=f+i;wt(e,t,"main",a,s,g,f),r.transformable&&(wt(e,t,"w",l,u,o,v),wt(e,t,"e",p,u,o,v),wt(e,t,"n",l,u,m,o),wt(e,t,"s",l,h,m,o),wt(e,t,"nw",l,u,o,o),wt(e,t,"ne",p,u,o,o),wt(e,t,"sw",l,h,o,o),wt(e,t,"se",p,h,o,o))}function At(e,t){var n=t.__brushOption,r=n.transformable,i=t.childAt(0);i.useStyle(St(n)),i.attr({silent:!r,cursor:r?"move":"default"}),s([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),o=1===n.length?It(e,n[0]):function(e,t){var n=[It(e,t[0]),It(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!r,invisible:!r,cursor:r?ot[o]+"-resize":null})}))}function wt(e,t,n,r,i,o,a){var s,l,u,c,d,p=t.childOfName(n);p&&p.setShape((s=Ot(e,t,[[r,i],[r+o,i+a]]),l=et(s[0][0],s[1][0]),u=et(s[0][1],s[1][1]),c=tt(s[0][0],s[1][0]),d=tt(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:d-u}))}function St(e){return y({strokeNoScale:!0},e.brushStyle)}function Mt(e,t,n,r){var i=[et(e,n),et(t,r)],o=[tt(e,n),tt(t,r)];return[[i[0],o[0]],[i[1],o[1]]]}function It(e,t){var n=x({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return _(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Ct(e,t,n,r,i,o){var a=n.__brushOption,l=e.toRectRange(a.range),u=kt(t,i,o);s(r,(function(e){var t=it[e];l[t[0]][t[1]]+=u[t[0]]})),a.range=e.fromRectRange(Mt(l[0][0],l[1][0],l[0][1],l[1][1])),ht(t,n),yt(t,{isEnd:!1})}function Tt(e,t,n,r){var i=t.__brushOption.range,o=kt(e,n,r);s(i,(function(e){e[0]+=o[0],e[1]+=o[1]})),ht(e,t),yt(e,{isEnd:!1})}function kt(e,t,n){var r=e.group,i=r.transformCoordToLocal(t,n),o=r.transformCoordToLocal(0,0);return[i[0]-o[0],i[1]-o[1]]}function Ot(e,t,n){var r=mt(e,t);return r&&r!==Qe?r.clipPath(n,e._transform):c(n)}function Rt(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Dt(e,t,n){return e.childOfName("main").contain(t,n)}function Pt(e,t,n,r){var i,o=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],i=n[0]-r[0],o=n[1]-r[1];return nt(i*i+o*o,.5)>6}(e)||o){if(a&&!o){"single"===s.brushMode&&vt(e);var l=c(s);l.brushType=Lt(l.brushType,a),l.panelId=a===Qe?null:a.panelId,o=e._creatingCover=ut(e,l),e._covers.push(o)}if(o){var u=Et[Lt(e._brushType,a)];o.__brushOption.range=u.getCreatingRange(Ot(e,o,e._track)),r&&(ct(e,o),u.updateCommon(e,o)),dt(e,o),i={isEnd:r}}}else r&&"single"===s.brushMode&&s.removeOnClick&&ft(e,t,n)&&vt(e)&&(i={isEnd:r,removeOnClick:!0});return i}function Lt(e,t){return"auto"===e?t.defaultBrushType:e}var Vt={mousedown:function(e){if(this._dragging)Nt(this,e);else if(!e.target||!e.target.draggable){Rt(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=ft(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}(e,t.offsetX,t.offsetY)){var r=e._zr,i=e._covers,o=ft(e,t,n);if(!e._dragging)for(var a=0;a<i.length;a++){var s=i[a].__brushOption;if(o&&(o===Qe||s.panelId===o.panelId)&&Et[s.brushType].contain(i[a],n[0],n[1]))return}o&&r.setCursorStyle("crosshair")}}(this,e,r),this._dragging){Rt(e);var i=Pt(this,e,r,!1);i&&yt(this,i)}},mouseup:function(e){Nt(this,e)}};function Nt(e,t){if(e._dragging){Rt(t);var n=t.offsetX,r=t.offsetY,i=e.group.transformCoordToLocal(n,r),o=Pt(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&yt(e,o)}}var Et={lineX:Bt(0),lineY:Bt(1),rect:{createCover:function(e,t){function n(e){return e}return _t({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=xt(e);return Mt(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){bt(e,t,n,r)},updateCommon:At,contain:Dt},polygon:{createCover:function(e,t){var n=new a;return n.add(new g({name:"main",style:St(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new f({name:"main",draggable:!0,drift:m(Tt,e,t),ondragend:m(yt,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:Ot(e,t,n)})},updateCommon:At,contain:Dt}};function Bt(e){return{createCover:function(t,n){return _t({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=xt(t);return[et(n[0][e],n[1][e]),tt(n[0][e],n[1][e])]},updateCoverShape:function(t,n,r,i){var o,a=mt(t,n);if(a!==Qe&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(e);else{var s=t._zr;o=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,o];e&&l.reverse(),bt(t,n,l,i)},updateCommon:At,contain:Dt}}function zt(e){return e=Zt(e),function(t){return b(t,e)}}function Gt(e,t){return e=Zt(e),function(n){var r=null!=t?t:n,i=r?e.width:e.height,o=r?e.x:e.y;return[o,o+(i||0)]}}function Wt(e,t,n){var r=Zt(e);return function(e,i){return r.contain(i[0],i[1])&&!qe(e,t,n)}}function Zt(e){return A.create(e)}var Ft=["x","y","radius","angle","single"],Ht=["cartesian2d","polar","singleAxis"];function Ut(e){return e+"Axis"}function Yt(e,t){var n,r=w(),i=[],o=w();e.eachComponent({mainType:"dataZoom",query:t},(function(e){o.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",a)}while(n);function a(e){!o.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=r.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){o.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(r.get(e)||r.set(e,[]))[t]=!0}))}return i}function Xt(e){var t=e.ecModel,n={infoList:[],infoMap:w()};return e.eachTargetAxis((function(e,r){var i=t.getComponent(Ut(e),r);if(i){var o=i.getCoordSysModel();if(o){var a=o.uid,s=n.infoMap.get(a);s||(s={model:o,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(i)}}})),n}var jt=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),qt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return o(t,e),t.prototype.init=function(e,t,n){var r=Kt(e);this.settledOption=r,this.mergeDefaultAndTheme(e,n),this._doInit(r)},t.prototype.mergeOption=function(e){var t=Kt(e);u(this.option,e,!0),u(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;s([["start","startValue"],["end","endValue"]],(function(e,r){"value"===this._rangePropMode[r]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=w();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return s(Ft,(function(n){var r=this.getReferringComponents(Ut(n),M);if(r.specified){t=!0;var i=new jt;s(r.models,(function(e){i.add(e.componentIndex)})),e.set(n,i)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,r=!0;if(r){var i="vertical"===t?"y":"x";o(n.findComponents({mainType:i+"Axis"}),i)}r&&o(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function o(t,n){var i=t[0];if(i){var o=new jt;if(o.add(i.componentIndex),e.set(n,o),r=!1,"x"===n||"y"===n){var a=i.getReferringComponents("grid",I).models[0];a&&s(t,(function(e){i.componentIndex!==e.componentIndex&&a===e.getReferringComponents("grid",I).models[0]&&o.add(e.componentIndex)}))}}}r&&s(Ft,(function(t){if(r){var i=n.findComponents({mainType:Ut(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var o=new jt;o.add(i[0].componentIndex),e.set(t,o),r=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");s([["start","startValue"],["end","endValue"]],(function(r,i){var o=null!=e[r[0]],a=null!=e[r[1]];o&&!a?t[i]="percent":!o&&a?t[i]="value":n?t[i]=n[i]:o&&(t[i]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Ut(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,r){s(n.indexList,(function(n){e.call(t,r,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Ut(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;s([["start","startValue"],["end","endValue"]],(function(r){null==e[r[0]]&&null==e[r[1]]||(t[r[0]]=n[r[0]]=e[r[0]],t[r[1]]=n[r[1]]=e[r[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;s(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),r=0;r<n.length;r++)for(var i=n[r],o=this._targetAxisInfoMap.get(i),a=0;a<o.indexList.length;a++){var s=this.getAxisProxy(i,o.indexList[a]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(C);function Kt(e){var t={};return s(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var $t=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.type="dataZoom.select",t}(qt),Jt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.prototype.render=function(e,t,n,r){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(T),Qt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.type="dataZoom.select",t}(Jt),en=s,tn=P,nn=function(){function e(e,t,n,r){this._dimName=e,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return S(Ht,t)>=0}(t)){var n=Ut(this._dimName),r=t.getReferringComponents(n,I).models[0];r&&this._axisIndex===r.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return c(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,r=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],a=[],s=[];en(["start","end"],(function(l,u){var c=e[l],d=e[l+"Value"];"percent"===i[u]?(null==c&&(c=o[u]),d=r.parse(k(c,o,n))):(t=!0,d=null==d?n[u]:r.parse(d),c=k(d,n,o)),s[u]=null==d||isNaN(d)?n[u]:d,a[u]=null==c||isNaN(c)?o[u]:c})),tn(s),tn(a);var l=this._minMaxSpan;function u(e,t,n,i,o){var a=o?"Span":"ValueSpan";Ke(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=k(e[s],n,i,!0),o&&(t[s]=r.parse(t[s]))}return t?u(s,a,n,o,!1):u(a,s,o,n,!0),{valueWindow:s,percentWindow:a}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var r=[1/0,-1/0];en(n,(function(e){R(r,e.getData(),t)}));var i=e.getAxisModel(),o=D(i.axis.scale,i,r).calculate();return[o.min,o.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),i=e.get("filterMode"),o=this._valueWindow;"none"!==i&&en(r,(function(e){var t=e.getData(),r=t.mapDimensionsAll(n);if(r.length){if("weakFilter"===i){var a=t.getStore(),s=d(r,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<r.length;l++){var u=a.get(s[l],e),c=!isNaN(u),d=u<o[0],p=u>o[1];if(c&&!d&&!p)return!0;c&&(i=!0),d&&(t=!0),p&&(n=!0)}return i&&t&&n}))}else en(r,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=o[0]&&e<=o[1]}(e)?e:NaN})));else{var r={};r[n]=o,t.selectRange(r)}}));en(r,(function(e){t.setApproximateExtent(o,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;en(["min","max"],(function(r){var i=t.get(r+"Span"),o=t.get(r+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?i=k(n[0]+o,n,[0,100],!0):null!=i&&(o=k(i,[0,100],n,!0)-n[0]),e[r+"Span"]=i,e[r+"ValueSpan"]=o}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var r=O(n,[0,500]);r=Math.min(r,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(r)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(r)),i.freeze()}},e}();var rn={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(r,i){var o=e.getComponent(Ut(r),i);t(r,i,o,n)}))}))}t((function(e,t,n,r){n.__dzAxisProxy=null}));var n=[];t((function(t,r,i,o){i.__dzAxisProxy||(i.__dzAxisProxy=new nn(t,r,o,e),n.push(i.__dzAxisProxy))}));var r=w();return s(n,(function(e){s(e.getTargetSeriesModels(),(function(e){r.set(e.uid,e)}))})),r},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,r){e.getAxisProxy(n,r).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),r=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]})}}))}};var on=!1;function an(e){on||(on=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,rn),function(e){e.registerAction("dataZoom",(function(e,t){var n=Yt(t,e);s(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function sn(e){e.registerComponentModel($t),e.registerComponentView(Qt),an(e)}var ln=function(){return function(){}}(),un={};function cn(e,t){un[e]=t}function dn(e){return un[e]}var pn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;s(this.option.feature,(function(e,n){var r=dn(n);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(t)),u(e,r.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(C);function hn(e,t){var n=E(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new v({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}var gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(e,t,n,r){var i=this.group;if(i.removeAll(),e.get("show")){var o=+e.get("itemSize"),a="vertical"===e.get("orient"),u=e.get("feature")||{},c=this._features||(this._features={}),d=[];s(u,(function(e,t){d.push(t)})),new p(this._featureNames||[],d).add(h).update(h).remove(m(h,null)).execute(),this._featureNames=d,function(e,t,n){var r=t.getBoxLayoutParams(),i=t.get("padding"),o={width:n.getWidth(),height:n.getHeight()},a=L(r,o,i);V(t.get("orient"),e,t.get("itemGap"),a.width,a.height),N(e,r,o,i)}(i,e,n),i.add(hn(i.getBoundingRect(),e)),a||i.eachChild((function(e){var t=e.__title,r=e.ensureState("emphasis"),a=r.textConfig||(r.textConfig={}),s=e.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!X(l)&&t){var u=l.style||(l.style={}),c=j(t,H.makeFont(u)),d=e.x+i.x,p=!1;e.y+i.y+o+c.height>n.getHeight()&&(a.position="top",p=!0);var h=p?-5-c.height:o+10;d+c.width/2>n.getWidth()?(a.position=["100%",h],u.align="right"):d-c.width/2<0&&(a.position=[0,h],u.align="left")}}))}function h(p,h){var g,f=d[p],m=d[h],v=u[f],y=new B(v,e,e.ecModel);if(r&&null!=r.newTitle&&r.featureName===f&&(v.title=r.newTitle),f&&!m){if(function(e){return 0===e.indexOf("my")}(f))g={onclick:y.option.onclick,featureName:f};else{var x=dn(f);if(!x)return;g=new x}c[f]=g}else if(!(g=c[m]))return;g.uid=z("toolbox-feature"),g.model=y,g.ecModel=t,g.api=n;var _=g instanceof ln;f||!m?!y.get("show")||_&&g.unusable?_&&g.remove&&g.remove(t,n):(!function(r,u,c){var d,p,h=r.getModel("iconStyle"),g=r.getModel(["emphasis","iconStyle"]),f=u instanceof ln&&u.getIcons?u.getIcons():r.get("icon"),m=r.get("title")||{};Z(f)?(d={})[c]=f:d=f;Z(m)?(p={})[c]=m:p=m;var v=r.iconPaths={};s(d,(function(s,c){var d=F(s,{},{x:-o/2,y:-o/2,width:o,height:o});d.setStyle(h.getItemStyle()),d.ensureState("emphasis").style=g.getItemStyle();var f=new H({style:{text:p[c],align:g.get("textAlign"),borderRadius:g.get("textBorderRadius"),padding:g.get("textPadding"),fill:null,font:U({fontStyle:g.get("textFontStyle"),fontFamily:g.get("textFontFamily"),fontSize:g.get("textFontSize"),fontWeight:g.get("textFontWeight")},t)},ignore:!0});d.setTextContent(f),Y({el:d,componentModel:e,itemName:c,formatterParamsExtra:{title:p[c]}}),d.__title=p[c],d.on("mouseover",(function(){var t=g.getItemStyle(),r=a?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";f.setStyle({fill:g.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:g.get("textBackgroundColor")}),d.setTextConfig({position:g.get("textPosition")||r}),f.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==r.get(["iconStatus",c])&&n.leaveEmphasis(this),f.hide()})),("emphasis"===r.get(["iconStatus",c])?G:W)(d),i.add(d),d.on("click",l(u.onclick,u,t,n,c)),v[c]=d}))}(y,g,f),y.setIconStatus=function(e,t){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,r[e]&&("emphasis"===t?G:W)(r[e])},g instanceof ln&&g.render&&g.render(y,t,n,r)):_&&g.dispose&&g.dispose(t,n)}},t.prototype.updateView=function(e,t,n,r){s(this._features,(function(e){e instanceof ln&&e.updateView&&e.updateView(e.model,t,n,r)}))},t.prototype.remove=function(e,t){s(this._features,(function(n){n instanceof ln&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){s(this._features,(function(n){n instanceof ln&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(T);var fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onclick=function(e,t){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),o=i?"svg":n.get("type",!0)||"png",a=t.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=q.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||i){var l=a.split(","),u=l[0].indexOf("base64")>-1,c=i?decodeURIComponent(l[1]):l[1];u&&(c=window.atob(c));var d=r+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var p=c.length,h=new Uint8Array(p);p--;)h[p]=c.charCodeAt(p);var g=new Blob([h]);window.navigator.msSaveOrOpenBlob(g,d)}else{var f=document.createElement("iframe");document.body.appendChild(f);var m=f.contentWindow,v=m.document;v.open("image/svg+xml","replace"),v.write(c),v.close(),m.focus(),v.execCommand("SaveAs",!0,d),document.body.removeChild(f)}}else{var y=n.get("lang"),x='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=r}else{var b=document.createElement("a");b.download=r+"."+o,b.target="_blank",b.href=a;var A=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(A)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(ln),mn="__ec_magicType_stack__",vn=[["line","bar"],["stack"]],yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return s(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var r=this.model,i=r.get(["seriesIndex",n]);if(xn[n]){var o,a={series:[]};s(vn,(function(e){S(e,n)>=0&&s(e,(function(e){r.setIconStatus(e,"normal")}))})),r.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},(function(e){var t=e.subType,i=e.id,o=xn[n](t,i,e,r);o&&(y(o,e.option),a.series.push(o));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",c=e.getReferringComponents(u,I).models[0].componentIndex;a[u]=a[u]||[];for(var d=0;d<=c;d++)a[u][c]=a[u][c]||{};a[u][c].boundaryGap="bar"===n}}}));var l=n;"stack"===n&&(o=u({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),"emphasis"!==r.get(["iconStatus",n])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:a,newTitle:o,featureName:"magicType"})}},t}(ln),xn={line:function(e,t,n,r){if("bar"===e)return u({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,n,r){if("line"===e)return u({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,n,r){var i=n.get("stack")===mn;if("line"===e||"bar"===e)return r.setIconStatus("stack",i?"normal":"emphasis"),u({id:t,stack:i?"":mn},r.get(["option","stack"])||{},!0)}};r({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var _n=new Array(60).join("-"),bn="\t";function An(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var wn=new RegExp("[\t]+","g");function Sn(e,t){var n=e.split(new RegExp("\n*"+_n+"\n*","g")),r={series:[]};return s(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(bn)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=An(t.shift()).split(wn),r=[],i=d(n,(function(e){return{name:e,data:[]}})),o=0;o<t.length;o++){var a=An(t[o]).split(wn);r.push(a.shift());for(var s=0;s<a.length;s++)i[s]&&(i[s].data[o]=a[s])}return{series:i,categories:r}}(e),o=t[n],a=o.axisDim+"Axis";o&&(r[a]=r[a]||[],r[a][o.axisIndex]={data:i.categories},r.series=r.series.concat(i.series))}else{i=function(e){for(var t=e.split(/\n+/g),n=An(t.shift()),r=[],i=0;i<t.length;i++){var o=An(t[i]);if(o){var a=o.split(wn),s="",l=void 0,u=!1;isNaN(a[0])?(u=!0,s=a[0],a=a.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<a.length;c++)l.push(+a[c]);1===l.length&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}(e);r.series.push(i)}})),r}var Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=r.get("backgroundColor")||"#fff";var o=document.createElement("h4"),a=r.get("lang")||[];o.innerHTML=a[0]||r.get("title"),o.style.cssText="margin:10px 20px",o.style.color=r.get("textColor");var l=document.createElement("div"),u=document.createElement("textarea");l.style.cssText="overflow:auto";var c=r.get("optionToContent"),p=r.get("contentToOption"),h=function(e){var t,n,r,i=function(e){var t={},n=[],r=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var o=i.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;t[a]||(t[a]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[a].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:r}}(e);return{value:Q([(n=i.seriesGroupByCategoryAxis,r=[],s(n,(function(e,t){var n=e.categoryAxis,i=e.valueAxis.dim,o=[" "].concat(d(e.series,(function(e){return e.name}))),a=[n.model.getCategories()];s(e.series,(function(e){var t=e.getRawData();a.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var l=[o.join(bn)],u=0;u<a[0].length;u++){for(var c=[],p=0;p<a.length;p++)c.push(a[p][u]);l.push(c.join(bn))}r.push(l.join("\n"))})),r.join("\n\n"+_n+"\n\n")),(t=i.other,d(t,(function(e){var t=e.getRawData(),n=[e.name],r=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],o=t.getName(i),a=0;a<e-1;a++)r[a]=arguments[a];n.push((o?o+bn:"")+r.join(bn))})),n.join("\n")})).join("\n\n"+_n+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+_n+"\n\n"),meta:i.meta}}(e);if(X(c)){var g=c(t.getOption());Z(g)?l.innerHTML=g:K(g)&&l.appendChild(g)}else{u.readOnly=r.get("readOnly");var f=u.style;f.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",f.color=r.get("textColor"),f.borderColor=r.get("textareaBorderColor"),f.backgroundColor=r.get("textareaColor"),u.value=h.value,l.appendChild(u)}var m=h.meta,v=document.createElement("div");v.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),_=document.createElement("div");y+=";background-color:"+r.get("buttonColor"),y+=";color:"+r.get("buttonTextColor");var b=this;function A(){n.removeChild(i),b._dom=null}$(x,"click",A),$(_,"click",(function(){if(null==p&&null!=c||null!=p&&null==c)A();else{var e;try{e=X(p)?p(l,t.getOption()):Sn(u.value,m)}catch(n){throw A(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),A()}})),x.innerHTML=a[1],_.innerHTML=a[2],_.style.cssText=x.style.cssText=y,!r.get("readOnly")&&v.appendChild(_),v.appendChild(x),i.appendChild(o),i.appendChild(l),i.appendChild(v),l.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(ln);function In(e,t){return d(e,(function(e,n){var r=t&&t[n];if(ee(r)&&!te(r)){ee(e)&&!te(e)||(e={value:e});var i=null!=r.name&&null==e.name;return e=y(e,r),i&&delete e.name,e}return e}))}r({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];s(e.newOption.series,(function(e){var r=t.getSeriesByName(e.name)[0];if(r){var i=r.get("data");n.push({name:e.name,data:In(e.data,i)})}else n.push(J({type:"scatter"},e))})),t.mergeOption(y({series:n},e.newOption))}));var Cn=s,Tn=ne();function kn(e){var t=Tn(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onclick=function(e,t){!function(e){Tn(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(ln);r({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var Rn=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Dn=function(){function e(e,t,n){var r=this;this._targetInfoList=[];var i=Ln(t,e);s(Vn,(function(e,t){(!n||!n.include||S(n.include,t)>=0)&&e(i,r._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var r=Bn[e.brushType](0,n,t);e.__rangeOffset={offset:Gn[e.brushType](r.values,e.range,[1,1]),xyMinMax:r.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){s(e,(function(e){var r=this.findTargetInfo(e,t);r&&!0!==r&&s(r.coordSyses,(function(r){var i=Bn[e.brushType](1,r,e.range,!0);n(e,i.values,r,t)}))}),this)},e.prototype.setInputRanges=function(e,t){s(e,(function(e){var n,r,i,o,a,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=Bn[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?Gn[e.brushType](l.values,u.offset,(n=l.xyMinMax,r=u.xyMinMax,i=Zn(n),o=Zn(r),a=[i[0]/o[0],i[1]/o[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return d(this._targetInfoList,(function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:zt(r),isTargetByCursor:Wt(r,e,n.coordSysModel),getLinearBrushOtherExtent:Gt(r)}}))},e.prototype.controlSeries=function(e,t,n){var r=this.findTargetInfo(e,n);return!0===r||r&&S(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=Ln(t,e),i=0;i<n.length;i++){var o=n[i],a=e.panelId;if(a){if(o.panelId===a)return o}else for(var s=0;s<Nn.length;s++)if(Nn[s](r,o))return o}return!0},e}();function Pn(e){return e[0]>e[1]&&e.reverse(),e}function Ln(e,t){return re(e,t,{includeMainTypes:Rn})}var Vn={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,i=e.gridModels,o=w(),a={},l={};(n||r||i)&&(s(n,(function(e){var t=e.axis.grid.model;o.set(t.id,t),a[t.id]=!0})),s(r,(function(e){var t=e.axis.grid.model;o.set(t.id,t),l[t.id]=!0})),s(i,(function(e){o.set(e.id,e),a[e.id]=!0,l[e.id]=!0})),o.each((function(e){var i=e.coordinateSystem,o=[];s(i.getCartesians(),(function(e,t){(S(n,e.getAxis("x").model)>=0||S(r,e.getAxis("y").model)>=0)&&o.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:o[0],coordSyses:o,getPanelRect:En.grid,xAxisDeclared:a[e.id],yAxisDeclared:l[e.id]})})))},geo:function(e,t){s(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:En.geo})}))}},Nn=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],En={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(_(e)),t}},Bn={lineX:m(zn,0),lineY:m(zn,1),rect:function(e,t,n,r){var i=e?t.pointToData([n[0][0],n[1][0]],r):t.dataToPoint([n[0][0],n[1][0]],r),o=e?t.pointToData([n[0][1],n[1][1]],r):t.dataToPoint([n[0][1],n[1][1]],r),a=[Pn([i[0],o[0]]),Pn([i[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,n,r){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:d(n,(function(n){var o=e?t.pointToData(n,r):t.dataToPoint(n,r);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o})),xyMinMax:i}}};function zn(e,t,n,r){var i=n.getAxis(["x","y"][e]),o=Pn(d([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(r[e]),!0):i.toGlobalCoord(i.dataToCoord(r[e]))}))),a=[];return a[e]=o,a[1-e]=[NaN,NaN],{values:o,xyMinMax:a}}var Gn={lineX:m(Wn,0),lineY:m(Wn,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return d(e,(function(e,r){return[e[0]-n[0]*t[r][0],e[1]-n[1]*t[r][1]]}))}};function Wn(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function Zn(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Fn=s,Hn=oe("toolbox-dataZoom_"),Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(e,t,n,r){this._brushController||(this._brushController=new lt(n.getZr()),this._brushController.on("brush",l(this._onBrush,this)).mount()),function(e,t,n,r,i){var o=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(o="dataZoomSelect"===r.key&&r.dataZoomSelectActive);n._isZoomActive=o,e.setIconStatus("zoom",o?"emphasis":"normal");var a=new Dn(Xn(e),t,{include:["grid"]}),s=a.makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!o||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,r,n),function(e,t){e.setIconStatus("back",function(e){return kn(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){Yn[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},r=this.ecModel;this._brushController.updateCovers([]),new Dn(Xn(this.model),r,{include:["grid"]}).matchOutputRanges(t,r,(function(e,t,n){if("cartesian2d"===n.type){var r=e.brushType;"rect"===r?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[r],n,t)}})),function(e,t){var n=kn(e);Cn(t,(function(t,r){for(var i=n.length-1;i>=0&&!n[i][r];i--);if(i<0){var o=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(o){var a=o.getPercentRange();n[0][r]={dataZoomId:r,start:a[0],end:a[1]}}}})),n.push(t)}(r,n),this._dispatchZoomAction(n)}function i(e,t,i){var o=t.getAxis(e),a=o.model,s=function(e,t,n){var r;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(r=n)})),r}(e,a,r),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=Ke(0,i.slice(),o.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];Fn(e,(function(e,n){t.push(c(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(ln),Yn={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=kn(e),n=t[t.length-1];t.length>1&&t.pop();var r={};return Cn(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){r[n]=e;break}})),r}(this.ecModel))}};function Xn(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function jn(t){t.registerComponentModel(pn),t.registerComponentView(gn),cn("saveAsImage",fn),cn("magicType",yn),cn("dataView",Mn),cn("dataZoom",Un),cn("restore",On),e(sn)}function qn(e,t){return e.type===t}ie("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var r=t.getModel(n),i=[],o=Xn(r),a=re(e,o);return Fn(a.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Fn(a.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var o=e.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Hn+t+o};a[n]=o,i.push(a)}}));var Kn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return o(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),te(t)&&s(t,(function(e,r){Z(e)&&(e={type:e}),t[r]=u(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(r){var i,o=r.name;if(n.push(o),r.legendVisualProvider){var a=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(n=n.concat(a)),a.length?t=t.concat(a):i=!0}else i=!0;i&&ae(r)&&t.push(r.name)})),this._availableNames=n;var r=this.get("data")||t,i=w(),o=d(r,(function(e){return(Z(e)||se(e))&&(e={name:e}),i.get(e.name)?null:(i.set(e.name,!0),new B(e,this,this.ecModel))}),this);this._data=Q(o,(function(e){return!!e}))},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;s(n,(function(e){t[e.get("name")]=!1}))}t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;s(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;s(e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&S(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(C),$n=m,Jn=s,Qn=a,er=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return o(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new Qn),this.group.add(this._selectorGroup=new Qn),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),o=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===o?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(i,e,t,n,a,o,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=L(l,u,c),p=this.layoutInner(e,i,d,r,a,s),h=L(y({width:p.width,height:p.height},l),u,c);this.group.x=h.x-p.x,this.group.y=h.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=hn(p,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,r,i,o,a){var s=this.getContentGroup(),l=w(),u=t.get("selectedMode"),c=[];n.eachRawSeries((function(e){!e.get("legendHoverLink")&&c.push(e.id)})),Jn(t.getData(),(function(i,o){var a=i.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var d=new Qn;return d.newline=!0,void s.add(d)}var p=n.getSeriesByName(a)[0];if(!l.get(a))if(p){var h=p.getData(),g=h.getVisual("legendLineStyle")||{},f=h.getVisual("legendIcon"),m=h.getVisual("style"),v=this._createItem(p,a,o,i,t,e,g,m,f,u,r);v.on("click",$n(tr,a,null,r,c)).on("mouseover",$n(rr,p.name,null,r,c)).on("mouseout",$n(ir,p.name,null,r,c)),n.ssr&&v.eachChild((function(e){var t=le(e);t.seriesIndex=p.seriesIndex,t.dataIndex=o,t.ssrType="legend"})),l.set(a,!0)}else n.eachRawSeries((function(s){if(!l.get(a)&&s.legendVisualProvider){var d=s.legendVisualProvider;if(!d.containName(a))return;var p=d.indexOfName(a),h=d.getItemVisual(p,"style"),g=d.getItemVisual(p,"legendIcon"),f=ue(h.fill);f&&0===f[3]&&(f[3]=.2,h=J(J({},h),{fill:ce(f,"rgba")}));var m=this._createItem(s,a,o,i,t,e,{},h,g,u,r);m.on("click",$n(tr,null,a,r,c)).on("mouseover",$n(rr,null,a,r,c)).on("mouseout",$n(ir,null,a,r,c)),n.ssr&&m.eachChild((function(e){var t=le(e);t.seriesIndex=s.seriesIndex,t.dataIndex=o,t.ssrType="legend"})),l.set(a,!0)}}),this)}),this),i&&this._createSelector(i,t,r,o,a)},t.prototype._createSelector=function(e,t,n,r,i){var o=this.getSelectorGroup();Jn(e,(function(e){var r=e.type,i=new H({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect",legendId:t.id})}});o.add(i);var a=t.getModel("selectorLabel"),s=t.getModel(["emphasis","selectorLabel"]);de(i,{normal:a,emphasis:s},{defaultText:e.title}),pe(i)}))},t.prototype._createItem=function(e,t,n,r,i,o,a,s,l,u,c){var d=e.visualDrawType,p=i.get("itemWidth"),h=i.get("itemHeight"),g=i.isSelected(t),f=r.get("symbolRotate"),m=r.get("symbolKeepAspect"),y=r.get("icon"),x=function(e,t,n,r,i,o,a){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),Jn(e,(function(n,r){"inherit"===e[r]&&(e[r]=t[r])}))}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=0===e.lastIndexOf("empty",0)?"fill":"stroke",d=l.getShallow("decal");u.decal=d&&"inherit"!==d?ge(d,a):r.decal,"inherit"===u.fill&&(u.fill=r[i]);"inherit"===u.stroke&&(u.stroke=r[c]);"inherit"===u.opacity&&(u.opacity=("fill"===i?r:n).opacity);s(u,r);var p=t.getModel("lineStyle"),h=p.getLineStyle();if(s(h,n),"auto"===u.fill&&(u.fill=r.fill),"auto"===u.stroke&&(u.stroke=r.fill),"auto"===h.stroke&&(h.stroke=r.fill),!o){var g=t.get("inactiveBorderWidth"),f=u[c];u.lineWidth="auto"===g?r.lineWidth>0&&f?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),h.stroke=p.get("inactiveColor"),h.lineWidth=p.get("inactiveWidth")}return{itemStyle:u,lineStyle:h}}(l=y||l||"roundRect",r,a,s,d,g,c),_=new Qn,b=r.getModel("textStyle");if(!X(e.getLegendIcon)||y&&"inherit"!==y){var A="inherit"===y&&e.getData().getVisual("symbol")?"inherit"===f?e.getData().getVisual("symbolRotate"):f:0;_.add(function(e){var t=e.icon||"roundRect",n=fe(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:p,itemHeight:h,icon:l,iconRotate:A,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}))}else _.add(e.getLegendIcon({itemWidth:p,itemHeight:h,icon:l,iconRotate:f,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:m}));var w="left"===o?p+5:-5,S=o,M=i.get("formatter"),I=t;Z(M)&&M?I=M.replace("{name}",null!=t?t:""):X(M)&&(I=M(t));var C=g?b.getTextColor():r.get("inactiveColor");_.add(new H({style:he(b,{text:I,x:w,y:h/2,fill:C,align:S,verticalAlign:"middle"},{inheritColor:C})}));var T=new v({shape:_.getBoundingRect(),style:{fill:"transparent"}}),k=r.getModel("tooltip");return k.get("show")&&Y({el:T,componentModel:i,itemName:t,itemTooltipOption:k.option}),_.add(T),_.eachChild((function(e){e.silent=!0})),T.silent=!u,this.getContentGroup().add(_),pe(_),_.__legendDataIndex=n,_},t.prototype.layoutInner=function(e,t,n,r,i,o){var a=this.getContentGroup(),s=this.getSelectorGroup();V(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),i){V("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],p=e.get("selectorButtonGap",!0),h=e.getOrient().index,g=0===h?"width":"height",f=0===h?"height":"width",m=0===h?"y":"x";"end"===o?d[h]+=l[g]+p:u[h]+=c[g]+p,d[1-h]+=l[f]/2-c[f]/2,s.x=d[0],s.y=d[1],a.x=u[0],a.y=u[1];var v={x:0,y:0};return v[g]=l[g]+p+c[g],v[f]=Math.max(l[f],c[f]),v[m]=Math.min(0,c[m]+d[1-h]),v}return a.x=u[0],a.y=u[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(T);function tr(e,t,n,r){ir(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),rr(e,t,n,r)}function nr(e){for(var t,n=e.getZr().storage.getDisplayList(),r=0,i=n.length;r<i&&!(t=n[r].states.emphasis);)r++;return t&&t.hoverLayer}function rr(e,t,n,r){nr(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function ir(e,t,n,r){nr(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function or(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))}function ar(e,t,n){var r="allSelect"===e||"inverseSelect"===e,i={},o=[];n.eachComponent({mainType:"legend",query:t},(function(n){r?n[e]():n[e](t.name),sr(n,i),o.push(n.componentIndex)}));var a={};return n.eachComponent("legend",(function(e){s(i,(function(t,n){e[t?"select":"unSelect"](n)})),sr(e,a)})),r?{selected:a,legendIndex:o}:{name:t.name,selected:a}}function sr(e,t){var n=t||{};return s(e.getData(),(function(t){var r=t.get("name");if("\n"!==r&&""!==r){var i=e.isSelected(r);me(n,r)?n[r]=n[r]&&i:n[r]=i}})),n}function lr(e){e.registerComponentModel(Kn),e.registerComponentView(er),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,or),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(e){e.registerAction("legendToggleSelect","legendselectchanged",m(ar,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",m(ar,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",m(ar,"inverseSelect")),e.registerAction("legendSelect","legendselected",m(ar,"select")),e.registerAction("legendUnSelect","legendunselected",m(ar,"unSelect"))}(e)}var ur=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,r){var i=ve(t);e.prototype.init.call(this,t,n,r),cr(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),cr(this,this.option,t)},t.type="legend.scroll",t.defaultOption=ye(Kn.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Kn);function cr(e,t,n){var r=[1,1];r[e.getOrient().index]=0,xe(t,n,{type:"box",ignoreSize:!!r})}var dr=a,pr=["width","height"],hr=["x","y"],gr=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return o(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new dr),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new dr)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,r,i,o,a,s){var u=this;e.prototype.renderInner.call(this,t,n,r,i,o,a,s);var c=this._controllerGroup,d=n.get("pageIconSize",!0),p=te(d)?d:[d,d];g("pagePrev",0);var h=n.getModel("pageTextStyle");function g(e,t){var r=e+"DataIndex",o=F(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:l(u._pageGo,u,r,n,i)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});o.name=e,c.add(o)}c.add(new H({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1)},t.prototype.layoutInner=function(e,t,n,r,i,o){var a=this.getSelectorGroup(),s=e.getOrient().index,l=pr[s],u=hr[s],d=pr[1-s],p=hr[1-s];i&&V("horizontal",a,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),g=a.getBoundingRect(),f=[-g.x,-g.y],m=c(n);i&&(m[l]=n[l]-g[l]-h);var v=this._layoutContentAndController(e,r,m,s,l,d,p,u);if(i){if("end"===o)f[s]+=v[l]+h;else{var y=g[l]+h;f[s]-=y,v[u]-=y}v[l]+=g[l]+h,f[1-s]+=v[p]+v[d]/2-g[d]/2,v[d]=Math.max(v[d],g[d]),v[p]=Math.min(v[p],g[p]+f[1-s]),a.x=f[0],a.y=f[1],a.markRedraw()}return v},t.prototype._layoutContentAndController=function(e,t,n,r,i,o,a,s){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;V(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),V("horizontal",c,e.get("pageButtonItemGap",!0));var d=l.getBoundingRect(),p=c.getBoundingRect(),h=this._showController=d[i]>n[i],g=[-d.x,-d.y];t||(g[r]=l[s]);var f=[0,0],m=[-p.x,-p.y],y=_e(e.get("pageButtonGap",!0),e.get("itemGap",!0));h&&("end"===e.get("pageButtonPosition",!0)?m[r]+=n[i]-p[i]:f[r]+=p[i]+y);m[1-r]+=d[o]/2-p[o]/2,l.setPosition(g),u.setPosition(f),c.setPosition(m);var x={x:0,y:0};if(x[i]=h?n[i]:d[i],x[o]=Math.max(d[o],p[o]),x[a]=Math.min(0,p[a]+m[1-r]),u.__rectSize=n[i],h){var _={x:0,y:0};_[i]=Math.max(n[i]-p[i]-y,0),_[o]=x[o],u.setClipPath(new v({shape:_})),u.__rectSize=_[i]}else c.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var b=this._getPageInfo(e);return null!=b.pageIndex&&be(l,{x:b.contentPosition[0],y:b.contentPosition[1]},h?e:null),this._updatePageInfoView(e,b),x},t.prototype._pageGo=function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;s(["pagePrev","pageNext"],(function(r){var i=null!=t[r+"DataIndex"],o=n.childOfName(r);o&&(o.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),o.cursor=i?"pointer":"default")}));var r=n.childOfName("pageText"),i=e.get("pageFormatter"),o=t.pageIndex,a=null!=o?o+1:0,l=t.pageCount;r&&i&&r.setStyle("text",Z(i)?i.replace("{current}",null==a?"":a+"").replace("{total}",null==l?"":l+""):i({current:a,total:l}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,o=pr[i],a=hr[i],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,d=c?1:0,p={contentPosition:[n.x,n.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return p;var h=y(u);p.contentPosition[i]=-h.s;for(var g=s+1,f=h,m=h,v=null;g<=c;++g)(!(v=y(l[g]))&&m.e>f.s+r||v&&!x(v,f.s))&&(f=m.i>f.i?m:v)&&(null==p.pageNextDataIndex&&(p.pageNextDataIndex=f.i),++p.pageCount),m=v;for(g=s-1,f=h,m=h,v=null;g>=-1;--g)(v=y(l[g]))&&x(m,v.s)||!(f.i<m.i)||(m=f,null==p.pagePrevDataIndex&&(p.pagePrevDataIndex=f.i),++p.pageCount,++p.pageIndex),f=v;return p;function y(e){if(e){var t=e.getBoundingRect(),n=t[a]+e[a];return{s:n,e:n+t[o],i:e.__legendDataIndex}}}function x(e,t){return e.e>=t&&e.s<=t+r}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(r,i){var o=r.__legendDataIndex;null==n&&null!=o&&(n=i),o===e&&(t=i)})),null!=t?t:n):0;var t,n},t.type="legend.scroll",t}(er);function fr(t){e(lr),t.registerComponentModel(ur),t.registerComponentView(gr),function(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))}))}(t)}function mr(t){e(lr),e(fr)}function vr(e,t,n,r,i){return e?"polar"===e.type?(a=(o=e).getArea(),s=Ae(a.r0,1),l=Ae(a.r,1),new we({shape:{cx:Ae(o.cx,1),cy:Ae(o.cy,1),r0:s,r:l,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}})):"cartesian2d"===e.type?function(e,t,n){var r=e.getArea(),i=r.x,o=r.y,a=r.width,s=r.height,l=n.get(["lineStyle","width"])||0;return i-=l/2,o-=l/2,a+=l,s+=l,a=Math.ceil(a),i!==Math.floor(i)&&(i=Math.floor(i),a++),new v({shape:{x:i,y:o,width:a,height:s}})}(e,0,n):null:null;var o,a,s,l}var yr={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},xr=function(e){return Math.round(e.length/2)};var _r=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.prototype.getInitialData=function(e,t){return Se(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,n){var r=this.coordinateSystem;if(r&&r.clampData){var i=r.clampData(e),o=r.dataToPoint(i);if(n)s(r.getAxes(),(function(e,n){if("category"===e.type&&null!=t){var r=e.getTicksCoords(),a=e.getTickModel().get("alignWithLabel"),s=i[n],l="x1"===t[n]||"y1"===t[n];if(l&&!a&&(s+=1),r.length<2)return;if(2===r.length)return void(o[n]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var u=void 0,c=void 0,d=1,p=0;p<r.length;p++){var h=r[p].coord,g=p===r.length-1?r[p-1].tickValue+d:r[p].tickValue;if(g===s){c=h;break}if(g<s)u=h;else if(null!=u&&g>s){c=(h+u)/2;break}1===p&&(d=g-r[0].tickValue)}null==c&&(u?u&&(c=r[r.length-1].coord):c=r[0].coord),o[n]=e.toGlobalCoord(c)}}));else{var a=this.getData(),l=a.getLayout("offset"),u=a.getLayout("size"),c=r.getBaseAxis().isHorizontal()?0:1;o[c]+=l+u/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Me);Me.registerClass(_r);var br=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return o(t,e),t.prototype.getInitialData=function(){return Se(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=ye(_r.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(_r),Ar=function(){return function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),wr=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return o(t,e),t.prototype.getDefaultShape=function(){return new Ar},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=Math.max(t.r0||0,0),o=Math.max(t.r,0),a=.5*(o-i),s=i+a,l=t.startAngle,u=t.endAngle,c=t.clockwise,d=2*Math.PI,p=c?u-l<d:l-u<d;p||(l=u-(c?d:-d));var h=Math.cos(l),g=Math.sin(l),f=Math.cos(u),m=Math.sin(u);p?(e.moveTo(h*i+n,g*i+r),e.arc(h*s+n,g*s+r,a,-Math.PI+l,l,!c)):e.moveTo(h*o+n,g*o+r),e.arc(n,r,o,l,u,!c),e.arc(f*s+n,m*s+r,a,u-2*Math.PI,u-Math.PI,!c),0!==i&&e.arc(n,r,i,u,l,c)},t}(Ie);function Sr(e,t,n){return t*Math.sin(e)*(n?-1:1)}function Mr(e,t,n){return t*Math.cos(e)*(n?1:-1)}var Ir=Math.max,Cr=Math.min;var Tr=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return o(t,e),t.prototype.render=function(e,t,n,r){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var i=e.get("coordinateSystem");"cartesian2d"!==i&&"polar"!==i||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,r))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Te(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,r){var i,o=this.group,s=e.getData(),l=this._data,u=e.coordinateSystem,c=u.getBaseAxis();"cartesian2d"===u.type?i=c.isHorizontal():"polar"===u.type&&(i="angle"===c.dim);var d=e.isAnimationEnabled()?e:null,p=function(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&"category"===r.type&&"cartesian2d"===t.type)return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}(e,u);p&&this._enableRealtimeSort(p,s,n);var h=e.get("clip",!0)||p,g=function(e,t){var n=e.getArea&&e.getArea();if(qn(e,"cartesian2d")){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}(u,s);o.removeClipPath();var f=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),x=y.get("borderRadius")||0,_=[],b=this._backgroundEls,A=r&&r.isInitSort,w=r&&"changeAxisOrder"===r.type;function S(e){var t=Nr[u.type](s,e),n=function(e,t,n){var r="polar"===e.type?we:v;return new r({shape:Fr(t,n,e),silent:!0,z2:0})}(u,i,t);return n.useStyle(y.getItemStyle()),"cartesian2d"===u.type?n.setShape("r",x):n.setShape("cornerRadius",x),_[e]=n,n}s.diff(l).add((function(t){var n=s.getItemModel(t),r=Nr[u.type](s,t,n);if(m&&S(t),s.hasValue(t)&&Vr[u.type](r)){var a=!1;h&&(a=kr[u.type](g,r));var l=Or[u.type](e,s,t,r,i,d,c.model,!1,f);p&&(l.forceLabelAnimation=!0),Br(l,s,t,n,r,e,i,"polar"===u.type),A?l.attr({shape:r}):p?Rr(p,d,l,r,t,i,!1,!1):ke(l,{shape:r},e,t),s.setItemGraphicEl(t,l),o.add(l),l.ignore=a}})).update((function(t,n){var r=s.getItemModel(t),a=Nr[u.type](s,t,r);if(m){var v=void 0;0===b.length?v=S(n):((v=b[n]).useStyle(y.getItemStyle()),"cartesian2d"===u.type?v.setShape("r",x):v.setShape("cornerRadius",x),_[t]=v);var M=Nr[u.type](s,t),I=Fr(i,M,u);be(v,{shape:I},d,t)}var C=l.getItemGraphicEl(n);if(s.hasValue(t)&&Vr[u.type](a)){var T=!1;if(h&&(T=kr[u.type](g,a))&&o.remove(C),C?Oe(C):C=Or[u.type](e,s,t,a,i,d,c.model,!!C,f),p&&(C.forceLabelAnimation=!0),w){var k=C.getTextContent();if(k){var O=Re(k);null!=O.prevValue&&(O.prevValue=O.value)}}else Br(C,s,t,r,a,e,i,"polar"===u.type);A?C.attr({shape:a}):p?Rr(p,d,C,a,t,i,!0,w):be(C,{shape:a},e,t,null),s.setItemGraphicEl(t,C),C.ignore=T,o.add(C)}else o.remove(C)})).remove((function(t){var n=l.getItemGraphicEl(t);n&&De(n,e,t)})).execute();var M=this._backgroundGroup||(this._backgroundGroup=new a);M.removeAll();for(var I=0;I<_.length;++I)M.add(_[I]);o.add(M),this._backgroundEls=_,this._data=s},t.prototype._renderLarge=function(e,t,n){this._clear(),Wr(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Wr(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&vr(e.coordinateSystem,0,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var r=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var o=function(e){var n=t.getItemGraphicEl(e),r=n&&n.shape;return r&&Math.abs(i.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(t,o,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var r=[];return e.each(e.mapDimension(t.dim),(function(e,t){var i=n(t);i=null==i?NaN:i,r.push({dataIndex:t,mappedValue:i,ordinalNumber:e})})),r.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:d(r,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var r=n.scale,i=e.mapDimension(n.dim),o=Number.MAX_VALUE,a=0,s=r.getOrdinalMeta().categories.length;a<s;++a){var l=e.rawIndexOf(i,r.getRawOrdinalNumber(a)),u=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(u>o)return!0;o=u}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,r=n.getExtent(),i=Math.max(0,r[0]),o=Math.min(r[1],n.getOrdinalMeta().categories.length-1);i<=o;++i)if(e.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,r){if(this._isOrderChangedWithinSameData(e,t,n)){var i=this._dataSort(e,n,t);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,n){var r=t.baseAxis,i=this._dataSort(e,r,(function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(t){De(t,e,le(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Pe),kr={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=Ir(t.x,e.x),s=Cr(t.x+t.width,i),l=Ir(t.y,e.y),u=Cr(t.y+t.height,o),c=s<a,d=u<l;return t.x=c&&a>i?s:a,t.y=d&&l>o?u:l,t.width=c?0:s-a,t.height=d?0:u-l,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),c||d},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var i=Cr(t.r,e.r),o=Ir(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(n<0){r=t.r;t.r=t.r0,t.r0=r}return a}},Or={cartesian2d:function(e,t,n,r,i,o,a,s,l){var u=new v({shape:J({},r),z2:1});(u.__dataIndex=n,u.name="item",o)&&(u.shape[i?"height":"width"]=0);return u},polar:function(e,t,n,r,i,o,a,s,l){var u=!i&&l?wr:we,c=new u({shape:r,z2:1});c.name="item";var d,p,h=Er(i);if(c.calculateTextPosition=(d=h,p=({isRoundCap:u===wr}||{}).isRoundCap,function(e,t,n){var r=t.position;if(!r||r instanceof Array)return Ce(e,t,n);var i=d(r),o=null!=t.distance?t.distance:5,a=this.shape,s=a.cx,l=a.cy,u=a.r,c=a.r0,h=(u+c)/2,g=a.startAngle,f=a.endAngle,m=(g+f)/2,v=p?Math.abs(u-c)/2:0,y=Math.cos,x=Math.sin,_=s+u*y(g),b=l+u*x(g),A="left",w="top";switch(i){case"startArc":_=s+(c-o)*y(m),b=l+(c-o)*x(m),A="center",w="top";break;case"insideStartArc":_=s+(c+o)*y(m),b=l+(c+o)*x(m),A="center",w="bottom";break;case"startAngle":_=s+h*y(g)+Sr(g,o+v,!1),b=l+h*x(g)+Mr(g,o+v,!1),A="right",w="middle";break;case"insideStartAngle":_=s+h*y(g)+Sr(g,-o+v,!1),b=l+h*x(g)+Mr(g,-o+v,!1),A="left",w="middle";break;case"middle":_=s+h*y(m),b=l+h*x(m),A="center",w="middle";break;case"endArc":_=s+(u+o)*y(m),b=l+(u+o)*x(m),A="center",w="bottom";break;case"insideEndArc":_=s+(u-o)*y(m),b=l+(u-o)*x(m),A="center",w="top";break;case"endAngle":_=s+h*y(f)+Sr(f,o+v,!0),b=l+h*x(f)+Mr(f,o+v,!0),A="left",w="middle";break;case"insideEndAngle":_=s+h*y(f)+Sr(f,-o+v,!0),b=l+h*x(f)+Mr(f,-o+v,!0),A="right",w="middle";break;default:return Ce(e,t,n)}return(e=e||{}).x=_,e.y=b,e.align=A,e.verticalAlign=w,e}),o){var g=i?"r":"endAngle",f={};c.shape[g]=i?r.r0:r.startAngle,f[g]=r[g],(s?be:ke)(c,{shape:f},o)}return c}};function Rr(e,t,n,r,i,o,a,s){var l,u;o?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(a?be:ke)(n,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?be:ke)(n,{shape:u},c,i)}function Dr(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var Pr=["x","y","width","height"],Lr=["cx","cy","r","startAngle","endAngle"],Vr={cartesian2d:function(e){return!Dr(e,Pr)},polar:function(e){return!Dr(e,Lr)}},Nr={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),i=n?function(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var r=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,i,o)}(n,r):0,o=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+o*i/2,y:r.y+a*i/2,width:r.width-o*i,height:r.height-a*i}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Er(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function Br(e,t,n,r,i,o,a,l){var u=t.getItemVisual(n,"style");if(l){if(!o.get("roundCap")){var c=e.shape,d=Le(r.getModel("itemStyle"),c,!0);J(c,d),e.setShape(c)}}else{var p=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",p)}e.useStyle(u);var h=r.getShallow("cursor");h&&e.attr("cursor",h);var g=l?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=Ve(r);de(e,f,{labelFetcher:o,labelDataIndex:n,defaultText:Ne(o.getData(),n),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:g});var m=e.getTextContent();if(l&&m){var v=r.get(["label","position"]);e.textConfig.inside="middle"===v||null,function(e,t,n,r){if(se(r))e.setTextConfig({rotation:r});else if(te(t))e.setTextConfig({rotation:0});else{var i,o=e.shape,a=o.clockwise?o.startAngle:o.endAngle,s=o.clockwise?o.endAngle:o.startAngle,l=(a+s)/2,u=n(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=l;break;case"startAngle":case"insideStartAngle":i=a;break;case"endAngle":case"insideEndAngle":i=s;break;default:return void e.setTextConfig({rotation:0})}var c=1.5*Math.PI-i;"middle"===u&&c>Math.PI/2&&c<1.5*Math.PI&&(c-=Math.PI),e.setTextConfig({rotation:c})}}(e,"outside"===v?g:v,Er(a),r.get(["label","rotate"]))}Ee(m,f,o.getRawValue(n),(function(e){return We(t,e)}));var y=r.getModel(["emphasis"]);Be(e,y.get("focus"),y.get("blurScope"),y.get("disabled")),ze(e,r),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(i)&&(e.style.fill="none",e.style.stroke="none",s(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var zr=function(){return function(){}}(),Gr=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return o(t,e),t.prototype.getDefaultShape=function(){return new zr},t.prototype.buildPath=function(e,t){for(var n=t.points,r=this.baseDimIdx,i=1-this.baseDimIdx,o=[],a=[],s=this.barWidth,l=0;l<n.length;l+=3)a[r]=s,a[i]=n[l+2],o[r]=n[l+r],o[i]=n[l+i],e.rect(o[0],o[1],a[0],a[1])},t}(Ie);function Wr(e,t,n,r){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new Gr({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),n&&n.push(c)}var d=new Gr({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=o,d.largeDataIndices=a,d.barWidth=s,t.add(d),d.useStyle(i.getVisual("style")),d.style.stroke=null,le(d).seriesIndex=e.seriesIndex,e.get("silent")||(d.on("mousedown",Zr),d.on("mousemove",Zr)),n&&n.push(d)}var Zr=Ge((function(e){var t=function(e,t,n){for(var r=e.baseDimIdx,i=1-r,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,d=o.length/3;c<d;c++){var p=3*c;if(l[r]=u,l[i]=o[p+2],s[r]=o[p+r],s[i]=o[p+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return a[c]}return-1}(this,e.offsetX,e.offsetY);le(this).dataIndex=t>=0?t:null}),30,!1);function Fr(e,t,n){if(qn(n,"cartesian2d")){var r=t,i=n.getArea();return{x:e?r.x:i.x,y:e?i.y:r.y,width:e?r.width:i.width,height:e?i.height:r.height}}var o=t;return{cx:(i=n.getArea()).cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:2*Math.PI}}function Hr(e){e.registerChartView(Tr),e.registerSeriesModel(br),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,m(Fe,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ze("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,{seriesType:"bar",reset:function(e,t,n){var r=e.getData(),i=e.get("sampling"),o=e.coordinateSystem,a=r.count();if(a>10&&"cartesian2d"===o.type&&i){var s=o.getBaseAxis(),l=o.getOtherAxis(s),u=s.getExtent(),c=n.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(c||1),p=Math.round(a/d);if(isFinite(p)&&p>1){"lttb"===i?e.setData(r.lttbDownSample(r.mapDimension(l.dim),1/p)):"minmax"===i&&e.setData(r.minmaxDownSample(r.mapDimension(l.dim),1/p));var h=void 0;Z(i)?h=yr[i]:X(i)&&(h=i),h&&e.setData(r.downSample(r.mapDimension(l.dim),1/p,h,xr))}}}}),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}export{qt as D,He as a,mr as b,Hr as c,Ye as d,Xt as e,Jt as f,an as g,Ut as h,jn as i,qe as o,Ke as s};
