import{i as e,_ as a,a as t,y as r,s,t as n,r as i,b as o,c as l,d as u}from"./poet_sankey-CXuG82KG.js";import{v as h}from"./vintage-Fu1xNemR.js";import{d,s as g,w as m,o as y,a as c,c as p,r as E,f as v,F as b,j as B,g as f,u as Y,n as D,t as w}from"./index-5VF5cRbG.js";import{aB as z,bd as S,b7 as A,b9 as N,ba as x,b8 as C,bR as j,bb as I}from"./installCanvasRenderer-B0UAo2nS.js";import{h as k}from"./install-rkyIBmIs.js";const G=[{"李白":"/Poetry_Visualization/assets/%E6%9D%8E%E7%99%BD-B-eWIqXD.png","杜甫":"/Poetry_Visualization/assets/%E6%9D%9C%E7%94%AB-3Nv6EyS1.png","储光羲":"/Poetry_Visualization/assets/%E5%82%A8%E5%85%89%E7%BE%B2-Ck1WI3iB.png","韦应物":"/Poetry_Visualization/assets/%E9%9F%A6%E5%BA%94%E7%89%A9-B1oxDMFE.png","卢照邻":"/Poetry_Visualization/assets/%E5%8D%A2%E7%85%A7%E9%82%BB-455nl6rT.png","孟浩然":"/Poetry_Visualization/assets/%E5%AD%9F%E6%B5%A9%E7%84%B6-DQbBSjZs.png","韩愈":"/Poetry_Visualization/assets/%E9%9F%A9%E6%84%88-DoFyIKit.png","白居易":"/Poetry_Visualization/assets/%E7%99%BD%E5%B1%85%E6%98%93-DHRsq3Vg.png","高适":"/Poetry_Visualization/assets/%E9%AB%98%E9%80%82-pWzUZFMs.png"}],F={id:"relation-graph"},P=d({__name:"RelationGraphComp",props:{nodes:{type:Array,required:!0,default:()=>[]},links:{type:Array,required:!0,default:()=>[]},infos:{type:Object,required:!0},id:{type:Number,required:!0}},setup(a){z([S,A,k,e,N,x,C]);const t=a,r=g(),s=e=>new Promise((function(a){const r=document.createElement("canvas"),s=r.getContext("2d"),n=new Image;n.onload=function(){let e=n.width/2,t=n.height/2;var i=n.width;r.width=i,r.height=i,s.clearRect(0,0,i,i),s.save(),s.beginPath();var o=n.width/2;s.arc(o,o,o,0,2*Math.PI),s.clip(),s.drawImage(n,e-o,t-o,i,i,0,0,i,i),s.restore(),a(r.toDataURL("image/png",1))},n.src=G[t.id][e]})),n=e=>{var a=[];let t=e;for(var n=0;n<t.length;n++){var i=t[n],o=s(i.name);a.push(o)}Promise.all(a).then((function(e){for(var a=0;a<e.length;a++){var s="image://"+e[a];t[a].symbol=s}r.value.setOption({series:[{data:t}]})}))},i=()=>{r.value&&r.value.dispose();var e=document.getElementById("relation-graph");e.style.width="100%",e.style.height="100%";let a=JSON.parse(JSON.stringify(h));j("vintage",a),r.value=I(e,"vintage");let s=((e,a)=>{let t=[];for(let r=0;r<e.length;r++){let s={id:e[r].name,name:e[r].name,category:e[r].community,symbolSize:e[r].symbolSize,gender:a[e[r].name].Gender,birth:a[e[r].name].YearBirth,death:a[e[r].name].YearDeath,address:a[e[r].name].Address,avatar:a[e[r].name].avatar,symbol:a[e[r].name].avatar,x:e[r].x,y:e[r].y};t.push(s)}return t})(t.nodes,t.infos),i=[],o=new Set;for(let t=0;t<s.length;t++)o.add(s[t].category);for(const t of o)i.push({name:t});var l;(l={tooltip:{textStyle:{fontFamily:"ContentFont",fontSize:18}},itemStyle:{borderWidth:2,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)",shadowOffsetX:2,shadowOffsetY:2},toolbox:{show:!0,feature:{saveAsImage:{show:!0,title:"保存为png",type:"png"},restore:{title:"重置"}},orient:"horizontal",left:"right",top:"top"},title:{text:"诗人关系网络图",left:"center",textStyle:{fontFamily:"TitleFont",fontSize:25}},series:[{name:"Relation Graph",type:"graph",top:"18%",bottom:"15%",layout:"none",data:t.nodes.map((e=>({...e,symbol:`image://${e.avatar}`,symbolKeepAspect:!0,edgeSymbol:"circle"}))),links:t.links.map((e=>({...e,lineStyle:{color:e.color}}))),categories:i,roam:!0,edgeSymbol:["arrow","arrow"],edgeSymbolSize:6,label:{show:!0,position:"bottom",formatter:"{b}",fontFamily:"ContentFont",fontSize:16},draggable:!0,focusNodeAdjacency:!0,labelLayout:{hideOverlap:!0},scaleLimit:{min:.4,max:2},lineStyle:{color:function(e){var a;return(null==(a=e.data.lineStyle)?void 0:a.color)||"#4f8fa7"},curveness:.15,width:2,opacity:.8},tooltip:{formatter:function(e){return"node"===e.dataType?`\n                                        <strong>姓名：</strong>${e.data.name}<br/>\n                                        <strong>性别：</strong>${e.data.gender}<br/>\n                                        <strong>出生年份：</strong>${e.data.birth}<br/>\n                                        <strong>死亡年份：</strong>${e.data.death}<br/>\n                                        <strong>常驻地：</strong>${e.data.address}<br/>\n                                    `:"edge"===e.dataType?`${e.data.source} ↔︎ ${e.data.target}`:""}}}]})&&r.value.setOption(l,{notMerge:!0}),n(s),r.value.on("restore",(()=>{n(s)}))};return m((()=>t.id),(()=>{i()})),y((()=>{i()})),(e,a)=>(c(),p("div",F))}}),_=[{name:"李白",degree:10,community:1,x:50,y:40,symbolSize:60},{name:"杜甫",degree:12,community:2,x:20,y:30,symbolSize:45},{name:"卢照邻",degree:9,community:1,x:25,y:50,symbolSize:50},{name:"韦应物",degree:53,community:1,x:20,y:40,symbolSize:40},{name:"高适",degree:72,community:1,x:12,y:45,symbolSize:40},{name:"白居易",degree:264,community:1,x:60,y:60,symbolSize:40},{name:"韩愈",degree:148,community:1,x:25,y:25,symbolSize:40},{name:"储光羲",degree:39,community:1,x:35,y:35,symbolSize:14},{name:"孟浩然",degree:51,community:1,x:45,y:45,symbolSize:20}],V=[{source:"孟浩然",target:"李白",color:"#cd9957"},{source:"李白",target:"杜甫"},{source:"李白",target:"白居易"},{source:"李白",target:"高适"},{source:"李白",target:"韩愈"},{source:"杜甫",target:"白居易"},{source:"杜甫",target:"高适"},{source:"杜甫",target:"孟浩然"},{source:"杜甫",target:"储光羲"},{source:"卢照邻",target:"李白"},{source:"卢照邻",target:"杜甫"},{source:"卢照邻",target:"高适"},{source:"卢照邻",target:"孟浩然"},{source:"卢照邻",target:"韦应物"}],O={"李白":{ChineseName:"李白",EnglishName:"Li Bai",Gender:"男",YearBirth:"701",EraBirth:"长安",EraYearBirth:"1",YearDeath:"762",EraDeath:"宝应",EraYearDeath:"1",Address:"任城",avatar:"https://ziyuan.guwendao.net/authorImg300/LiBai.jpg",desc:"诗词风格豪放飘逸、意境奇妙。一生渴望入仕实现抱负，曾游历四方、赐金放还。代表作有《将进酒》《静夜思》。 "},"杜甫":{ChineseName:"杜甫",EnglishName:"Du Fu",Gender:"男",YearBirth:"712",EraBirth:"先天",EraYearBirth:"1",YearDeath:"770",EraDeath:"大历",EraYearDeath:"5",Address:"长安",avatar:"https://ziyuan.guwendao.net/authorImg300/DuFu.jpg",desc:"生活于唐朝由盛转衰时期，历经颠沛流离。其诗词风格沉郁顿挫，多反映社会现实与人民疾苦。代表作有《登高》《茅屋为秋风所破歌》。 "},"卢照邻":{ChineseName:"卢照邻",EnglishName:"Lu Zhaolin",Gender:"男",YearBirth:"634",EraBirth:"贞观",EraYearBirth:"8",YearDeath:"686",EraDeath:"垂拱",EraYearDeath:"2",Address:"范阳",avatar:"https://ziyuan.guwendao.net/authorImg300/LuZhaolin.jpg",desc:"初唐诗人，诗词风格豪迈奔放、意境开阔。曾为邓王李元裕府典签，后染风疾，饱受病痛折磨。代表作有《长安古意》《行路难》。 "},"韦应物":{ChineseName:"韦应物",EnglishName:"Wei Yingwu",Gender:"男",YearBirth:"737",EraBirth:"开元",EraYearBirth:"25",YearDeath:"未详",EraDeath:"未详",EraYearDeath:"未详",Address:"长安",avatar:"https://ziyuan.guwendao.net/authorImg300/WeiYingwu.jpg",desc:"中唐时期诗人，其诗词风格恬淡高远，以善于描写山水田园著称，诗风简淡幽远。曾入仕为官，经历丰富。代表作有《滁州西涧》《寄全椒山中道士》。 "},"高适":{ChineseName:"高适",EnglishName:"Gao Shi",Gender:"男",YearBirth:"700",EraBirth:"久视",EraYearBirth:"1",YearDeath:"765",EraDeath:"永泰",EraYearDeath:"1",Address:"蓨县",avatar:"https://ziyuan.guwendao.net/authorImg300/GaoShi.jpg",desc:"其诗词风格豪迈奔放、慷慨悲壮，多反映边塞生活。曾入幕河西，后任淮南节度使等职。代表作有《燕歌行》《别董大》。 "},"白居易":{ChineseName:"白居易",EnglishName:"Bai Juyi",Gender:"男",YearBirth:"772",EraBirth:"大历",EraYearBirth:"7",YearDeath:"846",EraDeath:"会昌",EraYearDeath:"6",Address:"太谷",avatar:"https://ziyuan.guwendao.net/authorImg300/BaiJuyi.jpg",desc:"其诗词风格通俗易懂、平易近人。早年仕途顺利，后因直言被贬。经历丰富使其作品多反映社会现实。代表作有《琵琶行》《卖炭翁》。 "},"韩愈":{ChineseName:"韩愈",EnglishName:"Han Yu",Gender:"男",YearBirth:"768",EraBirth:"大历",EraYearBirth:"3",YearDeath:"825",EraDeath:"宝历",EraYearDeath:"1",Address:"槁城",avatar:"https://ziyuan.guwendao.net/authorImg300/HanYu.jpg",desc:"唐代文学家，其诗词风格古朴雄健、气势磅礴。早年仕途坎坷，后官至吏部侍郎。倡导古文运动，对后世影响深远。代表作有《左迁至蓝关示侄孙湘》《山石》。 "},"储光羲":{ChineseName:"储光羲",EnglishName:"Chu Guangxi",Gender:"男",YearBirth:"706",EraBirth:"神龙",EraYearBirth:"2",YearDeath:"762",EraDeath:"宝应",EraYearDeath:"1",Address:"延陵",avatar:"https://ziyuan.guwendao.net/authorImg300/ChuGuangxi.jpg",desc:"唐代诗人，其诗词多写田园生活与山水风光，风格质朴自然、恬淡闲适。曾任太祝等职，后因安史之乱受牵连。代表作有《田家即事》《钓鱼湾》。 "},"孟浩然":{ChineseName:"孟浩然",EnglishName:"Meng Haoran",Gender:"男",YearBirth:"689",EraBirth:"永昌",EraYearBirth:"1",YearDeath:"740",EraDeath:"开元",EraYearDeath:"28",Address:"襄阳",avatar:"https://ziyuan.guwendao.net/authorImg300/MengHaoran.jpg",desc:"山水田园派诗人，风格清新自然、意境悠远。一生大部分时间在家乡隐居，曾游历四方。代表作有《春晓》《过故人庄》。 "}},$={class:"poet-summary-view"},L={class:"dynasty-choose"},R=["onClick"],q={class:"main"},M={class:"left"},W={class:"right"},H=d({__name:"PoetSummaryView",setup(e){const h=E(0),d=["唐","宋","元"],g=E([]),m=E([]),z=E([]),S=E({nodes:[],links:[]}),A=e=>{let a=Object.entries(e).sort(((e,a)=>a[1]-e[1])),t=[],r=[],s=[],n=16;for(let o=0;o<a.length&&(i.hasOwnProperty(d[h.value]+a[o][0])&&(t.push(a[o][0]),r.push(a[o][1]),s.push(i[d[h.value]+a[o][0]]),n--),0!==n);o++);return[t,r,s]},N=async e=>{switch(h.value=e,e){case 0:[g.value,m.value,z.value]=A(u),S.value=n;break;case 1:[g.value,m.value,z.value]=A(l),S.value=s;break;case 2:[g.value,m.value,z.value]=A(o),S.value=r}};return y((async()=>{N(0)})),(e,r)=>(c(),p("div",$,[v("div",L,[(c(),p(b,null,B(d,((e,a)=>v("button",{key:a,class:D(["dynasty-button",{active:h.value===a}]),onClick:e=>N(a)},w(e),11,R))),64))]),v("div",q,[v("div",M,[f(a,{info:z.value,id:h.value,regionName:g.value,regionValue:m.value},null,8,["info","id","regionName","regionValue"]),f(t,{nodes:S.value.nodes,links:S.value.links},null,8,["nodes","links"])]),v("div",W,[f(P,{nodes:Y(_),links:Y(V),infos:Y(O),id:h.value},null,8,["nodes","links","infos","id"])])])]))}});export{H as default};
