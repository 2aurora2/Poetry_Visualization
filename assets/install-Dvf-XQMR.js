import{_ as t,f as e,K as a,al as i,G as n,a1 as r,ap as o,N as s,q as l,s as c,C as d,dT as u,A as p,e as h,z as g,V as m,R as y,a8 as f,a7 as v,J as x,X as S,u as I,y as b,ba as A,d$ as M,bp as T,e2 as w,bQ as _,T as N,cj as D,ar as L,br as P,a9 as k,ai as C,av as E,aw as V,ay as G,bT as z,I as B,bf as R,be as j,co as F,aD as O,e3 as q,b7 as H,bK as K,Y as X}from"./vintage-DQ7gMePE.js";import{c as Y,d as J}from"./install-DXepvbsF.js";var Q=u.value;function U(t,e){return a({show:e},t)}var W=function(d){function u(){var t=null!==d&&d.apply(this,arguments)||this;return t.type=u.type,t}return t(u,d),u.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),d=this.get("splitNumber"),u=this.get("scale"),p=this.get("axisLine"),h=this.get("axisTick"),g=this.get("axisLabel"),m=this.get("axisName"),y=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),v=this.get("axisNameGap"),x=this.get("triggerEvent"),S=e(this.get("indicator")||[],(function(e){null!=e.max&&e.max>0&&!e.min?e.min=0:null!=e.min&&e.min<0&&!e.max&&(e.max=0);var S=m;null!=e.color&&(S=a({color:e.color},m));var I=i(n(e),{boundaryGap:t,splitNumber:d,scale:u,axisLine:p,axisTick:h,axisLabel:g,name:e.text,showName:y,nameLocation:"end",nameGap:v,nameTextStyle:S,triggerEvent:x},!1);if(r(f)){var b=I.name;I.name=f.replace("{value}",null!=b?b:"")}else o(f)&&(I.name=f(I.name,I));var A=new s(I,null,this.ecModel);return l(A,c.prototype),A.mainType="radar",A.componentIndex=this.componentIndex,A}),this);this._indicatorModels=S},u.prototype.getIndicatorModels=function(){return this._indicatorModels},u.type="radar",u.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:i({lineStyle:{color:"#bbb"}},Q.axisLine),axisLabel:U(Q.axisLabel,!1),axisTick:U(Q.axisTick,!1),splitLine:U(Q.splitLine,!0),splitArea:U(Q.splitArea,!0),indicator:[]},u}(d),$=["axisLine","axisTickLabel","axisName"],Z=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.type=n.type,t}return t(n,i),n.prototype.render=function(t,e,a){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},n.prototype._buildAxes=function(t){var a=t.coordinateSystem,i=a.getIndicatorAxes(),n=e(i,(function(t){var e=t.model.get("showName")?t.name:"";return new p(t.model,{axisName:e,position:[a.cx,a.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}));h(n,(function(t){h($,t.add,t),this.group.add(t.getGroup())}),this)},n.prototype._buildSplitLineAndArea=function(t){var i=t.coordinateSystem,n=i.getIndicatorAxes();if(n.length){var r=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),d=o.get("show"),u=s.get("show"),p=l.get("color"),S=c.get("color"),I=g(p)?p:[p],b=g(S)?S:[S],A=[],M=[];if("circle"===r)for(var T=n[0].getTicksCoords(),w=i.cx,_=i.cy,N=0;N<T.length;N++){if(d)A[G(A,I,N)].push(new m({shape:{cx:w,cy:_,r:T[N].coord}}));if(u&&N<T.length-1)M[G(M,b,N)].push(new y({shape:{cx:w,cy:_,r0:T[N].coord,r:T[N+1].coord}}))}else{var D,L=e(n,(function(t,a){var n=t.getTicksCoords();return D=null==D?n.length-1:Math.min(n.length-1,D),e(n,(function(t){return i.coordToPoint(t.coord,a)}))})),P=[];for(N=0;N<=D;N++){for(var k=[],C=0;C<n.length;C++)k.push(L[C][N]);if(k[0]&&k.push(k[0].slice()),d)A[G(A,I,N)].push(new f({shape:{points:k}}));if(u&&P)M[G(M,b,N-1)].push(new v({shape:{points:k.concat(P)}}));P=k.slice().reverse()}}var E=l.getLineStyle(),V=c.getAreaStyle();h(M,(function(t,e){this.group.add(x(t,{style:a({stroke:"none",fill:b[e%b.length]},V),silent:!0}))}),this),h(A,(function(t,e){this.group.add(x(t,{style:a({fill:"none",stroke:I[e%I.length]},E),silent:!0}))}),this)}function G(t,e,a){var i=a%e.length;return t[i]=t[i]||[],i}},n.type="radar",n}(S),tt=function(e){function a(t,a,i){var n=e.call(this,t,a,i)||this;return n.type="value",n.angle=0,n.name="",n}return t(a,e),a}(I),et=function(){function t(t,a,i){this.dimensions=[],this._model=t,this._indicatorAxes=e(t.getIndicatorModels(),(function(t,e){var a="indicator_"+e,i=new tt(a,new A);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(a),i}),this),this.resize(t,i)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var a=this._indicatorAxes[e];return this.coordToPoint(a.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var a=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(a),this.cy-t*Math.sin(a)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,a=t[1]-this.cy,i=Math.sqrt(e*e+a*a);e/=i,a/=i;for(var n,r=Math.atan2(-a,e),o=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var c=this._indicatorAxes[l],d=Math.abs(r-c.angle);d<o&&(n=c,s=l,o=d)}return[s,+(n&&n.coordToData(i))]},t.prototype.resize=function(t,e){var a=t.get("center"),i=e.getWidth(),n=e.getHeight(),o=Math.min(i,n)/2;this.cx=b(a[0],i),this.cy=b(a[1],n),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(r(s)||T(s))&&(s=[0,s]),this.r0=b(s[0],o),this.r=b(s[1],o),h(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var a=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;a=Math.atan2(Math.sin(a),Math.cos(a)),t.angle=a}),this)},t.prototype.update=function(t,e){var a=this._indicatorAxes,i=this._model;h(a,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,n){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var r=e.getData();h(a,(function(t){t.scale.unionExtentFromData(r,r.mapDimension(t.dim))}))}}),this);var n=i.get("splitNumber"),r=new A;r.setExtent(0,n),r.setInterval(1),h(a,(function(t,e){M(t.scale,t.model,r)}))},t.prototype.convertToPixel=function(t,e,a){return null},t.prototype.convertFromPixel=function(t,e,a){return null},t.prototype.containPoint=function(t){return!1},t.create=function(e,a){var i=[];return e.eachComponent("radar",(function(n){var r=new t(n,e,a);i.push(r),n.coordinateSystem=r})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("radarIndex")||0])})),i},t.dimensions=[],t}();function at(t){t.registerCoordinateSystem("radar",et),t.registerComponentModel(W),t.registerComponentView(Z),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each((function(t){e.setItemVisual(t,"legendIcon","roundRect")})),e.setVisual("legendIcon","roundRect")}})}function it(t){t.eachSeriesByType("radar",(function(t){var e=t.getData(),a=[],i=t.coordinateSystem;if(i){var n=i.getIndicatorAxes();h(n,(function(t,r){e.each(e.mapDimension(n[r].dim),(function(t,e){a[e]=a[e]||[];var n=i.dataToPoint(t,r);a[e][r]=nt(n)?n:rt(i)}))})),e.each((function(t){var n=w(a[t],(function(t){return nt(t)}))||rt(i);a[t].push(n.slice()),e.setItemLayout(t,a[t])}))}}))}function nt(t){return!isNaN(t[0])&&!isNaN(t[1])}function rt(t){return[t.cx,t.cy]}function ot(t){var e=t.polar;if(e){g(e)||(e=[e]);var a=[];h(e,(function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],g(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):a.push(e)})),t.polar=a}h(t.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var st=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.type=r.type,t}return t(r,i),r.prototype.render=function(t,i,r){var o=t.coordinateSystem,s=this.group,l=t.getData(),c=this._data;function d(t,e){var a=t.getItemVisual(e,"symbol")||"circle";if("none"!==a){var i=R(t.getItemVisual(e,"symbolSize")),n=j(a,-1,-1,2,2),r=t.getItemVisual(e,"symbolRotate")||0;return n.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:r*Math.PI/180||0}),n}}function u(e,a,i,n,r,o){i.removeAll();for(var s=0;s<a.length-1;s++){var l=d(n,r);l&&(l.__dimIdx=s,e[s]?(l.setPosition(e[s]),B[o?"initProps":"updateProps"](l,{x:a[s][0],y:a[s][1]},t,r)):l.setPosition(a[s]),i.add(l))}}function p(t){return e(t,(function(t){return[o.cx,o.cy]}))}l.diff(c).add((function(e){var a=l.getItemLayout(e);if(a){var i=new v,n=new f,r={shape:{points:a}};i.shape.points=p(a),n.shape.points=p(a),_(i,r,t,e),_(n,r,t,e);var o=new N,s=new N;o.add(n),o.add(i),o.add(s),u(n.shape.points,a,s,l,e,!0),l.setItemGraphicEl(e,o)}})).update((function(e,a){var i=c.getItemGraphicEl(a),n=i.childAt(0),r=i.childAt(1),o=i.childAt(2),s={shape:{points:l.getItemLayout(e)}};s.shape.points&&(u(n.shape.points,s.shape.points,o,l,e,!1),D(r),D(n),L(n,s,t),L(r,s,t),l.setItemGraphicEl(e,i))})).remove((function(t){s.remove(c.getItemGraphicEl(t))})).execute(),l.eachItemGraphicEl((function(t,e){var i=l.getItemModel(e),r=t.childAt(0),o=t.childAt(1),c=t.childAt(2),d=l.getItemVisual(e,"style"),u=d.fill;s.add(t),r.useStyle(a(i.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:u})),P(r,i,"lineStyle"),P(o,i,"areaStyle");var p=i.getModel("areaStyle"),g=p.isEmpty()&&p.parentModel.isEmpty();o.ignore=g,h(["emphasis","select","blur"],(function(t){var e=i.getModel([t,"areaStyle"]),a=e.isEmpty()&&e.parentModel.isEmpty();o.ensureState(t).ignore=a&&g})),o.useStyle(a(p.getAreaStyle(),{fill:u,opacity:.7,decal:d.decal}));var m=i.getModel("emphasis"),y=m.getModel("itemStyle").getItemStyle();c.eachChild((function(t){if(t instanceof k){var a=t.style;t.useStyle(C({image:a.image,x:a.x,y:a.y,width:a.width,height:a.height},d))}else t.useStyle(d),t.setColor(u),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=n(y);var r=l.getStore().get(l.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),E(t,V(i),{labelFetcher:l.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:u,defaultOpacity:d.opacity})})),G(t,m.get("focus"),m.get("blurScope"),m.get("disabled"))})),this._data=l},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(z),lt=function(a){function i(){var t=null!==a&&a.apply(this,arguments)||this;return t.type=i.type,t.hasSymbolVisual=!0,t}return t(i,a),i.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new F(O(this.getData,this),O(this.getRawData,this))},i.prototype.getInitialData=function(t,e){return Y(this,{generateCoord:"indicator_",generateCoordCount:1/0})},i.prototype.formatTooltip=function(t,a,i){var n=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),o=this.getData().getName(t),s=""===o?this.name:o,l=q(this,t);return H("section",{header:s,sortBlocks:!0,blocks:e(r,(function(e){var a=n.get(n.mapDimension(e.dim),t);return H("nameValue",{markerType:"subItem",markerColor:l,name:e.name,value:a,sortParam:a})}))})},i.prototype.getTooltipPosition=function(t){if(null!=t)for(var a=this.getData(),i=this.coordinateSystem,n=a.getValues(e(i.dimensions,(function(t){return a.mapDimension(t)})),t),r=0,o=n.length;r<o;r++)if(!isNaN(n[r])){var s=i.getIndicatorAxes();return i.coordToPoint(s[r].dataToCoord(n[r]),r)}},i.type="series.radar",i.dependencies=["radar"],i.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},i}(K);function ct(t){X(at),t.registerChartView(st),t.registerSeriesModel(lt),t.registerLayout(it),t.registerProcessor(J("radar")),t.registerPreprocessor(ot)}export{ct as i};
