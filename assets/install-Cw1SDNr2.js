import{_ as e,U as t,D as n,ag as o,ei as a,a2 as i,I as r,ej as s,H as u,cs as l,ek as d,a5 as c,a6 as p,a1 as g,at as h,N as f,dz as y,dx as v,el as m,bT as x,ap as _,ak as b,aF as M,em as S,q as I,p as w,$ as A,c1 as C,al as T,e3 as L,en as D,eo as k,ao as N,P as E,dn as R,dE as O,dF as V,a3 as P,b0 as z,Z as B,cy as Z,aK as G,ep as j,eq as F,a4 as W,x as H,b4 as U,er as X,es as Y,et as q,aj as K,X as $,O as J,z as Q,w as ee,eu as te,ev as ne,ew as oe,u as ae,L as ie,bY as re,ex as se,aE as ue,bA as le,aM as de,bf as ce,bJ as pe,be as ge,am as he,bh as fe,ey as ye,b2 as ve,b3 as me,b1 as xe,cg as _e,cS as be,aA as Me,a8 as Se,cw as Ie,ez as we,eA as Ae,eB as Ce,eC as Te,eD as Le,eE as De,eF as ke,bR as Ne,bS as Ee,ab as Re,eG as Oe,cj as Ve,eH as Pe,ba as ze,bQ as Be,Q as Ze,bU as Ge,bV as je,C as Fe,s as We,a9 as He,aJ as Ue,bu as Xe,co as Ye,cu as qe,aU as Ke,bN as $e,b5 as Je,aX as Qe,eI as et,S as tt,aS as nt,b$ as ot}from"./vintage-W2u9YdUI.js";var at=!0,it=Math.min,rt=Math.max,st=Math.pow,ut="globalPan",lt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},dt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ct={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},pt=0,gt=function(d){function c(e){var a=d.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=e,a.group=new t,a._uid="brushController_"+pt++,n(Zt,(function(e,t){this._handlers[t]=o(e,this)}),a),a}return e(c,d),c.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},c.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||a(t,ut,this._uid),n(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=i(r(ct),e,!0)},c.prototype._doDisableBrush=function(){var e=this._zr;s(e,ut,this._uid),n(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},c.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};n(e,(function(e){t[e.panelId]=r(e)}))}else this._panels=null;return this},c.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},c.prototype.updateCovers=function(e){e=u(e,(function(e){return i(r(ct),e,!0)}));var t=this._covers,n=this._covers=[],o=this,a=this._creatingCover;return new l(t,e,(function(e,t){return s(e.__brushOption,t)}),s).add(d).update(d).remove((function(e){t[e]!==a&&o.group.remove(t[e])})).execute(),this;function s(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function d(i,r){var s=e[i];if(null!=r&&t[r]===a)n[i]=t[r];else{var u=n[i]=null!=r?(t[r].__brushOption=s,t[r]):ft(o,ht(o,s));mt(o,u)}}},c.prototype.unmount=function(){return this.enableBrush(!1),Mt(this),this._zr.remove(this.group),this},c.prototype.dispose=function(){this.unmount(),this.off()},c}(d);function ht(e,t){var n=jt[t.brushType].createCover(e,t);return n.__brushOption=t,vt(n,t),e.group.add(n),n}function ft(e,t){var n=xt(t);return n.endCreating&&(n.endCreating(e,t),vt(t,t.__brushOption)),t}function yt(e,t){var n=t.__brushOption;xt(t).updateCoverShape(e,t,n.range,n)}function vt(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function mt(e,t){xt(t).updateCommon(e,t),yt(e,t)}function xt(e){return jt[e.__brushOption.brushType]}function _t(e,t,o){var a,i=e._panels;if(!i)return at;var r=e._transform;return n(i,(function(e){e.isTargetByCursor(t,o,r)&&(a=e)})),a}function bt(e,t){var n=e._panels;if(!n)return at;var o=t.__brushOption.panelId;return null!=o?n[o]:at}function Mt(e){var t=e._covers,o=t.length;return n(t,(function(t){e.group.remove(t)}),e),t.length=0,!!o}function St(e,t){var n=u(e._covers,(function(e){var t=e.__brushOption,n=r(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function It(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function wt(e,o,a,i){var r=new t;return r.add(new h({name:"main",style:Lt(a),silent:!0,draggable:!0,cursor:"move",drift:g(Nt,e,o,r,["n","s","w","e"]),ondragend:g(St,o,{isEnd:!0})})),n(i,(function(t){r.add(new h({name:t.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:g(Nt,e,o,r,t),ondragend:g(St,o,{isEnd:!0})}))})),r}function At(e,t,n,o){var a=o.brushStyle.lineWidth||0,i=rt(a,6),r=n[0][0],s=n[1][0],u=r-a/2,l=s-a/2,d=n[0][1],c=n[1][1],p=d-i+a/2,g=c-i+a/2,h=d-r,f=c-s,y=h+a,v=f+a;Tt(e,t,"main",r,s,h,f),o.transformable&&(Tt(e,t,"w",u,l,i,v),Tt(e,t,"e",p,l,i,v),Tt(e,t,"n",u,l,y,i),Tt(e,t,"s",u,g,y,i),Tt(e,t,"nw",u,l,i,i),Tt(e,t,"ne",p,l,i,i),Tt(e,t,"sw",u,g,i,i),Tt(e,t,"se",p,g,i,i))}function Ct(e,t){var o=t.__brushOption,a=o.transformable,i=t.childAt(0);i.useStyle(Lt(o)),i.attr({silent:!a,cursor:a?"move":"default"}),n([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var o=t.childOfName(n.join("")),i=1===n.length?kt(e,n[0]):function(e,t){var n=[kt(e,t[0]),kt(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);o&&o.attr({silent:!a,invisible:!a,cursor:a?dt[i]+"-resize":null})}))}function Tt(e,t,n,o,a,i,r){var s,u,l,d,c,p=t.childOfName(n);p&&p.setShape((s=Ot(e,t,[[o,a],[o+i,a+r]]),u=it(s[0][0],s[1][0]),l=it(s[0][1],s[1][1]),d=rt(s[0][0],s[1][0]),c=rt(s[0][1],s[1][1]),{x:u,y:l,width:d-u,height:c-l}))}function Lt(e){return f({strokeNoScale:!0},e.brushStyle)}function Dt(e,t,n,o){var a=[it(e,n),it(t,o)],i=[rt(e,n),rt(t,o)];return[[a[0],i[0]],[a[1],i[1]]]}function kt(e,t){var n=y({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return v(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Nt(e,t,o,a,i,r){var s=o.__brushOption,u=e.toRectRange(s.range),l=Rt(t,i,r);n(a,(function(e){var t=lt[e];u[t[0]][t[1]]+=l[t[0]]})),s.range=e.fromRectRange(Dt(u[0][0],u[1][0],u[0][1],u[1][1])),mt(t,o),St(t,{isEnd:!1})}function Et(e,t,o,a){var i=t.__brushOption.range,r=Rt(e,o,a);n(i,(function(e){e[0]+=r[0],e[1]+=r[1]})),mt(e,t),St(e,{isEnd:!1})}function Rt(e,t,n){var o=e.group,a=o.transformCoordToLocal(t,n),i=o.transformCoordToLocal(0,0);return[a[0]-i[0],a[1]-i[1]]}function Ot(e,t,n){var o=bt(e,t);return o&&o!==at?o.clipPath(n,e._transform):r(n)}function Vt(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Pt(e,t,n){return e.childOfName("main").contain(t,n)}function zt(e,t,n,o){var a,i=e._creatingCover,s=e._creatingPanel,u=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],a=n[0]-o[0],i=n[1]-o[1];return st(a*a+i*i,.5)>6}(e)||i){if(s&&!i){"single"===u.brushMode&&Mt(e);var l=r(u);l.brushType=Bt(l.brushType,s),l.panelId=s===at?null:s.panelId,i=e._creatingCover=ht(e,l),e._covers.push(i)}if(i){var d=jt[Bt(e._brushType,s)];i.__brushOption.range=d.getCreatingRange(Ot(e,i,e._track)),o&&(ft(e,i),d.updateCommon(e,i)),yt(e,i),a={isEnd:o}}}else o&&"single"===u.brushMode&&u.removeOnClick&&_t(e,t,n)&&Mt(e)&&(a={isEnd:o,removeOnClick:!0});return a}function Bt(e,t){return"auto"===e?t.defaultBrushType:e}var Zt={mousedown:function(e){if(this._dragging)Gt(this,e);else if(!e.target||!e.target.draggable){Vt(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=_t(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,a=e._covers,i=_t(e,t,n);if(!e._dragging)for(var r=0;r<a.length;r++){var s=a[r].__brushOption;if(i&&(i===at||s.panelId===i.panelId)&&jt[s.brushType].contain(a[r],n[0],n[1]))return}i&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){Vt(e);var a=zt(this,e,o,!1);a&&St(this,a)}},mouseup:function(e){Gt(this,e)}};function Gt(e,t){if(e._dragging){Vt(t);var n=t.offsetX,o=t.offsetY,a=e.group.transformCoordToLocal(n,o),i=zt(e,t,a,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&St(e,i)}}var jt={lineX:Ft(0),lineY:Ft(1),rect:{createCover:function(e,t){function n(e){return e}return wt({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=It(e);return Dt(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){At(e,t,n,o)},updateCommon:Ct,contain:Pt},polygon:{createCover:function(e,n){var o=new t;return o.add(new c({name:"main",style:Lt(n),silent:!0})),o},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new p({name:"main",draggable:!0,drift:g(Et,e,t),ondragend:g(St,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:Ot(e,t,n)})},updateCommon:Ct,contain:Pt}};function Ft(e){return{createCover:function(t,n){return wt({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=It(t);return[it(n[0][e],n[1][e]),rt(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,a){var i,r=bt(t,n);if(r!==at&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(e);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var u=[o,i];e&&u.reverse(),At(t,n,u,a)},updateCommon:Ct,contain:Pt}}function Wt(e){return e=Xt(e),function(t){return m(t,e)}}function Ht(e,t){return e=Xt(e),function(n){var o=null!=t?t:n,a=o?e.width:e.height,i=o?e.x:e.y;return[i,i+(a||0)]}}function Ut(e,t,n){var o=Xt(e);return function(e,a){return o.contain(a[0],a[1])&&!x(e,t,n)}}function Xt(e){return _.create(e)}var Yt=["x","y","radius","angle","single"],qt=["cartesian2d","polar","singleAxis"];function Kt(e){return e+"Axis"}function $t(e,t){var n,o=b(),a=[],i=b();e.eachComponent({mainType:"dataZoom",query:t},(function(e){i.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!i.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var a=o.get(e);a&&a[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){i.set(e.uid,!0),a.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return a}function Jt(e){var t=e.ecModel,n={infoList:[],infoMap:b()};return e.eachTargetAxis((function(e,o){var a=t.getComponent(Kt(e),o);if(a){var i=a.getCoordSysModel();if(i){var r=i.uid,s=n.infoMap.get(r);s||(s={model:i,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(a)}}})),n}var Qt=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),en=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return e(o,t),o.prototype.init=function(e,t,n){var o=tn(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},o.prototype.mergeOption=function(e){var t=tn(e);i(this.option,e,!0),i(this.settledOption,t,!0),this._doInit(t)},o.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;n([["start","startValue"],["end","endValue"]],(function(e,n){"value"===this._rangePropMode[n]&&(t[e[0]]=o[e[0]]=null)}),this),this._resetTarget()},o.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=b();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},o.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return n(Yt,(function(o){var a=this.getReferringComponents(Kt(o),S);if(a.specified){t=!0;var i=new Qt;n(a.models,(function(e){i.add(e.componentIndex)})),e.set(o,i)}}),this),t},o.prototype._fillAutoTargetAxisByOrient=function(e,t){var o=this.ecModel,a=!0;if(a){var i="vertical"===t?"y":"x";r(o.findComponents({mainType:i+"Axis"}),i)}a&&r(o.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function r(t,o){var i=t[0];if(i){var r=new Qt;if(r.add(i.componentIndex),e.set(o,r),a=!1,"x"===o||"y"===o){var s=i.getReferringComponents("grid",I).models[0];s&&n(t,(function(e){i.componentIndex!==e.componentIndex&&s===e.getReferringComponents("grid",I).models[0]&&r.add(e.componentIndex)}))}}}a&&n(Yt,(function(t){if(a){var n=o.findComponents({mainType:Kt(t),filter:function(e){return"category"===e.get("type",!0)}});if(n[0]){var i=new Qt;i.add(n[0].componentIndex),e.set(t,i),a=!1}}}),this)},o.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},o.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},o.prototype._updateRangeUse=function(e){var t=this._rangePropMode,o=this.get("rangeMode");n([["start","startValue"],["end","endValue"]],(function(n,a){var i=null!=e[n[0]],r=null!=e[n[1]];i&&!r?t[a]="percent":!i&&r?t[a]="value":o?t[a]=o[a]:i&&(t[a]="percent")}))},o.prototype.noTarget=function(){return this._noTarget},o.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Kt(t),n))}),this),e},o.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(o,a){n(o.indexList,(function(n){e.call(t,a,n)}))}))},o.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},o.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Kt(e),t)},o.prototype.setRawRange=function(e){var t=this.option,o=this.settledOption;n([["start","startValue"],["end","endValue"]],(function(n){null==e[n[0]]&&null==e[n[1]]||(t[n[0]]=o[n[0]]=e[n[0]],t[n[1]]=o[n[1]]=e[n[1]])}),this),this._updateRangeUse(e)},o.prototype.setCalculatedRange=function(e){var t=this.option;n(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},o.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},o.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},o.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var a=n[o],i=this._targetAxisInfoMap.get(a),r=0;r<i.indexList.length;r++){var s=this.getAxisProxy(a,i.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},o.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},o.prototype.getOrient=function(){return this._orient},o.type="dataZoom",o.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],o.defaultOption={z:4,filterMode:"filter",start:0,end:100},o}(w);function tn(e){var t={};return n(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var nn=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.type="dataZoom.select",n}(en),on=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},n.type="dataZoom",n}(A),an=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.type="dataZoom.select",n}(on),rn=n,sn=N,un=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return M(qt,t)>=0}(t)){var n=Kt(this._dimName),o=t.getReferringComponents(n,I).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return r(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,a=this._dataZoomModel.getRangePropMode(),i=[0,100],r=[],s=[];rn(["start","end"],(function(u,l){var d=e[u],c=e[u+"Value"];"percent"===a[l]?(null==d&&(d=i[l]),c=o.parse(C(d,i,n))):(t=!0,c=null==c?n[l]:o.parse(c),d=C(c,n,i)),s[l]=null==c||isNaN(c)?n[l]:c,r[l]=null==d||isNaN(d)?i[l]:d})),sn(s),sn(r);var u=this._minMaxSpan;function l(e,t,n,a,i){var r=i?"Span":"ValueSpan";T(0,e,n,"all",u["min"+r],u["max"+r]);for(var s=0;s<2;s++)t[s]=C(e[s],n,a,!0),i&&(t[s]=o.parse(t[s]))}return t?l(s,r,n,i,!1):l(r,s,i,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];rn(n,(function(e){D(o,e.getData(),t)}));var a=e.getAxisModel(),i=k(a.axis.scale,a,o).calculate();return[i.min,i.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),a=e.get("filterMode"),i=this._valueWindow;"none"!==a&&rn(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===a){var r=t.getStore(),s=u(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,a,u=0;u<o.length;u++){var l=r.get(s[u],e),d=!isNaN(l),c=l<i[0],p=l>i[1];if(d&&!c&&!p)return!0;d&&(a=!0),c&&(t=!0),p&&(n=!0)}return a&&t&&n}))}else rn(o,(function(n){if("empty"===a)e.setData(t=t.map(n,(function(e){return function(e){return e>=i[0]&&e<=i[1]}(e)?e:NaN})));else{var o={};o[n]=i,t.selectRange(o)}}));rn(o,(function(e){t.setApproximateExtent(i,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;rn(["min","max"],(function(o){var a=t.get(o+"Span"),i=t.get(o+"ValueSpan");null!=i&&(i=this.getAxisModel().axis.scale.parse(i)),null!=i?a=C(n[0]+i,n,[0,100],!0):null!=a&&(i=C(a,[0,100],n,!0)-n[0]),e[o+"Span"]=a,e[o+"ValueSpan"]=i}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=L(n,[0,500]);o=Math.min(o,20);var a=e.axis.scale.rawExtentInfo;0!==t[0]&&a.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&a.setDeterminedMinMax("max",+n[1].toFixed(o)),a.freeze()}},e}();var ln={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,a){var i=e.getComponent(Kt(o),a);t(o,a,i,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var o=[];t((function(t,n,a,i){a.__dzAxisProxy||(a.__dzAxisProxy=new un(t,n,i,e),o.push(a.__dzAxisProxy))}));var a=b();return n(o,(function(e){n(e.getTargetSeriesModels(),(function(e){a.set(e.uid,e)}))})),a},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}};var dn=!1;function cn(e){dn||(dn=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,ln),function(e){e.registerAction("dataZoom",(function(e,t){var o=$t(t,e);n(o,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function pn(e){e.registerComponentModel(nn),e.registerComponentView(an),cn(e)}var gn=function(){return function(){}}(),hn={};function fn(e,t){hn[e]=t}function yn(e){return hn[e]}var vn=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.type,e}return e(o,t),o.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;n(this.option.feature,(function(t,n){var o=yn(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(e)),i(t,o.defaultOption))}))},o.type="toolbox",o.layoutMode={type:"box",ignoreSize:!0},o.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},o}(w),mn=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return e(a,t),a.prototype.render=function(e,t,a,i){var r=this.group;if(r.removeAll(),e.get("show")){var s=+e.get("itemSize"),u="vertical"===e.get("orient"),d=e.get("feature")||{},c=this._features||(this._features={}),p=[];n(d,(function(e,t){p.push(t)})),new l(this._featureNames||[],p).add(h).update(h).remove(g(h,null)).execute(),this._featureNames=p,j(r,e,a),r.add(F(r.getBoundingRect(),e)),u||r.eachChild((function(e){var t=e.__title,n=e.ensureState("emphasis"),o=n.textConfig||(n.textConfig={}),i=e.getTextContent(),u=i&&i.ensureState("emphasis");if(u&&!W(u)&&t){var l=u.style||(u.style={}),d=H(t,B.makeFont(l)),c=e.x+r.x,p=!1;e.y+r.y+s+d.height>a.getHeight()&&(o.position="top",p=!0);var g=p?-5-d.height:s+10;c+d.width/2>a.getWidth()?(o.position=["100%",g],l.align="right"):c-d.width/2<0&&(o.position=[0,g],l.align="left")}}))}function h(l,g){var h,f=p[l],y=p[g],v=d[f],m=new E(v,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===f&&(v.title=i.newTitle),f&&!y){if(function(e){return 0===e.indexOf("my")}(f))h={onclick:m.option.onclick,featureName:f};else{var x=yn(f);if(!x)return;h=new x}c[f]=h}else if(!(h=c[y]))return;h.uid=R("toolbox-feature"),h.model=m,h.ecModel=t,h.api=a;var _=h instanceof gn;f||!y?!m.get("show")||_&&h.unusable?_&&h.remove&&h.remove(t,a):(!function(i,l,d){var c,p,g=i.getModel("iconStyle"),h=i.getModel(["emphasis","iconStyle"]),f=l instanceof gn&&l.getIcons?l.getIcons():i.get("icon"),y=i.get("title")||{};P(f)?(c={})[d]=f:c=f;P(y)?(p={})[d]=y:p=y;var v=i.iconPaths={};n(c,(function(n,d){var c=z(n,{},{x:-s/2,y:-s/2,width:s,height:s});c.setStyle(g.getItemStyle()),c.ensureState("emphasis").style=h.getItemStyle();var f=new B({style:{text:p[d],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:Z({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},t)},ignore:!0});c.setTextContent(f),G({el:c,componentModel:e,itemName:d,formatterParamsExtra:{title:p[d]}}),c.__title=p[d],c.on("mouseover",(function(){var t=h.getItemStyle(),n=u?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";f.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),c.setTextConfig({position:h.get("textPosition")||n}),f.ignore=!e.get("showTitle"),a.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",d])&&a.leaveEmphasis(this),f.hide()})),("emphasis"===i.get(["iconStatus",d])?O:V)(c),r.add(c),c.on("click",o(l.onclick,l,t,a,d)),v[d]=c}))}(m,h,f),m.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?O:V)(o[e])},h instanceof gn&&h.render&&h.render(m,t,a,i)):_&&h.dispose&&h.dispose(t,a)}},a.prototype.updateView=function(e,t,o,a){n(this._features,(function(e){e instanceof gn&&e.updateView&&e.updateView(e.model,t,o,a)}))},a.prototype.remove=function(e,t){n(this._features,(function(n){n instanceof gn&&n.remove&&n.remove(e,t)})),this.group.removeAll()},a.prototype.dispose=function(e,t){n(this._features,(function(n){n instanceof gn&&n.dispose&&n.dispose(e,t)}))},a.type="toolbox",a}(A);var xn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",a="svg"===t.getZr().painter.getType(),i=a?"svg":n.get("type",!0)||"png",r=t.getConnectedDataURL({type:i,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=U.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||a){var u=r.split(","),l=u[0].indexOf("base64")>-1,d=a?decodeURIComponent(u[1]):u[1];l&&(d=window.atob(d));var c=o+"."+i;if(window.navigator.msSaveOrOpenBlob){for(var p=d.length,g=new Uint8Array(p);p--;)g[p]=d.charCodeAt(p);var h=new Blob([g]);window.navigator.msSaveOrOpenBlob(h,c)}else{var f=document.createElement("iframe");document.body.appendChild(f);var y=f.contentWindow,v=y.document;v.open("image/svg+xml","replace"),v.write(d),v.close(),y.focus(),v.execCommand("SaveAs",!0,c),document.body.removeChild(f)}}else{var m=n.get("lang"),x='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(m&&m[0]||"")+'" /></body>',_=window.open();_.document.write(x),_.document.title=o}else{var b=document.createElement("a");b.download=o+"."+i,b.target="_blank",b.href=r;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},n.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(gn),_n="__ec_magicType_stack__",bn=[["line","bar"],["stack"]],Mn=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e(o,t),o.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),o={};return n(e.get("type"),(function(e){t[e]&&(o[e]=t[e])})),o},o.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},o.prototype.onclick=function(e,t,o){var a=this.model,r=a.get(["seriesIndex",o]);if(Sn[o]){var s,u={series:[]};n(bn,(function(e){M(e,o)>=0&&n(e,(function(e){a.setIconStatus(e,"normal")}))})),a.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(e){var t=e.subType,n=e.id,i=Sn[o](t,n,e,a);i&&(f(i,e.option),u.series.push(i));var r=e.coordinateSystem;if(r&&"cartesian2d"===r.type&&("line"===o||"bar"===o)){var s=r.getAxesByScale("ordinal")[0];if(s){var l=s.dim+"Axis",d=e.getReferringComponents(l,I).models[0].componentIndex;u[l]=u[l]||[];for(var c=0;c<=d;c++)u[l][d]=u[l][d]||{};u[l][d].boundaryGap="bar"===o}}}));var l=o;"stack"===o&&(s=i({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),"emphasis"!==a.get(["iconStatus",o])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:u,newTitle:s,featureName:"magicType"})}},o}(gn),Sn={line:function(e,t,n,o){if("bar"===e)return i({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return i({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var a=n.get("stack")===_n;if("line"===e||"bar"===e)return o.setIconStatus("stack",a?"normal":"emphasis"),i({id:t,stack:a?"":_n},o.get(["option","stack"])||{},!0)}};X({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var In=new Array(60).join("-"),wn="\t";function An(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Cn=new RegExp("[\t]+","g");function Tn(e,t){var o=e.split(new RegExp("\n*"+In+"\n*","g")),a={series:[]};return n(o,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(wn)>=0)return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=An(t.shift()).split(Cn),o=[],a=u(n,(function(e){return{name:e,data:[]}})),i=0;i<t.length;i++){var r=An(t[i]).split(Cn);o.push(r.shift());for(var s=0;s<r.length;s++)a[s]&&(a[s].data[i]=r[s])}return{series:a,categories:o}}(e),i=t[n],r=i.axisDim+"Axis";i&&(a[r]=a[r]||[],a[r][i.axisIndex]={data:o.categories},a.series=a.series.concat(o.series))}else{o=function(e){for(var t=e.split(/\n+/g),n=An(t.shift()),o=[],a=0;a<t.length;a++){var i=An(t[a]);if(i){var r=i.split(Cn),s="",u=void 0,l=!1;isNaN(r[0])?(l=!0,s=r[0],r=r.slice(1),o[a]={name:s,value:[]},u=o[a].value):u=o[a]=[];for(var d=0;d<r.length;d++)u.push(+r[d]);1===u.length&&(l?o[a].value=u[0]:o[a]=u[0])}}return{name:n,data:o}}(e);a.series.push(o)}})),a}var Ln=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e(o,t),o.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var o=t.getDom(),a=this.model;this._dom&&o.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=a.get("backgroundColor")||"#fff";var r=document.createElement("h4"),s=a.get("lang")||[];r.innerHTML=s[0]||a.get("title"),r.style.cssText="margin:10px 20px",r.style.color=a.get("textColor");var l=document.createElement("div"),d=document.createElement("textarea");l.style.cssText="overflow:auto";var c=a.get("optionToContent"),p=a.get("contentToOption"),g=function(e){var t,o,a,i=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var a=e.coordinateSystem;if(!a||"cartesian2d"!==a.type&&"polar"!==a.type)n.push(e);else{var i=a.getBaseAxis();if("category"===i.type){var r=i.dim+"_"+i.index;t[r]||(t[r]={categoryAxis:i,valueAxis:a.getOtherAxis(i),series:[]},o.push({axisDim:i.dim,axisIndex:i.index})),t[r].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:$([(o=i.seriesGroupByCategoryAxis,a=[],n(o,(function(e,t){var o=e.categoryAxis,i=e.valueAxis.dim,r=[" "].concat(u(e.series,(function(e){return e.name}))),s=[o.model.getCategories()];n(e.series,(function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var l=[r.join(wn)],d=0;d<s[0].length;d++){for(var c=[],p=0;p<s.length;p++)c.push(s[p][d]);l.push(c.join(wn))}a.push(l.join("\n"))})),a.join("\n\n"+In+"\n\n")),(t=i.other,u(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,a=arguments[e-1],i=t.getName(a),r=0;r<e-1;r++)o[r]=arguments[r];n.push((i?i+wn:"")+o.join(wn))})),n.join("\n")})).join("\n\n"+In+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+In+"\n\n"),meta:i.meta}}(e);if(W(c)){var h=c(t.getOption());P(h)?l.innerHTML=h:Y(h)&&l.appendChild(h)}else{d.readOnly=a.get("readOnly");var f=d.style;f.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",f.color=a.get("textColor"),f.borderColor=a.get("textareaBorderColor"),f.backgroundColor=a.get("textareaColor"),d.value=g.value,l.appendChild(d)}var y=g.meta,v=document.createElement("div");v.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),_=document.createElement("div");m+=";background-color:"+a.get("buttonColor"),m+=";color:"+a.get("buttonTextColor");var b=this;function M(){o.removeChild(i),b._dom=null}q(x,"click",M),q(_,"click",(function(){if(null==p&&null!=c||null!=p&&null==c)M();else{var e;try{e=W(p)?p(l,t.getOption()):Tn(d.value,y)}catch(n){throw M(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),M()}})),x.innerHTML=s[1],_.innerHTML=s[2],_.style.cssText=x.style.cssText=m,!a.get("readOnly")&&v.appendChild(_),v.appendChild(x),i.appendChild(r),i.appendChild(l),i.appendChild(v),l.style.height=o.clientHeight-80+"px",o.appendChild(i),this._dom=i},o.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},o.prototype.dispose=function(e,t){this.remove(e,t)},o.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},o}(gn);function Dn(e,t){return u(e,(function(e,n){var o=t&&t[n];if(J(o)&&!Q(o)){J(e)&&!Q(e)||(e={value:e});var a=null!=o.name&&null==e.name;return e=f(e,o),a&&delete e.name,e}return e}))}X({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var o=[];n(e.newOption.series,(function(e){var n=t.getSeriesByName(e.name)[0];if(n){var a=n.get("data");o.push({name:e.name,data:Dn(e.data,a)})}else o.push(K({type:"scatter"},e))})),t.mergeOption(f({series:o},e.newOption))}));var kn=n,Nn=ee();function En(e){var t=Nn(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Rn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.onclick=function(e,t){!function(e){Nn(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},n}(gn);X({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var On=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Vn=function(){function e(e,t,o){var a=this;this._targetInfoList=[];var i=zn(t,e);n(Bn,(function(e,t){(!o||!o.include||M(o.include,t)>=0)&&e(i,a._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=jn[e.brushType](0,n,t);e.__rangeOffset={offset:Wn[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,o){n(e,(function(e){var a=this.findTargetInfo(e,t);a&&!0!==a&&n(a.coordSyses,(function(n){var a=jn[e.brushType](1,n,e.range,!0);o(e,a.values,n,t)}))}),this)},e.prototype.setInputRanges=function(e,t){n(e,(function(e){var n,o,a,i,r,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var u=jn[e.brushType](0,s.coordSys,e.coordRange),l=e.__rangeOffset;e.range=l?Wn[e.brushType](u.values,l.offset,(n=u.xyMinMax,o=l.xyMinMax,a=Un(n),i=Un(o),r=[a[0]/i[0],a[1]/i[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):u.values}}),this)},e.prototype.makePanelOpts=function(e,t){return u(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Wt(o),isTargetByCursor:Ut(o,e,n.coordSysModel),getLinearBrushOtherExtent:Ht(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&M(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=zn(t,e),a=0;a<n.length;a++){var i=n[a],r=e.panelId;if(r){if(i.panelId===r)return i}else for(var s=0;s<Zn.length;s++)if(Zn[s](o,i))return i}return!0},e}();function Pn(e){return e[0]>e[1]&&e.reverse(),e}function zn(e,t){return te(e,t,{includeMainTypes:On})}var Bn={grid:function(e,t){var o=e.xAxisModels,a=e.yAxisModels,i=e.gridModels,r=b(),s={},u={};(o||a||i)&&(n(o,(function(e){var t=e.axis.grid.model;r.set(t.id,t),s[t.id]=!0})),n(a,(function(e){var t=e.axis.grid.model;r.set(t.id,t),u[t.id]=!0})),n(i,(function(e){r.set(e.id,e),s[e.id]=!0,u[e.id]=!0})),r.each((function(e){var i=e.coordinateSystem,r=[];n(i.getCartesians(),(function(e,t){(M(o,e.getAxis("x").model)>=0||M(a,e.getAxis("y").model)>=0)&&r.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:r[0],coordSyses:r,getPanelRect:Gn.grid,xAxisDeclared:s[e.id],yAxisDeclared:u[e.id]})})))},geo:function(e,t){n(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:Gn.geo})}))}},Zn=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,a=e.gridModel;return!a&&n&&(a=n.axis.grid.model),!a&&o&&(a=o.axis.grid.model),a&&a===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Gn={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(v(e)),t}},jn={lineX:g(Fn,0),lineY:g(Fn,1),rect:function(e,t,n,o){var a=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),i=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),r=[Pn([a[0],i[0]]),Pn([a[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n,o){var a=[[1/0,-1/0],[1/0,-1/0]];return{values:u(n,(function(n){var i=e?t.pointToData(n,o):t.dataToPoint(n,o);return a[0][0]=Math.min(a[0][0],i[0]),a[1][0]=Math.min(a[1][0],i[1]),a[0][1]=Math.max(a[0][1],i[0]),a[1][1]=Math.max(a[1][1],i[1]),i})),xyMinMax:a}}};function Fn(e,t,n,o){var a=n.getAxis(["x","y"][e]),i=Pn(u([0,1],(function(e){return t?a.coordToData(a.toLocalCoord(o[e]),!0):a.toGlobalCoord(a.dataToCoord(o[e]))}))),r=[];return r[e]=i,r[1-e]=[NaN,NaN],{values:i,xyMinMax:r}}var Wn={lineX:g(Hn,0),lineY:g(Hn,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return u(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function Hn(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function Un(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Xn=n,Yn=oe("toolbox-dataZoom_"),qn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.render=function(e,t,n,a){this._brushController||(this._brushController=new gt(n.getZr()),this._brushController.on("brush",o(this._onBrush,this)).mount()),function(e,t,n,o,a){var i=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(i="dataZoomSelect"===o.key&&o.dataZoomSelectActive);n._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var r=new Vn($n(e),t,{include:["grid"]}),s=r.makePanelOpts(a,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!i||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,a,n),function(e,t){e.setIconStatus("back",function(e){return En(e).length}(t)>1?"emphasis":"normal")}(e,t)},n.prototype.onclick=function(e,t,n){Kn[n].call(this)},n.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new Vn($n(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(a("x",n,t[0]),a("y",n,t[1])):a({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=En(e);kn(t,(function(t,o){for(var a=n.length-1;a>=0&&!n[a][o];a--);if(a<0){var i=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(i){var r=i.getPercentRange();n[0][o]={dataZoomId:o,start:r[0],end:r[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function a(e,t,a){var i=t.getAxis(e),r=i.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,r,o),u=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan||(a=T(0,a.slice(),i.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:a[0],endValue:a[1]})}},n.prototype._dispatchZoomAction=function(e){var t=[];Xn(e,(function(e,n){t.push(r(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},n.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},n}(gn),Kn={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=En(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return kn(n,(function(e,n){for(var a=t.length-1;a>=0;a--)if(e=t[a][n]){o[n]=e;break}})),o}(this.ecModel))}};function $n(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function Jn(e){e.registerComponentModel(vn),e.registerComponentView(mn),fn("saveAsImage",xn),fn("magicType",Mn),fn("dataView",Ln),fn("dataZoom",qn),fn("restore",Rn),ae(pn)}ne("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),a=[],i=$n(o),r=te(e,i);return Xn(r.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Xn(r.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),a}function s(e,t,n){var i=e.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:Yn+t+i};r[n]=i,a.push(r)}}));var Qn=ie.prototype,eo=re.prototype,to=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}();function no(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}e(n,t)}(to);var oo=function(t){function n(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return e(n,t),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new to},n.prototype.buildPath=function(e,t){no(t)?Qn.buildPath.call(this,e,t):eo.buildPath.call(this,e,t)},n.prototype.pointAt=function(e){return no(this.shape)?Qn.pointAt.call(this,e):eo.pointAt.call(this,e)},n.prototype.tangentAt=function(e){var t=this.shape,n=no(t)?[t.x2-t.x1,t.y2-t.y1]:eo.tangentAt.call(this,e);return se(n,n)},n}(ue),ao=["fromSymbol","toSymbol"];function io(e){return"_"+e+"Type"}function ro(e,t,n){var o=t.getItemVisual(n,e);if(!o||"none"===o)return o;var a=t.getItemVisual(n,e+"Size"),i=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),u=ve(a);return o+u+me(r||0,u)+(i||"")+(s||"")}function so(e,t,n){var o=t.getItemVisual(n,e);if(o&&"none"!==o){var a=t.getItemVisual(n,e+"Size"),i=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),u=ve(a),l=me(r||0,u),d=xe(o,-u[0]/2+l[0],-u[1]/2+l[1],u[0],u[1],null,s);return d.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,d.name=e,d}}function uo(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var lo=function(t){function o(e,n,o){var a=t.call(this)||this;return a._createLine(e,n,o),a}return e(o,t),o.prototype._createLine=function(e,t,o){var a=e.hostModel,i=function(e){var t=new oo({name:"line",subPixelOptimize:!0});return uo(t.shape,e),t}(e.getItemLayout(t));i.shape.percent=0,le(i,{shape:{percent:1}},a,t),this.add(i),n(ao,(function(n){var o=so(n,e,t);this.add(o),this[io(n)]=ro(n,e,t)}),this),this._updateCommonStl(e,t,o)},o.prototype.updateData=function(e,t,o){var a=e.hostModel,i=this.childOfName("line"),r=e.getItemLayout(t),s={shape:{}};uo(s.shape,r),de(i,s,a,t),n(ao,(function(n){var o=ro(n,e,t),a=io(n);if(this[a]!==o){this.remove(this.childOfName(n));var i=so(n,e,t);this.add(i)}this[a]=o}),this),this._updateCommonStl(e,t,o)},o.prototype.getLinePath=function(){return this.childAt(0)},o.prototype._updateCommonStl=function(e,t,o){var a=e.hostModel,i=this.childOfName("line"),r=o&&o.emphasisLineStyle,s=o&&o.blurLineStyle,u=o&&o.selectLineStyle,l=o&&o.labelStatesModels,d=o&&o.emphasisDisabled,c=o&&o.focus,p=o&&o.blurScope;if(!o||e.hasItemOption){var g=e.getItemModel(t),h=g.getModel("emphasis");r=h.getModel("lineStyle").getLineStyle(),s=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),d=h.get("disabled"),c=h.get("focus"),p=h.get("blurScope"),l=ce(g)}var f=e.getItemVisual(t,"style"),y=f.stroke;i.useStyle(f),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=r,i.ensureState("blur").style=s,i.ensureState("select").style=u,n(ao,(function(e){var t=this.childOfName(e);if(t){t.setColor(y),t.style.opacity=f.opacity;for(var n=0;n<pe.length;n++){var o=pe[n],a=i.getState(o);if(a){var r=a.style||{},s=t.ensureState(o),u=s.style||(s.style={});null!=r.stroke&&(u[t.__isEmptyBrush?"stroke":"fill"]=r.stroke),null!=r.opacity&&(u.opacity=r.opacity)}}t.markRedraw()}}),this);var v=a.getRawValue(t);ge(this,l,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,n){return a.getFormattedLabel(t,n,e.dataType)}},inheritColor:y||"#000",defaultOpacity:f.opacity,defaultText:(null==v?e.getName(t):isFinite(v)?he(v):v)+""});var m=this.getTextContent();if(m){var x=l.normal;m.__align=m.style.align,m.__verticalAlign=m.style.verticalAlign,m.__position=x.get("position")||"middle";var _=x.get("distance");Q(_)||(_=[_,_]),m.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),fe(this,c,p,d)},o.prototype.highlight=function(){O(this)},o.prototype.downplay=function(){V(this)},o.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},o.prototype.setLinePoints=function(e){var t=this.childOfName("line");uo(t.shape,e),t.dirty()},o.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),o=e.getTextContent();if(t||n||o&&!o.ignore){for(var a=1,i=this.parent;i;)i.scaleX&&(a/=i.scaleX),i=i.parent;var r=e.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,u=r.pointAt(0),l=r.pointAt(s),d=ye([],l,u);if(se(d,d),t&&(t.setPosition(u),S(t,0),t.scaleX=t.scaleY=a*s,t.markRedraw()),n&&(n.setPosition(l),S(n,1),n.scaleX=n.scaleY=a*s,n.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var c=void 0,p=void 0,g=o.__labelDistance,h=g[0]*a,f=g[1]*a,y=s/2,v=r.tangentAt(y),m=[v[1],-v[0]],x=r.pointAt(y);m[1]>0&&(m[0]=-m[0],m[1]=-m[1]);var _=v[0]<0?-1:1;if("start"!==o.__position&&"end"!==o.__position){var b=-Math.atan2(v[1],v[0]);l[0]<u[0]&&(b=Math.PI+b),o.rotation=b}var M=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-f,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=f,p="top";break;default:M=0,p="middle"}switch(o.__position){case"end":o.x=d[0]*h+l[0],o.y=d[1]*f+l[1],c=d[0]>.8?"left":d[0]<-.8?"right":"center",p=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":o.x=-d[0]*h+u[0],o.y=-d[1]*f+u[1],c=d[0]>.8?"right":d[0]<-.8?"left":"center",p=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=h*_+u[0],o.y=u[1]+M,c=v[0]<0?"right":"left",o.originX=-h*_,o.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=x[0],o.y=x[1]+M,c="center",o.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-h*_+l[0],o.y=l[1]+M,c=v[0]>=0?"right":"left",o.originX=h*_,o.originY=-M}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||p,align:o.__align||c})}}}function S(e,t){var n=e.__specifiedRotation;if(null==n){var o=r.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(o[1],o[0]))}else e.attr("rotation",n)}},o}(t),co=function(){function e(e){this.group=new t,this._LineCtor=e||lo}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,o=n.group,a=n._lineData;n._lineData=e,a||o.removeAll();var i=po(e);e.diff(a).add((function(n){t._doAdd(e,n,i)})).update((function(n,o){t._doUpdate(a,e,o,n,i)})).remove((function(e){o.remove(a.getItemGraphicEl(e))})).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,n){t.updateLayout(e,n)}),this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=po(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var o=e.start;o<e.end;o++){if(ho(t.getItemLayout(o))){var a=new this._LineCtor(t,o,this._seriesScope);a.traverse(n),this.group.add(a),t.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){_e(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,n){if(ho(e.getItemLayout(t))){var o=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,o),this.group.add(o)}},e.prototype._doUpdate=function(e,t,n,o,a){var i=e.getItemGraphicEl(n);ho(t.getItemLayout(o))?(i?i.updateData(t,o,a):i=new this._LineCtor(t,o,a),t.setItemGraphicEl(o,i),this.group.add(i)):this.group.remove(i)},e}();function po(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ce(t)}}function go(e){return isNaN(e[0])||isNaN(e[1])}function ho(e){return e&&!go(e[0])&&!go(e[1])}var fo=ee();function yo(e){var t=e.mainData,o=e.datas;o||(o={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Mo(t,o,e),n(o,(function(o){n(t.TRANSFERABLE_METHODS,(function(t){o.wrapMethod(t,g(vo,e))}))})),t.wrapMethod("cloneShallow",g(xo,e)),n(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,g(mo,e))})),be(o[t.dataType]===t)}function vo(e,t){if(fo(o=this).mainData===o){var n=K({},fo(this).datas);n[this.dataType]=t,Mo(t,n,e)}else So(t,this.dataType,fo(this).mainData,e);var o;return t}function mo(e,t){return e.struct&&e.struct.update(),t}function xo(e,t){return n(fo(t).datas,(function(n,o){n!==t&&So(n.cloneShallow(),o,t,e)})),t}function _o(e){var t=fo(this).mainData;return null==e||null==t?t:fo(t).datas[e]}function bo(){var e=fo(this).mainData;return null==e?[{data:e}]:u(Me(fo(e).datas),(function(t){return{type:t,data:fo(e).datas[t]}}))}function Mo(e,t,o){fo(e).datas={},n(t,(function(t,n){So(t,n,e,o)}))}function So(e,t,n,o){fo(n).datas[t]=e,fo(e).mainData=n,e.dataType=t,o.struct&&(e[o.structAttr]=o.struct,o.struct[o.datasAttr[t]]=e),e.getLinkedData=_o,e.getLinkedDataAll=bo}function Io(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),o=e.getGraph().data,a=n.mapArray(n.getName);o.filterSelf((function(e){var n=o.getItemModel(e).getShallow("category");if(null!=n){Se(n)&&(n=a[n]);for(var i=0;i<t.length;i++)if(!t[i].isSelected(n))return!1}return!0}))}))}function wo(e){var t={};e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),o=e.getData(),a={};n.each((function(o){var i=n.getName(o);a["ec-"+i]=o;var r=n.getItemModel(o),s=r.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(i,t)),n.setItemVisual(o,"style",s);for(var u=["symbol","symbolSize","symbolKeepAspect"],l=0;l<u.length;l++){var d=r.getShallow(u[l],!0);null!=d&&n.setItemVisual(o,u[l],d)}})),n.count()&&o.each((function(e){var t=o.getItemModel(e).getShallow("category");if(null!=t){P(t)&&(t=a["ec-"+t]);var i=n.getItemVisual(t,"style"),r=o.ensureUniqueItemVisual(e,"style");K(r,i);for(var s=["symbol","symbolSize","symbolKeepAspect"],u=0;u<s.length;u++)o.setItemVisual(e,s[u],n.getItemVisual(t,s[u]))}}))}))}function Ao(e){return e instanceof Array||(e=[e,e]),e}function Co(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),n=e.getEdgeData(),o=Ao(e.get("edgeSymbol")),a=Ao(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",a&&a[0]),n.setVisual("toSymbolSize",a&&a[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each((function(e){var o=n.getItemModel(e),a=t.getEdgeByIndex(e),i=Ao(o.getShallow("symbol",!0)),r=Ao(o.getShallow("symbolSize",!0)),s=o.getModel("lineStyle").getLineStyle(),u=n.ensureUniqueItemVisual(e,"style");switch(K(u,s),u.stroke){case"source":var l=a.node1.getVisual("style");u.stroke=l&&l.fill;break;case"target":l=a.node2.getVisual("style");u.stroke=l&&l.fill}i[0]&&a.setVisual("fromSymbol",i[0]),i[1]&&a.setVisual("toSymbol",i[1]),r[0]&&a.setVisual("fromSymbolSize",r[0]),r[1]&&a.setVisual("toSymbolSize",r[1])}))}))}var To="--\x3e",Lo=function(e){return e.get("autoCurveness")||null},Do=function(e,t){var n=Lo(e),o=20,a=[];if(Se(n))o=n;else if(Q(n))return void(e.__curvenessList=n);t>o&&(o=t);var i=o%2?o+2:o+3;a=[];for(var r=0;r<i;r++)a.push((r%2?r+1:r)/10*(r%2?-1:1));e.__curvenessList=a},ko=function(e,t,n){var o=[e.id,e.dataIndex].join("."),a=[t.id,t.dataIndex].join(".");return[n.uid,o,a].join(To)},No=function(e){var t=e.split(To);return[t[0],t[2],t[1]].join(To)},Eo=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function Ro(e,t,n,o){var a=Lo(t),i=Q(a);if(!a)return null;var r=function(e,t){var n=ko(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!r)return null;for(var s=-1,u=0;u<r.length;u++)if(r[u]===n){s=u;break}var l=function(e,t){return Eo(ko(e.node1,e.node2,t),t)+Eo(ko(e.node2,e.node1,t),t)}(e,t);Do(t,l),e.lineStyle=e.lineStyle||{};var d=ko(e.node1,e.node2,t),c=t.__curvenessList,p=i||l%2?0:1;if(r.isForward)return c[p+s];var g=No(d),h=Eo(g,t),f=c[s+h+p];return o?i?a&&0===a[0]?(h+p)%2?f:-f:((h%2?0:1)+p)%2?f:-f:(h+p)%2?f:-f:c[s+h+p]}function Oo(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),Vo(n,e)}}function Vo(e,t){e.eachEdge((function(e,n){var o=Ie(e.getModel().get(["lineStyle","curveness"]),-Ro(e,t,n,!0),0),a=we(e.node1.getLayout()),i=we(e.node2.getLayout()),r=[a,i];+o&&r.push([(a[0]+i[0])/2-(a[1]-i[1])*o,(a[1]+i[1])/2-(i[0]-a[0])*o]),e.setLayout(r)}))}function Po(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),o=e.coordinateSystem;if(o&&"view"!==o.type){var a=e.getData(),i=[];n(o.dimensions,(function(e){i=i.concat(a.mapDimensionsAll(e))}));for(var r=0;r<a.count();r++){for(var s=[],u=!1,l=0;l<i.length;l++){var d=a.get(i[l],r);isNaN(d)||(u=!0),s.push(d)}u?a.setItemLayout(r,o.dataToPoint(s)):a.setItemLayout(r,[NaN,NaN])}Vo(a.graph,e)}else t&&"none"!==t||Oo(e)}))}function zo(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,o=t.scaleX;return((t.getZoom()-1)*n+1)/o}function Bo(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Zo=Math.PI,Go=[];function jo(e,t,n,o){var a=e.coordinateSystem;if(!a||"view"===a.type){var i=a.getBoundingRect(),r=e.getData(),s=r.graph,u=i.width/2+i.x,l=i.height/2+i.y,d=Math.min(i.width,i.height)/2,c=r.count();if(r.setLayout({cx:u,cy:l}),c){if(n){var p=a.pointToData(o),g=p[0],h=p[1],f=[g-u,h-l];se(f,f),Ae(f,f,d),n.setLayout([u+f[0],l+f[1]],!0),Wo(n,e.get(["circular","rotateLabel"]),u,l)}Fo[t](e,s,r,d,u,l,c),s.eachEdge((function(t,n){var o,a=Ie(t.getModel().get(["lineStyle","curveness"]),Ro(t,e,n),0),i=we(t.node1.getLayout()),r=we(t.node2.getLayout()),s=(i[0]+r[0])/2,d=(i[1]+r[1])/2;+a&&(o=[u*(a*=3)+s*(1-a),l*a+d*(1-a)]),t.setLayout([i,r,o])}))}}}var Fo={value:function(e,t,n,o,a,i,r){var s=0,u=n.getSum("value"),l=2*Math.PI/(u||r);t.eachNode((function(e){var t=e.getValue("value"),n=l*(u?t:1)/2;s+=n,e.setLayout([o*Math.cos(s)+a,o*Math.sin(s)+i]),s+=n}))},symbolSize:function(e,t,n,o,a,i,r){var s=0;Go.length=r;var u=zo(e);t.eachNode((function(e){var t=Bo(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=u;var n=Math.asin(t/2/o);isNaN(n)&&(n=Zo/2),Go[e.dataIndex]=n,s+=2*n}));var l=(2*Zo-s)/r/2,d=0;t.eachNode((function(e){var t=l+Go[e.dataIndex];d+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([o*Math.cos(d)+a,o*Math.sin(d)+i]),d+=t}))}};function Wo(e,t,n,o){var a=e.getGraphicEl();if(a){var i=e.getModel().get(["label","rotate"])||0,r=a.getSymbolPath();if(t){var s=e.getLayout(),u=Math.atan2(s[1]-o,s[0]-n);u<0&&(u=2*Math.PI+u);var l=s[0]<n;l&&(u-=Math.PI);var d=l?"left":"right";r.setTextConfig({rotation:-u,position:d,origin:"center"});var c=r.ensureState("emphasis");K(c.textConfig||(c.textConfig={}),{position:d})}else r.setTextConfig({rotation:i*=Math.PI/180})}}function Ho(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&jo(e,"symbolSize")}))}var Uo=ke;function Xo(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},o=e.getGraph(),a=o.data,i=o.edgeData,r=e.getModel("force"),s=r.get("initLayout");e.preservedPoints?a.each((function(e){var t=a.getId(e);a.setItemLayout(e,n[t]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&jo(e,"value"):Oo(e);var u=a.getDataExtent("value"),l=i.getDataExtent("value"),d=r.get("repulsion"),c=r.get("edgeLength"),p=Q(d)?d:[d,d],g=Q(c)?c:[c,c];g=[g[1],g[0]];var h=a.mapArray("value",(function(e,t){var n=a.getItemLayout(t),o=C(e,u,p);return isNaN(o)&&(o=(p[0]+p[1])/2),{w:o,rep:o,fixed:a.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),f=i.mapArray("value",(function(t,n){var a=o.getEdgeByIndex(n),i=C(t,l,g);isNaN(i)&&(i=(g[0]+g[1])/2);var r=a.getModel(),s=Ie(a.getModel().get(["lineStyle","curveness"]),-Ro(a,e,n,!0),0);return{n1:h[a.node1.dataIndex],n2:h[a.node2.dataIndex],d:i,curveness:s,ignoreForceLayout:r.get("ignoreForceLayout")}})),y=t.getBoundingRect(),v=function(e,t,n){for(var o=e,a=t,i=n.rect,r=i.width,s=i.height,u=[i.x+r/2,i.y+s/2],l=null==n.gravity?.1:n.gravity,d=0;d<o.length;d++){var c=o[d];c.p||(c.p=Ce(r*(Math.random()-.5)+u[0],s*(Math.random()-.5)+u[1])),c.pp=we(c.p),c.edges=null}var p,g,h=null==n.friction?.6:n.friction,f=h;return{warmUp:function(){f=.8*h},setFixed:function(e){o[e].fixed=!0},setUnfixed:function(e){o[e].fixed=!1},beforeStep:function(e){p=e},afterStep:function(e){g=e},step:function(e){p&&p(o,a);for(var t=[],n=o.length,i=0;i<a.length;i++){var r=a[i];if(!r.ignoreForceLayout){var s=r.n1,d=r.n2;ye(t,d.p,s.p);var c=Te(t)-r.d,h=d.w/(s.w+d.w);isNaN(h)&&(h=0),se(t,t),!s.fixed&&Uo(s.p,s.p,t,h*c*f),!d.fixed&&Uo(d.p,d.p,t,-(1-h)*c*f)}}for(i=0;i<n;i++)(x=o[i]).fixed||(ye(t,u,x.p),Uo(x.p,x.p,t,l*f));for(i=0;i<n;i++){s=o[i];for(var y=i+1;y<n;y++){d=o[y],ye(t,d.p,s.p),0===(c=Te(t))&&(Le(t,Math.random()-.5,Math.random()-.5),c=1);var v=(s.rep+d.rep)/c/c;!s.fixed&&Uo(s.pp,s.pp,t,v),!d.fixed&&Uo(d.pp,d.pp,t,-v)}}var m=[];for(i=0;i<n;i++){var x;(x=o[i]).fixed||(ye(m,x.p,x.pp),Uo(x.p,x.p,m,f),De(x.pp,x.p))}var _=(f*=.992)<.01;g&&g(o,a,_),e&&e(_)}}}(h,f,{rect:y,gravity:r.get("gravity"),friction:r.get("friction")});v.beforeStep((function(e,t){for(var n=0,a=e.length;n<a;n++)e[n].fixed&&De(e[n].p,o.getNodeByIndex(n).getLayout())})),v.afterStep((function(e,t,i){for(var r=0,s=e.length;r<s;r++)e[r].fixed||o.getNodeByIndex(r).setLayout(e[r].p),n[a.getId(r)]=e[r].p;for(r=0,s=t.length;r<s;r++){var u=t[r],l=o.getEdgeByIndex(r),d=u.n1.p,c=u.n2.p,p=l.getLayout();(p=p?p.slice():[])[0]=p[0]||[],p[1]=p[1]||[],De(p[0],d),De(p[1],c),+u.curveness&&(p[2]=[(d[0]+c[0])/2-(d[1]-c[1])*u.curveness,(d[1]+c[1])/2-(c[0]-d[0])*u.curveness]),l.setLayout(p)}})),e.forceLayout=v,e.preservedPoints=n,v.step()}else e.forceLayout=null}))}function Yo(e,t){var n=[];return e.eachSeriesByType("graph",(function(e){var o=e.get("coordinateSystem");if(!o||"view"===o){var a=e.getData(),i=a.mapArray((function(e){var t=a.getItemModel(e);return[+t.get("x"),+t.get("y")]})),r=[],s=[];Ne(i,r,s),s[0]-r[0]==0&&(s[0]+=1,r[0]-=1),s[1]-r[1]==0&&(s[1]+=1,r[1]-=1);var u=(s[0]-r[0])/(s[1]-r[1]),l=function(e,t,n){var o=K(e.getBoxLayoutParams(),{aspect:n});return Re(o,{width:t.getWidth(),height:t.getHeight()})}(e,t,u);isNaN(u)&&(r=[l.x,l.y],s=[l.x+l.width,l.y+l.height]);var d=s[0]-r[0],c=s[1]-r[1],p=l.width,g=l.height,h=e.coordinateSystem=new Ee;h.zoomLimit=e.get("scaleLimit"),h.setBoundingRect(r[0],r[1],d,c),h.setViewRect(l.x,l.y,p,g),h.setCenter(e.get("center"),t),h.setZoom(e.get("zoom")),n.push(h)}})),n}var qo=[],Ko=[],$o=[],Jo=Ve,Qo=Pe,ea=Math.abs;function ta(e,t,n){for(var o,a=e[0],i=e[1],r=e[2],s=1/0,u=n*n,l=.1,d=.1;d<=.9;d+=.1){qo[0]=Jo(a[0],i[0],r[0],d),qo[1]=Jo(a[1],i[1],r[1],d),(g=ea(Qo(qo,t)-u))<s&&(s=g,o=d)}for(var c=0;c<32;c++){var p=o+l;Ko[0]=Jo(a[0],i[0],r[0],o),Ko[1]=Jo(a[1],i[1],r[1],o),$o[0]=Jo(a[0],i[0],r[0],p),$o[1]=Jo(a[1],i[1],r[1],p);var g=Qo(Ko,t)-u;if(ea(g)<.01)break;var h=Qo($o,t)-u;l/=2,g<0?h>=0?o+=l:o-=l:h>=0?o-=l:o+=l}return o}function na(e,t){var n=[],o=Oe,a=[[],[],[]],i=[[],[]],r=[];t/=2,e.eachEdge((function(e,s){var u=e.getLayout(),l=e.getVisual("fromSymbol"),d=e.getVisual("toSymbol");u.__original||(u.__original=[we(u[0]),we(u[1])],u[2]&&u.__original.push(we(u[2])));var c=u.__original;if(null!=u[2]){if(De(a[0],c[0]),De(a[1],c[2]),De(a[2],c[1]),l&&"none"!==l){var p=Bo(e.node1),g=ta(a,c[0],p*t);o(a[0][0],a[1][0],a[2][0],g,n),a[0][0]=n[3],a[1][0]=n[4],o(a[0][1],a[1][1],a[2][1],g,n),a[0][1]=n[3],a[1][1]=n[4]}if(d&&"none"!==d){p=Bo(e.node2),g=ta(a,c[1],p*t);o(a[0][0],a[1][0],a[2][0],g,n),a[1][0]=n[1],a[2][0]=n[2],o(a[0][1],a[1][1],a[2][1],g,n),a[1][1]=n[1],a[2][1]=n[2]}De(u[0],a[0]),De(u[1],a[2]),De(u[2],a[1])}else{if(De(i[0],c[0]),De(i[1],c[1]),ye(r,i[1],i[0]),se(r,r),l&&"none"!==l){p=Bo(e.node1);ke(i[0],i[0],r,p*t)}if(d&&"none"!==d){p=Bo(e.node2);ke(i[1],i[1],r,-p*t)}De(u[0],i[0]),De(u[1],i[1])}}))}function oa(e){return"view"===e.type}var aa=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return e(n,t),n.prototype.init=function(e,t){var n=new ze,o=new co,a=this.group;this._controller=new Be(t.getZr()),this._controllerHost={target:a},a.add(n.group),a.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},n.prototype.render=function(e,t,n){var o=this,a=e.coordinateSystem;this._model=e;var i=this._symbolDraw,r=this._lineDraw,s=this.group;if(oa(a)){var u={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?s.attr(u):de(s,u,e)}na(e.getGraph(),zo(e));var l=e.getData();i.updateData(l);var d=e.getEdgeData();r.updateData(d),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var c=e.forceLayout,p=e.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,p);var g=e.get("layout");l.graph.eachNode((function(t){var n=t.dataIndex,a=t.getGraphicEl(),i=t.getModel();if(a){a.off("drag").off("dragend");var r=i.get("draggable");r&&a.on("drag",(function(i){switch(g){case"force":c.warmUp(),!o._layouting&&o._startForceLayoutIteration(c,p),c.setFixed(n),l.setItemLayout(n,[a.x,a.y]);break;case"circular":l.setItemLayout(n,[a.x,a.y]),t.setLayout({fixed:!0},!0),jo(e,"symbolSize",t,[i.offsetX,i.offsetY]),o.updateLayout(e);break;default:l.setItemLayout(n,[a.x,a.y]),Vo(e.getGraph(),e),o.updateLayout(e)}})).on("dragend",(function(){c&&c.setUnfixed(n)})),a.setDraggable(r,!!i.get("cursor")),"adjacency"===i.get(["emphasis","focus"])&&(Ze(a).focus=t.getAdjacentDataIndices())}})),l.graph.eachEdge((function(e){var t=e.getGraphicEl(),n=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===n&&(Ze(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var h="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),f=l.getLayout("cx"),y=l.getLayout("cy");l.graph.eachNode((function(e){Wo(e,h,f,y)})),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(e,t){var n=this;!function o(){e.step((function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(o,16):o())}))}()},n.prototype._updateController=function(e,t,n){var o=this,a=this._controller,i=this._controllerHost,r=this.group;a.setPointerChecker((function(t,o,a){var i=r.getBoundingRect();return i.applyTransform(r.transform),i.contain(o,a)&&!x(t,n,e)})),oa(e.coordinateSystem)?(a.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",(function(t){Ge(i,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){je(i,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),o._updateNodeAndLinkScale(),na(e.getGraph(),zo(e)),o._lineDraw.updateLayout(),n.updateLabelLayout()}))):a.disable()},n.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=zo(e);t.eachItemGraphicEl((function(e,t){e&&e.setSymbolScale(n)}))},n.prototype.updateLayout=function(e){na(e.getGraph(),zo(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(Fe);function ia(e){return"_EC_"+e}var ra=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[ia(e)]){var o=new sa(e,t);return o.hostGraph=this,this.nodes.push(o),n[ia(e)]=o,o}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[ia(e)]},e.prototype.addEdge=function(e,t,n){var o=this._nodesMap,a=this._edgesMap;if(Se(e)&&(e=this.nodes[e]),Se(t)&&(t=this.nodes[t]),e instanceof sa||(e=o[ia(e)]),t instanceof sa||(t=o[ia(t)]),e&&t){var i=e.id+"-"+t.id,r=new ua(e,t,n);return r.hostGraph=this,this._directed&&(e.outEdges.push(r),t.inEdges.push(r)),e.edges.push(r),e!==t&&t.edges.push(r),this.edges.push(r),a[i]=r,r}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof sa&&(e=e.id),t instanceof sa&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,o=n.length,a=0;a<o;a++)n[a].dataIndex>=0&&e.call(t,n[a],a)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,o=n.length,a=0;a<o;a++)n[a].dataIndex>=0&&n[a].node1.dataIndex>=0&&n[a].node2.dataIndex>=0&&e.call(t,n[a],a)},e.prototype.breadthFirstTraverse=function(e,t,n,o){if(t instanceof sa||(t=this._nodesMap[ia(t)]),t){for(var a="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!e.call(o,t,null))for(var r=[t];r.length;){var s=r.shift(),u=s[a];for(i=0;i<u.length;i++){var l=u[i],d=l.node1===s?l.node2:l.node1;if(!d.__visited){if(e.call(o,d,s))return;r.push(d),d.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,o=this.edges,a=0,i=n.length;a<i;a++)n[a].dataIndex=-1;for(a=0,i=e.count();a<i;a++)n[e.getRawIndex(a)].dataIndex=a;t.filterSelf((function(e){var n=o[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}));for(a=0,i=o.length;a<i;a++)o[a].dataIndex=-1;for(a=0,i=t.count();a<i;a++)o[t.getRawIndex(a)].dataIndex=a},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,o=this.edges,a=0;a<n.length;a++)t.addNode(n[a].id,n[a].dataIndex);for(a=0;a<o.length;a++){var i=o[a];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},e}(),sa=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=b(),t=b(),n=0;n<this.edges.length;n++){var o=this.edges[n];if(!(o.dataIndex<0)){e.set(o.dataIndex,!0);for(var a=[o.node1],i=[o.node2],r=0;r<a.length;){var s=a[r];r++,t.set(s.dataIndex,!0);for(var u=0;u<s.inEdges.length;u++)e.set(s.inEdges[u].dataIndex,!0),a.push(s.inEdges[u].node1)}for(r=0;r<i.length;){var l=i[r];r++,t.set(l.dataIndex,!0);for(u=0;u<l.outEdges.length;u++)e.set(l.outEdges[u].dataIndex,!0),i.push(l.outEdges[u].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),ua=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=b(),t=b();e.set(this.dataIndex,!0);for(var n=[this.node1],o=[this.node2],a=0;a<n.length;){var i=n[a];a++,t.set(i.dataIndex,!0);for(var r=0;r<i.inEdges.length;r++)e.set(i.inEdges[r].dataIndex,!0),n.push(i.inEdges[r].node1)}for(a=0;a<o.length;){var s=o[a];a++,t.set(s.dataIndex,!0);for(r=0;r<s.outEdges.length;r++)e.set(s.outEdges[r].dataIndex,!0),o.push(s.outEdges[r].node2)}return{edge:e.keys(),node:t.keys()}},e}();function la(e,t){return{getValue:function(n){var o=this[e][t];return o.getStore().get(o.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,o){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,o)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,o){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function da(e,t,n,o,a){for(var i=new ra(o),r=0;r<e.length;r++)i.addNode(He(e[r].id,e[r].name,r),r);var s=[],u=[],l=0;for(r=0;r<t.length;r++){var d=t[r],c=d.source,p=d.target;i.addEdge(c,p,l)&&(u.push(d),s.push(He(Ue(d.id,null),c+" > "+p)),l++)}var g,h=n.get("coordinateSystem");if("cartesian2d"===h||"polar"===h)g=Xe(e,n);else{var f=Ye.get(h),y=f&&f.dimensions||[];M(y,"value")<0&&y.concat(["value"]);var v=qe(e,{coordDimensions:y,encodeDefine:n.getEncode()}).dimensions;(g=new Ke(v,n)).initData(e)}var m=new Ke(["value"],n);return m.initData(u,s),a&&a(g,m),yo({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:m},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}We(sa,la("hostGraph","data")),We(ua,la("hostGraph","edgeData"));var ca=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.type,e.hasSymbolVisual=!0,e}return e(o,t),o.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new $e(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},o.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},o.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Je(e,"edgeLabel",["show"])},o.prototype.getInitialData=function(e,t){var o=e.edges||e.links||[],a=e.data||e.nodes||[],i=this;Lo(r=this)&&(r.__curvenessList=[],r.__edgeMap={},Do(r));var r,s=da(a,o,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=i._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var n=E.prototype.getModel;function o(e,t){var o=n.call(this,e,t);return o.resolveParentPath=a,o}function a(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=a,e.getModel=o,e}))}));return n(s.edges,(function(e){!function(e,t,n,o){if(Lo(n)){var a=ko(e,t,n),i=n.__edgeMap,r=i[No(a)];i[a]&&!r?i[a].isForward=!0:r&&i[a]&&(r.isForward=!0,i[a].isForward=!1),i[a]=i[a]||[],i[a].push(o)}}(e.node1,e.node2,this,e.dataIndex)}),this),s.data},o.prototype.getGraph=function(){return this.getData().graph},o.prototype.getEdgeData=function(){return this.getGraph().edgeData},o.prototype.getCategoriesData=function(){return this._categoriesData},o.prototype.formatTooltip=function(e,t,n){if("edge"===n){var o=this.getData(),a=this.getDataParams(e,n),i=o.graph.getEdgeByIndex(e),r=o.getName(i.node1.dataIndex),s=o.getName(i.node2.dataIndex),u=[];return null!=r&&u.push(r),null!=s&&u.push(s),Qe("nameValue",{name:u.join(" > "),value:a.value,noValue:null==a.value})}return et({series:this,dataIndex:e,multipleSeries:t})},o.prototype._updateCategoriesData=function(){var e=u(this.option.categories||[],(function(e){return null!=e.value?e:K({value:0},e)})),t=new Ke(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},o.prototype.setZoom=function(e){this.option.zoom=e},o.prototype.setCenter=function(e){this.option.center=e},o.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},o.type="series.graph",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},o}(tt),pa={type:"graphRoam",event:"graphRoam",update:"none"};function ga(e){e.registerChartView(aa),e.registerSeriesModel(ca),e.registerProcessor(Io),e.registerVisual(wo),e.registerVisual(Co),e.registerLayout(Po),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,Ho),e.registerLayout(Xo),e.registerCoordinateSystem("graphView",{dimensions:Ee.dimensions,create:Yo}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},nt),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},nt),e.registerAction(pa,(function(e,t,n){t.eachComponent({mainType:"series",query:e},(function(t){var o=t.coordinateSystem,a=ot(o,e,void 0,n);t.setCenter&&t.setCenter(a.center),t.setZoom&&t.setZoom(a.zoom)}))}))}export{gt as B,en as D,co as L,gn as T,ga as a,Ut as b,Ht as c,Vn as d,lo as e,Jt as f,on as g,cn as h,Jn as i,Kt as j,da as k,yo as l,Wt as m,fn as r};
