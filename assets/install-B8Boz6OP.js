import{u as e,e3 as t,Y as n,_ as r,dX as i,am as a,v as o,de as s,em as l,l as u,dd as c,eh as h,ab as d,J as p,F as g,en as f,eo as m,dt as v,ep as y,a2 as x,cV as _,aA as b,K as w,x as S,w as I,eq as A,er as M,bY as C,E as T,es as D,aU as R,bV as P,bh as V,a1 as k,et as O,af as L,M as z,V as G,aF as B,C as N,a9 as E,ag as W,eu as H,O as Y,ae as F,Z as X,bi as Z,a$ as U,a3 as j,N as K,at as q,aK as J,dy as Q,X as $,cr as ee,b4 as te,a0 as ne,Q as re,az as ie,aq as ae,aY as oe,as as se,b3 as le,aO as ue,aM as ce,bw as he,ai as de,P as pe,c7 as ge,bB as fe,aE as me,ev as ve,cc as ye,bx as xe,dF as _e,c3 as be,by as we,cs as Se,bj as Ie,cn as Ae,b_ as Me,bl as Ce,bk as Te,ew as De,dD as Re,co as Pe,cp as Ve}from"./installCanvasRenderer-DOho8wCD.js";function ke(r){e(t),e(n)}var Oe=s,Le=function(e){function t(t){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new i,n._rawTransformable=new i,n.name=t,n}return r(t,e),t.prototype.setBoundingRect=function(e,t,n,r){return this._rect=new a(e,t,n,r),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,n,r){this._transformTo(e,t,n,r),this._viewRect=new a(e,t,n,r)},t.prototype._transformTo=function(e,t,n,r){var i=this.getBoundingRect(),o=this._rawTransformable;o.transform=i.calculateTransform(new a(e,t,n,r));var s=o.parent;o.parent=null,o.decomposeTransform(),o.parent=s,this._updateTransform()},t.prototype.setCenter=function(e,t){e&&(this._center=[o(e[0],t.getWidth()),o(e[1],t.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),i=this.getZoom();r=s([],r,e),n=s([],n,e),t.originX=r[0],t.originY=r[1],t.x=n[0]-r[0],t.y=n[1]-r[1],t.scaleX=t.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),l(this.transform||(this.transform=[]),t.transform||u()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],c(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,n=new i;return n.transform=t.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,n){var r=t?this._rawTransform:this.transform;return n=n||[],r?Oe(n,e,r):h(n,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?Oe([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,n){var r=ze(t);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var r=ze(t);return r===this?r.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(i);function ze(e){var t=e.seriesModel;return t?t.coordinateSystem:null}function Ge(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Be(e,t,n,r){var i=e.getZoom(),a=e.getCenter(),o=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(Ge(e,s),r)),null!=o){if(n){var l=n.min||0,u=n.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}e.scaleX*=o,e.scaleY*=o;var c=(t.originX-e.x)*(o-1),h=(t.originY-e.y)*(o-1);e.x-=c,e.y-=h,e.updateTransform(),e.setCenter(Ge(e,s),r),e.setZoom(o*i)}return{center:e.getCenter(),zoom:e.getZoom()}}var Ne=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var r=d(n._mousedownHandler,n),i=d(n._mousemoveHandler,n),a=d(n._mouseupHandler,n),o=d(n._mousewheelHandler,n),s=d(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=p(g(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",r),t.on("mousemove",i),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",o),t.on("pinch",s))},n.disable=function(){t.off("mousedown",r),t.off("mousemove",i),t.off("mouseup",a),t.off("mousewheel",o),t.off("pinch",s)},n}return r(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!f(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,r=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,r)&&(this._x=n,this._y=r,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&He("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!m(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,r=this._x,i=this._y,a=t-r,o=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&v(e.event),We(this,"pan","moveOnMouseMove",e,{dx:a,dy:o,oldX:r,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){f(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=He("zoomOnMouseWheel",e,this._opt),n=He("moveOnMouseWheel",e,this._opt),r=e.wheelDelta,i=Math.abs(r),a=e.offsetX,o=e.offsetY;if(0!==r&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;Ee(this,"zoom","zoomOnMouseWheel",e,{scale:r>0?s:1/s,originX:a,originY:o,isAvailableBehavior:null})}if(n){var l=Math.abs(r);Ee(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(r>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:o,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){m(this._zr,"globalPan")||Ee(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(y);function Ee(e,t,n,r,i){e.pointerChecker&&e.pointerChecker(r,i.originX,i.originY)&&(v(r.event),We(e,t,n,r,i))}function We(e,t,n,r,i){i.isAvailableBehavior=d(He,null,n,r),e.trigger(t,i)}function He(e,t,n){var r=n[e];return!e||r&&(!x(r)||t.event[r+"Key"])}function Ye(e,t,n){var r=e.target;r.x+=t,r.y+=n,r.dirty()}function Fe(e,t,n,r){var i=e.target,a=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/e.zoom;e.zoom=o,i.x-=(n-i.x)*(u-1),i.y-=(r-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Xe=S,Ze=w,Ue=-1,je=function(){function e(t){var n=t.mappingMethod,r=t.type,i=this.option=g(t);this.type=r,this.mappingMethod=n,this._normalizeData=it[n];var a=e.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],"piecewise"===n?(Ke(i),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,S(t,(function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(i)):"category"===n?i.categories?function(e){var t=e.categories,n=e.categoryMap={},r=e.visual;if(Xe(t,(function(e,t){n[e]=t})),!I(r)){var i=[];w(r)?Xe(r,(function(e,t){var r=n[t];i[null!=r?r:Ue]=e})):i[-1]=r,r=rt(e,i)}for(var a=t.length-1;a>=0;a--)null==r[a]&&(delete n[t[a]],t.pop())}(i):Ke(i,!0):(_("linear"!==n||i.dataExtent),Ke(i))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return d(this._normalizeData,this)},e.listVisualTypes=function(){return b(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,n){w(e)?S(e,t,n):t.call(n,e)},e.mapVisual=function(t,n,r){var i,a=I(t)?[]:w(t)?{}:(i=!0,null);return e.eachVisual(t,(function(e,t){var o=n.call(r,e,t);i?a=o:a[t]=o})),a},e.retrieveVisuals=function(t){var n,r={};return t&&Xe(e.visualHandlers,(function(e,i){t.hasOwnProperty(i)&&(r[i]=t[i],n=!0)})),n?r:null},e.prepareVisualTypes=function(e){if(I(e))e=e.slice();else{if(!Ze(e))return[];var t=[];Xe(e,(function(e,n){t.push(n)})),e=t}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,n){for(var r,i=1/0,a=0,o=t.length;a<o;a++){var s=t[a].value;if(null!=s){if(s===e||x(s)&&s===e+"")return a;n&&h(s,a)}}for(a=0,o=t.length;a<o;a++){var l=t[a],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(at(c[1],e,u[1]))return a}else if(u[1]===1/0){if(at(c[0],u[0],e))return a}else if(at(c[0],u[0],e)&&at(c[1],e,u[1]))return a;n&&h(u[0],a),n&&h(u[1],a)}}if(n)return e===1/0?t.length-1:e===-1/0?0:r;function h(t,n){var a=Math.abs(t-e);a<i&&(i=a,r=n)}},e.visualHandlers={color:{applyVisual:Qe("color"),getColorMapper:function(){var e=this.option;return d("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),$e.call(this,e)}:function(t,n,r){var i=!!r;return!n&&(t=this._normalizeData(t)),r=A(t,e.parsedVisual,r),i?r:M(r,"rgba")},this)},_normalizedToVisual:{linear:function(e){return M(A(e,this.option.parsedVisual),"rgba")},category:$e,piecewise:function(e,t){var n=nt.call(this,t);return null==n&&(n=M(A(e,this.option.parsedVisual),"rgba")),n},fixed:et}},colorHue:qe((function(e,t){return P(e,t)})),colorSaturation:qe((function(e,t){return P(e,null,t)})),colorLightness:qe((function(e,t){return P(e,null,null,t)})),colorAlpha:qe((function(e,t){return V(e,t)})),decal:{applyVisual:Qe("decal"),_normalizedToVisual:{linear:null,category:$e,piecewise:null,fixed:null}},opacity:{applyVisual:Qe("opacity"),_normalizedToVisual:tt([0,1])},liftZ:{applyVisual:Qe("liftZ"),_normalizedToVisual:{linear:et,category:et,piecewise:et,fixed:et}},symbol:{applyVisual:function(e,t,n){n("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:Je,category:$e,piecewise:function(e,t){var n=nt.call(this,t);return null==n&&(n=Je.call(this,e)),n},fixed:et}},symbolSize:{applyVisual:Qe("symbolSize"),_normalizedToVisual:tt([0,1])}},e}();function Ke(e,t){var n=e.visual,r=[];w(n)?Xe(n,(function(e){r.push(e)})):null!=n&&r.push(n);t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(r[1]=r[0]),rt(e,r)}function qe(e){return{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("color",e(n("color"),i))},_normalizedToVisual:tt([0,1])}}function Je(e){var t=this.option.visual;return t[Math.round(C(e,[0,1],[0,t.length-1],!0))]||{}}function Qe(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function $e(e){var t=this.option.visual;return t[this.option.loop&&e!==Ue?e%t.length:e]}function et(){return this.option.visual[0]}function tt(e){return{linear:function(t){return C(t,e,this.option.visual,!0)},category:$e,piecewise:function(t,n){var r=nt.call(this,n);return null==r&&(r=C(t,e,this.option.visual,!0)),r},fixed:et}}function nt(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=n[je.findPieceIndex(e,n)];if(r&&r.visual)return r.visual[this.type]}}function rt(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=T(t,(function(e){return D(e)||[0,0,0,1]}))),t}var it={linear:function(e){return C(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=je.findPieceIndex(e,t,!0);if(null!=n)return C(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?Ue:t},fixed:R};function at(e,t,n){return e?t<=n:t<n}function ot(e,t){return e.type===t}var st=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return r(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),I(t)&&S(t,(function(e,r){x(e)&&(e={type:e}),t[r]=k(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(r){var i,a=r.name;if(n.push(a),r.legendVisualProvider){var o=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(n=n.concat(o)),o.length?t=t.concat(o):i=!0}else i=!0;i&&O(r)&&t.push(r.name)})),this._availableNames=n;var r=this.get("data")||t,i=L(),a=T(r,(function(e){return(x(e)||E(e))&&(e={name:e}),i.get(e.name)?null:(i.set(e.name,!0),new z(e,this,this.ecModel))}),this);this._data=G(a,(function(e){return!!e}))},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;S(n,(function(e){t[e.get("name")]=!1}))}t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;S(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;S(e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&B(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(N),lt=ne,ut=S,ct=re,ht=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return r(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new ct),this.group.add(this._selectorGroup=new ct),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),a=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===a?"right":"left");var o=e.get("selector",!0),s=e.get("selectorPosition",!0);!o||s&&"auto"!==s||(s="horizontal"===a?"end":"start"),this.renderInner(i,e,t,n,o,a,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),h=W(l,u,c),d=this.layoutInner(e,i,h,r,o,s),g=W(p({width:d.width,height:d.height},l),u,c);this.group.x=g.x-d.x,this.group.y=g.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=H(d,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,r,i,a,o){var s=this.getContentGroup(),l=L(),u=t.get("selectedMode"),c=[];n.eachRawSeries((function(e){!e.get("legendHoverLink")&&c.push(e.id)})),ut(t.getData(),(function(i,a){var o=i.get("name");if(!this.newlineDisabled&&(""===o||"\n"===o)){var h=new ct;return h.newline=!0,void s.add(h)}var d=n.getSeriesByName(o)[0];if(!l.get(o))if(d){var p=d.getData(),g=p.getVisual("legendLineStyle")||{},f=p.getVisual("legendIcon"),m=p.getVisual("style"),v=this._createItem(d,o,a,i,t,e,g,m,f,u,r);v.on("click",lt(dt,o,null,r,c)).on("mouseover",lt(gt,d.name,null,r,c)).on("mouseout",lt(ft,d.name,null,r,c)),n.ssr&&v.eachChild((function(e){var t=Y(e);t.seriesIndex=d.seriesIndex,t.dataIndex=a,t.ssrType="legend"})),l.set(o,!0)}else n.eachRawSeries((function(s){if(!l.get(o)&&s.legendVisualProvider){var h=s.legendVisualProvider;if(!h.containName(o))return;var d=h.indexOfName(o),p=h.getItemVisual(d,"style"),g=h.getItemVisual(d,"legendIcon"),f=D(p.fill);f&&0===f[3]&&(f[3]=.2,p=F(F({},p),{fill:M(f,"rgba")}));var m=this._createItem(s,o,a,i,t,e,{},p,g,u,r);m.on("click",lt(dt,null,o,r,c)).on("mouseover",lt(gt,null,o,r,c)).on("mouseout",lt(ft,null,o,r,c)),n.ssr&&m.eachChild((function(e){var t=Y(e);t.seriesIndex=s.seriesIndex,t.dataIndex=a,t.ssrType="legend"})),l.set(o,!0)}}),this)}),this),i&&this._createSelector(i,t,r,a,o)},t.prototype._createSelector=function(e,t,n,r,i){var a=this.getSelectorGroup();ut(e,(function(e){var r=e.type,i=new X({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect",legendId:t.id})}});a.add(i);var o=t.getModel("selectorLabel"),s=t.getModel(["emphasis","selectorLabel"]);Z(i,{normal:o,emphasis:s},{defaultText:e.title}),U(i)}))},t.prototype._createItem=function(e,t,n,r,i,a,o,s,l,u,c){var h=e.visualDrawType,d=i.get("itemWidth"),p=i.get("itemHeight"),g=i.isSelected(t),f=r.get("symbolRotate"),m=r.get("symbolKeepAspect"),v=r.get("icon"),y=function(e,t,n,r,i,a,o){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),ut(e,(function(n,r){"inherit"===e[r]&&(e[r]=t[r])}))}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=0===e.lastIndexOf("empty",0)?"fill":"stroke",h=l.getShallow("decal");u.decal=h&&"inherit"!==h?ee(h,o):r.decal,"inherit"===u.fill&&(u.fill=r[i]);"inherit"===u.stroke&&(u.stroke=r[c]);"inherit"===u.opacity&&(u.opacity=("fill"===i?r:n).opacity);s(u,r);var d=t.getModel("lineStyle"),p=d.getLineStyle();if(s(p,n),"auto"===u.fill&&(u.fill=r.fill),"auto"===u.stroke&&(u.stroke=r.fill),"auto"===p.stroke&&(p.stroke=r.fill),!a){var g=t.get("inactiveBorderWidth"),f=u[c];u.lineWidth="auto"===g?r.lineWidth>0&&f?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),p.stroke=d.get("inactiveColor"),p.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:p}}(l=v||l||"roundRect",r,o,s,h,g,c),_=new ct,b=r.getModel("textStyle");if(!j(e.getLegendIcon)||v&&"inherit"!==v){var w="inherit"===v&&e.getData().getVisual("symbol")?"inherit"===f?e.getData().getVisual("symbolRotate"):f:0;_.add(function(e){var t=e.icon||"roundRect",n=te(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:d,itemHeight:p,icon:l,iconRotate:w,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}))}else _.add(e.getLegendIcon({itemWidth:d,itemHeight:p,icon:l,iconRotate:f,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}));var S="left"===a?d+5:-5,I=a,A=i.get("formatter"),M=t;x(A)&&A?M=A.replace("{name}",null!=t?t:""):j(A)&&(M=A(t));var C=g?b.getTextColor():r.get("inactiveColor");_.add(new X({style:K(b,{text:M,x:S,y:p/2,fill:C,align:I,verticalAlign:"middle"},{inheritColor:C})}));var T=new q({shape:_.getBoundingRect(),style:{fill:"transparent"}}),D=r.getModel("tooltip");return D.get("show")&&J({el:T,componentModel:i,itemName:t,itemTooltipOption:D.option}),_.add(T),_.eachChild((function(e){e.silent=!0})),T.silent=!u,this.getContentGroup().add(_),U(_),_.__legendDataIndex=n,_},t.prototype.layoutInner=function(e,t,n,r,i,a){var o=this.getContentGroup(),s=this.getSelectorGroup();Q(e.get("orient"),o,e.get("itemGap"),n.width,n.height);var l=o.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),o.markRedraw(),i){Q("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),h=[-c.x,-c.y],d=e.get("selectorButtonGap",!0),p=e.getOrient().index,g=0===p?"width":"height",f=0===p?"height":"width",m=0===p?"y":"x";"end"===a?h[p]+=l[g]+d:u[p]+=c[g]+d,h[1-p]+=l[f]/2-c[f]/2,s.x=h[0],s.y=h[1],o.x=u[0],o.y=u[1];var v={x:0,y:0};return v[g]=l[g]+d+c[g],v[f]=Math.max(l[f],c[f]),v[m]=Math.min(0,c[m]+h[1-p]),v}return o.x=u[0],o.y=u[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}($);function dt(e,t,n,r){ft(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),gt(e,t,n,r)}function pt(e){for(var t,n=e.getZr().storage.getDisplayList(),r=0,i=n.length;r<i&&!(t=n[r].states.emphasis);)r++;return t&&t.hoverLayer}function gt(e,t,n,r){pt(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function ft(e,t,n,r){pt(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function mt(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))}function vt(e,t,n){var r="allSelect"===e||"inverseSelect"===e,i={},a=[];n.eachComponent({mainType:"legend",query:t},(function(n){r?n[e]():n[e](t.name),yt(n,i),a.push(n.componentIndex)}));var o={};return n.eachComponent("legend",(function(e){S(i,(function(t,n){e[t?"select":"unSelect"](n)})),yt(e,o)})),r?{selected:o,legendIndex:a}:{name:t.name,selected:o}}function yt(e,t){var n=t||{};return S(e.getData(),(function(t){var r=t.get("name");if("\n"!==r&&""!==r){var i=e.isSelected(r);ie(n,r)?n[r]=n[r]&&i:n[r]=i}})),n}function xt(e){e.registerComponentModel(st),e.registerComponentView(ht),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,mt),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(e){e.registerAction("legendToggleSelect","legendselectchanged",ne(vt,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",ne(vt,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",ne(vt,"inverseSelect")),e.registerAction("legendSelect","legendselected",ne(vt,"select")),e.registerAction("legendUnSelect","legendunselected",ne(vt,"unSelect"))}(e)}var _t=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,r){var i=ae(t);e.prototype.init.call(this,t,n,r),bt(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),bt(this,this.option,t)},t.type="legend.scroll",t.defaultOption=oe(st.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(st);function bt(e,t,n){var r=[1,1];r[e.getOrient().index]=0,se(t,n,{type:"box",ignoreSize:!!r})}var wt=re,St=["width","height"],It=["x","y"],At=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return r(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new wt),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new wt)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,r,i,a,o,s){var l=this;e.prototype.renderInner.call(this,t,n,r,i,a,o,s);var u=this._controllerGroup,c=n.get("pageIconSize",!0),h=I(c)?c:[c,c];g("pagePrev",0);var p=n.getModel("pageTextStyle");function g(e,t){var r=e+"DataIndex",a=le(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:d(l._pageGo,l,r,n,i)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});a.name=e,u.add(a)}u.add(new X({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1)},t.prototype.layoutInner=function(e,t,n,r,i,a){var o=this.getSelectorGroup(),s=e.getOrient().index,l=St[s],u=It[s],c=St[1-s],h=It[1-s];i&&Q("horizontal",o,e.get("selectorItemGap",!0));var d=e.get("selectorButtonGap",!0),p=o.getBoundingRect(),f=[-p.x,-p.y],m=g(n);i&&(m[l]=n[l]-p[l]-d);var v=this._layoutContentAndController(e,r,m,s,l,c,h,u);if(i){if("end"===a)f[s]+=v[l]+d;else{var y=p[l]+d;f[s]-=y,v[u]-=y}v[l]+=p[l]+d,f[1-s]+=v[h]+v[c]/2-p[c]/2,v[c]=Math.max(v[c],p[c]),v[h]=Math.min(v[h],p[h]+f[1-s]),o.x=f[0],o.y=f[1],o.markRedraw()}return v},t.prototype._layoutContentAndController=function(e,t,n,r,i,a,o,s){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;Q(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),Q("horizontal",c,e.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),d=c.getBoundingRect(),p=this._showController=h[i]>n[i],g=[-h.x,-h.y];t||(g[r]=l[s]);var f=[0,0],m=[-d.x,-d.y],v=ue(e.get("pageButtonGap",!0),e.get("itemGap",!0));p&&("end"===e.get("pageButtonPosition",!0)?m[r]+=n[i]-d[i]:f[r]+=d[i]+v);m[1-r]+=h[a]/2-d[a]/2,l.setPosition(g),u.setPosition(f),c.setPosition(m);var y={x:0,y:0};if(y[i]=p?n[i]:h[i],y[a]=Math.max(h[a],d[a]),y[o]=Math.min(0,d[o]+m[1-r]),u.__rectSize=n[i],p){var x={x:0,y:0};x[i]=Math.max(n[i]-d[i]-v,0),x[a]=y[a],u.setClipPath(new q({shape:x})),u.__rectSize=x[i]}else c.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var _=this._getPageInfo(e);return null!=_.pageIndex&&ce(l,{x:_.contentPosition[0],y:_.contentPosition[1]},p?e:null),this._updatePageInfoView(e,_),y},t.prototype._pageGo=function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;S(["pagePrev","pageNext"],(function(r){var i=null!=t[r+"DataIndex"],a=n.childOfName(r);a&&(a.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),a.cursor=i?"pointer":"default")}));var r=n.childOfName("pageText"),i=e.get("pageFormatter"),a=t.pageIndex,o=null!=a?a+1:0,s=t.pageCount;r&&i&&r.setStyle("text",x(i)?i.replace("{current}",null==o?"":o+"").replace("{total}",null==s?"":s+""):i({current:o,total:s}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,a=St[i],o=It[i],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,h=c?1:0,d={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return d;var p=y(u);d.contentPosition[i]=-p.s;for(var g=s+1,f=p,m=p,v=null;g<=c;++g)(!(v=y(l[g]))&&m.e>f.s+r||v&&!x(v,f.s))&&(f=m.i>f.i?m:v)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=f.i),++d.pageCount),m=v;for(g=s-1,f=p,m=p,v=null;g>=-1;--g)(v=y(l[g]))&&x(m,v.s)||!(f.i<m.i)||(m=f,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=f.i),++d.pageCount,++d.pageIndex),f=v;return d;function y(e){if(e){var t=e.getBoundingRect(),n=t[o]+e[o];return{s:n,e:n+t[a],i:e.__legendDataIndex}}}function x(e,t){return e.e>=t&&e.s<=t+r}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(r,i){var a=r.__legendDataIndex;null==n&&null!=a&&(n=i),a===e&&(t=i)})),null!=t?t:n):0;var t,n},t.type="legend.scroll",t}(ht);function Mt(t){e(xt),t.registerComponentModel(_t),t.registerComponentView(At),function(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))}))}(t)}function Ct(t){e(xt),e(Mt)}function Tt(e,t,n,r,i){var a=e.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=n.get(["lineStyle","width"])||0;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new q({shape:{x:o,y:s,width:l,height:u}});if(t){var d=e.getBaseAxis(),p=d.isHorizontal(),g=d.inverse;p?(g&&(h.shape.x+=l),h.shape.width=0):(g||(h.shape.y+=u),h.shape.height=0);var f=j(i)?function(e){i(e,h)}:null;he(h,{shape:{width:l,height:u,x:o,y:s}},n,null,r,f)}return h}function Dt(e,t,n){var r=e.getArea(),i=de(r.r0,1),a=de(r.r,1),o=new pe({shape:{cx:de(e.cx,1),cy:de(e.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});t&&("angle"===e.getBaseAxis().dim?o.shape.endAngle=r.startAngle:o.shape.r=i,he(o,{shape:{endAngle:r.endAngle,r:a}},n));return o}function Rt(e,t,n,r,i){return e?"polar"===e.type?Dt(e,t,n):"cartesian2d"===e.type?Tt(e,t,n,r,i):null:null}var Pt={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Vt=function(e){return Math.round(e.length/2)};function kt(e){return{seriesType:e,reset:function(e,t,n){var r=e.getData(),i=e.get("sampling"),a=e.coordinateSystem,o=r.count();if(o>10&&"cartesian2d"===a.type&&i){var s=a.getBaseAxis(),l=a.getOtherAxis(s),u=s.getExtent(),c=n.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(c||1),d=Math.round(o/h);if(isFinite(d)&&d>1){"lttb"===i?e.setData(r.lttbDownSample(r.mapDimension(l.dim),1/d)):"minmax"===i&&e.setData(r.minmaxDownSample(r.mapDimension(l.dim),1/d));var p=void 0;x(i)?p=Pt[i]:j(i)&&(p=i),p&&e.setData(r.downSample(r.mapDimension(l.dim),1/d,p,Vt))}}}}}var Ot=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.getInitialData=function(e,t){return ge(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,n){var r=this.coordinateSystem;if(r&&r.clampData){var i=r.clampData(e),a=r.dataToPoint(i);if(n)S(r.getAxes(),(function(e,n){if("category"===e.type&&null!=t){var r=e.getTicksCoords(),o=e.getTickModel().get("alignWithLabel"),s=i[n],l="x1"===t[n]||"y1"===t[n];if(l&&!o&&(s+=1),r.length<2)return;if(2===r.length)return void(a[n]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var u=void 0,c=void 0,h=1,d=0;d<r.length;d++){var p=r[d].coord,g=d===r.length-1?r[d-1].tickValue+h:r[d].tickValue;if(g===s){c=p;break}if(g<s)u=p;else if(null!=u&&g>s){c=(p+u)/2;break}1===d&&(h=g-r[0].tickValue)}null==c&&(u?u&&(c=r[r.length-1].coord):c=r[0].coord),a[n]=e.toGlobalCoord(c)}}));else{var o=this.getData(),s=o.getLayout("offset"),l=o.getLayout("size"),u=r.getBaseAxis().isHorizontal()?0:1;a[u]+=s+l/2}return a}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(fe);fe.registerClass(Ot);var Lt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return r(t,e),t.prototype.getInitialData=function(){return ge(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=oe(Ot.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Ot),zt=function(){return function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),Gt=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return r(t,e),t.prototype.getDefaultShape=function(){return new zt},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,i=Math.max(t.r0||0,0),a=Math.max(t.r,0),o=.5*(a-i),s=i+o,l=t.startAngle,u=t.endAngle,c=t.clockwise,h=2*Math.PI,d=c?u-l<h:l-u<h;d||(l=u-(c?h:-h));var p=Math.cos(l),g=Math.sin(l),f=Math.cos(u),m=Math.sin(u);d?(e.moveTo(p*i+n,g*i+r),e.arc(p*s+n,g*s+r,o,-Math.PI+l,l,!c)):e.moveTo(p*a+n,g*a+r),e.arc(n,r,a,l,u,!c),e.arc(f*s+n,m*s+r,o,u-2*Math.PI,u-Math.PI,!c),0!==i&&e.arc(n,r,i,u,l,c)},t}(me);function Bt(e,t,n){return t*Math.sin(e)*(n?-1:1)}function Nt(e,t,n){return t*Math.cos(e)*(n?1:-1)}var Et=Math.max,Wt=Math.min;var Ht=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return r(t,e),t.prototype.render=function(e,t,n,r){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var i=e.get("coordinateSystem");"cartesian2d"!==i&&"polar"!==i||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,r))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){ye(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,r){var i,a=this.group,o=e.getData(),s=this._data,l=e.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?i=u.isHorizontal():"polar"===l.type&&(i="angle"===u.dim);var c=e.isAnimationEnabled()?e:null,h=function(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&"category"===r.type&&"cartesian2d"===t.type)return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}(e,l);h&&this._enableRealtimeSort(h,o,n);var d=e.get("clip",!0)||h,p=function(e,t){var n=e.getArea&&e.getArea();if(ot(e,"cartesian2d")){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}(l,o);a.removeClipPath();var g=e.get("roundCap",!0),f=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],x=this._backgroundEls,_=r&&r.isInitSort,b=r&&"changeAxisOrder"===r.type;function w(e){var t=qt[l.type](o,e),n=function(e,t,n){var r="polar"===e.type?pe:q;return new r({shape:rn(t,n,e),silent:!0,z2:0})}(l,i,t);return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",v):n.setShape("cornerRadius",v),y[e]=n,n}o.diff(s).add((function(t){var n=o.getItemModel(t),r=qt[l.type](o,t,n);if(f&&w(t),o.hasValue(t)&&Kt[l.type](r)){var s=!1;d&&(s=Yt[l.type](p,r));var m=Ft[l.type](e,o,t,r,i,c,u.model,!1,g);h&&(m.forceLabelAnimation=!0),Qt(m,o,t,n,r,e,i,"polar"===l.type),_?m.attr({shape:r}):h?Xt(h,c,m,r,t,i,!1,!1):he(m,{shape:r},e,t),o.setItemGraphicEl(t,m),a.add(m),m.ignore=s}})).update((function(t,n){var r=o.getItemModel(t),S=qt[l.type](o,t,r);if(f){var I=void 0;0===x.length?I=w(n):((I=x[n]).useStyle(m.getItemStyle()),"cartesian2d"===l.type?I.setShape("r",v):I.setShape("cornerRadius",v),y[t]=I);var A=qt[l.type](o,t),M=rn(i,A,l);ce(I,{shape:M},c,t)}var C=s.getItemGraphicEl(n);if(o.hasValue(t)&&Kt[l.type](S)){var T=!1;if(d&&(T=Yt[l.type](p,S))&&a.remove(C),C?xe(C):C=Ft[l.type](e,o,t,S,i,c,u.model,!!C,g),h&&(C.forceLabelAnimation=!0),b){var D=C.getTextContent();if(D){var R=_e(D);null!=R.prevValue&&(R.prevValue=R.value)}}else Qt(C,o,t,r,S,e,i,"polar"===l.type);_?C.attr({shape:S}):h?Xt(h,c,C,S,t,i,!0,b):ce(C,{shape:S},e,t,null),o.setItemGraphicEl(t,C),C.ignore=T,a.add(C)}else a.remove(C)})).remove((function(t){var n=s.getItemGraphicEl(t);n&&be(n,e,t)})).execute();var S=this._backgroundGroup||(this._backgroundGroup=new re);S.removeAll();for(var I=0;I<y.length;++I)S.add(y[I]);a.add(S),this._backgroundEls=y,this._data=o},t.prototype._renderLarge=function(e,t,n){this._clear(),tn(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),tn(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Rt(e.coordinateSystem,!1,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var r=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var a=function(e){var n=t.getItemGraphicEl(e),r=n&&n.shape;return r&&Math.abs(i.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(t,a,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var r=[];return e.each(e.mapDimension(t.dim),(function(e,t){var i=n(t);i=null==i?NaN:i,r.push({dataIndex:t,mappedValue:i,ordinalNumber:e})})),r.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:T(r,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var r=n.scale,i=e.mapDimension(n.dim),a=Number.MAX_VALUE,o=0,s=r.getOrdinalMeta().categories.length;o<s;++o){var l=e.rawIndexOf(i,r.getRawOrdinalNumber(o)),u=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(u>a)return!0;a=u}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,r=n.getExtent(),i=Math.max(0,r[0]),a=Math.min(r[1],n.getOrdinalMeta().categories.length-1);i<=a;++i)if(e.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,r){if(this._isOrderChangedWithinSameData(e,t,n)){var i=this._dataSort(e,n,t);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,n){var r=t.baseAxis,i=this._dataSort(e,r,(function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(t){be(t,e,Y(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(we),Yt={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,a=e.y+e.height,o=Et(t.x,e.x),s=Wt(t.x+t.width,i),l=Et(t.y,e.y),u=Wt(t.y+t.height,a),c=s<o,h=u<l;return t.x=c&&o>i?s:o,t.y=h&&l>a?u:l,t.width=c?0:s-o,t.height=h?0:u-l,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),c||h},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var i=Wt(t.r,e.r),a=Et(t.r0,e.r0);t.r=i,t.r0=a;var o=i-a<0;if(n<0){r=t.r;t.r=t.r0,t.r0=r}return o}},Ft={cartesian2d:function(e,t,n,r,i,a,o,s,l){var u=new q({shape:F({},r),z2:1});(u.__dataIndex=n,u.name="item",a)&&(u.shape[i?"height":"width"]=0);return u},polar:function(e,t,n,r,i,a,o,s,l){var u=!i&&l?Gt:pe,c=new u({shape:r,z2:1});c.name="item";var h,d,p=Jt(i);if(c.calculateTextPosition=(h=p,d=({isRoundCap:u===Gt}||{}).isRoundCap,function(e,t,n){var r=t.position;if(!r||r instanceof Array)return ve(e,t,n);var i=h(r),a=null!=t.distance?t.distance:5,o=this.shape,s=o.cx,l=o.cy,u=o.r,c=o.r0,p=(u+c)/2,g=o.startAngle,f=o.endAngle,m=(g+f)/2,v=d?Math.abs(u-c)/2:0,y=Math.cos,x=Math.sin,_=s+u*y(g),b=l+u*x(g),w="left",S="top";switch(i){case"startArc":_=s+(c-a)*y(m),b=l+(c-a)*x(m),w="center",S="top";break;case"insideStartArc":_=s+(c+a)*y(m),b=l+(c+a)*x(m),w="center",S="bottom";break;case"startAngle":_=s+p*y(g)+Bt(g,a+v,!1),b=l+p*x(g)+Nt(g,a+v,!1),w="right",S="middle";break;case"insideStartAngle":_=s+p*y(g)+Bt(g,-a+v,!1),b=l+p*x(g)+Nt(g,-a+v,!1),w="left",S="middle";break;case"middle":_=s+p*y(m),b=l+p*x(m),w="center",S="middle";break;case"endArc":_=s+(u+a)*y(m),b=l+(u+a)*x(m),w="center",S="bottom";break;case"insideEndArc":_=s+(u-a)*y(m),b=l+(u-a)*x(m),w="center",S="top";break;case"endAngle":_=s+p*y(f)+Bt(f,a+v,!0),b=l+p*x(f)+Nt(f,a+v,!0),w="left",S="middle";break;case"insideEndAngle":_=s+p*y(f)+Bt(f,-a+v,!0),b=l+p*x(f)+Nt(f,-a+v,!0),w="right",S="middle";break;default:return ve(e,t,n)}return(e=e||{}).x=_,e.y=b,e.align=w,e.verticalAlign=S,e}),a){var g=i?"r":"endAngle",f={};c.shape[g]=i?r.r0:r.startAngle,f[g]=r[g],(s?ce:he)(c,{shape:f},a)}return c}};function Xt(e,t,n,r,i,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?ce:he)(n,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(o?ce:he)(n,{shape:u},c,i)}function Zt(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var Ut=["x","y","width","height"],jt=["cx","cy","r","startAngle","endAngle"],Kt={cartesian2d:function(e){return!Zt(e,Ut)},polar:function(e){return!Zt(e,jt)}},qt={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),i=n?function(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var r=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,i,a)}(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Jt(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function Qt(e,t,n,r,i,a,o,s){var l=t.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var u=e.shape,c=Se(r.getModel("itemStyle"),u,!0);F(u,c),e.setShape(u)}}else{var h=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",h)}e.useStyle(l);var d=r.getShallow("cursor");d&&e.attr("cursor",d);var p=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",g=Ie(r);Z(e,g,{labelFetcher:a,labelDataIndex:n,defaultText:Ae(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var f=e.getTextContent();if(s&&f){var m=r.get(["label","position"]);e.textConfig.inside="middle"===m||null,function(e,t,n,r){if(E(r))e.setTextConfig({rotation:r});else if(I(t))e.setTextConfig({rotation:0});else{var i,a=e.shape,o=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,l=(o+s)/2,u=n(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=l;break;case"startAngle":case"insideStartAngle":i=o;break;case"endAngle":case"insideEndAngle":i=s;break;default:return void e.setTextConfig({rotation:0})}var c=1.5*Math.PI-i;"middle"===u&&c>Math.PI/2&&c<1.5*Math.PI&&(c-=Math.PI),e.setTextConfig({rotation:c})}}(e,"outside"===m?p:m,Jt(o),r.get(["label","rotate"]))}Me(f,g,a.getRawValue(n),(function(e){return Re(t,e)}));var v=r.getModel(["emphasis"]);Ce(e,v.get("focus"),v.get("blurScope"),v.get("disabled")),Te(e,r),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(i)&&(e.style.fill="none",e.style.stroke="none",S(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var $t=function(){return function(){}}(),en=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return r(t,e),t.prototype.getDefaultShape=function(){return new $t},t.prototype.buildPath=function(e,t){for(var n=t.points,r=this.baseDimIdx,i=1-this.baseDimIdx,a=[],o=[],s=this.barWidth,l=0;l<n.length;l+=3)o[r]=s,o[i]=n[l+2],a[r]=n[l+r],a[i]=n[l+i],e.rect(a[0],a[1],o[0],o[1])},t}(me);function tn(e,t,n,r){var i=e.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new en({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),n&&n.push(c)}var h=new en({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,t.add(h),h.useStyle(i.getVisual("style")),h.style.stroke=null,Y(h).seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",nn),h.on("mousemove",nn)),n&&n.push(h)}var nn=De((function(e){var t=function(e,t,n){for(var r=e.baseDimIdx,i=1-r,a=e.shape.points,o=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,h=a.length/3;c<h;c++){var d=3*c;if(l[r]=u,l[i]=a[d+2],s[r]=a[d+r],s[i]=a[d+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}(this,e.offsetX,e.offsetY);Y(this).dataIndex=t>=0?t:null}),30,!1);function rn(e,t,n){if(ot(n,"cartesian2d")){var r=t,i=n.getArea();return{x:e?r.x:i.x,y:e?i.y:r.y,width:e?r.width:i.width,height:e?i.height:r.height}}var a=t;return{cx:(i=n.getArea()).cx,cy:i.cy,r0:e?i.r0:a.r0,r:e?i.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:2*Math.PI}}function an(e){e.registerChartView(Ht),e.registerSeriesModel(Lt),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,ne(Ve,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Pe("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,kt("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}export{Ot as B,Ne as R,Gt as S,Le as V,Ct as a,an as b,ot as c,Fe as d,Be as e,je as f,Rt as g,Tt as h,ke as i,Dt as j,kt as k,Ye as u};
