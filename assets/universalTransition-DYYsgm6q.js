import{z as e,aJ as t,cu as r,aU as n,a4 as a,a3 as o,aF as i,aS as s,bj as d,_ as l,H as u,P as h,aX as c,aj as p,ak as f,S as g,D as v,af as y,U as m,aL as I,dH as x,a6 as M,N as w,Z as b,g as _,dC as T,a1 as S,bh as D,Q as N,an as C,cs as R,ag as L,bQ as V,ap as A,t as k,dm as G,dI as P,C as z,w as E,o as W,dJ as H,dw as B,dK as Z,bZ as F,be as U,bf as O,dL as q,aD as X,at as j,dM as Y,bd as J,dr as Q,ab as K,y as $,a9 as ee,X as te,dN as re,cA as ne,dO as ae,bJ as oe,bA as ie,aM as se,bM as de,bW as le,dP as ue,dQ as he,T as ce,dR as pe,a8 as fe,dS as ge,bP as ve,bx as ye,dT as me,bR as Ie,dU as xe,c5 as Me,dV as we,aE as be,dW as _e,aI as Te,dX as Se,dY as De}from"./vintage-W2u9YdUI.js";import{l as Ne}from"./install-Cw1SDNr2.js";var Ce=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,r){a(e)&&(r=t,t=e,e=null),o(e=e||{})&&(e={order:e});var n,i=e.order||"preorder",s=this[e.attr||"children"];"preorder"===i&&(n=t.call(r,this));for(var d=0;!n&&d<s.length;d++)s[d].eachNode(e,t,r);"postorder"===i&&t.call(r,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,n=r.length;t<n;t++){var a=r[t].getNodeById(e);if(a)return a}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,n=r.length;t<n;t++){var a=r[t].contains(e);if(a)return a}},e.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode((function(t){e.push(t.dataIndex)})),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}(),Re=function(){function a(e){this.type="tree",this._nodes=[],this.hostModel=e}return a.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},a.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},a.prototype.getNodeById=function(e){return this.root.getNodeById(e)},a.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,n=t.length;r<n;r++)t[r].dataIndex=-1;for(r=0,n=e.count();r<n;r++)t[e.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(o,i,s){var d=new a(i),l=[],u=1;!function r(n,a){var o=n.value;u=Math.max(u,e(o)?o.length:1),l.push(n);var i=new Ce(t(n.name,""),d);a?function(e,t){var r=t.children;if(e.parentNode===t)return;r.push(e),e.parentNode=t}(i,a):d.root=i,d._nodes.push(i);var s=n.children;if(s)for(var h=0;h<s.length;h++)r(s[h],i)}(o),d.root.updateDepthAndHeight(0);var h=r(l,{coordDimensions:["value"],dimensionsCount:u}).dimensions,c=new n(h,i);return c.initData(l),s&&s(c),Ne({mainData:c,struct:d,structAttr:"tree"}),d.update(),d},a}();function Le(e,t,r){if(e&&i(t,e.type)>=0){var n=r.getData().tree.root,a=e.targetNode;if(o(a)&&(a=n.getNodeById(a)),a&&n.contains(a))return{node:a};var s=e.targetNodeId;if(null!=s&&(a=n.getNodeById(s)))return{node:a}}}function Ve(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function Ae(e,t){var r=Ve(e);return i(r,t)>=0}function ke(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Ge=["treemapZoomToNode","treemapRender","treemapMove"];function Pe(e){var t=e.getData().tree,r={};t.eachNode((function(t){for(var n=t;n&&n.depth>1;)n=n.parentNode;var a=d(e.ecModel,n.name||n.dataIndex+"",r);t.setVisual("decal",a)}))}var ze=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return l(t,e),t.prototype.getInitialData=function(e,t){var r={name:e.name,children:e.data};Ee(r);var n=e.levels||[],a=this.designatedVisualItemStyle={},o=new h({itemStyle:a},this,t);n=e.levels=function(e,t){var r,n,a=y(t.get("color")),o=y(t.get(["aria","decal","decals"]));if(!a)return;e=e||[],v(e,(function(e){var t=new h(e),a=t.get("color"),o=t.get("decal");(t.get(["itemStyle","color"])||a&&"none"!==a)&&(r=!0),(t.get(["itemStyle","decal"])||o&&"none"!==o)&&(n=!0)}));var i=e[0]||(e[0]={});r||(i.color=a.slice());!n&&o&&(i.decal=o.slice());return e}(n,t);var i=u(n||[],(function(e){return new h(e,o,t)}),this),s=Re.createTree(r,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=s.getNodeByDataIndex(t),n=r?i[r.depth]:null;return e.parentModel=n||o,e}))}));return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,r){var n=this.getData(),a=this.getRawValue(e),o=n.getName(e);return c("nameValue",{name:o,value:a})},t.prototype.getDataParams=function(t){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=ke(n,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},p(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=f(),this._idIndexMapCount=0);var r=t.get(e);return null==r&&t.set(e,r=this._idIndexMapCount++),r},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Pe(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â–¶",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(g);function Ee(t){var r=0;v(t.children,(function(t){Ee(t);var n=t.value;e(n)&&(n=n[0]),r+=n}));var n=t.value;e(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=r),n<0&&(n=0),e(t.value)?t.value[0]=n:t.value=n}var We=function(){function e(e){this.group=new m,e.add(this.group)}return e.prototype.render=function(e,t,r,n){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),a.get("show")&&r){var i=a.getModel("itemStyle"),s=a.getModel("emphasis"),d=i.getModel("textStyle"),l=s.getModel(["itemStyle","textStyle"]),u={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,u,d),this._renderContent(e,u,i,s,d,l,n),I(o,u.pos,u.box)}},e.prototype._prepare=function(e,r,n){for(var a=e;a;a=a.parentNode){var o=t(a.getModel().get("name"),""),i=n.getTextRect(o),s=Math.max(i.width+16,r.emptyItemWidth);r.totalWidth+=s+8,r.renderList.push({node:a,text:o,width:s})}},e.prototype._renderContent=function(e,t,r,n,a,o,i){for(var s=0,d=t.emptyItemWidth,l=e.get(["breadcrumb","height"]),u=x(t.pos,t.box),h=t.totalWidth,c=t.renderList,p=n.getModel("itemStyle").getItemStyle(),f=c.length-1;f>=0;f--){var g=c[f],v=g.node,y=g.width,m=g.text;h>u.width&&(h-=y-d,y=d,m=null);var I=new M({shape:{points:He(s,0,y,l,f===c.length-1,0===f)},style:w(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new b({style:_(a,{text:m})}),textConfig:{position:"inside"},z2:1e4*T,onclick:S(i,v)});I.disableLabelAnimation=!0,I.getTextContent().ensureState("emphasis").style=_(o,{text:m}),I.ensureState("emphasis").style=p,D(I,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(I),Be(I,e,v),s+=y+8}},e.prototype.remove=function(){this.group.removeAll()},e}();function He(e,t,r,n,a,o){var i=[[a?e:e-5,t],[e+r,t],[e+r,t+n],[a?e:e-5,t+n]];return!o&&i.splice(2,0,[e+r+5,t+n/2]),!a&&i.push([e,t+n/2]),i}function Be(e,t,r){N(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&ke(r,t)}}var Ze=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,r,n,a){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:n,easing:a}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},n=0,a=this._storage.length;n<a;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},e}();var Fe=m,Ue=j,Oe="label",qe="upperLabel",Xe=10*T,je=2*T,Ye=3*T,Je=C([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Qe=function(e){var t=Je(e);return t.stroke=t.fill=t.lineWidth=null,t},Ke=E(),$e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.type,t._state="ready",t._storage={nodeGroup:[],background:[],content:[]},t}return l(r,e),r.prototype.render=function(e,t,r,n){var a=t.findComponents({mainType:"series",subType:"treemap",query:n});if(!(i(a,e)<0)){this.seriesModel=e,this.api=r,this.ecModel=t;var o=Le(n,["treemapZoomToNode","treemapRootToNode"],e),s=n&&n.type,d=e.layoutInfo,l=!this._oldTree,u=this._storage,h="treemapRootToNode"===s&&o&&u?{rootNodeGroup:u.nodeGroup[o.node.getRawIndex()],direction:n.direction}:null,c=this._giveContainerGroup(d),p=e.get("animation"),f=this._doRender(c,e,h);!p||l||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?f.renderFinally():this._doAnimation(c,f,e,h),this._resetController(r),this._renderBreadcrumb(e,r,o)}},r.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new Fe,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},r.prototype._doRender=function(e,r,n){var a=r.getData().tree,o=this._oldTree,i={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},d=this._storage,l=[];function u(e,a,o,u){return function(e,r,n,a,o,i,s,d,l,u){if(!s)return;var h=s.getLayout(),c=e.getData(),f=s.getModel();if(c.setItemGraphicEl(s.dataIndex,null),!h||!h.isInView)return;var g=h.width,v=h.height,y=h.borderWidth,I=h.invisible,x=s.getRawIndex(),M=d&&d.getRawIndex(),w=s.viewChildren,b=h.upperHeight,_=w&&w.length,T=f.getModel("itemStyle"),S=f.getModel(["emphasis","itemStyle"]),D=f.getModel(["blur","itemStyle"]),C=f.getModel(["select","itemStyle"]),R=T.get("borderRadius")||0,L=$("nodeGroup",Fe);if(!L)return;if(l.add(L),L.x=h.x||0,L.y=h.y||0,L.markRedraw(),Ke(L).nodeWidth=g,Ke(L).nodeHeight=v,h.isAboveViewRoot)return L;var V=$("background",Ue,u,je);V&&j(L,V,_&&h.upperLabelHeight);var A=f.getModel("emphasis"),k=A.get("focus"),G=A.get("blurScope"),P=A.get("disabled"),z="ancestor"===k?s.getAncestorsIndices():"descendant"===k?s.getDescendantIndices():k;if(_)H(L)&&B(L,!1),V&&(B(V,!P),c.setItemGraphicEl(s.dataIndex,V),Z(V,z,G));else{var E=$("content",Ue,u,Ye);E&&Y(L,E),V.disableMorphing=!0,V&&H(V)&&B(V,!1),B(L,!P),c.setItemGraphicEl(s.dataIndex,L);var W=f.getShallow("cursor");W&&E.attr("cursor",W),Z(L,z,G)}return L;function j(t,r,n){var a=N(r);if(a.dataIndex=s.dataIndex,a.seriesIndex=e.seriesIndex,r.setShape({x:0,y:0,width:g,height:v,r:R}),I)J(r);else{r.invisible=!1;var o=s.getVisual("style"),i=o.stroke,d=Qe(T);d.fill=i;var l=Je(S);l.fill=S.get("borderColor");var u=Je(D);u.fill=D.get("borderColor");var h=Je(C);if(h.fill=C.get("borderColor"),n){var c=g-2*y;Q(r,i,o.opacity,{x:y,y:0,width:c,height:b})}else r.removeTextContent();r.setStyle(d),r.ensureState("emphasis").style=l,r.ensureState("blur").style=u,r.ensureState("select").style=h,F(r)}t.add(r)}function Y(t,r){var n=N(r);n.dataIndex=s.dataIndex,n.seriesIndex=e.seriesIndex;var a=Math.max(g-2*y,0),o=Math.max(v-2*y,0);if(r.culling=!0,r.setShape({x:y,y:y,width:a,height:o,r:R}),I)J(r);else{r.invisible=!1;var i=s.getVisual("style"),d=i.fill,l=Qe(T);l.fill=d,l.decal=i.decal;var u=Je(S),h=Je(D),c=Je(C);Q(r,d,i.opacity,null),r.setStyle(l),r.ensureState("emphasis").style=u,r.ensureState("blur").style=h,r.ensureState("select").style=c,F(r)}t.add(r)}function J(e){!e.invisible&&i.push(e)}function Q(r,n,a,o){var i=f.getModel(o?qe:Oe),d=t(f.get("name"),null),l=i.getShallow("show");U(r,O(f,o?qe:Oe),{defaultText:l?d:null,inheritColor:n,defaultOpacity:a,labelFetcher:e,labelDataIndex:s.dataIndex});var u=r.getTextContent();if(u){var c=u.style,p=q(c.padding||0);o&&(r.setTextConfig({layoutRect:o}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((o?o.width:r.shape.width)-p[1]-p[3],0),t=Math.max((o?o.height:r.shape.height)-p[0]-p[2],0);c.width===e&&c.height===t||u.setStyle({width:e,height:t})},c.truncateMinChar=2,c.lineOverflow="truncate",K(c,o,h);var g=u.getState("emphasis");K(g?g.style:null,o,h)}}function K(t,r,n){var a=t?t.text:null;if(!r&&n.isLeafRoot&&null!=a){var o=e.get("drillDownIcon",!0);t.text=o?o+" "+a:a}}function $(e,t,a,i){var s=null!=M&&n[e][M],d=o[e];return s?(n[e][M]=null,ee(d,s)):I||((s=new t)instanceof X&&(s.z2=function(e,t){return e*Xe+t}(a,i)),te(d,s)),r[e][x]=s}function ee(e,t){var r=e[x]={};t instanceof Fe?(r.oldX=t.x,r.oldY=t.y):r.oldShape=p({},t.shape)}function te(e,t){var r=e[x]={},n=s.parentNode,i=t instanceof m;if(n&&(!a||"drillDown"===a.direction)){var d=0,l=0,u=o.background[n.getRawIndex()];!a&&u&&u.oldShape&&(d=u.oldShape.width,l=u.oldShape.height),i?(r.oldX=0,r.oldY=l):r.oldShape={x:d,y:l,width:0,height:0}}r.fadein=!i}}(r,s,d,n,i,l,e,a,o,u)}!function e(t,r,n,a,o){a?(r=t,v(t,(function(e,t){!e.isRemoved()&&s(t,t)}))):new R(r,t,i,i).add(s).update(s).remove(S(s,null)).execute();function i(e){return e.getId()}function s(i,s){var d=null!=i?t[i]:null,l=null!=s?r[s]:null,h=u(d,l,n,o);h&&e(d&&d.viewChildren||[],l&&l.viewChildren||[],h,a,o+1)}}(a.root?[a.root]:[],o&&o.root?[o.root]:[],e,a===o||!o,0);var h,c,f=(c={nodeGroup:[],background:[],content:[]},(h=d)&&v(h,(function(e,t){var r=c[t];v(e,(function(e){e&&(r.push(e),Ke(e).willDelete=!0)}))})),c);if(this._oldTree=a,this._storage=s,this._controllerHost){var g=this.seriesModel.layoutInfo,y=a.root.getLayout();y.width===g.width&&y.height===g.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:i,willDeleteEls:f,renderFinally:function(){v(f,(function(e){v(e,(function(e){e.parent&&e.parent.remove(e)}))})),v(l,(function(e){e.invisible=!0,e.dirty()}))}}},r.prototype._doAnimation=function(e,t,r,n){var o=r.get("animationDurationUpdate"),i=r.get("animationEasing"),s=(a(o)?0:o)||0,d=(a(i)?null:i)||"cubicOut",l=new Ze;v(t.willDeleteEls,(function(e,t){v(e,(function(e,r){if(!e.invisible){var a,o=e.parent,i=Ke(o);if(n&&"drillDown"===n.direction)a=o===n.rootNodeGroup?{shape:{x:0,y:0,width:i.nodeWidth,height:i.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;i.willDelete||(u=i.nodeWidth/2,h=i.nodeHeight/2),a="nodeGroup"===t?{x:u,y:h,style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}a&&l.add(e,a,s,0,d)}}))})),v(this._storage,(function(e,r){v(e,(function(e,n){var a=t.lastsForAnimation[r][n],o={};a&&(e instanceof m?null!=a.oldX&&(o.x=e.x,o.y=e.y,e.x=a.oldX,e.y=a.oldY):(a.oldShape&&(o.shape=p({},e.shape),e.setShape(a.oldShape)),a.fadein?(e.setStyle("opacity",0),o.style={opacity:1}):1!==e.style.opacity&&(o.style={opacity:1})),l.add(e,o,s,0,d))}))}),this),this._state="animating",l.finished(L((function(){this._state="ready",t.renderFinally()}),this)).start()},r.prototype._resetController=function(e){var t=this._controller,r=this._controllerHost;r||(this._controllerHost={target:this.group},r=this._controllerHost),t||((t=this._controller=new V(e.getZr())).enable(this.seriesModel.get("roam")),r.zoomLimit=this.seriesModel.get("scaleLimit"),r.zoom=this.seriesModel.get("zoom"),t.on("pan",L(this._onPan,this)),t.on("zoom",L(this._onZoom,this)));var n=new A(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,r){return n.contain(t,r)}))},r.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},r.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var r=t.getLayout();if(!r)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x+e.dx,y:r.y+e.dy,width:r.width,height:r.height}})}},r.prototype._onZoom=function(e){var t=e.originX,r=e.originY,n=e.scale;if("animating"!==this._state){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;var i,s=new A(o.x,o.y,o.width,o.height),d=this._controllerHost;i=d.zoomLimit;var l=d.zoom=d.zoom||1;if(l*=n,i){var u=i.min||0,h=i.max||1/0;l=Math.max(Math.min(h,l),u)}var c=l/d.zoom;d.zoom=l;var p=this.seriesModel.layoutInfo;t-=p.x,r-=p.y;var f=W();k(f,f,[-t,-r]),G(f,f,[c,c]),k(f,f,[t,r]),s.applyTransform(f),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},r.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var r=t.seriesModel.get("nodeClick",!0);if(r){var n=t.findTarget(e.offsetX,e.offsetY);if(n){var a=n.node;if(a.getLayout().isLeafRoot)t._rootToNode(n);else if("zoomToNode"===r)t._zoomToNode(n);else if("link"===r){var o=a.hostTree.data.getItemModel(a.dataIndex),i=o.get("link",!0),s=o.get("target",!0)||"blank";i&&P(i,s)}}}}}),this)},r.prototype._renderBreadcrumb=function(e,t,r){var n=this;r||(r=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(r={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new We(this.group))).render(e,t,r.node,(function(t){"animating"!==n._state&&(Ae(e.getViewRoot(),t)?n._rootToNode({node:t}):n._zoomToNode({node:t}))}))},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype.findTarget=function(e,t){var r;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(n){var a=this._storage.background[n.getRawIndex()];if(a){var o=a.transformCoordToLocal(e,t),i=a.shape;if(!(i.x<=o[0]&&o[0]<=i.x+i.width&&i.y<=o[1]&&o[1]<=i.y+i.height))return!1;r={node:n,offsetX:o[0],offsetY:o[1]}}}),this),r},r.type="treemap",r}(z);var et=E();const tt={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||rt(t,{},e.getViewRoot().getAncestors(),e)}};function rt(e,t,r,n){var a=e.getModel(),o=e.getLayout(),i=e.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,d=a.getModel("itemStyle"),l=function(e,t,r){var n=p({},t),a=r.designatedVisualItemStyle;return v(["color","colorAlpha","colorSaturation"],(function(r){a[r]=t[r];var o=e.get(r);a[r]=null,null!=o&&(n[r]=o)})),n}(d,t,n),u=i.ensureUniqueItemVisual(e.dataIndex,"style"),h=d.get("borderColor"),c=d.get("borderColorSaturation");null!=c&&(h=function(e,t){return null!=t?Y(t,null,null,e):null}(c,s=nt(l))),u.stroke=h;var f=e.viewChildren;if(f&&f.length){var g=function(e,t,r,n,a,o){if(!o||!o.length)return;var i=ot(t,"color")||null!=a.color&&"none"!==a.color&&(ot(t,"colorAlpha")||ot(t,"colorSaturation"));if(!i)return;var s=t.get("visualMin"),d=t.get("visualMax"),l=r.dataExtent.slice();null!=s&&s<l[0]&&(l[0]=s),null!=d&&d>l[1]&&(l[1]=d);var u=t.get("colorMappingBy"),h={type:i.name,dataExtent:l,visual:i.range};"color"!==h.type||"index"!==u&&"id"!==u?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var c=new Q(h);return et(c).drColorMappingBy=u,c}(0,a,o,0,l,f);v(f,(function(e,t){if(e.depth>=r.length||e===r[e.depth]){var o=function(e,t,r,n,a,o){var i=p({},t);if(a){var s=a.type,d="color"===s&&et(a).drColorMappingBy,l="index"===d?n:"id"===d?o.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));i[s]=a.mapValueToVisual(l)}return i}(a,l,e,t,g,n);rt(e,o,r,n)}}))}else s=nt(l),u.fill=s}}function nt(e){var t=at(e,"color");if(t){var r=at(e,"colorAlpha"),n=at(e,"colorSaturation");return n&&(t=Y(t,null,null,n)),r&&(t=J(t,r)),t}}function at(e,t){var r=e[t];if(null!=r&&"none"!==r)return r}function ot(t,r){var n=t.get(r);return e(n)&&n.length?{name:r,range:n}:null}var it=Math.max,st=Math.min,dt=ee,lt=v,ut=["itemStyle","borderWidth"],ht=["itemStyle","gapWidth"],ct=["upperLabel","show"],pt=["upperLabel","height"];const ft={seriesType:"treemap",reset:function(e,t,r,n){var a=r.getWidth(),o=r.getHeight(),i=e.option,s=K(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),d=i.size||[],l=$(dt(s.width,d[0]),a),u=$(dt(s.height,d[1]),o),h=n&&n.type,c=Le(n,["treemapZoomToNode","treemapRootToNode"],e),f="treemapRender"===h||"treemapMove"===h?n.rootRect:null,g=e.getViewRoot(),v=Ve(g);if("treemapMove"!==h){var y="treemapZoomToNode"===h?function(e,t,r,n,a){var o,i=(t||{}).node,s=[n,a];if(!i||i===r)return s;var d=n*a,l=d*e.option.zoomToNodeRatio;for(;o=i.parentNode;){for(var u=0,h=o.children,c=0,p=h.length;c<p;c++)u+=h[c].getValue();var f=i.getValue();if(0===f)return s;l*=u/f;var g=o.getModel(),v=g.get(ut);(l+=4*v*v+(3*v+Math.max(v,It(g)))*Math.pow(l,.5))>re&&(l=re),i=o}l<d&&(l=d);var y=Math.pow(l/d,.5);return[n*y,a*y]}(e,c,g,l,u):f?[f.width,f.height]:[l,u],m=i.sort;m&&"asc"!==m&&"desc"!==m&&(m="desc");var I={squareRatio:i.squareRatio,sort:m,leafDepth:i.leafDepth};g.hostTree.clearLayouts();var x={x:0,y:0,width:y[0],height:y[1],area:y[0]*y[1]};g.setLayout(x),gt(g,I,!1,0),x=g.getLayout(),lt(v,(function(e,t){var r=(v[t+1]||g).getValue();e.setLayout(p({dataExtent:[r,r],borderWidth:0,upperHeight:0},x))}))}var M=e.getData().tree.root;M.setLayout(function(e,t,r){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!r)return n;var a=r.node,o=a.getLayout();if(!o)return n;var i=[o.width/2,o.height/2],s=a;for(;s;){var d=s.getLayout();i[0]+=d.x,i[1]+=d.y,s=s.parentNode}return{x:e.width/2-i[0],y:e.height/2-i[1]}}(s,f,c),!0),e.setLayoutInfo(s),mt(M,new A(-s.x,-s.y,a,o),v,g,0)}};function gt(e,t,r,n){var a,o;if(!e.isRemoved()){var i=e.getLayout();a=i.width,o=i.height;var s=e.getModel(),d=s.get(ut),l=s.get(ht)/2,u=It(s),h=Math.max(d,u),c=d-l,p=h-l;e.setLayout({borderWidth:d,upperHeight:h,upperLabelHeight:u},!0);var f=(a=it(a-2*c,0))*(o=it(o-c-p,0)),g=function(e,t,r,n,a,o){var i=e.children||[],s=n.sort;"asc"!==s&&"desc"!==s&&(s=null);var d=null!=n.leafDepth&&n.leafDepth<=o;if(a&&!d)return e.viewChildren=[];i=te(i,(function(e){return!e.isRemoved()})),function(e,t){t&&e.sort((function(e,r){var n="asc"===t?e.getValue()-r.getValue():r.getValue()-e.getValue();return 0===n?"asc"===t?e.dataIndex-r.dataIndex:r.dataIndex-e.dataIndex:n}))}(i,s);var l=function(e,t,r){for(var n=0,a=0,o=t.length;a<o;a++)n+=t[a].getValue();var i,s=e.get("visualDimension");t&&t.length?"value"===s&&r?(i=[t[t.length-1].getValue(),t[0].getValue()],"asc"===r&&i.reverse()):(i=[1/0,-1/0],lt(t,(function(e){var t=e.getValue(s);t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}))):i=[NaN,NaN];return{sum:n,dataExtent:i}}(t,i,s);if(0===l.sum)return e.viewChildren=[];if(l.sum=function(e,t,r,n,a){if(!n)return r;for(var o=e.get("visibleMin"),i=a.length,s=i,d=i-1;d>=0;d--){var l=a["asc"===n?i-d-1:d].getValue();l/r*t<o&&(s=d,r-=l)}return"asc"===n?a.splice(0,i-s):a.splice(s,i-s),r}(t,r,l.sum,s,i),0===l.sum)return e.viewChildren=[];for(var u=0,h=i.length;u<h;u++){var c=i[u].getValue()/l.sum*r;i[u].setLayout({area:c})}d&&(i.length&&e.setLayout({isLeafRoot:!0},!0),i.length=0);return e.viewChildren=i,e.setLayout({dataExtent:l.dataExtent},!0),i}(e,s,f,t,r,n);if(g.length){var v={x:c,y:p,width:a,height:o},y=st(a,o),m=1/0,I=[];I.area=0;for(var x=0,M=g.length;x<M;){var w=g[x];I.push(w),I.area+=w.getLayout().area;var b=vt(I,y,t.squareRatio);b<=m?(x++,m=b):(I.area-=I.pop().getLayout().area,yt(I,y,v,l,!1),y=st(v.width,v.height),I.length=I.area=0,m=1/0)}if(I.length&&yt(I,y,v,l,!0),!r){var _=s.get("childrenVisibleMin");null!=_&&f<_&&(r=!0)}for(x=0,M=g.length;x<M;x++)gt(g[x],t,r,n+1)}}}function vt(e,t,r){for(var n=0,a=1/0,o=0,i=void 0,s=e.length;o<s;o++)(i=e[o].getLayout().area)&&(i<a&&(a=i),i>n&&(n=i));var d=e.area*e.area,l=t*t*r;return d?it(l*n/d,d/(l*a)):1/0}function yt(e,t,r,n,a){var o=t===r.width?0:1,i=1-o,s=["x","y"],d=["width","height"],l=r[s[o]],u=t?e.area/t:0;(a||u>r[d[i]])&&(u=r[d[i]]);for(var h=0,c=e.length;h<c;h++){var p=e[h],f={},g=u?p.getLayout().area/u:0,v=f[d[i]]=it(u-2*n,0),y=r[s[o]]+r[d[o]]-l,m=h===c-1||y<g?y:g,I=f[d[o]]=it(m-2*n,0);f[s[i]]=r[s[i]]+st(n,v/2),f[s[o]]=l+st(n,I/2),l+=m,p.setLayout(f,!0)}r[s[i]]+=u,r[d[i]]-=u}function mt(e,t,r,n,a){var o=e.getLayout(),i=r[a],s=i&&i===e;if(!(i&&!s||a===r.length&&e!==n)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(o),isAboveViewRoot:s},!0);var d=new A(t.x-o.x,t.y-o.y,t.width,t.height);lt(e.viewChildren||[],(function(e){mt(e,d,r,n,a+1)}))}}function It(e){return e.get(ct)?e.get(pt):0}function xt(e){e.registerSeriesModel(ze),e.registerChartView($e),e.registerVisual(tt),e.registerLayout(ft),function(e){for(var t=0;t<Ge.length;t++)e.registerAction({type:Ge[t],update:"updateView"},s);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,r){var n=Le(e,["treemapZoomToNode","treemapRootToNode"],t);if(n){var a=t.getViewRoot();a&&(e.direction=Ae(a,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}))}))}(e)}var Mt=function(e){function t(t,r,n,a){var o=e.call(this)||this;o.z2=2,o.textConfig={inside:!0},N(o).seriesIndex=r.seriesIndex;var i=new b({z2:4,silent:t.getModel().get(["label","silent"])});return o.setTextContent(i),o.updateData(!0,t,r,n,a),o}return l(t,e),t.prototype.updateData=function(e,t,r,n,a){this.node=t,t.piece=this,r=r||this._seriesModel,n=n||this._ecModel;var o=this;N(o).dataIndex=t.dataIndex;var i=t.getModel(),s=i.getModel("emphasis"),d=t.getLayout(),l=p({},d);l.label=null;var u=t.getVisual("style");u.lineJoin="bevel";var h=t.getVisual("decal");h&&(u.decal=ne(h,a));var c=ae(i.getModel("itemStyle"),l,!0);p(l,c),v(oe,(function(e){var t=o.ensureState(e),r=i.getModel([e,"itemStyle"]);t.style=r.getItemStyle();var n=ae(r,l);n&&(t.shape=n)})),e?(o.setShape(l),o.shape.r=d.r0,ie(o,{shape:{r:d.r}},r,t.dataIndex)):(se(o,{shape:l},r),de(o)),o.useStyle(u),this._updateLabel(r);var f=i.getShallow("cursor");f&&o.attr("cursor",f),this._seriesModel=r||this._seriesModel,this._ecModel=n||this._ecModel;var g=s.get("focus"),y="relative"===g?le(t.getAncestorsIndices(),t.getDescendantIndices()):"ancestor"===g?t.getAncestorsIndices():"descendant"===g?t.getDescendantIndices():g;D(this,y,s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,r=this.node.getModel(),n=r.getModel("label"),a=this.node.getLayout(),o=a.endAngle-a.startAngle,i=(a.startAngle+a.endAngle)/2,s=Math.cos(i),d=Math.sin(i),l=this,u=l.getTextContent(),h=this.node.dataIndex,c=n.get("minAngle")/180*Math.PI,p=n.get("show")&&!(null!=c&&Math.abs(o)<c);function f(e,t){var r=e.get(t);return null==r?n.get(t):r}u.ignore=!p,v(he,(function(n){var c="normal"===n?r.getModel("label"):r.getModel([n,"label"]),p="normal"===n,g=p?u:u.ensureState(n),v=e.getFormattedLabel(h,n);p&&(v=v||t.node.name),g.style=_(c,{},null,"normal"!==n,!0),v&&(g.style.text=v);var y=c.get("show");null==y||p||(g.ignore=!y);var m,I=f(c,"position"),x=p?l:l.states[n],M=x.style.fill;x.textConfig={outsideFill:"inherit"===c.get("color")?M:null,inside:"outside"!==I};var w=f(c,"distance")||0,b=f(c,"align"),T=f(c,"rotate"),S=.5*Math.PI,D=1.5*Math.PI,N=ue("tangential"===T?Math.PI/2-i:i),C=N>S&&!pe(N-S)&&N<D;"outside"===I?(m=a.r+w,b=C?"right":"left"):b&&"center"!==b?"left"===b?(m=a.r0+w,b=C?"right":"left"):"right"===b&&(m=a.r-w,b=C?"left":"right"):(m=o===2*Math.PI&&0===a.r0?0:(a.r+a.r0)/2,b="center"),g.style.align=b,g.style.verticalAlign=f(c,"verticalAlign")||"middle",g.x=m*s+a.cx,g.y=m*d+a.cy;var R=0;"radial"===T?R=ue(-i)+(C?Math.PI:0):"tangential"===T?R=ue(Math.PI/2-i)+(C?Math.PI:0):fe(T)&&(R=T*Math.PI/180),g.rotation=ue(R)})),u.dirtyStyle()},t}(ce),wt="sunburstRootToNode",bt="sunburstHighlight";var _t=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return l(t,e),t.prototype.render=function(e,t,r,n){var a=this;this.seriesModel=e,this.api=r,this.ecModel=t;var o=e.getData(),i=o.tree.root,s=e.getViewRoot(),d=this.group,l=e.get("renderLabelForZeroData"),u=[];s.eachNode((function(e){u.push(e)}));var h,c,p=this._oldChildren||[];!function(n,a){if(0===n.length&&0===a.length)return;function s(e){return e.getId()}function u(s,u){!function(n,a){l||!n||n.getValue()||(n=null);if(n!==i&&a!==i)if(a&&a.piece)n?(a.piece.updateData(!1,n,e,t,r),o.setItemGraphicEl(n.dataIndex,a.piece)):function(e){if(!e)return;e.piece&&(d.remove(e.piece),e.piece=null)}(a);else if(n){var s=new Mt(n,e,t,r);d.add(s),o.setItemGraphicEl(n.dataIndex,s)}}(null==s?null:n[s],null==u?null:a[u])}new R(a,n,s,s).add(u).update(u).remove(S(u,null)).execute()}(u,p),h=i,(c=s).depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,h,e,t,r):(a.virtualPiece=new Mt(h,e,t,r),d.add(a.virtualPiece)),c.piece.off("click"),a.virtualPiece.on("click",(function(e){a._rootToNode(c.parentNode)}))):a.virtualPiece&&(d.remove(a.virtualPiece),a.virtualPiece=null),this._initEvents(),this._oldChildren=u},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var r=!1;e.seriesModel.getViewRoot().eachNode((function(n){if(!r&&n.piece&&n.piece===t.target){var a=n.getModel().get("nodeClick");if("rootToNode"===a)e._rootToNode(n);else if("link"===a){var o=n.getModel(),i=o.get("link");if(i){var s=o.get("target",!0)||"_blank";P(i,s)}}r=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:wt,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var r=t.getData().getItemLayout(0);if(r){var n=e[0]-r.cx,a=e[1]-r.cy,o=Math.sqrt(n*n+a*a);return o<=r.r&&o>=r.r0}},t.type="sunburst",t}(z),Tt=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return l(t,e),t.prototype.getInitialData=function(e,t){var r={name:e.name,children:e.data};St(r);var n=this._levelModels=u(e.levels||[],(function(e){return new h(e,this,t)}),this),a=Re.createTree(r,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=a.getNodeByDataIndex(t),o=n[r.depth];return o&&(e.parentModel=o),e}))}));return a.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=ke(n,this),r},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Pe(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(g);function St(t){var r=0;v(t.children,(function(t){St(t);var n=t.value;e(n)&&(n=n[0]),r+=n}));var n=t.value;e(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=r),n<0&&(n=0),e(t.value)?t.value[0]=n:t.value=n}var Dt=Math.PI/180;function Nt(t,r,n){r.eachSeriesByType(t,(function(t){var r=t.get("center"),a=t.get("radius");e(a)||(a=[0,a]),e(r)||(r=[r,r]);var o=n.getWidth(),i=n.getHeight(),s=Math.min(o,i),d=$(r[0],o),l=$(r[1],i),u=$(a[0],s/2),h=$(a[1],s/2),c=-t.get("startAngle")*Dt,p=t.get("minAngle")*Dt,f=t.getData().tree.root,g=t.getViewRoot(),y=g.depth,m=t.get("sort");null!=m&&Ct(g,m);var I=0;v(g.children,(function(e){!isNaN(e.getValue())&&I++}));var x=g.getValue(),M=Math.PI/(x||I)*2,w=g.depth>0,b=g.height-(w?-1:1),_=(h-u)/(b||1),T=t.get("clockwise"),S=t.get("stillShowZeroSum"),D=T?1:-1,N=function(e,r){if(e){var n=r;if(e!==f){var a=e.getValue(),o=0===x&&S?M:a*M;o<p&&(o=p),n=r+D*o;var i=e.depth-y-(w?-1:1),h=u+_*i,c=u+_*(i+1),g=t.getLevelModel(e);if(g){var m=g.get("r0",!0),I=g.get("r",!0),b=g.get("radius",!0);null!=b&&(m=b[0],I=b[1]),null!=m&&(h=$(m,s/2)),null!=I&&(c=$(I,s/2))}e.setLayout({angle:o,startAngle:r,endAngle:n,clockwise:T,cx:d,cy:l,r0:h,r:c})}if(e.children&&e.children.length){var C=0;v(e.children,(function(e){C+=N(e,r+C)}))}return n-r}};if(w){var C=u,R=u+_,L=2*Math.PI;f.setLayout({angle:L,startAngle:c,endAngle:c+L,clockwise:T,cx:d,cy:l,r0:C,r:R})}N(g,c)}))}function Ct(e,t){var r=e.children||[];e.children=function(e,t){if(a(t)){var r=u(e,(function(e,t){var r=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return r}},index:t}}));return r.sort((function(e,r){return t(e.params,r.params)})),u(r,(function(t){return e[t.index]}))}var n="asc"===t;return e.sort((function(e,t){var r=(e.getValue()-t.getValue())*(n?1:-1);return 0===r?(e.dataIndex-t.dataIndex)*(n?-1:1):r}))}(r,t),r.length&&v(e.children,(function(e){Ct(e,t)}))}function Rt(e){var t={};e.eachSeriesByType("sunburst",(function(e){var r=e.getData(),n=r.tree;n.eachNode((function(a){var i=a.getModel().getModel("itemStyle").getItemStyle();i.fill||(i.fill=function(e,r,n){for(var a=e;a&&a.depth>1;)a=a.parentNode;var i=r.getColorFromPalette(a.name||a.dataIndex+"",t);return e.depth>1&&o(i)&&(i=ge(i,(e.depth-1)/(n-1)*.5)),i}(a,e,n.root.height));var s=r.ensureUniqueItemVisual(a.dataIndex,"style");p(s,i)}))}))}function Lt(e){e.registerChartView(_t),e.registerSeriesModel(Tt),e.registerLayout(S(Nt,"sunburst")),e.registerProcessor(S(ve,"sunburst")),e.registerVisual(Rt),function(e){e.registerAction({type:wt,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,r){var n=Le(e,[wt],t);if(n){var a=t.getViewRoot();a&&(e.direction=Ae(a,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}))})),e.registerAction({type:bt,update:"none"},(function(e,t,r){e=p({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t){var r=Le(e,[bt],t);r&&(e.dataIndex=r.node.dataIndex)})),r.dispatchAction(p(e,{type:"highlight"}))})),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t,r){e=p({},e),r.dispatchAction(p(e,{type:"downplay"}))}))}(e)}var Vt=ye.CMD;function At(e,t){return Math.abs(e-t)<1e-5}function kt(e){var t,r,n,a,o,i,s,d,l,u,h,c,p,f,g,v,y,m,I,x,M,w,b,_,T=e.data,S=e.len(),D=[],N=0,C=0,R=0,L=0;function V(e,r){t&&t.length>2&&D.push(t),t=[e,r]}function A(e,r,n,a){At(e,n)&&At(r,a)||t.push(e,r,n,a,n,a)}for(var k=0;k<S;){var G=T[k++],P=1===k;switch(P&&(R=N=T[k],L=C=T[k+1],G!==Vt.L&&G!==Vt.C&&G!==Vt.Q||(t=[R,L])),G){case Vt.M:N=R=T[k++],C=L=T[k++],V(R,L);break;case Vt.L:A(N,C,r=T[k++],n=T[k++]),N=r,C=n;break;case Vt.C:t.push(T[k++],T[k++],T[k++],T[k++],N=T[k++],C=T[k++]);break;case Vt.Q:r=T[k++],n=T[k++],a=T[k++],o=T[k++],t.push(N+2/3*(r-N),C+2/3*(n-C),a+2/3*(r-a),o+2/3*(n-o),a,o),N=a,C=o;break;case Vt.A:var z=T[k++],E=T[k++],W=T[k++],H=T[k++],B=T[k++],Z=T[k++]+B;k+=1;var F=!T[k++];r=Math.cos(B)*W+z,n=Math.sin(B)*H+E,P?V(R=r,L=n):A(N,C,r,n),N=Math.cos(Z)*W+z,C=Math.sin(Z)*H+E;for(var U=(F?-1:1)*Math.PI/2,O=B;F?O>Z:O<Z;O+=U){var q=F?Math.max(O+U,Z):Math.min(O+U,Z);i=O,s=q,d=z,l=E,u=W,h=H,c=void 0,p=void 0,f=void 0,g=void 0,v=void 0,y=void 0,m=void 0,I=void 0,x=void 0,M=void 0,w=void 0,b=void 0,_=void 0,c=Math.abs(s-i),p=4*Math.tan(c/4)/3,f=s<i?-1:1,g=Math.cos(i),v=Math.sin(i),y=Math.cos(s),m=Math.sin(s),I=g*u+d,x=v*h+l,M=y*u+d,w=m*h+l,b=u*p*f,_=h*p*f,t.push(I-b*v,x+_*g,M+b*m,w-_*y,M,w)}break;case Vt.R:R=N=T[k++],L=C=T[k++],r=R+T[k++],n=L+T[k++],V(r,L),A(r,L,r,n),A(r,n,R,n),A(R,n,R,L),A(R,L,r,L);break;case Vt.Z:t&&A(N,C,R,L),N=R,C=L}}return t&&t.length>2&&D.push(t),D}function Gt(e,t,r,n,a,o,i,s,d,l){if(At(e,r)&&At(t,n)&&At(a,i)&&At(o,s))d.push(i,s);else{var u=2/l,h=u*u,c=i-e,p=s-t,f=Math.sqrt(c*c+p*p);c/=f,p/=f;var g=r-e,v=n-t,y=a-i,m=o-s,I=g*g+v*v,x=y*y+m*m;if(I<h&&x<h)d.push(i,s);else{var M=c*g+p*v,w=-c*y-p*m;if(I-M*M<h&&M>=0&&x-w*w<h&&w>=0)d.push(i,s);else{var b=[],_=[];me(e,r,a,i,.5,b),me(t,n,o,s,.5,_),Gt(b[0],_[0],b[1],_[1],b[2],_[2],b[3],_[3],d,l),Gt(b[4],_[4],b[5],_[5],b[6],_[6],b[7],_[7],d,l)}}}}function Pt(e,t,r){var n=e[t],a=e[1-t],o=Math.abs(n/a),i=Math.ceil(Math.sqrt(o*r)),s=Math.floor(r/i);0===s&&(s=1,i=r);for(var d=[],l=0;l<i;l++)d.push(s);var u=r-i*s;if(u>0)for(l=0;l<u;l++)d[l%i]+=1;return d}function zt(e,t,r){for(var n=e.r0,a=e.r,o=e.startAngle,i=e.endAngle,s=Math.abs(i-o),d=s*a,l=a-n,u=d>Math.abs(l),h=Pt([d,l],u?0:1,t),c=(u?s:l)/h.length,p=0;p<h.length;p++)for(var f=(u?l:s)/h[p],g=0;g<h[p];g++){var v={};u?(v.startAngle=o+c*p,v.endAngle=o+c*(p+1),v.r0=n+f*g,v.r=n+f*(g+1)):(v.startAngle=o+f*g,v.endAngle=o+f*(g+1),v.r0=n+c*p,v.r=n+c*(p+1)),v.clockwise=e.clockwise,v.cx=e.cx,v.cy=e.cy,r.push(v)}}function Et(e,t,r,n){return e*n-r*t}function Wt(e,t,r,n,a,o,i,s){var d=r-e,l=n-t,u=i-a,h=s-o,c=Et(u,h,d,l);if(Math.abs(c)<1e-6)return null;var p=Et(e-a,t-o,u,h)/c;return p<0||p>1?null:new Me(p*d+e,p*l+t)}function Ht(e,t,r){var n=new Me;Me.sub(n,r,t),n.normalize();var a=new Me;return Me.sub(a,e,t),a.dot(n)}function Bt(e,t){var r=e[e.length-1];r&&r[0]===t[0]&&r[1]===t[1]||e.push(t)}function Zt(e){var t=e.points,r=[],n=[];Ie(t,r,n);var a=new A(r[0],r[1],n[0]-r[0],n[1]-r[1]),o=a.width,i=a.height,s=a.x,d=a.y,l=new Me,u=new Me;return o>i?(l.x=u.x=s+o/2,l.y=d,u.y=d+i):(l.y=u.y=d+i/2,l.x=s,u.x=s+o),function(e,t,r){for(var n=e.length,a=[],o=0;o<n;o++){var i=e[o],s=e[(o+1)%n],d=Wt(i[0],i[1],s[0],s[1],t.x,t.y,r.x,r.y);d&&a.push({projPt:Ht(d,t,r),pt:d,idx:o})}if(a.length<2)return[{points:e},{points:e}];a.sort((function(e,t){return e.projPt-t.projPt}));var l=a[0],u=a[a.length-1];if(u.idx<l.idx){var h=l;l=u,u=h}var c=[l.pt.x,l.pt.y],p=[u.pt.x,u.pt.y],f=[c],g=[p];for(o=l.idx+1;o<=u.idx;o++)Bt(f,e[o].slice());for(Bt(f,p),Bt(f,c),o=u.idx+1;o<=l.idx+n;o++)Bt(g,e[o%n].slice());return Bt(g,c),Bt(g,p),[{points:f},{points:g}]}(t,l,u)}function Ft(e,t,r,n){if(1===r)n.push(t);else{var a=Math.floor(r/2),o=e(t);Ft(e,o[0],a,n),Ft(e,o[1],r-a,n)}return n}function Ut(e,t){var r,n=[],a=e.shape;switch(e.type){case"rect":!function(e,t,r){for(var n=e.width,a=e.height,o=n>a,i=Pt([n,a],o?0:1,t),s=o?"width":"height",d=o?"height":"width",l=o?"x":"y",u=o?"y":"x",h=e[s]/i.length,c=0;c<i.length;c++)for(var p=e[d]/i[c],f=0;f<i[c];f++){var g={};g[l]=c*h,g[u]=f*p,g[s]=h,g[d]=p,g.x+=e.x,g.y+=e.y,r.push(g)}}(a,t,n),r=j;break;case"sector":zt(a,t,n),r=ce;break;case"circle":zt({r0:0,r:a.r,startAngle:0,endAngle:2*Math.PI,cx:a.cx,cy:a.cy},t,n),r=ce;break;default:var o=e.getComputedTransform(),i=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=u(function(e,t){var r=kt(e),n=[];t=t||1;for(var a=0;a<r.length;a++){var o=r[a],i=[],s=o[0],d=o[1];i.push(s,d);for(var l=2;l<o.length;){var u=o[l++],h=o[l++],c=o[l++],p=o[l++],f=o[l++],g=o[l++];Gt(s,d,u,h,c,p,f,g,i,t),s=f,d=g}n.push(i)}return n}(e.getUpdatedPathProxy(),i),(function(e){return function(e){for(var t=[],r=0;r<e.length;)t.push([e[r++],e[r++]]);return t}(e)})),d=s.length;if(0===d)Ft(Zt,{points:s[0]},t,n);else if(d===t)for(var l=0;l<d;l++)n.push({points:s[l]});else{var h=0,c=u(s,(function(e){var t=[],r=[];Ie(e,t,r);var n=(r[1]-t[1])*(r[0]-t[0]);return h+=n,{poly:e,area:n}}));c.sort((function(e,t){return t.area-e.area}));var p=t;for(l=0;l<d;l++){var f=c[l];if(p<=0)break;var g=l===d-1?p:Math.ceil(f.area/h*t);g<0||(Ft(Zt,{points:f.poly},g,n),p-=g)}}r=M}if(!r)return function(e,t){for(var r=[],n=0;n<t;n++)r.push(xe(e));return r}(e,t);var v,y,m=[];for(l=0;l<n.length;l++){var I=new r;I.setShape(n[l]),v=e,(y=I).setStyle(v.style),y.z=v.z,y.z2=v.z2,y.zlevel=v.zlevel,m.push(I)}return m}function Ot(e,t){var r=e.length,n=t.length;if(r===n)return[e,t];for(var a=[],o=[],i=r<n?e:t,s=Math.min(r,n),d=Math.abs(n-r)/6,l=(s-2)/6,u=Math.ceil(d/l)+1,h=[i[0],i[1]],c=d,p=2;p<s;){var f=i[p-2],g=i[p-1],v=i[p++],y=i[p++],m=i[p++],I=i[p++],x=i[p++],M=i[p++];if(c<=0)h.push(v,y,m,I,x,M);else{for(var w=Math.min(c,u-1)+1,b=1;b<=w;b++){var _=b/w;me(f,v,m,x,_,a),me(g,y,I,M,_,o),f=a[3],g=o[3],h.push(a[1],o[1],a[2],o[2],f,g),v=a[5],y=o[5],m=a[6],I=o[6]}c-=w-1}}return i===e?[h,t]:[e,h]}function qt(e,t){for(var r=e.length,n=e[r-2],a=e[r-1],o=[],i=0;i<t.length;)o[i++]=n,o[i++]=a;return o}function Xt(e){for(var t=0,r=0,n=0,a=e.length,o=0,i=a-2;o<a;i=o,o+=2){var s=e[i],d=e[i+1],l=e[o],u=e[o+1],h=s*u-l*d;t+=h,r+=(s+l)*h,n+=(d+u)*h}return 0===t?[e[0]||0,e[1]||0]:[r/t/3,n/t/3,t]}function jt(e,t,r,n){for(var a=(e.length-2)/6,o=1/0,i=0,s=e.length,d=s-2,l=0;l<a;l++){for(var u=6*l,h=0,c=0;c<s;c+=2){var p=0===c?u:(u+c-2)%d+2,f=e[p]-r[0],g=e[p+1]-r[1],v=t[c]-n[0]-f,y=t[c+1]-n[1]-g;h+=v*v+y*y}h<o&&(o=h,i=l)}return i}function Yt(e){for(var t=[],r=e.length,n=0;n<r;n+=2)t[n]=e[r-n-2],t[n+1]=e[r-n-1];return t}function Jt(e){return e.__isCombineMorphing}var Qt="__mOriginal_";function Kt(e,t,r){var n=Qt+t,a=e[n]||e[t];e[n]||(e[n]=e[t]);var o=r.replace,i=r.after,s=r.before;e[t]=function(){var e,t=arguments;return s&&s.apply(this,t),e=o?o.apply(this,t):a.apply(this,t),i&&i.apply(this,t),e}}function $t(e,t){var r=Qt+t;e[r]&&(e[t]=e[r],e[r]=null)}function er(e,t){for(var r=0;r<e.length;r++)for(var n=e[r],a=0;a<n.length;){var o=n[a],i=n[a+1];n[a++]=t[0]*o+t[2]*i+t[4],n[a++]=t[1]*o+t[3]*i+t[5]}}function tr(e,t){var r=e.getUpdatedPathProxy(),n=t.getUpdatedPathProxy(),a=function(e,t){for(var r,n,a,o=[],i=[],s=0;s<Math.max(e.length,t.length);s++){var d=e[s],l=t[s],u=void 0,h=void 0;d?l?(n=u=(r=Ot(d,l))[0],a=h=r[1]):(h=qt(a||d,d),u=d):(u=qt(n||l,l),h=l),o.push(u),i.push(h)}return[o,i]}(kt(r),kt(n)),o=a[0],i=a[1],s=e.getComputedTransform(),d=t.getComputedTransform();s&&er(o,s),d&&er(i,d),Kt(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var l=function(e,t,r,n){for(var a,o=[],i=0;i<e.length;i++){var s=e[i],d=t[i],l=Xt(s),u=Xt(d);null==a&&(a=l[2]<0!=u[2]<0);var h=[],c=[],p=0,f=1/0,g=[],v=s.length;a&&(s=Yt(s));for(var y=6*jt(s,d,l,u),m=v-2,I=0;I<m;I+=2){var x=(y+I)%m+2;h[I+2]=s[x]-l[0],h[I+3]=s[x+1]-l[1]}h[0]=s[y]-l[0],h[1]=s[y+1]-l[1];for(var M=n/r,w=-n/2;w<=n/2;w+=M){var b=Math.sin(w),_=Math.cos(w),T=0;for(I=0;I<s.length;I+=2){var S=h[I],D=h[I+1],N=d[I]-u[0],C=d[I+1]-u[1],R=N*_-C*b,L=N*b+C*_;g[I]=R,g[I+1]=L;var V=R-S,A=L-D;T+=V*V+A*A}if(T<f){f=T,p=w;for(var k=0;k<g.length;k++)c[k]=g[k]}}o.push({from:h,to:c,fromCp:l,toCp:u,rotation:-p})}return o}(o,i,10,Math.PI),u=[];Kt(t,"buildPath",{replace:function(e){for(var r=t.__morphT,n=1-r,a=[],o=0;o<l.length;o++){var i=l[o],s=i.from,d=i.to,h=i.rotation*r,c=i.fromCp,p=i.toCp,f=Math.sin(h),g=Math.cos(h);we(a,c,p,r);for(var v=0;v<s.length;v+=2){var y=s[v],m=s[v+1],I=y*n+(b=d[v])*r,x=m*n+(_=d[v+1])*r;u[v]=I*g-x*f+a[0],u[v+1]=I*f+x*g+a[1]}var M=u[0],w=u[1];e.moveTo(M,w);for(v=2;v<s.length;){var b=u[v++],_=u[v++],T=u[v++],S=u[v++],D=u[v++],N=u[v++];M===b&&w===_&&T===D&&S===N?e.lineTo(D,N):e.bezierCurveTo(b,_,T,S,D,N),M=D,w=N}}}})}function rr(e,t,r){if(!e||!t)return t;var n=r.done,a=r.during;return tr(e,t),t.__morphT=0,t.animateTo({__morphT:1},w({during:function(e){t.dirtyShape(),a&&a(e)},done:function(){$t(t,"buildPath"),$t(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),n&&n()}},r)),t}function nr(e,t,r,n,a,o){e=a===r?0:Math.round(32767*(e-r)/(a-r)),t=o===n?0:Math.round(32767*(t-n)/(o-n));for(var i,s=0,d=32768;d>0;d/=2){var l=0,u=0;(e&d)>0&&(l=1),(t&d)>0&&(u=1),s+=d*d*(3*l^u),0===u&&(1===l&&(e=d-1-e,t=d-1-t),i=e,e=t,t=i)}return s}function ar(e){var t=1/0,r=1/0,n=-1/0,a=-1/0,o=u(e,(function(e){var o=e.getBoundingRect(),i=e.getComputedTransform(),s=o.x+o.width/2+(i?i[4]:0),d=o.y+o.height/2+(i?i[5]:0);return t=Math.min(s,t),r=Math.min(d,r),n=Math.max(s,n),a=Math.max(d,a),[s,d]}));return u(o,(function(o,i){return{cp:o,z:nr(o[0],o[1],t,r,n,a),path:e[i]}})).sort((function(e,t){return e.z-t.z})).map((function(e){return e.path}))}function or(e){return Ut(e.path,e.count)}function ir(t){return e(t[0])}function sr(e,t){for(var r=[],n=e.length,a=0;a<n;a++)r.push({one:e[a],many:[]});for(a=0;a<t.length;a++){var o=t[a].length,i=void 0;for(i=0;i<o;i++)r[i%n].many.push(t[a][i])}var s=0;for(a=n-1;a>=0;a--)if(!r[a].many.length){var d=r[s].many;if(d.length<=1){if(!s)return r;s=0}o=d.length;var l=Math.ceil(o/2);r[a].many=d.slice(l,o),r[s].many=d.slice(0,l),s++}return r}var dr={clone:function(e){for(var t=[],r=1-Math.pow(1-e.path.style.opacity,1/e.count),n=0;n<e.count;n++){var a=xe(e.path);a.setStyle("opacity",r),t.push(a)}return t},split:null};function lr(e,t,r,n,a,o){if(e.length&&t.length){var i=Te("update",n,a);if(i&&i.duration>0){var s,d,l=n.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},i);ir(e)&&(s=e,d=t),ir(t)&&(s=t,d=e);for(var h=s?s===e:e.length>t.length,c=s?sr(d,s):sr(h?t:e,[h?e:t]),p=0,f=0;f<c.length;f++)p+=c[f].many.length;var g=0;for(f=0;f<c.length;f++)v(c[f],h,g,p),g+=c[f].many.length}}function v(e,t,n,a,i){var s=e.many,d=e.one;if(1!==s.length||i)for(var h=w({dividePath:dr[r],individualDelay:l&&function(e,t,r,o){return l(e+n,a)}},u),c=t?function(e,t,r){var n=[];!function e(t){for(var r=0;r<t.length;r++){var a=t[r];Jt(a)?e(a.childrenRef()):a instanceof be&&n.push(a)}}(e);var a=n.length;if(!a)return{fromIndividuals:[],toIndividuals:[],count:0};var o=(r.dividePath||or)({path:t,count:a});if(o.length!==a)return{fromIndividuals:[],toIndividuals:[],count:0};n=ar(n),o=ar(o);for(var i=r.done,s=r.during,d=r.individualDelay,l=new _e,u=0;u<a;u++){var h=n[u],c=o[u];c.parent=t,c.copyTransform(l),d||tr(h,c)}function p(e){for(var t=0;t<o.length;t++)o[t].addSelfToZr(e)}function f(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,$t(t,"addSelfToZr"),$t(t,"removeSelfFromZr")}t.__isCombineMorphing=!0,t.childrenRef=function(){return o},Kt(t,"addSelfToZr",{after:function(e){p(e)}}),Kt(t,"removeSelfFromZr",{after:function(e){for(var t=0;t<o.length;t++)o[t].removeSelfFromZr(e)}});var g=o.length;if(d){var v=g,y=function(){0==--v&&(f(),i&&i())};for(u=0;u<g;u++){var m=d?w({delay:(r.delay||0)+d(u,g,n[u],o[u]),done:y},r):r;rr(n[u],o[u],m)}}else t.__morphT=0,t.animateTo({__morphT:1},w({during:function(e){for(var r=0;r<g;r++){var n=o[r];n.__morphT=t.__morphT,n.dirtyShape()}s&&s(e)},done:function(){f();for(var t=0;t<e.length;t++)$t(e[t],"updateTransform");i&&i()}},r));return t.__zr&&p(t.__zr),{fromIndividuals:n,toIndividuals:o,count:g}}(s,d,h):function(e,t,r){var n=t.length,a=[],o=r.dividePath||or;if(Jt(e)){!function e(t){for(var r=0;r<t.length;r++){var n=t[r];Jt(n)?e(n.childrenRef()):n instanceof be&&a.push(n)}}(e.childrenRef());var i=a.length;if(i<n)for(var s=0,d=i;d<n;d++)a.push(xe(a[s++%i]));a.length=n}else{a=o({path:e,count:n});var l=e.getComputedTransform();for(d=0;d<a.length;d++)a[d].setLocalTransform(l);if(a.length!==n)return{fromIndividuals:[],toIndividuals:[],count:0}}a=ar(a),t=ar(t);var u=r.individualDelay;for(d=0;d<n;d++){var h=u?w({delay:(r.delay||0)+u(d,n,a[d],t[d])},r):r;rr(a[d],t[d],h)}return{fromIndividuals:a,toIndividuals:t,count:t.length}}(d,s,h),p=c.fromIndividuals,f=c.toIndividuals,g=p.length,y=0;y<g;y++){m=l?w({delay:l(y,g)},u):u;o(p[y],f[y],t?s[y]:e.one,t?e.one:s[y],m)}else{var m,I=t?s[0]:d,x=t?d:s[0];if(Jt(I))v({many:[I],one:x},!0,n,a,!0);else rr(I,x,m=l?w({delay:l(n,a)},u):u),o(I,x,I,x,m)}}}function ur(t){if(!t)return[];if(e(t)){for(var r=[],n=0;n<t.length;n++)r.push(ur(t[n]));return r}var a=[];return t.traverse((function(e){e instanceof be&&!e.disableMorphing&&!e.invisible&&!e.ignore&&a.push(e)})),a}var hr=E();function cr(e,t,r,n){var a=function(e,t){for(var r=e.dimensions,n=0;n<r.length;n++){var a=e.getDimensionInfo(r[n]);if(a&&0===a.otherDims[t])return r[n]}}(e,n?"itemChildGroupId":"itemGroupId");if(a){var o=function(e,t,r){var n=e.getDimensionInfo(r),a=n&&n.ordinalMeta;if(n){var o=e.get(n.name,t);return a&&a.categories[o]||o+""}}(e,t,a);return o}var i=e.getRawDataItem(t),s=n?"childGroupId":"groupId";return i&&i[s]?i[s]+"":n?void 0:r||e.getId(t)}function pr(e){var t=[];return v(e,(function(e){var r=e.data,n=e.dataGroupId;if(!(r.count()>1e4))for(var a=r.getIndices(),o=0;o<a.length;o++)t.push({data:r,groupId:cr(r,o,n,!1),childGroupId:cr(r,o,n,!0),divide:e.divide,dataIndex:o})})),t}function fr(e,t,r){e.traverse((function(e){e instanceof be&&ie(e,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})}))}function gr(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function vr(e){e.stopAnimation(),e.isGroup&&e.traverse((function(e){e.stopAnimation()}))}function yr(e,t,r){var n=pr(e),a=pr(t);function o(e,t,r,n,a){(r||e)&&t.animateFrom({style:r&&r!==e?p(p({},r.style),e.style):e.style},a)}var i=!1,s=0,d=f(),l=f();n.forEach((function(e){e.groupId&&d.set(e.groupId,!0),e.childGroupId&&l.set(e.childGroupId,!0)}));for(var h=0;h<a.length;h++){var c=a[h].groupId;if(l.get(c)){s=1;break}var g=a[h].childGroupId;if(g&&d.get(g)){s=2;break}}function y(e,t){return function(r){var n=r.data,a=r.dataIndex;return t?n.getId(a):e?1===s?r.childGroupId:r.groupId:2===s?r.childGroupId:r.groupId}}var m=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++){var a=e[n],o=t[n];if(a.data.getId(a.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}(n,a),I={};if(!m)for(h=0;h<a.length;h++){var x=a[h],M=x.data.getItemGraphicEl(x.dataIndex);M&&(I[M.id]=!0)}function w(e,t){var r=n[t],s=a[e],d=s.data.hostModel,l=r.data.getItemGraphicEl(r.dataIndex),u=s.data.getItemGraphicEl(s.dataIndex);l!==u?l&&I[l.id]||u&&(vr(u),l?(vr(l),gr(l),i=!0,lr(ur(l),ur(u),s.divide,d,e,o)):fr(u,d,e)):u&&function(e,t,r){var n=Te("update",r,t);n&&e.traverse((function(e){if(e instanceof X){var t=De(e);t&&e.animateFrom({style:t},n)}}))}(u,s.dataIndex,d)}new R(n,a,y(!0,m),y(!1,m),null,"multiple").update(w).updateManyToOne((function(e,t){var r=a[e],s=r.data,d=s.hostModel,l=s.getItemGraphicEl(r.dataIndex),h=te(u(t,(function(e){return n[e].data.getItemGraphicEl(n[e].dataIndex)})),(function(e){return e&&e!==l&&!I[e.id]}));l&&(vr(l),h.length?(v(h,(function(e){vr(e),gr(e)})),i=!0,lr(ur(h),ur(l),r.divide,d,e,o)):fr(l,d,r.dataIndex))})).updateOneToMany((function(e,t){var r=n[t],s=r.data.getItemGraphicEl(r.dataIndex);if(!s||!I[s.id]){var d=te(u(e,(function(e){return a[e].data.getItemGraphicEl(a[e].dataIndex)})),(function(e){return e&&e!==s})),l=a[e[0]].data.hostModel;d.length&&(v(d,(function(e){return vr(e)})),s?(vr(s),gr(s),i=!0,lr(ur(s),ur(d),r.divide,l,e[0],o)):v(d,(function(t){return fr(t,l,e[0])})))}})).updateManyToMany((function(e,t){new R(t,e,(function(e){return n[e].data.getId(n[e].dataIndex)}),(function(e){return a[e].data.getId(a[e].dataIndex)})).update((function(r,n){w(e[r],t[n])})).execute()})).execute(),i&&v(t,(function(e){var t=e.data.hostModel,n=t&&r.getViewOfSeriesModel(t),a=Te("update",t,0);n&&t.isAnimationEnabled()&&a&&a.duration>0&&n.group.traverse((function(e){e instanceof be&&!e.animators.length&&e.animateFrom({style:{opacity:0}},a)}))}))}function mr(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function Ir(t){return e(t)?t.sort().join(","):t}function xr(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function Mr(e,t){for(var r=0;r<e.length;r++){if(null!=t.seriesIndex&&t.seriesIndex===e[r].seriesIndex||null!=t.seriesId&&t.seriesId===e[r].id)return r}}function wr(t){t.registerUpdateLifecycle("series:beforeupdate",(function(e,t,r){v(y(r.seriesTransition),(function(e){v(y(e.to),(function(e){for(var t=r.updatedSeries,n=0;n<t.length;n++)(null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id)&&(t[n][Se]=!0)}))}))})),t.registerUpdateLifecycle("series:transition",(function(t,r,n){var a=hr(r);if(a.oldSeries&&n.updatedSeries&&n.optionChanged){var o=n.seriesTransition;if(o)v(y(o),(function(e){!function(e,t,r,n){var a=[],o=[];v(y(e.from),(function(e){var r=Mr(t.oldSeries,e);r>=0&&a.push({dataGroupId:t.oldDataGroupIds[r],data:t.oldData[r],divide:xr(t.oldData[r]),groupIdDim:e.dimension})})),v(y(e.to),(function(e){var n=Mr(r.updatedSeries,e);if(n>=0){var a=r.updatedSeries[n].getData();o.push({dataGroupId:t.oldDataGroupIds[n],data:a,divide:xr(a),groupIdDim:e.dimension})}})),a.length>0&&o.length>0&&yr(a,o,n)}(e,a,n,r)}));else{var i=function(t,r){var n=f(),a=f(),o=f();return v(t.oldSeries,(function(r,n){var i=t.oldDataGroupIds[n],s=t.oldData[n],d=mr(r),l=Ir(d);a.set(l,{dataGroupId:i,data:s}),e(d)&&v(d,(function(e){o.set(e,{key:l,dataGroupId:i,data:s})}))})),v(r.updatedSeries,(function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var r=t.get("dataGroupId"),i=t.getData(),s=mr(t),d=Ir(s),l=a.get(d);if(l)n.set(d,{oldSeries:[{dataGroupId:l.dataGroupId,divide:xr(l.data),data:l.data}],newSeries:[{dataGroupId:r,divide:xr(i),data:i}]});else if(e(s)){var u=[];v(s,(function(e){var t=a.get(e);t.data&&u.push({dataGroupId:t.dataGroupId,divide:xr(t.data),data:t.data})})),u.length&&n.set(d,{oldSeries:u,newSeries:[{dataGroupId:r,data:i,divide:xr(i)}]})}else{var h=o.get(s);if(h){var c=n.get(h.key);c||(c={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:xr(h.data)}],newSeries:[]},n.set(h.key,c)),c.newSeries.push({dataGroupId:r,data:i,divide:xr(i)})}}}})),n}(a,n);v(i.keys(),(function(e){var t=i.get(e);yr(t.oldSeries,t.newSeries,r)}))}v(n.updatedSeries,(function(e){e[Se]&&(e[Se]=!1)}))}for(var s=t.getSeries(),d=a.oldSeries=[],l=a.oldDataGroupIds=[],u=a.oldData=[],h=0;h<s.length;h++){var c=s[h].getData();c.count()<1e4&&(d.push(s[h]),l.push(s[h].get("dataGroupId")),u.push(c))}}))}export{Re as T,Lt as a,wr as b,xt as i,ke as w};
